var jd=Object.defineProperty;var Nd=(n,e,t)=>e in n?jd(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Vl=(n,e,t)=>Nd(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(l){if(l.ep)return;l.ep=!0;const s=t(l);fetch(l.href,s)}})();function X(){}const Zi=n=>n;function Me(n,e){for(const t in e)n[t]=e[t];return n}function gf(n){return n()}function rr(){return Object.create(null)}function me(n){n.forEach(gf)}function et(n){return typeof n=="function"}function _e(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let tl;function Wn(n,e){return n===e?!0:(tl||(tl=document.createElement("a")),tl.href=e,n===tl.href)}function Ad(n){return Object.keys(n).length===0}function Os(n,...e){if(n==null){for(const i of e)i(void 0);return X}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Vn(n){let e;return Os(n,t=>e=t)(),e}function Q(n,e,t){n.$$.on_destroy.push(Os(e,t))}function lt(n,e,t,i){if(n){const l=bf(n,e,t,i);return n[0](l)}}function bf(n,e,t,i){return n[1]&&i?Me(t.ctx.slice(),n[1](i(e))):t.ctx}function st(n,e,t,i){if(n[2]&&i){const l=n[2](i(t));if(e.dirty===void 0)return l;if(typeof l=="object"){const s=[],r=Math.max(e.dirty.length,l.length);for(let o=0;o<r;o+=1)s[o]=e.dirty[o]|l[o];return s}return e.dirty|l}return e.dirty}function rt(n,e,t,i,l,s){if(l){const r=bf(e,t,i,s);n.p(r,l)}}function ot(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function Bt(n){const e={};for(const t in n)t[0]!=="$"&&(e[t]=n[t]);return e}function at(n,e){const t={};e=new Set(e);for(const i in n)!e.has(i)&&i[0]!=="$"&&(t[i]=n[i]);return t}function or(n){return n??""}function ve(n,e,t){return n.set(t),e}function we(n){return n&&et(n.destroy)?n.destroy:X}function ar(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}const Dd=["",!0,1,"true","contenteditable"],wf=typeof window<"u";let Pl=wf?()=>window.performance.now():()=>Date.now(),Es=wf?n=>requestAnimationFrame(n):X;const ai=new Set;function vf(n){ai.forEach(e=>{e.c(n)||(ai.delete(e),e.f())}),ai.size!==0&&Es(vf)}function jl(n){let e;return ai.size===0&&Es(vf),{promise:new Promise(t=>{ai.add(e={c:n,f:t})}),abort(){ai.delete(e)}}}function v(n,e){n.appendChild(e)}function yf(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function Md(n){const e=w("style");return e.textContent="/* empty */",Hd(yf(n),e),e.sheet}function Hd(n,e){return v(n.head||n,e),e.sheet}function k(n,e,t){n.insertBefore(e,t||null)}function y(n){n.parentNode&&n.parentNode.removeChild(n)}function xt(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function w(n){return document.createElement(n)}function x(n){return document.createTextNode(n)}function I(){return x(" ")}function Ne(){return x("")}function $(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function be(n){return function(e){return e.preventDefault(),n.call(this,e)}}function Ke(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function p(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}const $d=["width","height"];function zn(n,e){const t=Object.getOwnPropertyDescriptors(n.__proto__);for(const i in e)e[i]==null?n.removeAttribute(i):i==="style"?n.style.cssText=e[i]:i==="__value"?n.value=n[i]=e[i]:t[i]&&t[i].set&&$d.indexOf(i)===-1?n[i]=e[i]:p(n,i,e[i])}function Rd(n,e){Object.keys(e).forEach(t=>{Fd(n,t,e[t])})}function Fd(n,e,t){const i=e.toLowerCase();i in n?n[i]=typeof n[i]=="boolean"&&t===""?!0:t:e in n?n[e]=typeof n[e]=="boolean"&&t===""?!0:t:p(n,e,t)}function _l(n){return/-/.test(n)?Rd:zn}function kf(n){let e;return{p(...t){e=t,e.forEach(i=>n.push(i))},r(){e.forEach(t=>n.splice(n.indexOf(t),1))}}}function wt(n){return n===""?null:+n}function qd(n){return Array.from(n.childNodes)}function ke(n,e){e=""+e,n.data!==e&&(n.data=e)}function Sf(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function Ud(n,e,t){~Dd.indexOf(t)?Sf(n,e):ke(n,e)}function ye(n,e){n.value=e??""}function qe(n,e,t,i){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function Z(n,e,t){n.classList.toggle(e,!!t)}function Tf(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}function On(n,e){return new n(e)}const gl=new Map;let bl=0;function Wd(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function Vd(n,e){const t={stylesheet:Md(e),rules:{}};return gl.set(n,t),t}function qi(n,e,t,i,l,s,r,o=0){const a=16.666/i;let u=`{
`;for(let b=0;b<=1;b+=a){const _=e+(t-e)*s(b);u+=b*100+`%{${r(_,1-_)}}
`}const f=u+`100% {${r(t,1-t)}}
}`,c=`__svelte_${Wd(f)}_${o}`,d=yf(n),{stylesheet:m,rules:h}=gl.get(d)||Vd(d,n);h[c]||(h[c]=!0,m.insertRule(`@keyframes ${c} ${f}`,m.cssRules.length));const g=n.style.animation||"";return n.style.animation=`${g?`${g}, `:""}${c} ${i}ms linear ${l}ms 1 both`,bl+=1,c}function Ui(n,e){const t=(n.style.animation||"").split(", "),i=t.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),l=t.length-i.length;l&&(n.style.animation=i.join(", "),bl-=l,bl||zd())}function zd(){Es(()=>{bl||(gl.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&y(e)}),gl.clear())})}function Cf(n,e,t,i){if(!e)return X;const l=n.getBoundingClientRect();if(e.left===l.left&&e.right===l.right&&e.top===l.top&&e.bottom===l.bottom)return X;const{delay:s=0,duration:r=300,easing:o=Zi,start:a=Pl()+s,end:u=a+r,tick:f=X,css:c}=t(n,{from:e,to:l},i);let d=!0,m=!1,h;function g(){c&&(h=qi(n,0,1,r,s,o,c)),s||(m=!0)}function b(){c&&Ui(n,h),d=!1}return jl(_=>{if(!m&&_>=a&&(m=!0),m&&_>=u&&(f(1,0),b()),!d)return!1;if(m){const C=_-a,L=0+1*o(C/r);f(L,1-L)}return!0}),g(),f(0,1),b}function Of(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:i}=e,l=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=i,Ef(n,l)}}function Ef(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const i=getComputedStyle(n),l=i.transform==="none"?"":i.transform;n.style.transform=`${l} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}let Wi;function Di(n){Wi=n}function Nl(){if(!Wi)throw new Error("Function called outside component initialization");return Wi}function _n(n){Nl().$$.on_mount.push(n)}function Bd(n){Nl().$$.after_update.push(n)}function fn(n){Nl().$$.on_destroy.push(n)}function ft(){const n=Nl();return(e,t,{cancelable:i=!1}={})=>{const l=n.$$.callbacks[e];if(l){const s=Tf(e,t,{cancelable:i});return l.slice().forEach(r=>{r.call(n,s)}),!s.defaultPrevented}return!0}}function We(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const ni=[],le=[];let ui=[];const as=[],Lf=Promise.resolve();let us=!1;function If(){us||(us=!0,Lf.then(Pf))}function St(){return If(),Lf}function vt(n){ui.push(n)}function Ae(n){as.push(n)}const zl=new Set;let Xn=0;function Pf(){if(Xn!==0)return;const n=Wi;do{try{for(;Xn<ni.length;){const e=ni[Xn];Xn++,Di(e),Zd(e.$$)}}catch(e){throw ni.length=0,Xn=0,e}for(Di(null),ni.length=0,Xn=0;le.length;)le.pop()();for(let e=0;e<ui.length;e+=1){const t=ui[e];zl.has(t)||(zl.add(t),t())}ui.length=0}while(ni.length);for(;as.length;)as.pop()();us=!1,zl.clear(),Di(n)}function Zd(n){if(n.fragment!==null){n.update(),me(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(vt)}}function Yd(n){const e=[],t=[];ui.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),ui=e}let Ii;function Ls(){return Ii||(Ii=Promise.resolve(),Ii.then(()=>{Ii=null})),Ii}function Fn(n,e,t){n.dispatchEvent(Tf(`${e?"intro":"outro"}${t}`))}const pl=new Set;let nn;function ae(){nn={r:0,c:[],p:nn}}function ue(){nn.r||me(nn.c),nn=nn.p}function E(n,e){n&&n.i&&(pl.delete(n),n.i(e))}function P(n,e,t,i){if(n&&n.o){if(pl.has(n))return;pl.add(n),nn.c.push(()=>{pl.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}const Is={duration:0};function jf(n,e,t){const i={direction:"in"};let l=e(n,t,i),s=!1,r,o,a=0;function u(){r&&Ui(n,r)}function f(){const{delay:d=0,duration:m=300,easing:h=Zi,tick:g=X,css:b}=l||Is;b&&(r=qi(n,0,1,m,d,h,b,a++)),g(0,1);const _=Pl()+d,C=_+m;o&&o.abort(),s=!0,vt(()=>Fn(n,!0,"start")),o=jl(L=>{if(s){if(L>=C)return g(1,0),Fn(n,!0,"end"),u(),s=!1;if(L>=_){const T=h((L-_)/m);g(T,1-T)}}return s})}let c=!1;return{start(){c||(c=!0,Ui(n),et(l)?(l=l(i),Ls().then(f)):f())},invalidate(){c=!1},end(){s&&(u(),s=!1)}}}function Nf(n,e,t){const i={direction:"out"};let l=e(n,t,i),s=!0,r;const o=nn;o.r+=1;let a;function u(){const{delay:f=0,duration:c=300,easing:d=Zi,tick:m=X,css:h}=l||Is;h&&(r=qi(n,1,0,c,f,d,h));const g=Pl()+f,b=g+c;vt(()=>Fn(n,!1,"start")),"inert"in n&&(a=n.inert,n.inert=!0),jl(_=>{if(s){if(_>=b)return m(0,1),Fn(n,!1,"end"),--o.r||me(o.c),!1;if(_>=g){const C=d((_-g)/c);m(1-C,C)}}return s})}return et(l)?Ls().then(()=>{l=l(i),u()}):u(),{end(f){f&&"inert"in n&&(n.inert=a),f&&l.tick&&l.tick(1,0),s&&(r&&Ui(n,r),s=!1)}}}function ut(n,e,t,i){let s=e(n,t,{direction:"both"}),r=i?0:1,o=null,a=null,u=null,f;function c(){u&&Ui(n,u)}function d(h,g){const b=h.b-r;return g*=Math.abs(b),{a:r,b:h.b,d:b,duration:g,start:h.start,end:h.start+g,group:h.group}}function m(h){const{delay:g=0,duration:b=300,easing:_=Zi,tick:C=X,css:L}=s||Is,T={start:Pl()+g,b:h};h||(T.group=nn,nn.r+=1),"inert"in n&&(h?f!==void 0&&(n.inert=f):(f=n.inert,n.inert=!0)),o||a?a=T:(L&&(c(),u=qi(n,r,h,b,g,_,L)),h&&C(0,1),o=d(T,b),vt(()=>Fn(n,h,"start")),jl(O=>{if(a&&O>a.start&&(o=d(a,b),a=null,Fn(n,o.b,"start"),L&&(c(),u=qi(n,r,o.b,o.duration,0,_,s.css))),o){if(O>=o.end)C(r=o.b,1-r),Fn(n,o.b,"end"),a||(o.b?c():--o.group.r||me(o.group.c)),o=null;else if(O>=o.start){const S=O-o.start;r=o.a+o.d*_(S/o.duration),C(r,1-r)}}return!!(o||a)}))}return{run(h){et(s)?Ls().then(()=>{s=s({direction:h?"in":"out"}),m(h)}):m(h)},end(){c(),o=a=null}}}function Ie(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Af(n,e){n.d(1),e.delete(n.key)}function It(n,e){P(n,1,1,()=>{e.delete(n.key)})}function Df(n,e){n.f(),It(n,e)}function yt(n,e,t,i,l,s,r,o,a,u,f,c){let d=n.length,m=s.length,h=d;const g={};for(;h--;)g[n[h].key]=h;const b=[],_=new Map,C=new Map,L=[];for(h=m;h--;){const j=c(l,s,h),H=t(j);let D=r.get(H);D?L.push(()=>D.p(j,e)):(D=u(H,j),D.c()),_.set(H,b[h]=D),H in g&&C.set(H,Math.abs(h-g[H]))}const T=new Set,O=new Set;function S(j){E(j,1),j.m(o,f),r.set(j.key,j),f=j.first,m--}for(;d&&m;){const j=b[m-1],H=n[d-1],D=j.key,A=H.key;j===H?(f=j.first,d--,m--):_.has(A)?!r.has(D)||T.has(D)?S(j):O.has(A)?d--:C.get(D)>C.get(A)?(O.add(D),S(j)):(T.add(A),d--):(a(H,r),d--)}for(;d--;){const j=n[d];_.has(j.key)||a(j,r)}for(;m;)S(b[m-1]);return me(L),b}function _t(n,e){const t={},i={},l={$$scope:1};let s=n.length;for(;s--;){const r=n[s],o=e[s];if(o){for(const a in r)a in o||(i[a]=1);for(const a in o)l[a]||(t[a]=o[a],l[a]=1);n[s]=o}else for(const a in r)l[a]=1}for(const r in i)r in t||(t[r]=void 0);return t}function Lt(n){return typeof n=="object"&&n!==null?n:{}}function De(n,e,t){const i=n.$$.props[e];i!==void 0&&(n.$$.bound[i]=t,t(n.$$.ctx[i]))}function U(n){n&&n.c()}function F(n,e,t){const{fragment:i,after_update:l}=n.$$;i&&i.m(e,t),vt(()=>{const s=n.$$.on_mount.map(gf).filter(et);n.$$.on_destroy?n.$$.on_destroy.push(...s):me(s),n.$$.on_mount=[]}),l.forEach(vt)}function q(n,e){const t=n.$$;t.fragment!==null&&(Yd(t.after_update),me(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Kd(n,e){n.$$.dirty[0]===-1&&(ni.push(n),If(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Se(n,e,t,i,l,s,r=null,o=[-1]){const a=Wi;Di(n);const u=n.$$={fragment:null,ctx:[],props:s,update:X,not_equal:l,bound:rr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:rr(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};r&&r(u.root);let f=!1;if(u.ctx=t?t(n,e.props||{},(c,d,...m)=>{const h=m.length?m[0]:d;return u.ctx&&l(u.ctx[c],u.ctx[c]=h)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](h),f&&Kd(n,c)),d}):[],u.update(),f=!0,me(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const c=qd(e.target);u.fragment&&u.fragment.l(c),c.forEach(y)}else u.fragment&&u.fragment.c();e.intro&&E(n.$$.fragment),F(n,e.target,e.anchor),Pf()}Di(a)}class Te{constructor(){Vl(this,"$$");Vl(this,"$$set")}$destroy(){q(this,1),this.$destroy=X}$on(e,t){if(!et(t))return X;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const l=i.indexOf(t);l!==-1&&i.splice(l,1)}}$set(e){this.$$set&&!Ad(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Gd="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Gd);const Qn=[];function Mf(n,e){return{subscribe:Ve(n,e).subscribe}}function Ve(n,e=X){let t;const i=new Set;function l(o){if(_e(n,o)&&(n=o,t)){const a=!Qn.length;for(const u of i)u[1](),Qn.push(u,n);if(a){for(let u=0;u<Qn.length;u+=2)Qn[u][0](Qn[u+1]);Qn.length=0}}}function s(o){l(o(n))}function r(o,a=X){const u=[o,a];return i.add(u),i.size===1&&(t=e(l,s)||X),o(n),()=>{i.delete(u),i.size===0&&t&&(t(),t=null)}}return{set:l,update:s,subscribe:r}}function jt(n,e,t){const i=!Array.isArray(n),l=i?[n]:n;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Mf(t,(r,o)=>{let a=!1;const u=[];let f=0,c=X;const d=()=>{if(f)return;c();const h=e(i?u[0]:u,r,o);s?r(h):c=et(h)?h:X},m=l.map((h,g)=>Os(h,b=>{u[g]=b,f&=~(1<<g),a&&d()},()=>{f|=1<<g}));return a=!0,d(),function(){me(m),c(),a=!1}})}function Jd(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,i,l,s,r=[],o="",a=n.split("/");for(a[0]||a.shift();l=a.shift();)t=l[0],t==="*"?(r.push("wild"),o+="/(.*)"):t===":"?(i=l.indexOf("?",1),s=l.indexOf(".",1),r.push(l.substring(1,~i?i:~s?s:l.length)),o+=~i&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(o+=(~i?"?":"")+"\\"+l.substring(s))):o+="/"+l;return{keys:r,pattern:new RegExp("^"+o+"/?$","i")}}function Xd(n){let e,t,i;const l=[n[2]];var s=n[0];function r(o,a){let u={};for(let f=0;f<l.length;f+=1)u=Me(u,l[f]);return a!==void 0&&a&4&&(u=Me(u,_t(l,[Lt(o[2])]))),{props:u}}return s&&(e=On(s,r(n)),e.$on("routeEvent",n[7])),{c(){e&&U(e.$$.fragment),t=Ne()},m(o,a){e&&F(e,o,a),k(o,t,a),i=!0},p(o,a){if(a&1&&s!==(s=o[0])){if(e){ae();const u=e;P(u.$$.fragment,1,0,()=>{q(u,1)}),ue()}s?(e=On(s,r(o,a)),e.$on("routeEvent",o[7]),U(e.$$.fragment),E(e.$$.fragment,1),F(e,t.parentNode,t)):e=null}else if(s){const u=a&4?_t(l,[Lt(o[2])]):{};e.$set(u)}},i(o){i||(e&&E(e.$$.fragment,o),i=!0)},o(o){e&&P(e.$$.fragment,o),i=!1},d(o){o&&y(t),e&&q(e,o)}}}function Qd(n){let e,t,i;const l=[{params:n[1]},n[2]];var s=n[0];function r(o,a){let u={};for(let f=0;f<l.length;f+=1)u=Me(u,l[f]);return a!==void 0&&a&6&&(u=Me(u,_t(l,[a&2&&{params:o[1]},a&4&&Lt(o[2])]))),{props:u}}return s&&(e=On(s,r(n)),e.$on("routeEvent",n[6])),{c(){e&&U(e.$$.fragment),t=Ne()},m(o,a){e&&F(e,o,a),k(o,t,a),i=!0},p(o,a){if(a&1&&s!==(s=o[0])){if(e){ae();const u=e;P(u.$$.fragment,1,0,()=>{q(u,1)}),ue()}s?(e=On(s,r(o,a)),e.$on("routeEvent",o[6]),U(e.$$.fragment),E(e.$$.fragment,1),F(e,t.parentNode,t)):e=null}else if(s){const u=a&6?_t(l,[a&2&&{params:o[1]},a&4&&Lt(o[2])]):{};e.$set(u)}},i(o){i||(e&&E(e.$$.fragment,o),i=!0)},o(o){e&&P(e.$$.fragment,o),i=!1},d(o){o&&y(t),e&&q(e,o)}}}function xd(n){let e,t,i,l;const s=[Qd,Xd],r=[];function o(a,u){return a[1]?0:1}return e=o(n),t=r[e]=s[e](n),{c(){t.c(),i=Ne()},m(a,u){r[e].m(a,u),k(a,i,u),l=!0},p(a,[u]){let f=e;e=o(a),e===f?r[e].p(a,u):(ae(),P(r[f],1,1,()=>{r[f]=null}),ue(),t=r[e],t?t.p(a,u):(t=r[e]=s[e](a),t.c()),E(t,1),t.m(i.parentNode,i))},i(a){l||(E(t),l=!0)},o(a){P(t),l=!1},d(a){a&&y(i),r[e].d(a)}}}function ur(){const n=window.location.href.indexOf("#/");let e=n>-1?window.location.href.substr(n+1):"/";const t=e.indexOf("?");let i="";return t>-1&&(i=e.substr(t+1),e=e.substr(0,t)),{location:e,querystring:i}}const Ps=Mf(null,function(e){e(ur());const t=()=>{e(ur())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}});jt(Ps,n=>n.location);const Hf=jt(Ps,n=>n.querystring),fr=Ve(void 0);async function mi(n){if(!n||n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await St(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(n.charAt(0)=="#"?"":"#")+n}async function cn(n){if(!n||n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await St();const e=(n.charAt(0)=="#"?"":"#")+n;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function wi(n,e){if(e=dr(e),!n||!n.tagName||n.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return cr(n,e),{update(t){t=dr(t),cr(n,t)}}}function ep(n){n?window.scrollTo(n.__svelte_spa_router_scrollX,n.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function cr(n,e){let t=e.href||n.getAttribute("href");if(t&&t.charAt(0)=="/")t="#"+t;else if(!t||t.length<2||t.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+t);n.setAttribute("href",t),n.addEventListener("click",i=>{i.preventDefault(),e.disabled||tp(i.currentTarget.getAttribute("href"))})}function dr(n){return n&&typeof n=="string"?{href:n}:n||{}}function tp(n){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=n}function np(n,e,t){let{routes:i={}}=e,{prefix:l=""}=e,{restoreScrollState:s=!1}=e;class r{constructor(O,S){if(!S||typeof S!="function"&&(typeof S!="object"||S._sveltesparouter!==!0))throw Error("Invalid component object");if(!O||typeof O=="string"&&(O.length<1||O.charAt(0)!="/"&&O.charAt(0)!="*")||typeof O=="object"&&!(O instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:j,keys:H}=Jd(O);this.path=O,typeof S=="object"&&S._sveltesparouter===!0?(this.component=S.component,this.conditions=S.conditions||[],this.userData=S.userData,this.props=S.props||{}):(this.component=()=>Promise.resolve(S),this.conditions=[],this.props={}),this._pattern=j,this._keys=H}match(O){if(l){if(typeof l=="string")if(O.startsWith(l))O=O.substr(l.length)||"/";else return null;else if(l instanceof RegExp){const D=O.match(l);if(D&&D[0])O=O.substr(D[0].length)||"/";else return null}}const S=this._pattern.exec(O);if(S===null)return null;if(this._keys===!1)return S;const j={};let H=0;for(;H<this._keys.length;){try{j[this._keys[H]]=decodeURIComponent(S[H+1]||"")||null}catch{j[this._keys[H]]=null}H++}return j}async checkConditions(O){for(let S=0;S<this.conditions.length;S++)if(!await this.conditions[S](O))return!1;return!0}}const o=[];i instanceof Map?i.forEach((T,O)=>{o.push(new r(O,T))}):Object.keys(i).forEach(T=>{o.push(new r(T,i[T]))});let a=null,u=null,f={};const c=ft();async function d(T,O){await St(),c(T,O)}let m=null,h=null;s&&(h=T=>{T.state&&(T.state.__svelte_spa_router_scrollY||T.state.__svelte_spa_router_scrollX)?m=T.state:m=null},window.addEventListener("popstate",h),Bd(()=>{ep(m)}));let g=null,b=null;const _=Ps.subscribe(async T=>{g=T;let O=0;for(;O<o.length;){const S=o[O].match(T.location);if(!S){O++;continue}const j={route:o[O].path,location:T.location,querystring:T.querystring,userData:o[O].userData,params:S&&typeof S=="object"&&Object.keys(S).length?S:null};if(!await o[O].checkConditions(j)){t(0,a=null),b=null,d("conditionsFailed",j);return}d("routeLoading",Object.assign({},j));const H=o[O].component;if(b!=H){H.loading?(t(0,a=H.loading),b=H,t(1,u=H.loadingParams),t(2,f={}),d("routeLoaded",Object.assign({},j,{component:a,name:a.name,params:u}))):(t(0,a=null),b=null);const D=await H();if(T!=g)return;t(0,a=D&&D.default||D),b=H}S&&typeof S=="object"&&Object.keys(S).length?t(1,u=S):t(1,u=null),t(2,f=o[O].props),d("routeLoaded",Object.assign({},j,{component:a,name:a.name,params:u})).then(()=>{fr.set(u)});return}t(0,a=null),b=null,fr.set(void 0)});fn(()=>{_(),h&&window.removeEventListener("popstate",h)});function C(T){We.call(this,n,T)}function L(T){We.call(this,n,T)}return n.$$set=T=>{"routes"in T&&t(3,i=T.routes),"prefix"in T&&t(4,l=T.prefix),"restoreScrollState"in T&&t(5,s=T.restoreScrollState)},n.$$.update=()=>{n.$$.dirty&32&&(history.scrollRestoration=s?"manual":"auto")},[a,u,f,i,l,s,C,L]}class ip extends Te{constructor(e){super(),Se(this,e,np,xd,_e,{routes:3,prefix:4,restoreScrollState:5})}}const lp="modulepreload",sp=function(n,e){return new URL(n,e).href},pr={},Al=function(e,t,i){let l=Promise.resolve();if(t&&t.length>0){const s=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),o=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));l=Promise.all(t.map(a=>{if(a=sp(a,i),a in pr)return;pr[a]=!0;const u=a.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(!!i)for(let m=s.length-1;m>=0;m--){const h=s[m];if(h.href===a&&(!u||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":lp,u||(d.as="script",d.crossOrigin=""),d.href=a,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((m,h)=>{d.addEventListener("load",m),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}return l.then(()=>e()).catch(s=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=s,window.dispatchEvent(r),!r.defaultPrevented)throw s})};function en(n){if(!n)throw Error("Parameter args is required");if(!n.component==!n.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(n.component&&(n.asyncComponent=()=>Promise.resolve(n.component)),typeof n.asyncComponent!="function")throw Error("Parameter asyncComponent must be a function");if(n.conditions){Array.isArray(n.conditions)||(n.conditions=[n.conditions]);for(let t=0;t<n.conditions.length;t++)if(!n.conditions[t]||typeof n.conditions[t]!="function")throw Error("Invalid parameter conditions["+t+"]")}return n.loadingComponent&&(n.asyncComponent.loading=n.loadingComponent,n.asyncComponent.loadingParams=n.loadingParams||void 0),{component:n.asyncComponent,userData:n.userData,conditions:n.conditions&&n.conditions.length?n.conditions:void 0,props:n.props&&Object.keys(n.props).length?n.props:{},_sveltesparouter:!0}}class $t extends Error{constructor(e){var t,i,l,s;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,$t.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof $t||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(s=(l=(i=this.originalError)==null?void 0:i.cause)==null?void 0:l.message)!=null&&s.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const nl=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function rp(n,e){const t={};if(typeof n!="string")return t;const i=Object.assign({},{}).decode||op;let l=0;for(;l<n.length;){const s=n.indexOf("=",l);if(s===-1)break;let r=n.indexOf(";",l);if(r===-1)r=n.length;else if(r<s){l=n.lastIndexOf(";",s-1)+1;continue}const o=n.slice(l,s).trim();if(t[o]===void 0){let a=n.slice(s+1,r).trim();a.charCodeAt(0)===34&&(a=a.slice(1,-1));try{t[o]=i(a)}catch{t[o]=a}}l=r+1}return t}function mr(n,e,t){const i=Object.assign({},t||{}),l=i.encode||ap;if(!nl.test(n))throw new TypeError("argument name is invalid");const s=l(e);if(s&&!nl.test(s))throw new TypeError("argument val is invalid");let r=n+"="+s;if(i.maxAge!=null){const o=i.maxAge-0;if(isNaN(o)||!isFinite(o))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(o)}if(i.domain){if(!nl.test(i.domain))throw new TypeError("option domain is invalid");r+="; Domain="+i.domain}if(i.path){if(!nl.test(i.path))throw new TypeError("option path is invalid");r+="; Path="+i.path}if(i.expires){if(!function(a){return Object.prototype.toString.call(a)==="[object Date]"||a instanceof Date}(i.expires)||isNaN(i.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(r+="; HttpOnly"),i.secure&&(r+="; Secure"),i.priority)switch(typeof i.priority=="string"?i.priority.toLowerCase():i.priority){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r}function op(n){return n.indexOf("%")!==-1?decodeURIComponent(n):n}function ap(n){return encodeURIComponent(n)}const up=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal;let $f;function fi(n){if(n)try{const e=decodeURIComponent($f(n.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function Rf(n,e=0){let t=fi(n);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}$f=typeof atob!="function"||up?n=>{let e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,i,l=0,s=0,r="";i=e.charAt(s++);~i&&(t=l%4?64*t+i:i,l++%4)?r+=String.fromCharCode(255&t>>(-2*l&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return r}:atob;const hr="pb_auth";class fp{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!Rf(this.token)}get isAdmin(){return fi(this.token).type==="admin"}get isAuthRecord(){return fi(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=hr){const i=rp(e||"")[t]||"";let l={};try{l=JSON.parse(i),(typeof l===null||typeof l!="object"||Array.isArray(l))&&(l={})}catch{}this.save(l.token||"",l.model||null)}exportToCookie(e,t=hr){var a,u;const i={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},l=fi(this.token);i.expires=l!=null&&l.exp?new Date(1e3*l.exp):new Date("1970-01-01"),e=Object.assign({},i,e);const s={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let r=mr(t,JSON.stringify(s),e);const o=typeof Blob<"u"?new Blob([r]).size:r.length;if(s.model&&o>4096){s.model={id:(a=s==null?void 0:s.model)==null?void 0:a.id,email:(u=s==null?void 0:s.model)==null?void 0:u.email};const f=["collectionId","username","verified"];for(const c in this.model)f.includes(c)&&(s.model[c]=this.model[c]);r=mr(t,JSON.stringify(s),e)}return r}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let i=this._onChangeCallbacks.length-1;i>=0;i--)if(this._onChangeCallbacks[i]==e)return delete this._onChangeCallbacks[i],void this._onChangeCallbacks.splice(i,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class Ff extends fp{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let i=t;typeof t!="string"&&(i=JSON.stringify(t)),window.localStorage.setItem(e,i)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class Kn{constructor(e){this.client=e}}class cp extends Kn{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}async testEmail(e,t,i){return i=Object.assign({method:"POST",body:{email:e,template:t}},i),this.client.send("/api/settings/test/email",i).then(()=>!0)}async generateAppleClientSecret(e,t,i,l,s,r){return r=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:i,privateKey:l,duration:s}},r),this.client.send("/api/settings/apple/generate-client-secret",r)}}class js extends Kn{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let i=500;return(t=Object.assign({},e,t)).batch&&(i=t.batch,delete t.batch),this._getFullList(i,t)}async getList(e=1,t=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:e,perPage:t},i.query),this.client.send(this.baseCrudPath,i).then(l=>{var s;return l.items=((s=l.items)==null?void 0:s.map(r=>this.decode(r)))||[],l})}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(i=>{var l;if(!((l=i==null?void 0:i.items)!=null&&l.length))throw new $t({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return i.items[0]})}async getOne(e,t){if(!e)throw new $t({url:this.client.buildUrl(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(i=>this.decode(i))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(i=>this.decode(i))}async update(e,t,i){return i=Object.assign({method:"PATCH",body:t},i),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),i).then(l=>this.decode(l))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let i=[],l=async s=>this.getList(s,e||500,t).then(r=>{const o=r.items;return i=i.concat(o),o.length==r.perPage?l(s+1):i});return l(1)}}function Ht(n,e,t,i){const l=i!==void 0;return l||t!==void 0?l?(console.warn(n),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,i),e):Object.assign(e,t):e}function Bl(n){var e;(e=n._resetAutoRefresh)==null||e.call(n)}class dp extends js{get baseCrudPath(){return"/api/admins"}async update(e,t,i){return super.update(e,t,i).then(l=>{var s,r;return((s=this.client.authStore.model)==null?void 0:s.id)===l.id&&((r=this.client.authStore.model)==null?void 0:r.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,l),l})}async delete(e,t){return super.delete(e,t).then(i=>{var l,s;return i&&((l=this.client.authStore.model)==null?void 0:l.id)===e&&((s=this.client.authStore.model)==null?void 0:s.collectionId)===void 0&&this.client.authStore.clear(),i})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}async authWithPassword(e,t,i,l){let s={method:"POST",body:{identity:e,password:t}};s=Ht("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",s,i,l);const r=s.autoRefreshThreshold;delete s.autoRefreshThreshold,s.autoRefresh||Bl(this.client);let o=await this.client.send(this.baseCrudPath+"/auth-with-password",s);return o=this.authResponse(o),r&&function(u,f,c,d){Bl(u);const m=u.beforeSend,h=u.authStore.model,g=u.authStore.onChange((b,_)=>{(!b||(_==null?void 0:_.id)!=(h==null?void 0:h.id)||(_!=null&&_.collectionId||h!=null&&h.collectionId)&&(_==null?void 0:_.collectionId)!=(h==null?void 0:h.collectionId))&&Bl(u)});u._resetAutoRefresh=function(){g(),u.beforeSend=m,delete u._resetAutoRefresh},u.beforeSend=async(b,_)=>{var O;const C=u.authStore.token;if((O=_.query)!=null&&O.autoRefresh)return m?m(b,_):{url:b,sendOptions:_};let L=u.authStore.isValid;if(L&&Rf(u.authStore.token,f))try{await c()}catch{L=!1}L||await d();const T=_.headers||{};for(let S in T)if(S.toLowerCase()=="authorization"&&C==T[S]&&u.authStore.token){T[S]=u.authStore.token;break}return _.headers=T,m?m(b,_):{url:b,sendOptions:_}}}(this.client,r,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},s))),o}async authRefresh(e,t){let i={method:"POST"};return i=Ht("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",i,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",i).then(this.authResponse.bind(this))}async requestPasswordReset(e,t,i){let l={method:"POST",body:{email:e}};return l=Ht("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",l,t,i),this.client.send(this.baseCrudPath+"/request-password-reset",l).then(()=>!0)}async confirmPasswordReset(e,t,i,l,s){let r={method:"POST",body:{token:e,password:t,passwordConfirm:i}};return r=Ht("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",r,l,s),this.client.send(this.baseCrudPath+"/confirm-password-reset",r).then(()=>!0)}}const pp=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function qf(n){if(n){n.query=n.query||{};for(let e in n)pp.includes(e)||(n.query[e]=n[e],delete n[e])}}class Uf extends Kn{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,i){var r;if(!e)throw new Error("topic must be set.");let l=e;if(i){qf(i);const o="options="+encodeURIComponent(JSON.stringify({query:i.query,headers:i.headers}));l+=(l.includes("?")?"&":"?")+o}const s=function(o){const a=o;let u;try{u=JSON.parse(a==null?void 0:a.data)}catch{}t(u||{})};return this.subscriptions[l]||(this.subscriptions[l]=[]),this.subscriptions[l].push(s),this.isConnected?this.subscriptions[l].length===1?await this.submitSubscriptions():(r=this.eventSource)==null||r.addEventListener(l,s):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,s)}async unsubscribe(e){var i;let t=!1;if(e){const l=this.getSubscriptionsByTopic(e);for(let s in l)if(this.hasSubscriptionListeners(s)){for(let r of this.subscriptions[s])(i=this.eventSource)==null||i.removeEventListener(s,r);delete this.subscriptions[s],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){var i;let t=!1;for(let l in this.subscriptions)if((l+"?").startsWith(e)){t=!0;for(let s of this.subscriptions[l])(i=this.eventSource)==null||i.removeEventListener(l,s);delete this.subscriptions[l]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var s;let i=!1;const l=this.getSubscriptionsByTopic(e);for(let r in l){if(!Array.isArray(this.subscriptions[r])||!this.subscriptions[r].length)continue;let o=!1;for(let a=this.subscriptions[r].length-1;a>=0;a--)this.subscriptions[r][a]===t&&(o=!0,delete this.subscriptions[r][a],this.subscriptions[r].splice(a,1),(s=this.eventSource)==null||s.removeEventListener(r,t));o&&(this.subscriptions[r].length||delete this.subscriptions[r],i||this.hasSubscriptionListeners(r)||(i=!0))}this.hasSubscriptionListeners()?i&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){var t,i;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let l in this.subscriptions)if((i=this.subscriptions[l])!=null&&i.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let i in this.subscriptions)(i+"?").startsWith(e)&&(t[i]=this.subscriptions[i]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let i=3;for(;this.hasUnsentSubscriptions()&&i>0;)i--,await this.submitSubscriptions()}).then(()=>{for(let l of this.pendingConnects)l.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const i=this.getSubscriptionsByTopic("PB_CONNECT");for(let l in i)for(let s of i[l])s(e)}).catch(i=>{this.clientId="",this.connectErrorHandler(i)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let i of this.pendingConnects)i.reject(new $t(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let i of this.pendingConnects)i.resolve();this.pendingConnects=[]}}}class mp extends js{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}async subscribe(e,t,i){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,i)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const i=Object.assign({},e,t);return super.getFullList(i)}async getList(e=1,t=30,i){return super.getList(e,t,i)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,i){return super.update(e,t,i).then(l=>{var s,r,o;return((s=this.client.authStore.model)==null?void 0:s.id)!==(l==null?void 0:l.id)||((r=this.client.authStore.model)==null?void 0:r.collectionId)!==this.collectionIdOrName&&((o=this.client.authStore.model)==null?void 0:o.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,l),l})}async delete(e,t){return super.delete(e,t).then(i=>{var l,s,r;return!i||((l=this.client.authStore.model)==null?void 0:l.id)!==e||((s=this.client.authStore.model)==null?void 0:s.collectionId)!==this.collectionIdOrName&&((r=this.client.authStore.model)==null?void 0:r.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),i})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}async authWithPassword(e,t,i,l){let s={method:"POST",body:{identity:e,password:t}};return s=Ht("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",s,i,l),this.client.send(this.baseCollectionPath+"/auth-with-password",s).then(r=>this.authResponse(r))}async authWithOAuth2Code(e,t,i,l,s,r,o){let a={method:"POST",body:{provider:e,code:t,codeVerifier:i,redirectUrl:l,createData:s}};return a=Ht("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",a,r,o),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",a).then(u=>this.authResponse(u))}authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{};let i=null;t.urlCallback||(i=_r(void 0));const l=new Uf(this.client);function s(){i==null||i.close(),l.unsubscribe()}const r={},o=t.requestKey;return o&&(r.requestKey=o),this.listAuthMethods(r).then(a=>{var d;const u=a.authProviders.find(m=>m.name===t.provider);if(!u)throw new $t(new Error(`Missing or invalid provider "${t.provider}".`));const f=this.client.buildUrl("/api/oauth2-redirect"),c=o?(d=this.client.cancelControllers)==null?void 0:d[o]:void 0;return c&&(c.signal.onabort=()=>{s()}),new Promise(async(m,h)=>{var g;try{await l.subscribe("@oauth2",async L=>{var O;const T=l.clientId;try{if(!L.state||T!==L.state)throw new Error("State parameters don't match.");if(L.error||!L.code)throw new Error("OAuth2 redirect error or missing code: "+L.error);const S=Object.assign({},t);delete S.provider,delete S.scopes,delete S.createData,delete S.urlCallback,(O=c==null?void 0:c.signal)!=null&&O.onabort&&(c.signal.onabort=null);const j=await this.authWithOAuth2Code(u.name,L.code,u.codeVerifier,f,t.createData,S);m(j)}catch(S){h(new $t(S))}s()});const b={state:l.clientId};(g=t.scopes)!=null&&g.length&&(b.scope=t.scopes.join(" "));const _=this._replaceQueryParams(u.authUrl+f,b);await(t.urlCallback||function(L){i?i.location.href=L:i=_r(L)})(_)}catch(b){s(),h(new $t(b))}})}).catch(a=>{throw s(),a})}async authRefresh(e,t){let i={method:"POST"};return i=Ht("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",i,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",i).then(l=>this.authResponse(l))}async requestPasswordReset(e,t,i){let l={method:"POST",body:{email:e}};return l=Ht("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",l,t,i),this.client.send(this.baseCollectionPath+"/request-password-reset",l).then(()=>!0)}async confirmPasswordReset(e,t,i,l,s){let r={method:"POST",body:{token:e,password:t,passwordConfirm:i}};return r=Ht("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",r,l,s),this.client.send(this.baseCollectionPath+"/confirm-password-reset",r).then(()=>!0)}async requestVerification(e,t,i){let l={method:"POST",body:{email:e}};return l=Ht("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",l,t,i),this.client.send(this.baseCollectionPath+"/request-verification",l).then(()=>!0)}async confirmVerification(e,t,i){let l={method:"POST",body:{token:e}};return l=Ht("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",l,t,i),this.client.send(this.baseCollectionPath+"/confirm-verification",l).then(()=>{const s=fi(e),r=this.client.authStore.model;return r&&!r.verified&&r.id===s.id&&r.collectionId===s.collectionId&&(r.verified=!0,this.client.authStore.save(this.client.authStore.token,r)),!0})}async requestEmailChange(e,t,i){let l={method:"POST",body:{newEmail:e}};return l=Ht("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",l,t,i),this.client.send(this.baseCollectionPath+"/request-email-change",l).then(()=>!0)}async confirmEmailChange(e,t,i,l){let s={method:"POST",body:{token:e,password:t}};return s=Ht("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",s,i,l),this.client.send(this.baseCollectionPath+"/confirm-email-change",s).then(()=>{const r=fi(e),o=this.client.authStore.model;return o&&o.id===r.id&&o.collectionId===r.collectionId&&this.client.authStore.clear(),!0})}async listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}async unlinkExternalAuth(e,t,i){return i=Object.assign({method:"DELETE"},i),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),i).then(()=>!0)}_replaceQueryParams(e,t={}){let i=e,l="";e.indexOf("?")>=0&&(i=e.substring(0,e.indexOf("?")),l=e.substring(e.indexOf("?")+1));const s={},r=l.split("&");for(const o of r){if(o=="")continue;const a=o.split("=");s[decodeURIComponent(a[0].replace(/\+/g," "))]=decodeURIComponent((a[1]||"").replace(/\+/g," "))}for(let o in t)t.hasOwnProperty(o)&&(t[o]==null?delete s[o]:s[o]=t[o]);l="";for(let o in s)s.hasOwnProperty(o)&&(l!=""&&(l+="&"),l+=encodeURIComponent(o.replace(/%20/g,"+"))+"="+encodeURIComponent(s[o].replace(/%20/g,"+")));return l!=""?i+"?"+l:i}}function _r(n){if(typeof window>"u"||!(window!=null&&window.open))throw new $t(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,i=window.innerWidth,l=window.innerHeight;e=e>i?i:e,t=t>l?l:t;let s=i/2-e/2,r=l/2-t/2;return window.open(n,"popup_window","width="+e+",height="+t+",top="+r+",left="+s+",resizable,menubar=no")}class hp extends js{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,i){return i=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},i),this.client.send(this.baseCrudPath+"/import",i).then(()=>!0)}}class _p extends Kn{async getList(e=1,t=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:e,perPage:t},i.query),this.client.send("/api/logs",i)}async getOne(e,t){if(!e)throw new $t({url:this.client.buildUrl("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class gp extends Kn{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class bp extends Kn{getUrl(e,t,i={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const l=[];l.push("api"),l.push("files"),l.push(encodeURIComponent(e.collectionId||e.collectionName)),l.push(encodeURIComponent(e.id)),l.push(encodeURIComponent(t));let s=this.client.buildUrl(l.join("/"));if(Object.keys(i).length){i.download===!1&&delete i.download;const r=new URLSearchParams(i);s+=(s.includes("?")?"&":"?")+r}return s}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class wp extends Kn{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class In{constructor(e="/",t,i="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=i,this.authStore=t||new Ff,this.admins=new dp(this),this.collections=new hp(this),this.files=new bp(this),this.logs=new _p(this),this.settings=new cp(this),this.realtime=new Uf(this),this.health=new gp(this),this.backups=new wp(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new mp(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let i in t){let l=t[i];switch(typeof l){case"boolean":case"number":l=""+l;break;case"string":l="'"+l.replace(/'/g,"\\'")+"'";break;default:l=l===null?"null":l instanceof Date?"'"+l.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(l).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+i+"}",l)}return e}getFileUrl(e,t,i={}){return this.files.getUrl(e,t,i)}buildUrl(e){var i;let t=this.baseUrl;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(i=window.location.origin)!=null&&i.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseUrl),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let i=this.buildUrl(e);if(this.beforeSend){const l=Object.assign({},await this.beforeSend(i,t));l.url!==void 0||l.options!==void 0?(i=l.url||i,t=l.options||t):Object.keys(l).length&&(t=l,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const l=this.serializeQueryParams(t.query);l&&(i+=(i.includes("?")?"&":"?")+l),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(i,t).then(async l=>{let s={};try{s=await l.json()}catch{}if(this.afterSend&&(s=await this.afterSend(l,s)),l.status>=400)throw new $t({url:l.url,status:l.status,data:s});return s}).catch(l=>{throw new $t(l)})}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=this.convertToFormDataIfNeeded(t.body),qf(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const i=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(i);const l=new AbortController;this.cancelControllers[i]=l,t.signal=l.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(const i in e){const l=e[i];if(typeof l!="object"||this.hasBlobField({data:l})){const s=Array.isArray(l)?l:[l];for(let r of s)t.append(i,r)}else{let s={};s[i]=l,t.append("@jsonPayload",JSON.stringify(s))}}return t}hasBlobField(e){for(const t in e){const i=Array.isArray(e[t])?e[t]:[e[t]];for(const l of i)if(typeof Blob<"u"&&l instanceof Blob||typeof File<"u"&&l instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let i in e)if(i.toLowerCase()==t)return e[i];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const i in e){if(e[i]===null)continue;const l=e[i],s=encodeURIComponent(i);if(Array.isArray(l))for(const r of l)t.push(s+"="+encodeURIComponent(r));else l instanceof Date?t.push(s+"="+encodeURIComponent(l.toISOString())):typeof l!==null&&typeof l=="object"?t.push(s+"="+encodeURIComponent(JSON.stringify(l))):t.push(s+"="+encodeURIComponent(l))}return t.join("&")}}class Gn extends Error{}class vp extends Gn{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class yp extends Gn{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class kp extends Gn{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class ii extends Gn{}class Wf extends Gn{constructor(e){super(`Invalid unit ${e}`)}}class At extends Gn{}class wn extends Gn{constructor(){super("Zone is an abstract class")}}const he="numeric",Qt="short",Rt="long",wl={year:he,month:he,day:he},Vf={year:he,month:Qt,day:he},Sp={year:he,month:Qt,day:he,weekday:Qt},zf={year:he,month:Rt,day:he},Bf={year:he,month:Rt,day:he,weekday:Rt},Zf={hour:he,minute:he},Yf={hour:he,minute:he,second:he},Kf={hour:he,minute:he,second:he,timeZoneName:Qt},Gf={hour:he,minute:he,second:he,timeZoneName:Rt},Jf={hour:he,minute:he,hourCycle:"h23"},Xf={hour:he,minute:he,second:he,hourCycle:"h23"},Qf={hour:he,minute:he,second:he,hourCycle:"h23",timeZoneName:Qt},xf={hour:he,minute:he,second:he,hourCycle:"h23",timeZoneName:Rt},ec={year:he,month:he,day:he,hour:he,minute:he},tc={year:he,month:he,day:he,hour:he,minute:he,second:he},nc={year:he,month:Qt,day:he,hour:he,minute:he},ic={year:he,month:Qt,day:he,hour:he,minute:he,second:he},Tp={year:he,month:Qt,day:he,weekday:Qt,hour:he,minute:he},lc={year:he,month:Rt,day:he,hour:he,minute:he,timeZoneName:Qt},sc={year:he,month:Rt,day:he,hour:he,minute:he,second:he,timeZoneName:Qt},rc={year:he,month:Rt,day:he,weekday:Rt,hour:he,minute:he,timeZoneName:Rt},oc={year:he,month:Rt,day:he,weekday:Rt,hour:he,minute:he,second:he,timeZoneName:Rt};class Yi{get type(){throw new wn}get name(){throw new wn}get ianaName(){return this.name}get isUniversal(){throw new wn}offsetName(e,t){throw new wn}formatOffset(e,t){throw new wn}offset(e){throw new wn}equals(e){throw new wn}get isValid(){throw new wn}}let Zl=null;class Dl extends Yi{static get instance(){return Zl===null&&(Zl=new Dl),Zl}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return _c(e,t,i)}formatOffset(e,t){return Mi(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let ml={};function Cp(n){return ml[n]||(ml[n]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),ml[n]}const Op={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Ep(n,e){const t=n.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,l,s,r,o,a,u,f]=i;return[r,l,s,o,a,u,f]}function Lp(n,e){const t=n.formatToParts(e),i=[];for(let l=0;l<t.length;l++){const{type:s,value:r}=t[l],o=Op[s];s==="era"?i[o]=r:$e(o)||(i[o]=parseInt(r,10))}return i}let il={};class hn extends Yi{static create(e){return il[e]||(il[e]=new hn(e)),il[e]}static resetCache(){il={},ml={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=hn.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return _c(e,t,i,this.name)}formatOffset(e,t){return Mi(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const i=Cp(this.name);let[l,s,r,o,a,u,f]=i.formatToParts?Lp(i,t):Ep(i,t);o==="BC"&&(l=-Math.abs(l)+1);const d=Hl({year:l,month:s,day:r,hour:a===24?0:a,minute:u,second:f,millisecond:0});let m=+t;const h=m%1e3;return m-=h>=0?h:1e3+h,(d-m)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let gr={};function Ip(n,e={}){const t=JSON.stringify([n,e]);let i=gr[t];return i||(i=new Intl.ListFormat(n,e),gr[t]=i),i}let fs={};function cs(n,e={}){const t=JSON.stringify([n,e]);let i=fs[t];return i||(i=new Intl.DateTimeFormat(n,e),fs[t]=i),i}let ds={};function Pp(n,e={}){const t=JSON.stringify([n,e]);let i=ds[t];return i||(i=new Intl.NumberFormat(n,e),ds[t]=i),i}let ps={};function jp(n,e={}){const{base:t,...i}=e,l=JSON.stringify([n,i]);let s=ps[l];return s||(s=new Intl.RelativeTimeFormat(n,e),ps[l]=s),s}let Ni=null;function Np(){return Ni||(Ni=new Intl.DateTimeFormat().resolvedOptions().locale,Ni)}let br={};function Ap(n){let e=br[n];if(!e){const t=new Intl.Locale(n);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,br[n]=e}return e}function Dp(n){const e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));const t=n.indexOf("-u-");if(t===-1)return[n];{let i,l;try{i=cs(n).resolvedOptions(),l=n}catch{const a=n.substring(0,t);i=cs(a).resolvedOptions(),l=a}const{numberingSystem:s,calendar:r}=i;return[l,s,r]}}function Mp(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function Hp(n){const e=[];for(let t=1;t<=12;t++){const i=Re.utc(2009,t,1);e.push(n(i))}return e}function $p(n){const e=[];for(let t=1;t<=7;t++){const i=Re.utc(2016,11,13+t);e.push(n(i))}return e}function ll(n,e,t,i){const l=n.listingMode();return l==="error"?null:l==="en"?t(e):i(e)}function Rp(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||new Intl.DateTimeFormat(n.intl).resolvedOptions().numberingSystem==="latn"}class Fp{constructor(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:l,floor:s,...r}=i;if(!t||Object.keys(r).length>0){const o={useGrouping:!1,...i};i.padTo>0&&(o.minimumIntegerDigits=i.padTo),this.inf=Pp(e,o)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):Ms(e,3);return bt(t,this.padTo)}}}class qp{constructor(e,t,i){this.opts=i,this.originalZone=void 0;let l;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const r=-1*(e.offset/60),o=r>=0?`Etc/GMT+${r}`:`Etc/GMT${r}`;e.offset!==0&&hn.create(o).valid?(l=o,this.dt=e):(l="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,l=e.zone.name):(l="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||l,this.dtf=cs(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:i}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Up{constructor(e,t,i){this.opts={style:"long",...i},!t&&mc()&&(this.rtf=jp(e,i))}format(e,t){return this.rtf?this.rtf.format(e,t):om(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const Wp={firstDay:1,minimalDays:4,weekend:[6,7]};class it{static fromOpts(e){return it.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,i,l,s=!1){const r=e||mt.defaultLocale,o=r||(s?"en-US":Np()),a=t||mt.defaultNumberingSystem,u=i||mt.defaultOutputCalendar,f=ms(l)||mt.defaultWeekSettings;return new it(o,a,u,f,r)}static resetCache(){Ni=null,fs={},ds={},ps={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:i,weekSettings:l}={}){return it.create(e,t,i,l)}constructor(e,t,i,l,s){const[r,o,a]=Dp(e);this.locale=r,this.numberingSystem=t||o||null,this.outputCalendar=i||a||null,this.weekSettings=l,this.intl=Mp(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Rp(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:it.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,ms(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return ll(this,e,wc,()=>{const i=t?{month:e,day:"numeric"}:{month:e},l=t?"format":"standalone";return this.monthsCache[l][e]||(this.monthsCache[l][e]=Hp(s=>this.extract(s,i,"month"))),this.monthsCache[l][e]})}weekdays(e,t=!1){return ll(this,e,kc,()=>{const i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},l=t?"format":"standalone";return this.weekdaysCache[l][e]||(this.weekdaysCache[l][e]=$p(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[l][e]})}meridiems(){return ll(this,void 0,()=>Sc,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Re.utc(2016,11,13,9),Re.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return ll(this,e,Tc,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Re.utc(-40,1,1),Re.utc(2017,1,1)].map(i=>this.extract(i,t,"era"))),this.eraCache[e]})}extract(e,t,i){const l=this.dtFormatter(e,t),s=l.formatToParts(),r=s.find(o=>o.type.toLowerCase()===i);return r?r.value:null}numberFormatter(e={}){return new Fp(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new qp(e,this.intl,t)}relFormatter(e={}){return new Up(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Ip(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:hc()?Ap(this.locale):Wp}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let Yl=null;class Pt extends Yi{static get utcInstance(){return Yl===null&&(Yl=new Pt(0)),Yl}static instance(e){return e===0?Pt.utcInstance:new Pt(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Pt($l(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Mi(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Mi(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return Mi(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class Vp extends Yi{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function kn(n,e){if($e(n)||n===null)return e;if(n instanceof Yi)return n;if(Zp(n)){const t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?Dl.instance:t==="utc"||t==="gmt"?Pt.utcInstance:Pt.parseSpecifier(t)||hn.create(n)}else return qn(n)?Pt.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new Vp(n)}let wr=()=>Date.now(),vr="system",yr=null,kr=null,Sr=null,Tr=60,Cr,Or=null;class mt{static get now(){return wr}static set now(e){wr=e}static set defaultZone(e){vr=e}static get defaultZone(){return kn(vr,Dl.instance)}static get defaultLocale(){return yr}static set defaultLocale(e){yr=e}static get defaultNumberingSystem(){return kr}static set defaultNumberingSystem(e){kr=e}static get defaultOutputCalendar(){return Sr}static set defaultOutputCalendar(e){Sr=e}static get defaultWeekSettings(){return Or}static set defaultWeekSettings(e){Or=ms(e)}static get twoDigitCutoffYear(){return Tr}static set twoDigitCutoffYear(e){Tr=e%100}static get throwOnInvalid(){return Cr}static set throwOnInvalid(e){Cr=e}static resetCaches(){it.resetCache(),hn.resetCache()}}class Xt{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const ac=[0,31,59,90,120,151,181,212,243,273,304,334],uc=[0,31,60,91,121,152,182,213,244,274,305,335];function Vt(n,e){return new Xt("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function Ns(n,e,t){const i=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const l=i.getUTCDay();return l===0?7:l}function fc(n,e,t){return t+(Ki(n)?uc:ac)[e-1]}function cc(n,e){const t=Ki(n)?uc:ac,i=t.findIndex(s=>s<e),l=e-t[i];return{month:i+1,day:l}}function As(n,e){return(n-e+7)%7+1}function vl(n,e=4,t=1){const{year:i,month:l,day:s}=n,r=fc(i,l,s),o=As(Ns(i,l,s),t);let a=Math.floor((r-o+14-e)/7),u;return a<1?(u=i-1,a=Vi(u,e,t)):a>Vi(i,e,t)?(u=i+1,a=1):u=i,{weekYear:u,weekNumber:a,weekday:o,...Rl(n)}}function Er(n,e=4,t=1){const{weekYear:i,weekNumber:l,weekday:s}=n,r=As(Ns(i,1,e),t),o=ci(i);let a=l*7+s-r-7+e,u;a<1?(u=i-1,a+=ci(u)):a>o?(u=i+1,a-=ci(i)):u=i;const{month:f,day:c}=cc(u,a);return{year:u,month:f,day:c,...Rl(n)}}function Kl(n){const{year:e,month:t,day:i}=n,l=fc(e,t,i);return{year:e,ordinal:l,...Rl(n)}}function Lr(n){const{year:e,ordinal:t}=n,{month:i,day:l}=cc(e,t);return{year:e,month:i,day:l,...Rl(n)}}function Ir(n,e){if(!$e(n.localWeekday)||!$e(n.localWeekNumber)||!$e(n.localWeekYear)){if(!$e(n.weekday)||!$e(n.weekNumber)||!$e(n.weekYear))throw new ii("Cannot mix locale-based week fields with ISO-based week fields");return $e(n.localWeekday)||(n.weekday=n.localWeekday),$e(n.localWeekNumber)||(n.weekNumber=n.localWeekNumber),$e(n.localWeekYear)||(n.weekYear=n.localWeekYear),delete n.localWeekday,delete n.localWeekNumber,delete n.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function zp(n,e=4,t=1){const i=Ml(n.weekYear),l=zt(n.weekNumber,1,Vi(n.weekYear,e,t)),s=zt(n.weekday,1,7);return i?l?s?!1:Vt("weekday",n.weekday):Vt("week",n.weekNumber):Vt("weekYear",n.weekYear)}function Bp(n){const e=Ml(n.year),t=zt(n.ordinal,1,ci(n.year));return e?t?!1:Vt("ordinal",n.ordinal):Vt("year",n.year)}function dc(n){const e=Ml(n.year),t=zt(n.month,1,12),i=zt(n.day,1,yl(n.year,n.month));return e?t?i?!1:Vt("day",n.day):Vt("month",n.month):Vt("year",n.year)}function pc(n){const{hour:e,minute:t,second:i,millisecond:l}=n,s=zt(e,0,23)||e===24&&t===0&&i===0&&l===0,r=zt(t,0,59),o=zt(i,0,59),a=zt(l,0,999);return s?r?o?a?!1:Vt("millisecond",l):Vt("second",i):Vt("minute",t):Vt("hour",e)}function $e(n){return typeof n>"u"}function qn(n){return typeof n=="number"}function Ml(n){return typeof n=="number"&&n%1===0}function Zp(n){return typeof n=="string"}function Yp(n){return Object.prototype.toString.call(n)==="[object Date]"}function mc(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function hc(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Kp(n){return Array.isArray(n)?n:[n]}function Pr(n,e,t){if(n.length!==0)return n.reduce((i,l)=>{const s=[e(l),l];return i&&t(i[0],s[0])===i[0]?i:s},null)[1]}function Gp(n,e){return e.reduce((t,i)=>(t[i]=n[i],t),{})}function hi(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function ms(n){if(n==null)return null;if(typeof n!="object")throw new At("Week settings must be an object");if(!zt(n.firstDay,1,7)||!zt(n.minimalDays,1,7)||!Array.isArray(n.weekend)||n.weekend.some(e=>!zt(e,1,7)))throw new At("Invalid week settings");return{firstDay:n.firstDay,minimalDays:n.minimalDays,weekend:Array.from(n.weekend)}}function zt(n,e,t){return Ml(n)&&n>=e&&n<=t}function Jp(n,e){return n-e*Math.floor(n/e)}function bt(n,e=2){const t=n<0;let i;return t?i="-"+(""+-n).padStart(e,"0"):i=(""+n).padStart(e,"0"),i}function yn(n){if(!($e(n)||n===null||n===""))return parseInt(n,10)}function jn(n){if(!($e(n)||n===null||n===""))return parseFloat(n)}function Ds(n){if(!($e(n)||n===null||n==="")){const e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function Ms(n,e,t=!1){const i=10**e;return(t?Math.trunc:Math.round)(n*i)/i}function Ki(n){return n%4===0&&(n%100!==0||n%400===0)}function ci(n){return Ki(n)?366:365}function yl(n,e){const t=Jp(e-1,12)+1,i=n+(e-t)/12;return t===2?Ki(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function Hl(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function jr(n,e,t){return-As(Ns(n,1,e),t)+e-1}function Vi(n,e=4,t=1){const i=jr(n,e,t),l=jr(n+1,e,t);return(ci(n)-i+l)/7}function hs(n){return n>99?n:n>mt.twoDigitCutoffYear?1900+n:2e3+n}function _c(n,e,t,i=null){const l=new Date(n),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const r={timeZoneName:e,...s},o=new Intl.DateTimeFormat(t,r).formatToParts(l).find(a=>a.type.toLowerCase()==="timezonename");return o?o.value:null}function $l(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);const i=parseInt(e,10)||0,l=t<0||Object.is(t,-0)?-i:i;return t*60+l}function gc(n){const e=Number(n);if(typeof n=="boolean"||n===""||Number.isNaN(e))throw new At(`Invalid unit value ${n}`);return e}function kl(n,e){const t={};for(const i in n)if(hi(n,i)){const l=n[i];if(l==null)continue;t[e(i)]=gc(l)}return t}function Mi(n,e){const t=Math.trunc(Math.abs(n/60)),i=Math.trunc(Math.abs(n%60)),l=n>=0?"+":"-";switch(e){case"short":return`${l}${bt(t,2)}:${bt(i,2)}`;case"narrow":return`${l}${t}${i>0?`:${i}`:""}`;case"techie":return`${l}${bt(t,2)}${bt(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Rl(n){return Gp(n,["hour","minute","second","millisecond"])}const Xp=["January","February","March","April","May","June","July","August","September","October","November","December"],bc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Qp=["J","F","M","A","M","J","J","A","S","O","N","D"];function wc(n){switch(n){case"narrow":return[...Qp];case"short":return[...bc];case"long":return[...Xp];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const vc=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],yc=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],xp=["M","T","W","T","F","S","S"];function kc(n){switch(n){case"narrow":return[...xp];case"short":return[...yc];case"long":return[...vc];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Sc=["AM","PM"],em=["Before Christ","Anno Domini"],tm=["BC","AD"],nm=["B","A"];function Tc(n){switch(n){case"narrow":return[...nm];case"short":return[...tm];case"long":return[...em];default:return null}}function im(n){return Sc[n.hour<12?0:1]}function lm(n,e){return kc(e)[n.weekday-1]}function sm(n,e){return wc(e)[n.month-1]}function rm(n,e){return Tc(e)[n.year<0?0:1]}function om(n,e,t="always",i=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&s){const c=n==="days";switch(e){case 1:return c?"tomorrow":`next ${l[n][0]}`;case-1:return c?"yesterday":`last ${l[n][0]}`;case 0:return c?"today":`this ${l[n][0]}`}}const r=Object.is(e,-0)||e<0,o=Math.abs(e),a=o===1,u=l[n],f=i?a?u[1]:u[2]||u[1]:a?l[n][0]:n;return r?`${o} ${f} ago`:`in ${o} ${f}`}function Nr(n,e){let t="";for(const i of n)i.literal?t+=i.val:t+=e(i.val);return t}const am={D:wl,DD:Vf,DDD:zf,DDDD:Bf,t:Zf,tt:Yf,ttt:Kf,tttt:Gf,T:Jf,TT:Xf,TTT:Qf,TTTT:xf,f:ec,ff:nc,fff:lc,ffff:rc,F:tc,FF:ic,FFF:sc,FFFF:oc};class Ot{static create(e,t={}){return new Ot(e,t)}static parseFormat(e){let t=null,i="",l=!1;const s=[];for(let r=0;r<e.length;r++){const o=e.charAt(r);o==="'"?(i.length>0&&s.push({literal:l||/^\s+$/.test(i),val:i}),t=null,i="",l=!l):l||o===t?i+=o:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=o,t=o)}return i.length>0&&s.push({literal:l||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(e){return am[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return bt(e,t);const i={...this.opts};return t>0&&(i.padTo=t),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,t){const i=this.loc.listingMode()==="en",l=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(m,h)=>this.loc.extract(e,m,h),r=m=>e.isOffsetFixed&&e.offset===0&&m.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,m.format):"",o=()=>i?im(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),a=(m,h)=>i?sm(e,m):s(h?{month:m}:{month:m,day:"numeric"},"month"),u=(m,h)=>i?lm(e,m):s(h?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),f=m=>{const h=Ot.macroTokenToFormatOpts(m);return h?this.formatWithSystemDefault(e,h):m},c=m=>i?rm(e,m):s({era:m},"era"),d=m=>{switch(m){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return r({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return r({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return r({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return o();case"d":return l?s({day:"numeric"},"day"):this.num(e.day);case"dd":return l?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return l?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return l?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return a("short",!0);case"LLLL":return a("long",!0);case"LLLLL":return a("narrow",!0);case"M":return l?s({month:"numeric"},"month"):this.num(e.month);case"MM":return l?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return a("short",!1);case"MMMM":return a("long",!1);case"MMMMM":return a("narrow",!1);case"y":return l?s({year:"numeric"},"year"):this.num(e.year);case"yy":return l?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return l?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return l?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return c("short");case"GG":return c("long");case"GGGGG":return c("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return f(m)}};return Nr(Ot.parseFormat(t),d)}formatDurationFromString(e,t){const i=a=>{switch(a[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},l=a=>u=>{const f=i(u);return f?this.num(a.get(f),u.length):u},s=Ot.parseFormat(t),r=s.reduce((a,{literal:u,val:f})=>u?a:a.concat(f),[]),o=e.shiftTo(...r.map(i).filter(a=>a));return Nr(s,l(o))}}const Cc=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function vi(...n){const e=n.reduce((t,i)=>t+i.source,"");return RegExp(`^${e}$`)}function yi(...n){return e=>n.reduce(([t,i,l],s)=>{const[r,o,a]=s(e,l);return[{...t,...r},o||i,a]},[{},null,1]).slice(0,2)}function ki(n,...e){if(n==null)return[null,null];for(const[t,i]of e){const l=t.exec(n);if(l)return i(l)}return[null,null]}function Oc(...n){return(e,t)=>{const i={};let l;for(l=0;l<n.length;l++)i[n[l]]=yn(e[t+l]);return[i,null,t+l]}}const Ec=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,um=`(?:${Ec.source}?(?:\\[(${Cc.source})\\])?)?`,Hs=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Lc=RegExp(`${Hs.source}${um}`),$s=RegExp(`(?:T${Lc.source})?`),fm=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,cm=/(\d{4})-?W(\d\d)(?:-?(\d))?/,dm=/(\d{4})-?(\d{3})/,pm=Oc("weekYear","weekNumber","weekDay"),mm=Oc("year","ordinal"),hm=/(\d{4})-(\d\d)-(\d\d)/,Ic=RegExp(`${Hs.source} ?(?:${Ec.source}|(${Cc.source}))?`),_m=RegExp(`(?: ${Ic.source})?`);function di(n,e,t){const i=n[e];return $e(i)?t:yn(i)}function gm(n,e){return[{year:di(n,e),month:di(n,e+1,1),day:di(n,e+2,1)},null,e+3]}function Si(n,e){return[{hours:di(n,e,0),minutes:di(n,e+1,0),seconds:di(n,e+2,0),milliseconds:Ds(n[e+3])},null,e+4]}function Gi(n,e){const t=!n[e]&&!n[e+1],i=$l(n[e+1],n[e+2]),l=t?null:Pt.instance(i);return[{},l,e+3]}function Ji(n,e){const t=n[e]?hn.create(n[e]):null;return[{},t,e+1]}const bm=RegExp(`^T?${Hs.source}$`),wm=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function vm(n){const[e,t,i,l,s,r,o,a,u]=n,f=e[0]==="-",c=a&&a[0]==="-",d=(m,h=!1)=>m!==void 0&&(h||m&&f)?-m:m;return[{years:d(jn(t)),months:d(jn(i)),weeks:d(jn(l)),days:d(jn(s)),hours:d(jn(r)),minutes:d(jn(o)),seconds:d(jn(a),a==="-0"),milliseconds:d(Ds(u),c)}]}const ym={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Rs(n,e,t,i,l,s,r){const o={year:e.length===2?hs(yn(e)):yn(e),month:bc.indexOf(t)+1,day:yn(i),hour:yn(l),minute:yn(s)};return r&&(o.second=yn(r)),n&&(o.weekday=n.length>3?vc.indexOf(n)+1:yc.indexOf(n)+1),o}const km=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Sm(n){const[,e,t,i,l,s,r,o,a,u,f,c]=n,d=Rs(e,l,i,t,s,r,o);let m;return a?m=ym[a]:u?m=0:m=$l(f,c),[d,new Pt(m)]}function Tm(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Cm=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Om=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Em=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Ar(n){const[,e,t,i,l,s,r,o]=n;return[Rs(e,l,i,t,s,r,o),Pt.utcInstance]}function Lm(n){const[,e,t,i,l,s,r,o]=n;return[Rs(e,o,t,i,l,s,r),Pt.utcInstance]}const Im=vi(fm,$s),Pm=vi(cm,$s),jm=vi(dm,$s),Nm=vi(Lc),Pc=yi(gm,Si,Gi,Ji),Am=yi(pm,Si,Gi,Ji),Dm=yi(mm,Si,Gi,Ji),Mm=yi(Si,Gi,Ji);function Hm(n){return ki(n,[Im,Pc],[Pm,Am],[jm,Dm],[Nm,Mm])}function $m(n){return ki(Tm(n),[km,Sm])}function Rm(n){return ki(n,[Cm,Ar],[Om,Ar],[Em,Lm])}function Fm(n){return ki(n,[wm,vm])}const qm=yi(Si);function Um(n){return ki(n,[bm,qm])}const Wm=vi(hm,_m),Vm=vi(Ic),zm=yi(Si,Gi,Ji);function Bm(n){return ki(n,[Wm,Pc],[Vm,zm])}const Dr="Invalid Duration",jc={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Zm={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...jc},Ut=146097/400,xn=146097/4800,Ym={years:{quarters:4,months:12,weeks:Ut/7,days:Ut,hours:Ut*24,minutes:Ut*24*60,seconds:Ut*24*60*60,milliseconds:Ut*24*60*60*1e3},quarters:{months:3,weeks:Ut/28,days:Ut/4,hours:Ut*24/4,minutes:Ut*24*60/4,seconds:Ut*24*60*60/4,milliseconds:Ut*24*60*60*1e3/4},months:{weeks:xn/7,days:xn,hours:xn*24,minutes:xn*24*60,seconds:xn*24*60*60,milliseconds:xn*24*60*60*1e3},...jc},$n=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Km=$n.slice(0).reverse();function vn(n,e,t=!1){const i={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new Ye(i)}function Nc(n,e){let t=e.milliseconds??0;for(const i of Km.slice(1))e[i]&&(t+=e[i]*n[i].milliseconds);return t}function Mr(n,e){const t=Nc(n,e)<0?-1:1;$n.reduceRight((i,l)=>{if($e(e[l]))return i;if(i){const s=e[i]*t,r=n[l][i],o=Math.floor(s/r);e[l]+=o*t,e[i]-=o*r*t}return l},null),$n.reduce((i,l)=>{if($e(e[l]))return i;if(i){const s=e[i]%1;e[i]-=s,e[l]+=s*n[i][l]}return l},null)}function Gm(n){const e={};for(const[t,i]of Object.entries(n))i!==0&&(e[t]=i);return e}class Ye{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let i=t?Ym:Zm;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||it.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,t){return Ye.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new At(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Ye({values:kl(e,Ye.normalizeUnit),loc:it.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(qn(e))return Ye.fromMillis(e);if(Ye.isDuration(e))return e;if(typeof e=="object")return Ye.fromObject(e);throw new At(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[i]=Fm(e);return i?Ye.fromObject(i,t):Ye.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[i]=Um(e);return i?Ye.fromObject(i,t):Ye.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new At("need to specify a reason the Duration is invalid");const i=e instanceof Xt?e:new Xt(e,t);if(mt.throwOnInvalid)throw new kp(i);return new Ye({invalid:i})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new Wf(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const i={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Ot.create(this.loc,i).formatDurationFromString(this,e):Dr}toHuman(e={}){if(!this.isValid)return Dr;const t=$n.map(i=>{const l=this.values[i];return $e(l)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(l)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Ms(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Re.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Nc(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=Ye.fromDurationLike(e),i={};for(const l of $n)(hi(t.values,l)||hi(this.values,l))&&(i[l]=t.get(l)+this.get(l));return vn(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const t=Ye.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=gc(e(this.values[i],i));return vn(this,{values:t},!0)}get(e){return this[Ye.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...kl(e,Ye.normalizeUnit)};return vn(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:i,matrix:l}={}){const r={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:l,conversionAccuracy:i};return vn(this,r)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Mr(this.matrix,e),vn(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=Gm(this.normalize().shiftToAll().toObject());return vn(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(r=>Ye.normalizeUnit(r));const t={},i={},l=this.toObject();let s;for(const r of $n)if(e.indexOf(r)>=0){s=r;let o=0;for(const u in i)o+=this.matrix[u][r]*i[u],i[u]=0;qn(l[r])&&(o+=l[r]);const a=Math.trunc(o);t[r]=a,i[r]=(o*1e3-a*1e3)/1e3}else qn(l[r])&&(i[r]=l[r]);for(const r in i)i[r]!==0&&(t[s]+=r===s?i[r]:i[r]/this.matrix[s][r]);return Mr(this.matrix,t),vn(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return vn(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(i,l){return i===void 0||i===0?l===void 0||l===0:i===l}for(const i of $n)if(!t(this.values[i],e.values[i]))return!1;return!0}}const ei="Invalid Interval";function Jm(n,e){return!n||!n.isValid?dt.invalid("missing or invalid start"):!e||!e.isValid?dt.invalid("missing or invalid end"):e<n?dt.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}class dt{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new At("need to specify a reason the Interval is invalid");const i=e instanceof Xt?e:new Xt(e,t);if(mt.throwOnInvalid)throw new yp(i);return new dt({invalid:i})}static fromDateTimes(e,t){const i=ji(e),l=ji(t),s=Jm(i,l);return s??new dt({start:i,end:l})}static after(e,t){const i=Ye.fromDurationLike(t),l=ji(e);return dt.fromDateTimes(l,l.plus(i))}static before(e,t){const i=Ye.fromDurationLike(t),l=ji(e);return dt.fromDateTimes(l.minus(i),l)}static fromISO(e,t){const[i,l]=(e||"").split("/",2);if(i&&l){let s,r;try{s=Re.fromISO(i,t),r=s.isValid}catch{r=!1}let o,a;try{o=Re.fromISO(l,t),a=o.isValid}catch{a=!1}if(r&&a)return dt.fromDateTimes(s,o);if(r){const u=Ye.fromISO(l,t);if(u.isValid)return dt.after(s,u)}else if(a){const u=Ye.fromISO(i,t);if(u.isValid)return dt.before(o,u)}}return dt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const i=this.start.startOf(e,t);let l;return t!=null&&t.useLocaleWeeks?l=this.end.reconfigure({locale:i.locale}):l=this.end,l=l.startOf(e,t),Math.floor(l.diff(i,e).get(e))+(l.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?dt.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(ji).filter(r=>this.contains(r)).sort((r,o)=>r.toMillis()-o.toMillis()),i=[];let{s:l}=this,s=0;for(;l<this.e;){const r=t[s]||this.e,o=+r>+this.e?this.e:r;i.push(dt.fromDateTimes(l,o)),l=o,s+=1}return i}splitBy(e){const t=Ye.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:i}=this,l=1,s;const r=[];for(;i<this.e;){const o=this.start.plus(t.mapUnits(a=>a*l));s=+o>+this.e?this.e:o,r.push(dt.fromDateTimes(i,s)),i=s,l+=1}return r}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return t>=i?null:dt.fromDateTimes(t,i)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return dt.fromDateTimes(t,i)}static merge(e){const[t,i]=e.sort((l,s)=>l.s-s.s).reduce(([l,s],r)=>s?s.overlaps(r)||s.abutsStart(r)?[l,s.union(r)]:[l.concat([s]),r]:[l,r],[[],null]);return i&&t.push(i),t}static xor(e){let t=null,i=0;const l=[],s=e.map(a=>[{time:a.s,type:"s"},{time:a.e,type:"e"}]),r=Array.prototype.concat(...s),o=r.sort((a,u)=>a.time-u.time);for(const a of o)i+=a.type==="s"?1:-1,i===1?t=a.time:(t&&+t!=+a.time&&l.push(dt.fromDateTimes(t,a.time)),t=null);return dt.merge(l)}difference(...e){return dt.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:ei}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=wl,t={}){return this.isValid?Ot.create(this.s.loc.clone(t),e).formatInterval(this):ei}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:ei}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ei}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:ei}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:ei}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Ye.invalid(this.invalidReason)}mapEndpoints(e){return dt.fromDateTimes(e(this.s),e(this.e))}}class sl{static hasDST(e=mt.defaultZone){const t=Re.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return hn.isValidZone(e)}static normalizeZone(e){return kn(e,mt.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||it.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||it.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||it.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:i=null,locObj:l=null,outputCalendar:s="gregory"}={}){return(l||it.create(t,i,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:l=null,outputCalendar:s="gregory"}={}){return(l||it.create(t,i,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:i=null,locObj:l=null}={}){return(l||it.create(t,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:l=null}={}){return(l||it.create(t,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return it.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return it.create(t,null,"gregory").eras(e)}static features(){return{relative:mc(),localeWeek:hc()}}}function Hr(n,e){const t=l=>l.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=t(e)-t(n);return Math.floor(Ye.fromMillis(i).as("days"))}function Xm(n,e,t){const i=[["years",(a,u)=>u.year-a.year],["quarters",(a,u)=>u.quarter-a.quarter+(u.year-a.year)*4],["months",(a,u)=>u.month-a.month+(u.year-a.year)*12],["weeks",(a,u)=>{const f=Hr(a,u);return(f-f%7)/7}],["days",Hr]],l={},s=n;let r,o;for(const[a,u]of i)t.indexOf(a)>=0&&(r=a,l[a]=u(n,e),o=s.plus(l),o>e?(l[a]--,n=s.plus(l),n>e&&(o=n,l[a]--,n=s.plus(l))):n=o);return[n,l,o,r]}function Qm(n,e,t,i){let[l,s,r,o]=Xm(n,e,t);const a=e-l,u=t.filter(c=>["hours","minutes","seconds","milliseconds"].indexOf(c)>=0);u.length===0&&(r<e&&(r=l.plus({[o]:1})),r!==l&&(s[o]=(s[o]||0)+a/(r-l)));const f=Ye.fromObject(s,i);return u.length>0?Ye.fromMillis(a,i).shiftTo(...u).plus(f):f}const Fs={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},$r={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},xm=Fs.hanidec.replace(/[\[|\]]/g,"").split("");function eh(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);if(n[t].search(Fs.hanidec)!==-1)e+=xm.indexOf(n[t]);else for(const l in $r){const[s,r]=$r[l];i>=s&&i<=r&&(e+=i-s)}}return parseInt(e,10)}else return e}function Gt({numberingSystem:n},e=""){return new RegExp(`${Fs[n||"latn"]}${e}`)}const th="missing Intl.DateTimeFormat.formatToParts support";function Ge(n,e=t=>t){return{regex:n,deser:([t])=>e(eh(t))}}const nh="",Ac=`[ ${nh}]`,Dc=new RegExp(Ac,"g");function ih(n){return n.replace(/\./g,"\\.?").replace(Dc,Ac)}function Rr(n){return n.replace(/\./g,"").replace(Dc," ").toLowerCase()}function Jt(n,e){return n===null?null:{regex:RegExp(n.map(ih).join("|")),deser:([t])=>n.findIndex(i=>Rr(t)===Rr(i))+e}}function Fr(n,e){return{regex:n,deser:([,t,i])=>$l(t,i),groups:e}}function rl(n){return{regex:n,deser:([e])=>e}}function lh(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function sh(n,e){const t=Gt(e),i=Gt(e,"{2}"),l=Gt(e,"{3}"),s=Gt(e,"{4}"),r=Gt(e,"{6}"),o=Gt(e,"{1,2}"),a=Gt(e,"{1,3}"),u=Gt(e,"{1,6}"),f=Gt(e,"{1,9}"),c=Gt(e,"{2,4}"),d=Gt(e,"{4,6}"),m=b=>({regex:RegExp(lh(b.val)),deser:([_])=>_,literal:!0}),g=(b=>{if(n.literal)return m(b);switch(b.val){case"G":return Jt(e.eras("short"),0);case"GG":return Jt(e.eras("long"),0);case"y":return Ge(u);case"yy":return Ge(c,hs);case"yyyy":return Ge(s);case"yyyyy":return Ge(d);case"yyyyyy":return Ge(r);case"M":return Ge(o);case"MM":return Ge(i);case"MMM":return Jt(e.months("short",!0),1);case"MMMM":return Jt(e.months("long",!0),1);case"L":return Ge(o);case"LL":return Ge(i);case"LLL":return Jt(e.months("short",!1),1);case"LLLL":return Jt(e.months("long",!1),1);case"d":return Ge(o);case"dd":return Ge(i);case"o":return Ge(a);case"ooo":return Ge(l);case"HH":return Ge(i);case"H":return Ge(o);case"hh":return Ge(i);case"h":return Ge(o);case"mm":return Ge(i);case"m":return Ge(o);case"q":return Ge(o);case"qq":return Ge(i);case"s":return Ge(o);case"ss":return Ge(i);case"S":return Ge(a);case"SSS":return Ge(l);case"u":return rl(f);case"uu":return rl(o);case"uuu":return Ge(t);case"a":return Jt(e.meridiems(),0);case"kkkk":return Ge(s);case"kk":return Ge(c,hs);case"W":return Ge(o);case"WW":return Ge(i);case"E":case"c":return Ge(t);case"EEE":return Jt(e.weekdays("short",!1),1);case"EEEE":return Jt(e.weekdays("long",!1),1);case"ccc":return Jt(e.weekdays("short",!0),1);case"cccc":return Jt(e.weekdays("long",!0),1);case"Z":case"ZZ":return Fr(new RegExp(`([+-]${o.source})(?::(${i.source}))?`),2);case"ZZZ":return Fr(new RegExp(`([+-]${o.source})(${i.source})?`),2);case"z":return rl(/[a-z_+-/]{1,256}?/i);case" ":return rl(/[^\S\n\r]/);default:return m(b)}})(n)||{invalidReason:th};return g.token=n,g}const rh={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function oh(n,e,t){const{type:i,value:l}=n;if(i==="literal"){const a=/^\s+$/.test(l);return{literal:!a,val:a?" ":l}}const s=e[i];let r=i;i==="hour"&&(e.hour12!=null?r=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?r="hour12":r="hour24":r=t.hour12?"hour12":"hour24");let o=rh[r];if(typeof o=="object"&&(o=o[s]),o)return{literal:!1,val:o}}function ah(n){return[`^${n.map(t=>t.regex).reduce((t,i)=>`${t}(${i.source})`,"")}$`,n]}function uh(n,e,t){const i=n.match(e);if(i){const l={};let s=1;for(const r in t)if(hi(t,r)){const o=t[r],a=o.groups?o.groups+1:1;!o.literal&&o.token&&(l[o.token.val[0]]=o.deser(i.slice(s,s+a))),s+=a}return[i,l]}else return[i,{}]}function fh(n){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,i;return $e(n.z)||(t=hn.create(n.z)),$e(n.Z)||(t||(t=new Pt(n.Z)),i=n.Z),$e(n.q)||(n.M=(n.q-1)*3+1),$e(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),$e(n.u)||(n.S=Ds(n.u)),[Object.keys(n).reduce((s,r)=>{const o=e(r);return o&&(s[o]=n[r]),s},{}),t,i]}let Gl=null;function ch(){return Gl||(Gl=Re.fromMillis(1555555555555)),Gl}function dh(n,e){if(n.literal)return n;const t=Ot.macroTokenToFormatOpts(n.val),i=$c(t,e);return i==null||i.includes(void 0)?n:i}function Mc(n,e){return Array.prototype.concat(...n.map(t=>dh(t,e)))}function Hc(n,e,t){const i=Mc(Ot.parseFormat(t),n),l=i.map(r=>sh(r,n)),s=l.find(r=>r.invalidReason);if(s)return{input:e,tokens:i,invalidReason:s.invalidReason};{const[r,o]=ah(l),a=RegExp(r,"i"),[u,f]=uh(e,a,o),[c,d,m]=f?fh(f):[null,null,void 0];if(hi(f,"a")&&hi(f,"H"))throw new ii("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:i,regex:a,rawMatches:u,matches:f,result:c,zone:d,specificOffset:m}}}function ph(n,e,t){const{result:i,zone:l,specificOffset:s,invalidReason:r}=Hc(n,e,t);return[i,l,s,r]}function $c(n,e){if(!n)return null;const i=Ot.create(e,n).dtFormatter(ch()),l=i.formatToParts(),s=i.resolvedOptions();return l.map(r=>oh(r,n,s))}const Jl="Invalid DateTime",qr=864e13;function ol(n){return new Xt("unsupported zone",`the zone "${n.name}" is not supported`)}function Xl(n){return n.weekData===null&&(n.weekData=vl(n.c)),n.weekData}function Ql(n){return n.localWeekData===null&&(n.localWeekData=vl(n.c,n.loc.getMinDaysInFirstWeek(),n.loc.getStartOfWeek())),n.localWeekData}function Nn(n,e){const t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new Re({...t,...e,old:t})}function Rc(n,e,t){let i=n-e*60*1e3;const l=t.offset(i);if(e===l)return[i,e];i-=(l-e)*60*1e3;const s=t.offset(i);return l===s?[i,l]:[n-Math.min(l,s)*60*1e3,Math.max(l,s)]}function al(n,e){n+=e*60*1e3;const t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function hl(n,e,t){return Rc(Hl(n),e,t)}function Ur(n,e){const t=n.o,i=n.c.year+Math.trunc(e.years),l=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...n.c,year:i,month:l,day:Math.min(n.c.day,yl(i,l))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},r=Ye.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),o=Hl(s);let[a,u]=Rc(o,t,n.zone);return r!==0&&(a+=r,u=n.zone.offset(a)),{ts:a,o:u}}function Pi(n,e,t,i,l,s){const{setZone:r,zone:o}=t;if(n&&Object.keys(n).length!==0||e){const a=e||o,u=Re.fromObject(n,{...t,zone:a,specificOffset:s});return r?u:u.setZone(o)}else return Re.invalid(new Xt("unparsable",`the input "${l}" can't be parsed as ${i}`))}function ul(n,e,t=!0){return n.isValid?Ot.create(it.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function xl(n,e){const t=n.c.year>9999||n.c.year<0;let i="";return t&&n.c.year>=0&&(i+="+"),i+=bt(n.c.year,t?6:4),e?(i+="-",i+=bt(n.c.month),i+="-",i+=bt(n.c.day)):(i+=bt(n.c.month),i+=bt(n.c.day)),i}function Wr(n,e,t,i,l,s){let r=bt(n.c.hour);return e?(r+=":",r+=bt(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(r+=":")):r+=bt(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(r+=bt(n.c.second),(n.c.millisecond!==0||!i)&&(r+=".",r+=bt(n.c.millisecond,3))),l&&(n.isOffsetFixed&&n.offset===0&&!s?r+="Z":n.o<0?(r+="-",r+=bt(Math.trunc(-n.o/60)),r+=":",r+=bt(Math.trunc(-n.o%60))):(r+="+",r+=bt(Math.trunc(n.o/60)),r+=":",r+=bt(Math.trunc(n.o%60)))),s&&(r+="["+n.zone.ianaName+"]"),r}const Fc={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},mh={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},hh={ordinal:1,hour:0,minute:0,second:0,millisecond:0},qc=["year","month","day","hour","minute","second","millisecond"],_h=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],gh=["year","ordinal","hour","minute","second","millisecond"];function bh(n){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new Wf(n);return e}function Vr(n){switch(n.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return bh(n)}}function zr(n,e){const t=kn(e.zone,mt.defaultZone),i=it.fromObject(e),l=mt.now();let s,r;if($e(n.year))s=l;else{for(const u of qc)$e(n[u])&&(n[u]=Fc[u]);const o=dc(n)||pc(n);if(o)return Re.invalid(o);const a=t.offset(l);[s,r]=hl(n,a,t)}return new Re({ts:s,zone:t,loc:i,o:r})}function Br(n,e,t){const i=$e(t.round)?!0:t.round,l=(r,o)=>(r=Ms(r,i||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(r,o)),s=r=>t.calendary?e.hasSame(n,r)?0:e.startOf(r).diff(n.startOf(r),r).get(r):e.diff(n,r).get(r);if(t.unit)return l(s(t.unit),t.unit);for(const r of t.units){const o=s(r);if(Math.abs(o)>=1)return l(o,r)}return l(n>e?-0:0,t.units[t.units.length-1])}function Zr(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}class Re{constructor(e){const t=e.zone||mt.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new Xt("invalid input"):null)||(t.isValid?null:ol(t));this.ts=$e(e.ts)?mt.now():e.ts;let l=null,s=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[l,s]=[e.old.c,e.old.o];else{const o=t.offset(this.ts);l=al(this.ts,o),i=Number.isNaN(l.year)?new Xt("invalid input"):null,l=i?null:l,s=i?null:o}this._zone=t,this.loc=e.loc||it.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=l,this.o=s,this.isLuxonDateTime=!0}static now(){return new Re({})}static local(){const[e,t]=Zr(arguments),[i,l,s,r,o,a,u]=t;return zr({year:i,month:l,day:s,hour:r,minute:o,second:a,millisecond:u},e)}static utc(){const[e,t]=Zr(arguments),[i,l,s,r,o,a,u]=t;return e.zone=Pt.utcInstance,zr({year:i,month:l,day:s,hour:r,minute:o,second:a,millisecond:u},e)}static fromJSDate(e,t={}){const i=Yp(e)?e.valueOf():NaN;if(Number.isNaN(i))return Re.invalid("invalid input");const l=kn(t.zone,mt.defaultZone);return l.isValid?new Re({ts:i,zone:l,loc:it.fromObject(t)}):Re.invalid(ol(l))}static fromMillis(e,t={}){if(qn(e))return e<-qr||e>qr?Re.invalid("Timestamp out of range"):new Re({ts:e,zone:kn(t.zone,mt.defaultZone),loc:it.fromObject(t)});throw new At(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(qn(e))return new Re({ts:e*1e3,zone:kn(t.zone,mt.defaultZone),loc:it.fromObject(t)});throw new At("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const i=kn(t.zone,mt.defaultZone);if(!i.isValid)return Re.invalid(ol(i));const l=it.fromObject(t),s=kl(e,Vr),{minDaysInFirstWeek:r,startOfWeek:o}=Ir(s,l),a=mt.now(),u=$e(t.specificOffset)?i.offset(a):t.specificOffset,f=!$e(s.ordinal),c=!$e(s.year),d=!$e(s.month)||!$e(s.day),m=c||d,h=s.weekYear||s.weekNumber;if((m||f)&&h)throw new ii("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&f)throw new ii("Can't mix ordinal dates with month/day");const g=h||s.weekday&&!m;let b,_,C=al(a,u);g?(b=_h,_=mh,C=vl(C,r,o)):f?(b=gh,_=hh,C=Kl(C)):(b=qc,_=Fc);let L=!1;for(const A of b){const M=s[A];$e(M)?L?s[A]=_[A]:s[A]=C[A]:L=!0}const T=g?zp(s,r,o):f?Bp(s):dc(s),O=T||pc(s);if(O)return Re.invalid(O);const S=g?Er(s,r,o):f?Lr(s):s,[j,H]=hl(S,u,i),D=new Re({ts:j,zone:i,o:H,loc:l});return s.weekday&&m&&e.weekday!==D.weekday?Re.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${D.toISO()}`):D}static fromISO(e,t={}){const[i,l]=Hm(e);return Pi(i,l,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[i,l]=$m(e);return Pi(i,l,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[i,l]=Rm(e);return Pi(i,l,t,"HTTP",t)}static fromFormat(e,t,i={}){if($e(e)||$e(t))throw new At("fromFormat requires an input string and a format");const{locale:l=null,numberingSystem:s=null}=i,r=it.fromOpts({locale:l,numberingSystem:s,defaultToEN:!0}),[o,a,u,f]=ph(r,e,t);return f?Re.invalid(f):Pi(o,a,i,`format ${t}`,e,u)}static fromString(e,t,i={}){return Re.fromFormat(e,t,i)}static fromSQL(e,t={}){const[i,l]=Bm(e);return Pi(i,l,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new At("need to specify a reason the DateTime is invalid");const i=e instanceof Xt?e:new Xt(e,t);if(mt.throwOnInvalid)throw new vp(i);return new Re({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const i=$c(e,it.fromObject(t));return i?i.map(l=>l?l.val:null).join(""):null}static expandFormat(e,t={}){return Mc(Ot.parseFormat(e),it.fromObject(t)).map(l=>l.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Xl(this).weekYear:NaN}get weekNumber(){return this.isValid?Xl(this).weekNumber:NaN}get weekday(){return this.isValid?Xl(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Ql(this).weekday:NaN}get localWeekNumber(){return this.isValid?Ql(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Ql(this).weekYear:NaN}get ordinal(){return this.isValid?Kl(this.c).ordinal:NaN}get monthShort(){return this.isValid?sl.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?sl.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?sl.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?sl.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,i=Hl(this.c),l=this.zone.offset(i-e),s=this.zone.offset(i+e),r=this.zone.offset(i-l*t),o=this.zone.offset(i-s*t);if(r===o)return[this];const a=i-r*t,u=i-o*t,f=al(a,r),c=al(u,o);return f.hour===c.hour&&f.minute===c.minute&&f.second===c.second&&f.millisecond===c.millisecond?[Nn(this,{ts:a}),Nn(this,{ts:u})]:[this]}get isInLeapYear(){return Ki(this.year)}get daysInMonth(){return yl(this.year,this.month)}get daysInYear(){return this.isValid?ci(this.year):NaN}get weeksInWeekYear(){return this.isValid?Vi(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Vi(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:i,calendar:l}=Ot.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:l}}toUTC(e=0,t={}){return this.setZone(Pt.instance(e),t)}toLocal(){return this.setZone(mt.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if(e=kn(e,mt.defaultZone),e.equals(this.zone))return this;if(e.isValid){let l=this.ts;if(t||i){const s=e.offset(this.ts),r=this.toObject();[l]=hl(r,s,e)}return Nn(this,{ts:l,zone:e})}else return Re.invalid(ol(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:i}={}){const l=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:i});return Nn(this,{loc:l})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=kl(e,Vr),{minDaysInFirstWeek:i,startOfWeek:l}=Ir(t,this.loc),s=!$e(t.weekYear)||!$e(t.weekNumber)||!$e(t.weekday),r=!$e(t.ordinal),o=!$e(t.year),a=!$e(t.month)||!$e(t.day),u=o||a,f=t.weekYear||t.weekNumber;if((u||r)&&f)throw new ii("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&r)throw new ii("Can't mix ordinal dates with month/day");let c;s?c=Er({...vl(this.c,i,l),...t},i,l):$e(t.ordinal)?(c={...this.toObject(),...t},$e(t.day)&&(c.day=Math.min(yl(c.year,c.month),c.day))):c=Lr({...Kl(this.c),...t});const[d,m]=hl(c,this.o,this.zone);return Nn(this,{ts:d,o:m})}plus(e){if(!this.isValid)return this;const t=Ye.fromDurationLike(e);return Nn(this,Ur(this,t))}minus(e){if(!this.isValid)return this;const t=Ye.fromDurationLike(e).negate();return Nn(this,Ur(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const i={},l=Ye.normalizeUnit(e);switch(l){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(l==="weeks")if(t){const s=this.loc.getStartOfWeek(),{weekday:r}=this;r<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(l==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?Ot.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Jl}toLocaleString(e=wl,t={}){return this.isValid?Ot.create(this.loc.clone(t),e).formatDateTime(this):Jl}toLocaleParts(e={}){return this.isValid?Ot.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:l=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const r=e==="extended";let o=xl(this,r);return o+="T",o+=Wr(this,r,t,i,l,s),o}toISODate({format:e="extended"}={}){return this.isValid?xl(this,e==="extended"):null}toISOWeekDate(){return ul(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:l=!1,extendedZone:s=!1,format:r="extended"}={}){return this.isValid?(l?"T":"")+Wr(this,r==="extended",t,e,i,s):null}toRFC2822(){return ul(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ul(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?xl(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let l="HH:mm:ss.SSS";return(t||e)&&(i&&(l+=" "),t?l+="z":e&&(l+="ZZ")),ul(this,l,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Jl}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",i={}){if(!this.isValid||!e.isValid)return Ye.invalid("created by diffing an invalid DateTime");const l={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=Kp(t).map(Ye.normalizeUnit),r=e.valueOf()>this.valueOf(),o=r?this:e,a=r?e:this,u=Qm(o,a,s,l);return r?u.negate():u}diffNow(e="milliseconds",t={}){return this.diff(Re.now(),e,t)}until(e){return this.isValid?dt.fromDateTimes(this,e):this}hasSame(e,t,i){if(!this.isValid)return!1;const l=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,i)<=l&&l<=s.endOf(t,i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||Re.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0;let l=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(l=e.unit,s=void 0),Br(t,this.plus(i),{...e,numeric:"always",units:l,unit:s})}toRelativeCalendar(e={}){return this.isValid?Br(e.base||Re.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Re.isDateTime))throw new At("min requires all arguments be DateTimes");return Pr(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(Re.isDateTime))throw new At("max requires all arguments be DateTimes");return Pr(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,i={}){const{locale:l=null,numberingSystem:s=null}=i,r=it.fromOpts({locale:l,numberingSystem:s,defaultToEN:!0});return Hc(r,e,t)}static fromStringExplain(e,t,i={}){return Re.fromFormatExplain(e,t,i)}static get DATE_SHORT(){return wl}static get DATE_MED(){return Vf}static get DATE_MED_WITH_WEEKDAY(){return Sp}static get DATE_FULL(){return zf}static get DATE_HUGE(){return Bf}static get TIME_SIMPLE(){return Zf}static get TIME_WITH_SECONDS(){return Yf}static get TIME_WITH_SHORT_OFFSET(){return Kf}static get TIME_WITH_LONG_OFFSET(){return Gf}static get TIME_24_SIMPLE(){return Jf}static get TIME_24_WITH_SECONDS(){return Xf}static get TIME_24_WITH_SHORT_OFFSET(){return Qf}static get TIME_24_WITH_LONG_OFFSET(){return xf}static get DATETIME_SHORT(){return ec}static get DATETIME_SHORT_WITH_SECONDS(){return tc}static get DATETIME_MED(){return nc}static get DATETIME_MED_WITH_SECONDS(){return ic}static get DATETIME_MED_WITH_WEEKDAY(){return Tp}static get DATETIME_FULL(){return lc}static get DATETIME_FULL_WITH_SECONDS(){return sc}static get DATETIME_HUGE(){return rc}static get DATETIME_HUGE_WITH_SECONDS(){return oc}}function ji(n){if(Re.isDateTime(n))return n;if(n&&n.valueOf&&qn(n.valueOf()))return Re.fromJSDate(n);if(n&&typeof n=="object")return Re.fromObject(n);throw new At(`Unknown datetime argument: ${n}, of type ${typeof n}`)}const fl=[],wh="abcdefghijklmnopqrstuvwxyz0123456789";class K{static isObject(e){return e!==null&&typeof e=="object"&&e.constructor===Object}static isEmpty(e){return typeof e>"u"||e===null||e===""||e==="00000000-0000-0000-0000-000000000000"||e==="0001-01-01 00:00:00.000Z"||e==="0001-01-01"||Array.isArray(e)&&e.length===0||K.isObject(e)&&Object.keys(e).length===0}static isInput(e){let t=e&&e.tagName?e.tagName.toLowerCase():"";return t==="input"||t==="select"||t==="textarea"||e.isContentEditable}static isFocusable(e){let t=e&&e.tagName?e.tagName.toLowerCase():"";return K.isInput(e)||t==="button"||t==="a"||t==="details"||e.tabIndex>=0}static toArray(e,t=!1){return Array.isArray(e)?e.slice():(t||!K.isEmpty(e))&&typeof e<"u"?[e]:[]}static inArray(e,t){e=Array.isArray(e)?e:[];for(let i=e.length-1;i>=0;i--)if(e[i]==t)return!0;return!1}static removeByValue(e,t){e=Array.isArray(e)?e:[];for(let i=e.length-1;i>=0;i--)if(e[i]==t){e.splice(i,1);break}}static pushUnique(e,t){K.inArray(e,t)||e.push(t)}static findByKey(e,t,i){e=Array.isArray(e)?e:[];for(let l in e)if(e[l][t]==i)return e[l];return null}static removeByKey(e,t,i){for(let l in e)e[l][t]==i&&e.splice(l,1)}static pushOrReplaceObject(e,t,i="id"){for(let l=e.length-1;l>=0;l--)if(e[l][i]==t[i]){e[l]=t;return}e.push(t)}static filterDuplicatesByKey(e,t="id"){e=Array.isArray(e)?e:[];const i={};for(const l of e)i[l[t]]=l;return Object.values(i)}static getNestedVal(e,t,i=null,l="."){let s=e||{},r=(t||"").split(l);for(const o of r){if(!K.isObject(s)&&!Array.isArray(s)||typeof s[o]>"u")return i;s=s[o]}return s}static setByPath(e,t,i,l="."){if(e===null||typeof e!="object"){console.warn("setByPath: data not an object or array.");return}let s=e,r=t.split(l),o=r.pop();for(const a of r)(!K.isObject(s)&&!Array.isArray(s)||!K.isObject(s[a])&&!Array.isArray(s[a]))&&(s[a]={}),s=s[a];s[o]=i}static deleteByPath(e,t,i="."){let l=e||{},s=(t||"").split(i),r=s.pop();for(const o of s)(!K.isObject(l)&&!Array.isArray(l)||!K.isObject(l[o])&&!Array.isArray(l[o]))&&(l[o]={}),l=l[o];Array.isArray(l)?l.splice(r,1):K.isObject(l)&&delete l[r],s.length>0&&(Array.isArray(l)&&!l.length||K.isObject(l)&&!Object.keys(l).length)&&(Array.isArray(e)&&e.length>0||K.isObject(e)&&Object.keys(e).length>0)&&K.deleteByPath(e,s.join(i),i)}static randomString(e=8,t=wh){let i="";for(let l=0;l<e;l++)i+=t.charAt(Math.floor(Math.random()*t.length));return i}static sentenize(e,t=!0){if(typeof e!="string")return"";if(e=e.trim().split("_").join(" "),e==="")return e;if(e=e[0].toUpperCase()+e.substring(1),t){let i=e[e.length-1];i!=="."&&i!=="?"&&i!=="!"&&(e+=".")}return e}static splitNonEmpty(e,t=","){const i=(e||"").split(t),l=[];for(let s of i)s=s.trim(),K.isEmpty(s)||l.push(s);return l}static joinNonEmpty(e,t=", "){const i=[];for(let l of e)l=typeof l=="string"?l.trim():"",K.isEmpty(l)||i.push(l);return i.join(t)}static getInitials(e){if(e=(e||"").split("@")[0].trim(),e.length<=2)return e.toUpperCase();const t=e.split(/[\.\_\-\ ]/);return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e[0].toUpperCase()}static getWordInfoAt(e,t){let i=e.replace(/(\r\n|\n|\r)/gm," ").split(" "),l=0,s=0,r=0;for(let o=0;o<i.length;o++){if(s=l+o,r=s+i[o].length-1,t>=s&&t<=r)return{start:s,end:r,word:i[o]};l+=i[o].length}return{}}static getDateTime(e){if(typeof e=="string"){const t={19:"yyyy-MM-dd HH:mm:ss",23:"yyyy-MM-dd HH:mm:ss.SSS",20:"yyyy-MM-dd HH:mm:ss'Z'",24:"yyyy-MM-dd HH:mm:ss.SSS'Z'"},i=t[e.length]||t[19];return Re.fromFormat(e,i,{zone:"UTC"})}return Re.fromJSDate(e)}static formatToUTCDate(e,t="yyyy-MM-dd HH:mm:ss"){return K.getDateTime(e).toUTC().toFormat(t)}static formatToLocalDate(e,t="yyyy-MM-dd HH:mm:ss"){return K.getDateTime(e).toLocal().toFormat(t)}static relativeDate(e){return K.getDateTime(e).toRelative()}static async copyToClipboard(e){var t;if(e=""+e,!(!e.length||!((t=window==null?void 0:window.navigator)!=null&&t.clipboard)))return window.navigator.clipboard.writeText(e).catch(i=>{console.warn("Failed to copy.",i)})}static yieldToMain(){return new Promise(e=>{setTimeout(e,0)})}static isDesktopPrototype(e){return e.size==""}static getPrototypeIcon(e){return K.isDesktopPrototype(e)?"iconoir-modern-tv":"iconoir-smartphone-device"}static getUserDisplayName(e){return(e==null?void 0:e.name)||(e==null?void 0:e.email)||(e!=null&&e.username?"@"+(e==null?void 0:e.username):e==null?void 0:e.id)||""}static getCommentAuthor(e){var t;return K.getUserDisplayName((t=e==null?void 0:e.expand)==null?void 0:t.user)||(e==null?void 0:e.guestEmail)||""}static sortItemsByIds(e,t){e=e||[],t=t||[];const i=[];for(const l of t){const s=e.findIndex(r=>r.id==l);s<0||(i.push(e[s]),e.splice(s,1))}for(let l of e)i.push(l);return i}static triggerEvent(e){window.dispatchEvent(new Event(e))}static getHashQueryParams(){let e="";const t=window.location.hash.indexOf("?");return t>-1&&(e=window.location.hash.substring(t+1)),Object.fromEntries(new URLSearchParams(e))}static replaceHashQueryParams(e){e=e||{};let t="",i=window.location.hash;const l=i.indexOf("?");l>-1&&(t=i.substring(l+1),i=i.substring(0,l));const s=new URLSearchParams(t);for(let a in e){const u=e[a];u===null?s.delete(a):s.set(a,u)}t=s.toString(),t!=""&&(i+="?"+t);let r=window.location.href;const o=r.indexOf("#");o>-1&&(r=r.substring(0,o)),window.location.replace(r+i)}static getProjectLinkUrl(e){let t=window.location.pathname.replace(/\/$/,"");const i=t.split("/");return i[i.length-1]=="_"&&(t=i.slice(0,i.length-1).join("/")),window.location.origin+t+"/#/"+((e==null?void 0:e.username)||"")}static generateThumb(e,t=100,i=100){return new Promise(l=>{let s=new FileReader;s.onload=function(r){let o=new Image;o.onload=function(){let a=document.createElement("canvas"),u=a.getContext("2d"),f=o.width,c=o.height;return a.width=t,a.height=i,u.drawImage(o,f>c?(f-c)/2:0,0,f>c?c:f,f>c?c:f,0,0,t,i),l(a.toDataURL(e.type))},o.src=r.target.result},s.readAsDataURL(e)})}static loadImage(e){return new Promise((t,i)=>{if(fl[e])return t({success:!0,url:e,width:fl[e].width,height:fl[e].height});let l=new Image;l.onload=()=>(fl[e]={width:l.naturalWidth,height:l.naturalHeight},t({success:!0,url:e,width:l.naturalWidth,height:l.naturalHeight})),l.onerror=()=>t({success:!1,url:e,width:0,height:0}),l.crossOrigin="Anonymous",l.src=e})}static closestFeatureEdge(e,t={},i=5){t.x=(t.x||0)<<0,t.y=(t.y||0)<<0,t.w=(t.w||e.naturalWidth)<<0,t.h=(t.h||e.naturalHeight)<<0;let l=document.createElement("canvas");l.width=t.w,l.height=t.h;let s=l.getContext("2d");s.fillStyle="white",s.fillRect(0,0,t.w,t.h),s.drawImage(e,t.x,t.y,t.w,t.h,0,0,t.w,t.h);let r=s.getImageData(0,0,t.w,t.h);for(let c=0;c<r.height;c++)for(let d=0;d<r.width;d++){let m=(d+c*r.width)*4,h=(r.data[m]+r.data[m+1]+r.data[m+2])/3;r.data[m]=h,r.data[m+1]=h,r.data[m+2]=h}let o=t.w,a=0,u=t.h,f=0;for(let c=0;c<r.height;c++)for(let d=0;d<r.width;d++){let m=(d+c*r.width)*4,h=r.data[m],g=r.data[m-4],b=r.data[m],_=r.data[m-t.w*4],C=r.data[m+t.w*4];(h>g+i||h<g-i||h>b+i||h<b-i||h>_+i||h<_-i||h>C+i||h<C-i)&&(d<o&&(o=d),d>a&&(a=d),c<u&&(u=c),c>f&&(f=c))}return o=o<t.w?o:0,u=u<t.h?u:0,a=a||t.w,f=f||t.h,{x:o,y:u,w:a-o,h:f-u}}static normalizePointerEvent(e){var t,i,l,s,r,o,a,u;typeof e.clientX>"u"&&typeof((i=(t=e.touches)==null?void 0:t[0])==null?void 0:i.clientX)<"u"&&(e.clientX=e.touches[0].clientX),typeof e.clientY>"u"&&typeof((s=(l=e.touches)==null?void 0:l[0])==null?void 0:s.clientY)<"u"&&(e.clientY=e.touches[0].clientY),typeof e.offsetX>"u"&&typeof((o=(r=e.touches)==null?void 0:r[0])==null?void 0:o.pageX)<"u"&&e.target&&(e.offsetX=e.touches[0].pageX-e.target.getBoundingClientRect().left),typeof e.offsetY>"u"&&typeof((u=(a=e.touches)==null?void 0:a[0])==null?void 0:u.pageY)<"u"&&e.target&&(e.offsetY=e.touches[0].pageY-e.target.getBoundingClientRect().top||0)}}const Fl=Ve([]);function ht(n,e=3e3){return Us(n,"success",e)}function qs(n,e=4e3){return Us(n,"error",e)}function vh(n,e=4e3){return Us(n,"warning",e)}function Us(n,e,t){t=t||4e3;const i={message:n,type:e,duration:t,timeout:setTimeout(()=>{Uc(i)},t)};Fl.update(l=>(Ws(l,i.message),K.pushOrReplaceObject(l,i,"message"),l))}function Uc(n){Fl.update(e=>(Ws(e,n),e))}function Wc(){Fl.update(n=>{for(let e of n)Ws(n,e);return[]})}function Ws(n,e){let t;typeof e=="string"?t=K.findByKey(n,"message",e):t=e,t&&(clearTimeout(t.timeout),K.removeByKey(n,"message",t.message))}const ql=Ve({});function Zt(n){ql.set(n||{})}function yh(n){ql.update(e=>(K.deleteByPath(e,n),e))}const Jn=Ve({});function Yr(n){Jn.set(n||{})}const _i=kh();function kh(n="appOptions"){let e={};const t=window.localStorage.getItem(n);if(t)try{e=JSON.parse(t)||{}}catch{}const i=[],l=o=>(i.push(o),o(e),()=>{const a=i.findIndex(u=>u===o);a>=0&&i.splice(a,1)}),s=o=>{e=o||{},window.localStorage.setItem(n,JSON.stringify(e)),i.forEach(a=>a(e))};return{subscribe:l,set:s,update:o=>s(o(e))}}const _s="pr_redirect";In.prototype.rememberPath=function(){window.localStorage.setItem(_s,window.location.hash.slice(1))};In.prototype.replaceWithRemembered=function(n="/"){const e=window.localStorage.getItem(_s);e&&window.localStorage.removeItem(_s),cn(e||n)};In.prototype.logout=function(n=!0){this.authStore.clear(),n&&cn("/login")};In.prototype.error=function(n,e=!0,t=""){if(!n||!(n instanceof Error)||n.isAbort)return;const i=(n==null?void 0:n.status)<<0,l=(n==null?void 0:n.response)||{};let s=e&&(l.message||n.message||t);if(s&&qs(s),i==0&&console.log(n),K.isEmpty(l.data)||Zt(l.data),i===401)return this.rememberPath(),this.cancelAllRequests(),this.logout();if(i===403)return this.rememberPath(),this.cancelAllRequests(),cn("/login")};In.prototype.initStore=function(n=""){const e="pr_user_auth"+n;this.authStore.storageKey!=e&&(this.authStore=new Sh(e))};class Sh extends Ff{constructor(e="pr_user_auth"){super(e),this.save(this.token,this.model)}save(e,t){super.save(e,t),t&&t.collectionName=="users"&&Yr(t)}clear(){var e;((e=this.model)==null?void 0:e.collectionName)=="users"&&Yr(null),super.clear()}}const z=new In("");z.initStore();if(z.authStore.isValid){const n=new In(z.baseUrl,z.authStore);n.collection(n.authStore.model.collectionName).authRefresh().catch(e=>{console.warn("Failed to refresh the authenticated model",e);const t=(e==null?void 0:e.status)<<0;(t==401||t==403)&&n.authStore.clear()})}function Th(n){const e=new In(z.baseUrl);return e.initStore(n),e}function Ch(n){e();function e(){z.authStore.isValid?cn("/projects"):z.logout()}return[]}class Oh extends Te{constructor(e){super(),Se(this,e,Ch,null,_e,{})}}const gs="app-tooltip";let bs,An;function Kr(n){return typeof n=="string"?{text:n,position:"bottom",hideOnClick:null}:n||{}}function Tn(){return An=An||document.querySelector("."+gs),An||(An=document.createElement("div"),An.classList.add(gs),document.body.appendChild(An)),An}function Vc(n,e,t=null){let i=Tn();if(!i.classList.contains("active")||!(e!=null&&e.text)){ws();return}i.textContent=e.text,e.sub?i.dataset.sub=e.sub:delete i.dataset.sub,i.className=gs+" active",e.class&&i.classList.add(e.class),e.position&&i.classList.add(e.position),i.style.top="0px",i.style.left="0px";let l=i.offsetHeight,s=i.offsetWidth,r=n.getBoundingClientRect(),o=0,a=0,u=5;e.position=="follow"&&t?(o=t.clientY+u,a=t.clientX+u):e.position=="left"?(o=r.top+r.height/2-l/2,a=r.left-s-u):e.position=="right"?(o=r.top+r.height/2-l/2,a=r.right+u):e.position=="top"?(o=r.top-l-u,a=r.left+r.width/2-s/2):e.position=="top-left"?(o=r.top-l-u,a=r.left):e.position=="top-right"?(o=r.top-l-u,a=r.right-s):e.position=="bottom-left"?(o=r.top+r.height+u,a=r.left):e.position=="bottom-right"?(o=r.top+r.height+u,a=r.right-s):(o=r.top+r.height+u,a=r.left+r.width/2-s/2),a+s>document.documentElement.clientWidth&&(a=document.documentElement.clientWidth-s),a=a>=0?a:0,o+l>document.documentElement.clientHeight&&(o=document.documentElement.clientHeight-l),o=o>=0?o:0,i.style.top=o+"px",i.style.left=a+"px"}function ws(){clearTimeout(bs),Tn().classList.remove("active"),Tn().activeNode=void 0}function Eh(n,e,t){Tn().activeNode=n,clearTimeout(bs);function i(){Tn().classList.add("active"),Vc(n,e,t)}e.delay?bs=setTimeout(i,e.delay):i()}function Oe(n,e){let t=Kr(e);function i(s){Eh(n,t,s)}function l(s){ws()}return!t.noAria&&t.text&&n.setAttribute("aria-description",t.text),t.position=="follow"&&n.addEventListener("mousemove",i),n.addEventListener("mouseenter",i),n.addEventListener("mouseleave",l),n.addEventListener("focusin",i),n.addEventListener("blur",l),(t.hideOnClick===!0||t.hideOnClick===null&&K.isFocusable(n))&&n.addEventListener("click",l),Tn(),{update(s){var r,o;t=Kr(s),!t.noAria&&t.text?n.setAttribute("aria-description",t.text):n.removeAttribute("aria-description"),t.position=="follow"?n.addEventListener("mousemove",i):n.removeEventListener("mousemove",i),(o=(r=Tn())==null?void 0:r.activeNode)!=null&&o.contains(n)&&Vc(n,t)},destroy(){var s,r;(r=(s=Tn())==null?void 0:s.activeNode)!=null&&r.contains(n)&&ws(),n.removeEventListener("mousemove",i),n.removeEventListener("mouseenter",i),n.removeEventListener("focusin",i),n.removeEventListener("mouseleave",l),n.removeEventListener("blur",l),n.removeEventListener("click",l)}}}function Gr(n){let e;return{c(){e=w("span"),e.textContent="Presentator",p(e,"class","txt")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function Lh(n){let e,t,i,l,s,r,o,a=n[0]&&Gr();return{c(){e=w("a"),t=w("img"),l=I(),a&&a.c(),Wn(t.src,i="./images/logo.svg")||p(t,"src",i),p(t,"width","30"),p(t,"height","37"),p(t,"alt","Presentator logo"),p(e,"href","/"),p(e,"class",s="app-logo "+n[1]),p(e,"draggable","false")},m(u,f){k(u,e,f),v(e,t),v(e,l),a&&a.m(e,null),r||(o=we(wi.call(null,e)),r=!0)},p(u,[f]){u[0]?a||(a=Gr(),a.c(),a.m(e,null)):a&&(a.d(1),a=null),f&2&&s!==(s="app-logo "+u[1])&&p(e,"class",s)},i:X,o:X,d(u){u&&y(e),a&&a.d(),r=!1,o()}}}function Ih(n,e,t){let{withText:i=!0}=e,{class:l=""}=e;return n.$$set=s=>{"withText"in s&&t(0,i=s.withText),"class"in s&&t(1,l=s.class)},[i,l]}class Vs extends Te{constructor(e){super(),Se(this,e,Ih,Lh,_e,{withText:0,class:1})}}function zs(n){const e=n-1;return e*e*e+1}function vs(n,{delay:e=0,duration:t=400,easing:i=Zi}={}){const l=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:s=>`opacity: ${s*l}`}}function En(n,{delay:e=0,duration:t=400,easing:i=zs,x:l=0,y:s=0,opacity:r=0}={}){const o=getComputedStyle(n),a=+o.opacity,u=o.transform==="none"?"":o.transform,f=a*(1-r),[c,d]=ar(l),[m,h]=ar(s);return{delay:e,duration:t,easing:i,css:(g,b)=>`
			transform: ${u} translate(${(1-g)*c}${d}, ${(1-g)*m}${h});
			opacity: ${a-f*b}`}}function Ct(n,{delay:e=0,duration:t=400,easing:i=zs,axis:l="y"}={}){const s=getComputedStyle(n),r=+s.opacity,o=l==="y"?"height":"width",a=parseFloat(s[o]),u=l==="y"?["top","bottom"]:["left","right"],f=u.map(_=>`${_[0].toUpperCase()}${_.slice(1)}`),c=parseFloat(s[`padding${f[0]}`]),d=parseFloat(s[`padding${f[1]}`]),m=parseFloat(s[`margin${f[0]}`]),h=parseFloat(s[`margin${f[1]}`]),g=parseFloat(s[`border${f[0]}Width`]),b=parseFloat(s[`border${f[1]}Width`]);return{delay:e,duration:t,easing:i,css:_=>`overflow: hidden;opacity: ${Math.min(_*20,1)*r};${o}: ${_*a}px;padding-${u[0]}: ${_*c}px;padding-${u[1]}: ${_*d}px;margin-${u[0]}: ${_*m}px;margin-${u[1]}: ${_*h}px;border-${u[0]}-width: ${_*g}px;border-${u[1]}-width: ${_*b}px;`}}function Jr(n){let e,t,i;const l=n[21].default,s=lt(l,n,n[20],null);return{c(){e=w("div"),s&&s.c(),p(e,"class",n[1]),Z(e,"active",n[0])},m(r,o){k(r,e,o),s&&s.m(e,null),n[22](e),i=!0},p(r,o){s&&s.p&&(!i||o[0]&1048576)&&rt(s,l,r,r[20],i?st(l,r[20],o,null):ot(r[20]),null),(!i||o[0]&2)&&p(e,"class",r[1]),(!i||o[0]&3)&&Z(e,"active",r[0])},i(r){i||(E(s,r),r&&vt(()=>{i&&(t||(t=ut(e,En,{duration:150,y:3},!0)),t.run(1))}),i=!0)},o(r){P(s,r),r&&(t||(t=ut(e,En,{duration:150,y:3},!1)),t.run(0)),i=!1},d(r){r&&y(e),s&&s.d(r),n[22](null),r&&t&&t.end()}}}function Ph(n){let e,t,i,l,s=n[0]&&Jr(n);return{c(){e=w("div"),s&&s.c(),p(e,"class","toggler-container"),p(e,"tabindex","-1")},m(r,o){k(r,e,o),s&&s.m(e,null),n[23](e),t=!0,i||(l=[$(window,"mousedown",n[5]),$(window,"click",n[6]),$(window,"keydown",n[4]),$(window,"focusin",n[7])],i=!0)},p(r,o){r[0]?s?(s.p(r,o),o[0]&1&&E(s,1)):(s=Jr(r),s.c(),E(s,1),s.m(e,null)):s&&(ae(),P(s,1,1,()=>{s=null}),ue())},i(r){t||(E(s),t=!0)},o(r){P(s),t=!1},d(r){r&&y(e),s&&s.d(),n[23](null),i=!1,me(l)}}}function jh(n,e,t){let{$$slots:i={},$$scope:l}=e,{trigger:s=void 0}=e,{active:r=!1}=e,{escHide:o=!0}=e,{focusHide:a=!0}=e,{autoScroll:u=!0}=e,{disableHide:f=!1}=e,{closableClass:c="closable"}=e,{closableToggle:d=!0}=e,{class:m=""}=e,h,g,b,_,C=!1;const L=ft();function T(){f||O()}function O(){t(0,r=!1),C=!1,clearTimeout(_)}function S(){t(0,r=!0),clearTimeout(_),_=setTimeout(()=>{u&&(g!=null&&g.scrollIntoViewIfNeeded?g==null||g.scrollIntoViewIfNeeded():g!=null&&g.scrollIntoView&&(g==null||g.scrollIntoView({behavior:"smooth",block:"nearest"})))},180)}function j(){r?T():S()}function H(R){return!h||R.classList.contains(c)||(b==null?void 0:b.contains(R))&&!h.contains(R)||h.contains(R)&&R.closest&&R.closest("."+c)}function D(R){(!r||d&&H(R.target))&&(R.stopPropagation(),j())}function A(R){(R.code==="Enter"||R.code==="Space")&&(!r||H(R.target))&&j()}function M(R){r&&o&&R.code==="Escape"&&!K.isInput(R.target)&&(R.preventDefault(),T())}function Y(R){r&&!(h!=null&&h.contains(R.target))?C=!0:C&&(C=!1)}function G(R){r&&C&&!(h!=null&&h.contains(R.target))&&!(b!=null&&b.contains(R.target))&&T()}function B(R){a&&(Y(R),G(R))}function N(R){V(),h==null||h.addEventListener("click",D),t(19,b=R||(h==null?void 0:h.parentNode)),b==null||b.addEventListener("click",D),b==null||b.addEventListener("keydown",A)}function V(){var R;clearTimeout(_),h==null||h.removeEventListener("click",D),(R=b==null?void 0:b.classList)==null||R.remove("active"),b==null||b.removeEventListener("click",D),b==null||b.removeEventListener("keydown",A)}_n(()=>(N(),()=>V()));function ee(R){le[R?"unshift":"push"](()=>{g=R,t(3,g)})}function J(R){le[R?"unshift":"push"](()=>{h=R,t(2,h)})}return n.$$set=R=>{"trigger"in R&&t(8,s=R.trigger),"active"in R&&t(0,r=R.active),"escHide"in R&&t(9,o=R.escHide),"focusHide"in R&&t(10,a=R.focusHide),"autoScroll"in R&&t(11,u=R.autoScroll),"disableHide"in R&&t(12,f=R.disableHide),"closableClass"in R&&t(13,c=R.closableClass),"closableToggle"in R&&t(14,d=R.closableToggle),"class"in R&&t(1,m=R.class),"$$scope"in R&&t(20,l=R.$$scope)},n.$$.update=()=>{var R,ce;n.$$.dirty[0]&260&&h&&N(s),n.$$.dirty[0]&524289&&(r?((R=b==null?void 0:b.classList)==null||R.add("active"),L("show")):((ce=b==null?void 0:b.classList)==null||ce.remove("active"),L("hide")))},[r,m,h,g,M,Y,G,B,s,o,a,u,f,c,d,T,O,S,j,b,l,i,ee,J]}class Nt extends Te{constructor(e){super(),Se(this,e,jh,Ph,_e,{trigger:8,active:0,escHide:9,focusHide:10,autoScroll:11,disableHide:12,closableClass:13,closableToggle:14,class:1,hide:15,forceHide:16,show:17,toggle:18},null,[-1,-1])}get hide(){return this.$$.ctx[15]}get forceHide(){return this.$$.ctx[16]}get show(){return this.$$.ctx[17]}get toggle(){return this.$$.ctx[18]}}const Nh=n=>({}),Xr=n=>({});function Ah(n){let e;const t=n[6].placeholder,i=lt(t,n,n[5],Xr),l=i||$h(n);return{c(){l&&l.c()},m(s,r){l&&l.m(s,r),e=!0},p(s,r){i?i.p&&(!e||r&32)&&rt(i,t,s,s[5],e?st(t,s[5],r,Nh):ot(s[5]),Xr):l&&l.p&&(!e||r&1)&&l.p(s,e?r:-1)},i(s){e||(E(l,s),e=!0)},o(s){P(l,s),e=!1},d(s){l&&l.d(s)}}}function Dh(n){let e,t,i;return{c(){var l,s;e=w("img"),Wn(e.src,t=n[2])||p(e,"src",t),p(e,"draggable","false"),p(e,"alt",i=(((l=n[0])==null?void 0:l.name)||((s=n[0])==null?void 0:s.username))+" avatar")},m(l,s){k(l,e,s)},p(l,s){var r,o;s&4&&!Wn(e.src,t=l[2])&&p(e,"src",t),s&1&&i!==(i=(((r=l[0])==null?void 0:r.name)||((o=l[0])==null?void 0:o.username))+" avatar")&&p(e,"alt",i)},i:X,o:X,d(l){l&&y(e)}}}function Mh(n){let e;return{c(){e=w("i"),p(e,"class","iconoir-user")},m(t,i){k(t,e,i)},p:X,d(t){t&&y(e)}}}function Hh(n){let e,t=K.getInitials(n[0].name||n[0].email)+"",i;return{c(){e=w("span"),i=x(t),p(e,"class","txt")},m(l,s){k(l,e,s),v(e,i)},p(l,s){s&1&&t!==(t=K.getInitials(l[0].name||l[0].email)+"")&&ke(i,t)},d(l){l&&y(e)}}}function $h(n){let e;function t(s,r){var o,a;return(o=s[0])!=null&&o.name||(a=s[0])!=null&&a.email?Hh:Mh}let i=t(n),l=i(n);return{c(){l.c(),e=Ne()},m(s,r){l.m(s,r),k(s,e,r)},p(s,r){i===(i=t(s))&&l?l.p(s,r):(l.d(1),l=i(s),l&&(l.c(),l.m(e.parentNode,e)))},d(s){s&&y(e),l.d(s)}}}function Rh(n){let e,t,i,l,s,r;const o=[Dh,Ah],a=[];function u(h,g){return h[2]?0:1}t=u(n),i=a[t]=o[t](n);const f=n[6].default,c=lt(f,n,n[5],null);let d=[{class:s="thumb thumb-circle "+n[1]},n[3]],m={};for(let h=0;h<d.length;h+=1)m=Me(m,d[h]);return{c(){e=w("figure"),i.c(),l=I(),c&&c.c(),zn(e,m)},m(h,g){k(h,e,g),a[t].m(e,null),v(e,l),c&&c.m(e,null),r=!0},p(h,[g]){let b=t;t=u(h),t===b?a[t].p(h,g):(ae(),P(a[b],1,1,()=>{a[b]=null}),ue(),i=a[t],i?i.p(h,g):(i=a[t]=o[t](h),i.c()),E(i,1),i.m(e,l)),c&&c.p&&(!r||g&32)&&rt(c,f,h,h[5],r?st(f,h[5],g,null):ot(h[5]),null),zn(e,m=_t(d,[(!r||g&2&&s!==(s="thumb thumb-circle "+h[1]))&&{class:s},g&8&&h[3]]))},i(h){r||(E(i),E(c,h),r=!0)},o(h){P(i),P(c,h),r=!1},d(h){h&&y(e),a[t].d(),c&&c.d(h)}}}function Fh(n,e,t){const i=["user","file","class"];let l=at(e,i),{$$slots:s={},$$scope:r}=e,{user:o}=e,{file:a=null}=e,{class:u=""}=e,f="";async function c(){a?t(2,f=await K.generateThumb(a)):o!=null&&o.avatar?t(2,f=z.files.getUrl(o,o.avatar,{thumb:"100x100"})):t(2,f="")}return n.$$set=d=>{e=Me(Me({},e),Bt(d)),t(3,l=at(e,i)),"user"in d&&t(0,o=d.user),"file"in d&&t(4,a=d.file),"class"in d&&t(1,u=d.class),"$$scope"in d&&t(5,r=d.$$scope)},n.$$.update=()=>{n.$$.dirty&17&&(a||o)&&c()},[o,u,f,l,a,r,s]}class Xi extends Te{constructor(e){super(),Se(this,e,Fh,Rh,_e,{user:0,file:4,class:1})}}const Ft=Ve([]),Bn=Ve(""),li=Ve(!1);function Bs(){Ft.set([]),Bn.set(""),li.set(!1)}const Tt=jt([Ft,Bn],([n,e])=>n.length?e&&n.find(t=>t.id==e)||n[n.length-1]:null);Tt.set=n=>{K.isObject(n)?zi(n,!0):Bn.set(n)};function zi(n,e=!1){n&&(Ft.update(t=>(K.pushOrReplaceObject(t,n),t)),e&&Bn.set(n.id))}function qh(n){n&&(Ft.update(e=>(K.removeByKey(e,"id",n.id),e)),Bn.update(e=>e==n.id?"":e))}const Zs=Ve({});function Et(n,e,t){return new Promise(i=>{Zs.set({text:n,yesCallback:async()=>{e&&await e(),i()},noCallback:async()=>{t&&await t(),i()}})})}function zc(){Zs.set({})}const Ce={preview:"preview",hotspots:"hotspots",comments:"comments"};Object.freeze(Ce);const Zn=Ve(""),Bi=Ve(""),Sl=Ve(""),pt=Ve([]),si=Ve(""),gi=Ve(null),Ai=Ve(!1),Ti=Ve(Ce.preview),Ci=Ve(!1),Un=Ve(1),Tl=Ve(!1),Cl=Ve(!0);function Ys(){Ks(),pt.set([]),Bi.set(""),Zn.set(""),Sl.set(""),si.set(""),gi.set(null),Ai.set(!1),Un.set(1),Tl.set(!1),Cl.set(!0)}const Je=jt([pt,Zn],([n,e])=>n.length?e&&n.find(t=>t.id==e)||n[0]:null);Je.set=n=>{Bi.set(Vn(Zn)||null),gi.set(null),K.isObject(n)?Ln(n,!0):Zn.set(n)};const Bc=jt([pt,Bi],([n,e])=>!n.length||!e?null:n.find(t=>t.id==e));Bc.set=n=>{K.isObject(n)?(Ln(n),Bi.set(n.id)):Bi.set(n)};const ri=jt([pt,Sl],([n,e])=>!n.length||!e?null:n.find(t=>t.id==e));ri.set=n=>{K.isObject(n)?(Ln(n),Sl.set(n.id)):Sl.set(n)};function ys(n=1){const e=Vn(pt)||[];if(!e.length)return null;const t=Vn(Zn)||null;let i=e.findIndex(l=>l.id==t)+n;return i<0?i=0:i>=e.length&&(i=e.length-1),e[i]}function Sn(n=1){const e=ys(n);if(!(e!=null&&e.id))return;const t=Vn(Zn)||null;(t==null?void 0:t.id)!=e.id&&Je.set(e.id)}function Ln(n,e=!1){n&&(pt.update(t=>(K.pushOrReplaceObject(t,n),t)),e&&Je.set(n.id))}function ks(n){n&&pt.update(e=>(K.removeByKey(e,"id",n.id),Ft.update(t=>{var l;const i=t.find(s=>s.id==n.prototype);return(l=i==null?void 0:i.screensOrder)!=null&&l.length&&K.removeByValue(i.screensOrder,i.id),t}),Zn.update(t=>t==n.id?"":t),e))}let ln;async function Zc(n){return ln==null||ln(),z.collection("screens").subscribe("*",e=>{e.action==="delete"?ks(e.record):Ln(e.record)},{filter:`prototype="${n}"`}).then(e=>(ln=e,e)).catch(e=>{console.warn("failed to init screens subscription:",e)})}function Ol(n){var t,i;if(!(n!=null&&n.id))return 0;let e=(i=(t=Vn(Tt))==null?void 0:t.screensOrder)==null?void 0:i.indexOf(n.id);return e<0&&(e=Vn(pt).findIndex(l=>l.id==n.id)),e+1}const Yc="fitToScreen";function Kc(){Ci.update(n=>(n=!n,window.localStorage.setItem(Yc,n?1:0),K.replaceHashQueryParams({fit:n?1:0}),n))}function Gc(){const n=K.getHashQueryParams();let e=typeof n.fit<"u"?n.fit:window.localStorage.getItem(Yc);e=!!(e<<0),Ci.set(e),K.replaceHashQueryParams({fit:e?1:0})}function Ks(){const n=K.getHashQueryParams();Wt(n.mode)}function Wt(n){(!n||!Ce[n])&&(n=Ce.preview),Ti.set(n),K.replaceHashQueryParams({mode:n})}async function Gs(n,e){return Et("Screen replacement could result in hotspots and comments misplacement if the new screen image has different dimensions from the original. Do you still want to proceed?",async()=>Uh(n,e))}async function Uh(n,e){if(!e||!(n!=null&&n.id)||n.isReplacing)return;n.isReplacing=!0;const t=new FormData;t.append("file",e),t.append("title",e.name.split(".").slice(0,-1).join(".")||e.name);try{const i=await z.collection("screens").update(n.id,t,{requestKey:"replace"+n.id});n.isReplacing=!1,Ln(i)}catch(i){i.isAbort||(n.isReplacing=!1,z.error(i))}}const gn=Ve([]),Jc=jt([Je,gn],([n,e])=>n!=null&&n.id?e.filter(t=>{var i,l;return((l=(i=t.expand)==null?void 0:i.comment)==null?void 0:l.screen)==n.id}):[]);function Js(n){gn.update(e=>(K.removeByKey(e,"id",(n==null?void 0:n.id)||n),e))}function Wh(n){n.read||gn.update(e=>(K.pushOrReplaceObject(e,n),e))}const Xc="comment.screen.prototype.project,comment.user";async function Vh(){try{const n=await z.collection("notifications").getFullList({filter:"read=false",expand:Xc});return gn.set(n),zh()}catch(n){n.isAbort||console.warn("loadNotifications:",n)}}let Rn;async function zh(){return Rn==null||Rn(),z.collection("notifications").subscribe("*",async n=>{n.action=="delete"||n.record.read?Js(n.record):Wh(n.record)},{expand:Xc}).then(n=>(Rn=n,n)).catch(n=>{n.isAbort||console.log("notifications subscription failed:",n)})}const Bh=n=>({}),Qr=n=>({});function xr(n,e,t){const i=n.slice();return i[51]=e[t],i}const Zh=n=>({}),eo=n=>({});function to(n,e,t){const i=n.slice();return i[51]=e[t],i[55]=t,i}function no(n){let e,t,i;return{c(){e=w("div"),t=x(n[2]),i=I(),p(e,"class","block txt-placeholder"),Z(e,"link-hint",!n[5]&&!n[6])},m(l,s){k(l,e,s),v(e,t),v(e,i)},p(l,s){s[0]&4&&ke(t,l[2]),s[0]&96&&Z(e,"link-hint",!l[5]&&!l[6])},d(l){l&&y(e)}}}function Yh(n){let e,t=n[51]+"",i;return{c(){e=w("span"),i=x(t),p(e,"class","txt")},m(l,s){k(l,e,s),v(e,i)},p(l,s){s[0]&1&&t!==(t=l[51]+"")&&ke(i,t)},i:X,o:X,d(l){l&&y(e)}}}function Kh(n){let e,t,i;const l=[{item:n[51]},n[12]];var s=n[11];function r(o,a){let u={};for(let f=0;f<l.length;f+=1)u=Me(u,l[f]);return a!==void 0&&a[0]&4097&&(u=Me(u,_t(l,[a[0]&1&&{item:o[51]},a[0]&4096&&Lt(o[12])]))),{props:u}}return s&&(e=On(s,r(n))),{c(){e&&U(e.$$.fragment),t=Ne()},m(o,a){e&&F(e,o,a),k(o,t,a),i=!0},p(o,a){if(a[0]&2048&&s!==(s=o[11])){if(e){ae();const u=e;P(u.$$.fragment,1,0,()=>{q(u,1)}),ue()}s?(e=On(s,r(o,a)),U(e.$$.fragment),E(e.$$.fragment,1),F(e,t.parentNode,t)):e=null}else if(s){const u=a[0]&4097?_t(l,[a[0]&1&&{item:o[51]},a[0]&4096&&Lt(o[12])]):{};e.$set(u)}},i(o){i||(e&&E(e.$$.fragment,o),i=!0)},o(o){e&&P(e.$$.fragment,o),i=!1},d(o){o&&y(t),e&&q(e,o)}}}function io(n){let e,t,i;function l(){return n[38](n[51])}return{c(){e=w("span"),e.innerHTML='<i class="iconoir-xmark"></i>',p(e,"class","clear")},m(s,r){k(s,e,r),t||(i=[we(Oe.call(null,e,"Clear")),$(e,"click",Ke(be(l)))],t=!0)},p(s,r){n=s},d(s){s&&y(e),t=!1,me(i)}}}function lo(n){let e,t,i,l,s,r;const o=[Kh,Yh],a=[];function u(c,d){return c[11]?0:1}t=u(n),i=a[t]=o[t](n);let f=(n[4]||n[9])&&io(n);return{c(){e=w("div"),i.c(),l=I(),f&&f.c(),s=I(),p(e,"class","option")},m(c,d){k(c,e,d),a[t].m(e,null),v(e,l),f&&f.m(e,null),v(e,s),r=!0},p(c,d){let m=t;t=u(c),t===m?a[t].p(c,d):(ae(),P(a[m],1,1,()=>{a[m]=null}),ue(),i=a[t],i?i.p(c,d):(i=a[t]=o[t](c),i.c()),E(i,1),i.m(e,l)),c[4]||c[9]?f?f.p(c,d):(f=io(c),f.c(),f.m(e,s)):f&&(f.d(1),f=null)},i(c){r||(E(i),r=!0)},o(c){P(i),r=!1},d(c){c&&y(e),a[t].d(),f&&f.d()}}}function so(n){let e,t,i;function l(r){n[44](r)}let s={class:"dropdown dropdown-block options-dropdown "+n[8]+" "+(n[7]?"dropdown-upside":""),trigger:n[21],$$slots:{default:[Xh]},$$scope:{ctx:n}};return n[22]!==void 0&&(s.active=n[22]),e=new Nt({props:s}),n[43](e),le.push(()=>De(e,"active",l)),e.$on("show",n[28]),e.$on("hide",n[45]),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};o[0]&384&&(a.class="dropdown dropdown-block options-dropdown "+r[8]+" "+(r[7]?"dropdown-upside":"")),o[0]&2097152&&(a.trigger=r[21]),o[0]&25486346|o[1]&65536&&(a.$$scope={dirty:o,ctx:r}),!t&&o[0]&4194304&&(t=!0,a.active=r[22],Ae(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){n[43](null),q(e,r)}}}function ro(n){let e,t,i,l,s,r,o,a,u=n[18].length&&oo(n);return{c(){e=w("div"),t=w("label"),i=w("div"),i.innerHTML='<i class="iconoir-search"></i>',l=I(),s=w("input"),r=I(),u&&u.c(),p(i,"class","addon"),s.autofocus=!0,p(s,"type","text"),p(s,"placeholder",n[3]),p(t,"class","field-group"),p(e,"class","form-field form-field-sm options-search")},m(f,c){k(f,e,c),v(e,t),v(t,i),v(t,l),v(t,s),ye(s,n[18]),v(t,r),u&&u.m(t,null),s.focus(),o||(a=$(s,"input",n[40]),o=!0)},p(f,c){c[0]&8&&p(s,"placeholder",f[3]),c[0]&262144&&s.value!==f[18]&&ye(s,f[18]),f[18].length?u?u.p(f,c):(u=oo(f),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},d(f){f&&y(e),u&&u.d(),o=!1,a()}}}function oo(n){let e,t,i,l;return{c(){e=w("div"),t=w("button"),t.innerHTML='<i class="iconoir-xmark"></i>',p(t,"type","button"),p(t,"class","btn btn-xs btn-circle btn-hint btn-transparent clear"),p(e,"class","addon suffix")},m(s,r){k(s,e,r),v(e,t),i||(l=$(t,"click",Ke(be(n[25]))),i=!0)},p:X,d(s){s&&y(e),i=!1,l()}}}function ao(n){let e,t=n[1]&&uo(n);return{c(){t&&t.c(),e=Ne()},m(i,l){t&&t.m(i,l),k(i,e,l)},p(i,l){i[1]?t?t.p(i,l):(t=uo(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&y(e),t&&t.d(i)}}}function uo(n){let e,t;return{c(){e=w("div"),t=x(n[1]),p(e,"class","txt-missing")},m(i,l){k(i,e,l),v(e,t)},p(i,l){l[0]&2&&ke(t,i[1])},d(i){i&&y(e)}}}function Gh(n){let e=n[51]+"",t;return{c(){t=x(e)},m(i,l){k(i,t,l)},p(i,l){l[0]&16777216&&e!==(e=i[51]+"")&&ke(t,e)},i:X,o:X,d(i){i&&y(t)}}}function Jh(n){let e,t,i;const l=[{item:n[51]},n[14]];var s=n[13];function r(o,a){let u={};for(let f=0;f<l.length;f+=1)u=Me(u,l[f]);return a!==void 0&&a[0]&16793600&&(u=Me(u,_t(l,[a[0]&16777216&&{item:o[51]},a[0]&16384&&Lt(o[14])]))),{props:u}}return s&&(e=On(s,r(n))),{c(){e&&U(e.$$.fragment),t=Ne()},m(o,a){e&&F(e,o,a),k(o,t,a),i=!0},p(o,a){if(a[0]&8192&&s!==(s=o[13])){if(e){ae();const u=e;P(u.$$.fragment,1,0,()=>{q(u,1)}),ue()}s?(e=On(s,r(o,a)),U(e.$$.fragment),E(e.$$.fragment,1),F(e,t.parentNode,t)):e=null}else if(s){const u=a[0]&16793600?_t(l,[a[0]&16777216&&{item:o[51]},a[0]&16384&&Lt(o[14])]):{};e.$set(u)}},i(o){i||(e&&E(e.$$.fragment,o),i=!0)},o(o){e&&P(e.$$.fragment,o),i=!1},d(o){o&&y(t),e&&q(e,o)}}}function fo(n){let e,t,i,l,s,r,o;const a=[Jh,Gh],u=[];function f(m,h){return m[13]?0:1}t=f(n),i=u[t]=a[t](n);function c(...m){return n[41](n[51],...m)}function d(...m){return n[42](n[51],...m)}return{c(){e=w("div"),i.c(),l=I(),p(e,"tabindex","0"),p(e,"class","dropdown-item option"),Z(e,"closable",n[10]),Z(e,"selected",n[23](n[51]))},m(m,h){k(m,e,h),u[t].m(e,null),v(e,l),s=!0,r||(o=[$(e,"click",c),$(e,"keydown",d)],r=!0)},p(m,h){n=m;let g=t;t=f(n),t===g?u[t].p(n,h):(ae(),P(u[g],1,1,()=>{u[g]=null}),ue(),i=u[t],i?i.p(n,h):(i=u[t]=a[t](n),i.c()),E(i,1),i.m(e,l)),(!s||h[0]&1024)&&Z(e,"closable",n[10]),(!s||h[0]&25165824)&&Z(e,"selected",n[23](n[51]))},i(m){s||(E(i),s=!0)},o(m){P(i),s=!1},d(m){m&&y(e),u[t].d(),r=!1,me(o)}}}function Xh(n){let e,t,i,l,s,r=n[15]&&ro(n);const o=n[37].beforeOptions,a=lt(o,n,n[47],eo);let u=Ie(n[24]),f=[];for(let g=0;g<u.length;g+=1)f[g]=fo(xr(n,u,g));const c=g=>P(f[g],1,1,()=>{f[g]=null});let d=null;u.length||(d=ao(n));const m=n[37].afterOptions,h=lt(m,n,n[47],Qr);return{c(){r&&r.c(),e=I(),a&&a.c(),t=I(),i=w("div");for(let g=0;g<f.length;g+=1)f[g].c();d&&d.c(),l=I(),h&&h.c(),p(i,"class","options-list")},m(g,b){r&&r.m(g,b),k(g,e,b),a&&a.m(g,b),k(g,t,b),k(g,i,b);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(i,null);d&&d.m(i,null),k(g,l,b),h&&h.m(g,b),s=!0},p(g,b){if(g[15]?r?r.p(g,b):(r=ro(g),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a&&a.p&&(!s||b[1]&65536)&&rt(a,o,g,g[47],s?st(o,g[47],b,Zh):ot(g[47]),eo),b[0]&226518018){u=Ie(g[24]);let _;for(_=0;_<u.length;_+=1){const C=xr(g,u,_);f[_]?(f[_].p(C,b),E(f[_],1)):(f[_]=fo(C),f[_].c(),E(f[_],1),f[_].m(i,null))}for(ae(),_=u.length;_<f.length;_+=1)c(_);ue(),!u.length&&d?d.p(g,b):u.length?d&&(d.d(1),d=null):(d=ao(g),d.c(),d.m(i,null))}h&&h.p&&(!s||b[1]&65536)&&rt(h,m,g,g[47],s?st(m,g[47],b,Bh):ot(g[47]),Qr)},i(g){if(!s){E(a,g);for(let b=0;b<u.length;b+=1)E(f[b]);E(h,g),s=!0}},o(g){P(a,g),f=f.filter(Boolean);for(let b=0;b<f.length;b+=1)P(f[b]);P(h,g),s=!1},d(g){g&&(y(e),y(t),y(i),y(l)),r&&r.d(g),a&&a.d(g),xt(f,g),d&&d.d(),h&&h.d(g)}}}function Qh(n){let e,t,i,l,s,r,o=Ie(K.toArray(n[0])),a=[];for(let d=0;d<o.length;d+=1)a[d]=lo(to(n,o,d));const u=d=>P(a[d],1,1,()=>{a[d]=null});let f=null;o.length||(f=no(n));let c=!n[5]&&!n[6]&&so(n);return{c(){e=w("div"),t=w("div");for(let d=0;d<a.length;d+=1)a[d].c();f&&f.c(),l=I(),c&&c.c(),p(t,"tabindex",i=n[5]||n[6]?"-1":"0"),p(t,"class","selected-container"),Z(t,"disabled",n[5]),Z(t,"readonly",n[6]),p(e,"class",s="select "+n[16]),Z(e,"active",n[22]),Z(e,"upside",n[7]),Z(e,"multiple",n[4]),Z(e,"disabled",n[5]),Z(e,"readonly",n[6])},m(d,m){k(d,e,m),v(e,t);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(t,null);f&&f.m(t,null),n[39](t),v(e,l),c&&c.m(e,null),n[46](e),r=!0},p(d,m){if(m[0]&137845){o=Ie(K.toArray(d[0]));let h;for(h=0;h<o.length;h+=1){const g=to(d,o,h);a[h]?(a[h].p(g,m),E(a[h],1)):(a[h]=lo(g),a[h].c(),E(a[h],1),a[h].m(t,null))}for(ae(),h=o.length;h<a.length;h+=1)u(h);ue(),!o.length&&f?f.p(d,m):o.length?f&&(f.d(1),f=null):(f=no(d),f.c(),f.m(t,null))}(!r||m[0]&96&&i!==(i=d[5]||d[6]?"-1":"0"))&&p(t,"tabindex",i),(!r||m[0]&32)&&Z(t,"disabled",d[5]),(!r||m[0]&64)&&Z(t,"readonly",d[6]),!d[5]&&!d[6]?c?(c.p(d,m),m[0]&96&&E(c,1)):(c=so(d),c.c(),E(c,1),c.m(e,null)):c&&(ae(),P(c,1,1,()=>{c=null}),ue()),(!r||m[0]&65536&&s!==(s="select "+d[16]))&&p(e,"class",s),(!r||m[0]&4259840)&&Z(e,"active",d[22]),(!r||m[0]&65664)&&Z(e,"upside",d[7]),(!r||m[0]&65552)&&Z(e,"multiple",d[4]),(!r||m[0]&65568)&&Z(e,"disabled",d[5]),(!r||m[0]&65600)&&Z(e,"readonly",d[6])},i(d){if(!r){for(let m=0;m<o.length;m+=1)E(a[m]);E(c),r=!0}},o(d){a=a.filter(Boolean);for(let m=0;m<a.length;m+=1)P(a[m]);P(c),r=!1},d(d){d&&y(e),xt(a,d),f&&f.d(),n[39](null),c&&c.d(),n[46](null)}}}function xh(n,e){let t=(""+e).replace(/\s+/g,"").toLowerCase(),i=n;try{typeof n=="object"&&n!==null&&(i=JSON.stringify(n))}catch{}return(""+i).replace(/\s+/g,"").toLowerCase().includes(t)}function e1(n,e,t){let i,l,{$$slots:s={},$$scope:r}=e,{id:o=""}=e,{noOptionsText:a="No options found"}=e,{selectPlaceholder:u="Select"}=e,{searchPlaceholder:f="Search..."}=e,{items:c=[]}=e,{multiple:d=!1}=e,{disabled:m=!1}=e,{readonly:h=!1}=e,{upside:g=!1}=e,{dropdownClass:b=""}=e,{selected:_=d?[]:void 0}=e,{toggle:C=d}=e,{closable:L=!0}=e,{labelComponent:T=void 0}=e,{labelComponentProps:O={}}=e,{optionComponent:S=void 0}=e,{optionComponentProps:j={}}=e,{searchable:H=!1}=e,{searchFunc:D=void 0}=e,{class:A=""}=e,M,Y="",G,B,N=!1;function V(te){if(K.isEmpty(_))return;let Ze=K.toArray(_);K.inArray(Ze,te)&&(K.removeByValue(Ze,te),t(0,_=Ze)),G==null||G.dispatchEvent(new CustomEvent("change",{detail:_,bubbles:!0}))}function ee(te){if(d){let Ze=K.toArray(_);K.inArray(Ze,te)||t(0,_=[...Ze,te])}else t(0,_=te);G==null||G.dispatchEvent(new CustomEvent("change",{detail:_,bubbles:!0}))}function J(te){return l(te)?V(te):ee(te)}function R(){t(0,_=d?[]:void 0)}function ce(){M!=null&&M.show&&(M==null||M.show())}function oe(){M!=null&&M.hide&&(M==null||M.hide())}function pe(){if(K.isEmpty(_)||K.isEmpty(c))return;let te=K.toArray(_),Ze=[];for(const fe of te)K.inArray(c,fe)||Ze.push(fe);if(Ze.length){for(const fe of Ze)K.removeByValue(te,fe);t(0,_=d?te:te[0])}}function Ee(){t(18,Y="")}function tt(te,Ze){te=te||[];const fe=D||xh;return te.filter(Pe=>fe(Pe,Ze))||[]}function se(te,Ze){te.preventDefault(),C&&d?J(Ze):ee(Ze)}function ge(te,Ze){(te.code==="Enter"||te.code==="Space")&&(se(te,Ze),L&&oe())}function Fe(){Ee(),setTimeout(()=>{const te=G==null?void 0:G.querySelector(".dropdown-item.option.selected");te&&(te.focus(),te.scrollIntoView({block:"nearest"}))},0)}function ne(te){te.stopPropagation(),!h&&!m&&(M==null||M.toggle())}_n(()=>{const te=document.querySelectorAll(`label[for="${o}"]`);for(const Ze of te)Ze.addEventListener("click",ne);return()=>{for(const Ze of te)Ze.removeEventListener("click",ne)}});const de=te=>V(te);function W(te){le[te?"unshift":"push"](()=>{B=te,t(21,B)})}function ie(){Y=this.value,t(18,Y)}const Ue=(te,Ze)=>se(Ze,te),kt=(te,Ze)=>ge(Ze,te);function ze(te){le[te?"unshift":"push"](()=>{M=te,t(19,M)})}function ct(te){N=te,t(22,N)}function Dt(te){We.call(this,n,te)}function Mt(te){le[te?"unshift":"push"](()=>{G=te,t(20,G)})}return n.$$set=te=>{"id"in te&&t(29,o=te.id),"noOptionsText"in te&&t(1,a=te.noOptionsText),"selectPlaceholder"in te&&t(2,u=te.selectPlaceholder),"searchPlaceholder"in te&&t(3,f=te.searchPlaceholder),"items"in te&&t(30,c=te.items),"multiple"in te&&t(4,d=te.multiple),"disabled"in te&&t(5,m=te.disabled),"readonly"in te&&t(6,h=te.readonly),"upside"in te&&t(7,g=te.upside),"dropdownClass"in te&&t(8,b=te.dropdownClass),"selected"in te&&t(0,_=te.selected),"toggle"in te&&t(9,C=te.toggle),"closable"in te&&t(10,L=te.closable),"labelComponent"in te&&t(11,T=te.labelComponent),"labelComponentProps"in te&&t(12,O=te.labelComponentProps),"optionComponent"in te&&t(13,S=te.optionComponent),"optionComponentProps"in te&&t(14,j=te.optionComponentProps),"searchable"in te&&t(15,H=te.searchable),"searchFunc"in te&&t(31,D=te.searchFunc),"class"in te&&t(16,A=te.class),"$$scope"in te&&t(47,r=te.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&1073741824&&c&&(pe(),Ee()),n.$$.dirty[0]&1074003968&&t(24,i=tt(c,Y)),n.$$.dirty[0]&1&&t(23,l=function(te){const Ze=K.toArray(_);return K.inArray(Ze,te)})},[_,a,u,f,d,m,h,g,b,C,L,T,O,S,j,H,A,V,Y,M,G,B,N,l,i,Ee,se,ge,Fe,o,c,D,ee,J,R,ce,oe,s,de,W,ie,Ue,kt,ze,ct,Dt,Mt,r]}class t1 extends Te{constructor(e){super(),Se(this,e,e1,Qh,_e,{id:29,noOptionsText:1,selectPlaceholder:2,searchPlaceholder:3,items:30,multiple:4,disabled:5,readonly:6,upside:7,dropdownClass:8,selected:0,toggle:9,closable:10,labelComponent:11,labelComponentProps:12,optionComponent:13,optionComponentProps:14,searchable:15,searchFunc:31,class:16,deselectItem:17,selectItem:32,toggleItem:33,reset:34,showDropdown:35,hideDropdown:36},null,[-1,-1])}get deselectItem(){return this.$$.ctx[17]}get selectItem(){return this.$$.ctx[32]}get toggleItem(){return this.$$.ctx[33]}get reset(){return this.$$.ctx[34]}get showDropdown(){return this.$$.ctx[35]}get hideDropdown(){return this.$$.ctx[36]}}function co(n){let e,t;return{c(){e=w("i"),p(e,"class",t="icon "+n[0].icon)},m(i,l){k(i,e,l)},p(i,l){l&1&&t!==(t="icon "+i[0].icon)&&p(e,"class",t)},d(i){i&&y(e)}}}function n1(n){let e,t,i=(n[0].label||n[0].name||n[0].title||n[0].id||n[0].value)+"",l,s=n[0].icon&&co(n);return{c(){s&&s.c(),e=I(),t=w("span"),l=x(i),p(t,"class","txt")},m(r,o){s&&s.m(r,o),k(r,e,o),k(r,t,o),v(t,l)},p(r,[o]){r[0].icon?s?s.p(r,o):(s=co(r),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),o&1&&i!==(i=(r[0].label||r[0].name||r[0].title||r[0].id||r[0].value)+"")&&ke(l,i)},i:X,o:X,d(r){r&&(y(e),y(t)),s&&s.d(r)}}}function i1(n,e,t){let{item:i={}}=e;return n.$$set=l=>{"item"in l&&t(0,i=l.item)},[i]}class po extends Te{constructor(e){super(),Se(this,e,i1,n1,_e,{item:0})}}const l1=n=>({}),mo=n=>({});function s1(n){let e;const t=n[8].afterOptions,i=lt(t,n,n[12],mo);return{c(){i&&i.c()},m(l,s){i&&i.m(l,s),e=!0},p(l,s){i&&i.p&&(!e||s&4096)&&rt(i,t,l,l[12],e?st(t,l[12],s,l1):ot(l[12]),mo)},i(l){e||(E(i,l),e=!0)},o(l){P(i,l),e=!1},d(l){i&&i.d(l)}}}function r1(n){let e,t,i;const l=[{items:n[1]},{multiple:n[2]},{labelComponent:n[3]},{optionComponent:n[4]},n[5]];function s(o){n[9](o)}let r={$$slots:{afterOptions:[s1]},$$scope:{ctx:n}};for(let o=0;o<l.length;o+=1)r=Me(r,l[o]);return n[0]!==void 0&&(r.selected=n[0]),e=new t1({props:r}),le.push(()=>De(e,"selected",s)),e.$on("show",n[10]),e.$on("hide",n[11]),{c(){U(e.$$.fragment)},m(o,a){F(e,o,a),i=!0},p(o,[a]){const u=a&62?_t(l,[a&2&&{items:o[1]},a&4&&{multiple:o[2]},a&8&&{labelComponent:o[3]},a&16&&{optionComponent:o[4]},a&32&&Lt(o[5])]):{};a&4096&&(u.$$scope={dirty:a,ctx:o}),!t&&a&1&&(t=!0,u.selected=o[0],Ae(()=>t=!1)),e.$set(u)},i(o){i||(E(e.$$.fragment,o),i=!0)},o(o){P(e.$$.fragment,o),i=!1},d(o){q(e,o)}}}function o1(n,e,t){const i=["items","multiple","selected","labelComponent","optionComponent","selectionKey","keyOfSelected"];let l=at(e,i),{$$slots:s={},$$scope:r}=e,{items:o=[]}=e,{multiple:a=!1}=e,{selected:u=a?[]:void 0}=e,{labelComponent:f=po}=e,{optionComponent:c=po}=e,{selectionKey:d="value"}=e,{keyOfSelected:m=a?[]:void 0}=e;function h(L){L=K.toArray(L,!0);let T=[];for(let O of L){const S=K.findByKey(o,d,O);S&&T.push(S)}L.length&&!T.length||t(0,u=a?T:T[0])}async function g(L){let T=K.toArray(L,!0).map(O=>O[d]);o.length&&t(6,m=a?T:T[0])}function b(L){u=L,t(0,u)}function _(L){We.call(this,n,L)}function C(L){We.call(this,n,L)}return n.$$set=L=>{e=Me(Me({},e),Bt(L)),t(5,l=at(e,i)),"items"in L&&t(1,o=L.items),"multiple"in L&&t(2,a=L.multiple),"selected"in L&&t(0,u=L.selected),"labelComponent"in L&&t(3,f=L.labelComponent),"optionComponent"in L&&t(4,c=L.optionComponent),"selectionKey"in L&&t(7,d=L.selectionKey),"keyOfSelected"in L&&t(6,m=L.keyOfSelected),"$$scope"in L&&t(12,r=L.$$scope)},n.$$.update=()=>{n.$$.dirty&66&&o&&h(m),n.$$.dirty&1&&g(u)},[u,o,a,f,c,l,m,d,s,b,_,C,r]}class dn extends Te{constructor(e){super(),Se(this,e,o1,r1,_e,{items:1,multiple:2,selected:0,labelComponent:3,optionComponent:4,selectionKey:7,keyOfSelected:6})}}function ho(n,e,t){var s;const i=n.slice();i[19]=e[t];const l=((s=i[19].expand)==null?void 0:s.comment)||{};return i[20]=l,i}function _o(n){let e,t=n[1].length+"",i;return{c(){e=w("sub"),i=x(t),p(e,"class","sub sub-warning"),p(e,"title","Unread notifications")},m(l,s){k(l,e,s),v(e,i)},p(l,s){s&2&&t!==(t=l[1].length+"")&&ke(i,t)},d(l){l&&y(e)}}}function a1(n){let e;return{c(){e=w("div"),e.innerHTML='<figure class="icon"><i class="iconoir-bell"></i></figure> <p class="txt-hint">You don&#39;t have any unread notifications!</p>',p(e,"class","placeholder-block placeholder-block-sm p-base")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function u1(n){let e,t,i,l,s,r,o,a,u,f,c,d,m=[],h=new Map,g,b,_;function C(S){n[12](S)}let L={items:n[5]};n[0]!==void 0&&(L.keyOfSelected=n[0]),r=new dn({props:L}),le.push(()=>De(r,"keyOfSelected",C));let T=Ie(n[6]);const O=S=>S[19].id;for(let S=0;S<T.length;S+=1){let j=ho(n,T,S),H=O(j);h.set(H,m[S]=bo(H,j))}return{c(){e=w("div"),t=w("div"),t.innerHTML="<h6>Notifications</h6>",i=I(),l=w("div"),s=w("div"),U(r.$$.fragment),a=I(),u=w("div"),f=w("button"),f.innerHTML='<span class="txt">Mark all as read</span>',c=I(),d=w("div");for(let S=0;S<m.length;S+=1)m[S].c();p(t,"class","flex m-b-xs"),p(f,"type","button"),p(f,"class","txt-sm link-fade"),Z(f,"txt-disabled",n[4]),p(u,"class","addon"),p(s,"class","field-group"),p(l,"class","form-field form-field-sm m-b-0 m-l-auto"),p(e,"class","block p-t-xs p-b-sm p-l-sm p-r-sm"),p(d,"class","list notifications-list")},m(S,j){k(S,e,j),v(e,t),v(e,i),v(e,l),v(l,s),F(r,s,null),v(s,a),v(s,u),v(u,f),k(S,c,j),k(S,d,j);for(let H=0;H<m.length;H+=1)m[H]&&m[H].m(d,null);g=!0,b||(_=$(f,"click",be(n[13])),b=!0)},p(S,j){const H={};j&32&&(H.items=S[5]),!o&&j&1&&(o=!0,H.keyOfSelected=S[0],Ae(()=>o=!1)),r.$set(H),(!g||j&16)&&Z(f,"txt-disabled",S[4]),j&832&&(T=Ie(S[6]),ae(),m=yt(m,j,O,1,S,T,h,d,It,bo,null,ho),ue())},i(S){if(!g){E(r.$$.fragment,S);for(let j=0;j<T.length;j+=1)E(m[j]);g=!0}},o(S){P(r.$$.fragment,S);for(let j=0;j<m.length;j+=1)P(m[j]);g=!1},d(S){S&&(y(e),y(c),y(d)),q(r);for(let j=0;j<m.length;j+=1)m[j].d();b=!1,_()}}}function go(n){let e,t,i=n[20].expand.screen.title+"",l;return{c(){e=w("div"),t=w("small"),l=x(i),p(t,"class","screen-title"),p(e,"class","row txt-hint")},m(s,r){k(s,e,r),v(e,t),v(t,l)},p(s,r){r&64&&i!==(i=s[20].expand.screen.title+"")&&ke(l,i)},d(s){s&&y(e)}}}function bo(n,e){var N,V,ee;let t,i,l,s,r,o,a,u=K.getCommentAuthor(e[20])+"",f,c,d,m=K.relativeDate(e[20].created)+"",h,g,b,_,C,L,T,O=e[20].message+"",S,j,H,D,A,M;i=new Xi({props:{user:(N=e[20].expand)==null?void 0:N.user,class:"avatar"}});function Y(){return e[14](e[19])}let G=((ee=(V=e[20].expand)==null?void 0:V.screen)==null?void 0:ee.title)&&go(e);function B(){return e[15](e[20])}return{key:n,first:null,c(){t=w("div"),U(i.$$.fragment),l=I(),s=w("div"),r=w("div"),o=w("div"),a=w("small"),f=x(u),c=I(),d=w("small"),h=x(m),g=I(),b=w("nav"),_=w("button"),_.innerHTML='<i class="iconoir-check"></i>',C=I(),L=w("div"),T=w("div"),S=x(O),j=I(),G&&G.c(),H=I(),p(a,"class","name"),p(d,"class","txt-xs txt-hint date"),p(o,"class","inline-flex flex-row-gap-0"),p(_,"type","button"),p(_,"class","btn btn-xs btn-circle btn-transparent btn-hint"),p(b,"class","ctrls"),p(r,"class","row"),p(T,"class","message"),p(L,"class","row"),p(s,"class","content"),p(t,"class","list-item handle"),this.first=t},m(J,R){k(J,t,R),F(i,t,null),v(t,l),v(t,s),v(s,r),v(r,o),v(o,a),v(a,f),v(o,c),v(o,d),v(d,h),v(r,g),v(r,b),v(b,_),v(s,C),v(s,L),v(L,T),v(T,S),v(s,j),G&&G.m(s,null),v(t,H),D=!0,A||(M=[we(Oe.call(null,_,"Mark as read")),$(_,"click",Ke(be(Y))),$(t,"click",B)],A=!0)},p(J,R){var oe,pe,Ee;e=J;const ce={};R&64&&(ce.user=(oe=e[20].expand)==null?void 0:oe.user),i.$set(ce),(!D||R&64)&&u!==(u=K.getCommentAuthor(e[20])+"")&&ke(f,u),(!D||R&64)&&m!==(m=K.relativeDate(e[20].created)+"")&&ke(h,m),(!D||R&64)&&O!==(O=e[20].message+"")&&ke(S,O),(Ee=(pe=e[20].expand)==null?void 0:pe.screen)!=null&&Ee.title?G?G.p(e,R):(G=go(e),G.c(),G.m(s,null)):G&&(G.d(1),G=null)},i(J){D||(E(i.$$.fragment,J),D=!0)},o(J){P(i.$$.fragment,J),D=!1},d(J){J&&y(t),q(i),G&&G.d(),A=!1,me(M)}}}function f1(n){let e,t,i,l;const s=[u1,a1],r=[];function o(a,u){return a[1].length?0:1}return t=o(n),i=r[t]=s[t](n),{c(){e=w("div"),i.c(),p(e,"class","content")},m(a,u){k(a,e,u),r[t].m(e,null),l=!0},p(a,u){let f=t;t=o(a),t===f?r[t].p(a,u):(ae(),P(r[f],1,1,()=>{r[f]=null}),ue(),i=r[t],i?i.p(a,u):(i=r[t]=s[t](a),i.c()),E(i,1),i.m(e,null))},i(a){l||(E(i),l=!0)},o(a){P(i),l=!1},d(a){a&&y(e),r[t].d()}}}function c1(n){let e,t,i,l,s,r,o,a,u,f,c,d=n[1].length&&_o(n);function m(g){n[17](g)}let h={class:"dropdown notifications-dropdown",$$slots:{default:[f1]},$$scope:{ctx:n}};return n[3]!==void 0&&(h.active=n[3]),r=new Nt({props:h}),n[16](r),le.push(()=>De(r,"active",m)),r.$on("show",n[7]),{c(){e=w("div"),t=w("i"),l=I(),d&&d.c(),s=I(),U(r.$$.fragment),p(t,"class",i="iconoir-bell "+(n[1].length?"txt-warning":"txt-hint")),p(e,"tabindex","0"),p(e,"class","btn btn-hint btn-transparent btn-circle notifications-btn")},m(g,b){k(g,e,b),v(e,t),v(e,l),d&&d.m(e,null),v(e,s),F(r,e,null),u=!0,f||(c=we(a=Oe.call(null,e,n[3]?void 0:{position:"bottom",text:"Notifications"})),f=!0)},p(g,[b]){(!u||b&2&&i!==(i="iconoir-bell "+(g[1].length?"txt-warning":"txt-hint")))&&p(t,"class",i),g[1].length?d?d.p(g,b):(d=_o(g),d.c(),d.m(e,s)):d&&(d.d(1),d=null);const _={};b&8388723&&(_.$$scope={dirty:b,ctx:g}),!o&&b&8&&(o=!0,_.active=g[3],Ae(()=>o=!1)),r.$set(_),a&&et(a.update)&&b&8&&a.update.call(null,g[3]?void 0:{position:"bottom",text:"Notifications"})},i(g){u||(E(r.$$.fragment,g),u=!0)},o(g){P(r.$$.fragment,g),u=!1},d(g){g&&y(e),d&&d.d(),n[16](null),q(r),f=!1,c()}}}function d1(n,e=[]){return n.length?n:e}function p1(n,e,t){let i;Q(n,gn,S=>t(1,i=S));let l,s=!1,r=!1,o="",a=[],u=[];function f(){l==null||l.show()}function c(){l==null||l.hide()}function d(){t(0,o=""),m()}function m(){var j,H,D,A,M,Y,G;const S={};for(let B of i){const N=(G=(Y=(M=(A=(D=(H=(j=B.expand)==null?void 0:j.comment)==null?void 0:H.expand)==null?void 0:D.screen)==null?void 0:A.expand)==null?void 0:M.prototype)==null?void 0:Y.expand)==null?void 0:G.project;N&&(S[N.id]={label:N.title,value:N.id})}t(5,a=Object.values(S)),a.length!=1?t(5,a=[{label:"All projects",value:""}].concat(a)):t(0,o=a[0].value)}async function h(S){t(4,r=!0),S=K.toArray(S),S.length||(S=i.map(j=>j.id));try{const j=[];for(let H of S)j.push(z.collection("notifications").update(H,{read:!0})),Js(H);await Promise.allSettled(j)}catch(j){j.isAbort||z.error(j)}t(4,r=!1)}function g(S){var M,Y,G,B,N,V;const j=(B=(G=(Y=(M=S.expand)==null?void 0:M.screen)==null?void 0:Y.expand)==null?void 0:G.prototype)==null?void 0:B.project,H=(V=(N=S.expand)==null?void 0:N.screen)==null?void 0:V.prototype,D=S.screen,A=S.id;mi(`/projects/${j}/prototypes/${H}/screens/${D}?mode=comments&commentId=${A}`)}_n(()=>{K.getHashQueryParams().notifications&&(K.replaceHashQueryParams({notifications:null}),f())});function b(S){o=S,t(0,o)}const _=()=>h(),C=S=>{h(S.id)},L=S=>g(S);function T(S){le[S?"unshift":"push"](()=>{l=S,t(2,l)})}function O(S){s=S,t(3,s)}return n.$$.update=()=>{n.$$.dirty&2&&i!=null&&i.length&&m(),n.$$.dirty&3&&t(6,u=o?d1(i.filter(S=>{var j,H,D,A,M,Y;return((Y=(M=(A=(D=(H=(j=S.expand)==null?void 0:j.comment)==null?void 0:H.expand)==null?void 0:D.screen)==null?void 0:A.expand)==null?void 0:M.prototype)==null?void 0:Y.project)==o}),i):i)},[o,i,l,s,r,a,u,d,h,g,f,c,b,_,C,L,T,O]}class m1 extends Te{constructor(e){super(),Se(this,e,p1,c1,_e,{show:10,hide:11})}get show(){return this.$$.ctx[10]}get hide(){return this.$$.ctx[11]}}const h1=n=>({}),wo=n=>({}),_1=n=>({}),vo=n=>({});function yo(n){let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g,b,_,C=n[4]&&ko(n);const L=n[20].header,T=lt(L,n,n[19],vo),O=n[20].default,S=lt(O,n,n[19],null),j=n[20].footer,H=lt(j,n,n[19],wo);return{c(){e=w("div"),t=w("div"),l=I(),s=w("div"),r=w("div"),C&&C.c(),o=I(),T&&T.c(),a=I(),u=w("div"),S&&S.c(),f=I(),c=w("div"),H&&H.c(),p(t,"class","overlay"),p(r,"class","overlay-panel-section panel-header"),p(u,"class","overlay-panel-section panel-content"),p(c,"class","overlay-panel-section panel-footer"),p(s,"class",d="overlay-panel "+n[1]+" "+n[8]),Z(s,"popup",n[2]),p(e,"class","overlay-panel-container"),Z(e,"padded",n[2]),Z(e,"active",n[0])},m(D,A){k(D,e,A),v(e,t),v(e,l),v(e,s),v(s,r),C&&C.m(r,null),v(r,o),T&&T.m(r,null),v(s,a),v(s,u),S&&S.m(u,null),n[22](u),v(s,f),v(s,c),H&&H.m(c,null),g=!0,b||(_=[$(t,"click",be(n[21])),$(u,"scroll",n[23])],b=!0)},p(D,A){n=D,n[4]?C?C.p(n,A):(C=ko(n),C.c(),C.m(r,o)):C&&(C.d(1),C=null),T&&T.p&&(!g||A[0]&524288)&&rt(T,L,n,n[19],g?st(L,n[19],A,_1):ot(n[19]),vo),S&&S.p&&(!g||A[0]&524288)&&rt(S,O,n,n[19],g?st(O,n[19],A,null):ot(n[19]),null),H&&H.p&&(!g||A[0]&524288)&&rt(H,j,n,n[19],g?st(j,n[19],A,h1):ot(n[19]),wo),(!g||A[0]&258&&d!==(d="overlay-panel "+n[1]+" "+n[8]))&&p(s,"class",d),(!g||A[0]&262)&&Z(s,"popup",n[2]),(!g||A[0]&4)&&Z(e,"padded",n[2]),(!g||A[0]&1)&&Z(e,"active",n[0])},i(D){g||(D&&vt(()=>{g&&(i||(i=ut(t,vs,{duration:ti,opacity:0},!0)),i.run(1))}),E(T,D),E(S,D),E(H,D),D&&vt(()=>{g&&(h&&h.end(1),m=jf(s,En,n[2]?{duration:ti,y:-10}:{duration:ti,x:50}),m.start())}),g=!0)},o(D){D&&(i||(i=ut(t,vs,{duration:ti,opacity:0},!1)),i.run(0)),P(T,D),P(S,D),P(H,D),m&&m.invalidate(),D&&(h=Nf(s,En,n[2]?{duration:ti,y:10}:{duration:ti,x:50})),g=!1},d(D){D&&y(e),D&&i&&i.end(),C&&C.d(),T&&T.d(D),S&&S.d(D),n[22](null),H&&H.d(D),D&&h&&h.end(),b=!1,me(_)}}}function ko(n){let e;function t(s,r){return s[2]?b1:g1}let i=t(n),l=i(n);return{c(){l.c(),e=Ne()},m(s,r){l.m(s,r),k(s,e,r)},p(s,r){i===(i=t(s))&&l?l.p(s,r):(l.d(1),l=i(s),l&&(l.c(),l.m(e.parentNode,e)))},d(s){s&&y(e),l.d(s)}}}function g1(n){let e,t,i;return{c(){e=w("button"),e.innerHTML='<i class="iconoir-xmark"></i>',p(e,"tabindex","-1"),p(e,"type","button"),p(e,"class","overlay-close")},m(l,s){k(l,e,s),t||(i=$(e,"click",be(n[5])),t=!0)},p:X,d(l){l&&y(e),t=!1,i()}}}function b1(n){let e,t,i;return{c(){e=w("button"),e.innerHTML='<i class="iconoir-xmark txt-lg"></i>',p(e,"tabindex","-1"),p(e,"type","button"),p(e,"class","btn btn-sm btn-circle btn-transparent btn-close m-l-auto")},m(l,s){k(l,e,s),t||(i=$(e,"click",be(n[5])),t=!0)},p:X,d(l){l&&y(e),t=!1,i()}}}function w1(n){let e,t,i,l,s=n[0]&&yo(n);return{c(){e=w("div"),s&&s.c(),p(e,"id",n[9]),p(e,"class","overlay-panel-wrapper"),p(e,"tabindex","-1")},m(r,o){k(r,e,o),s&&s.m(e,null),n[24](e),t=!0,i||(l=[$(window,"resize",n[11]),$(window,"keydown",n[10])],i=!0)},p(r,o){r[0]?s?(s.p(r,o),o[0]&1&&E(s,1)):(s=yo(r),s.c(),E(s,1),s.m(e,null)):s&&(ae(),P(s,1,1,()=>{s=null}),ue())},i(r){t||(E(s),t=!0)},o(r){P(s),t=!1},d(r){r&&y(e),s&&s.d(),n[24](null),i=!1,me(l)}}}let Dn,es=[];function Qc(){return Dn=Dn||document.querySelector(".overlays"),Dn||(Dn=document.createElement("div"),Dn.classList.add("overlays"),document.body.appendChild(Dn)),Dn}let ti=150;function So(){return 1e3+Qc().querySelectorAll(".overlay-panel-container.active").length}function v1(n,e,t){let{$$slots:i={},$$scope:l}=e,{class:s=""}=e,{active:r=!1}=e,{popup:o=!1}=e,{overlayClose:a=!0}=e,{btnClose:u=!0}=e,{escHide:f=!0}=e,{beforeOpen:c=void 0}=e,{beforeHide:d=void 0}=e;const m=ft(),h="op_"+K.randomString(5);let g,b,_,C,L="",T=r;function O(){typeof c=="function"&&c()===!1||t(0,r=!0)}function S(){typeof d=="function"&&d()===!1||t(0,r=!1)}function j(){return r}async function H(R){t(18,T=R),R?(_=document.activeElement,m("show"),g==null||g.focus()):(clearTimeout(C),m("hide"),_==null||_.focus(),setTimeout(()=>{_==null||_.blur()},0)),await St(),D()}function D(){g&&(r?t(6,g.style.zIndex=So(),g):t(6,g.style="",g))}function A(){K.pushUnique(es,h),document.body.classList.add("overlay-active")}function M(){K.removeByValue(es,h),es.length||document.body.classList.remove("overlay-active")}function Y(R){r&&f&&R.code=="Escape"&&!K.isInput(R.target)&&g&&g.style.zIndex==So()&&(R.preventDefault(),S())}function G(R){r&&B(b)}function B(R,ce){ce&&t(8,L=""),R&&(C||(C=setTimeout(()=>{if(clearTimeout(C),C=null,!R)return;if(R.scrollHeight-R.offsetHeight>0)t(8,L="scrollable");else{t(8,L="");return}R.scrollTop==0?t(8,L+=" scroll-top-reached"):R.scrollTop+R.offsetHeight==R.scrollHeight&&t(8,L+=" scroll-bottom-reached")},100)))}_n(()=>(Qc().appendChild(g),()=>{clearTimeout(C),M(),g==null||g.remove()}));const N=()=>a?S():!0;function V(R){le[R?"unshift":"push"](()=>{b=R,t(7,b)})}const ee=R=>B(R.target);function J(R){le[R?"unshift":"push"](()=>{g=R,t(6,g)})}return n.$$set=R=>{"class"in R&&t(1,s=R.class),"active"in R&&t(0,r=R.active),"popup"in R&&t(2,o=R.popup),"overlayClose"in R&&t(3,a=R.overlayClose),"btnClose"in R&&t(4,u=R.btnClose),"escHide"in R&&t(13,f=R.escHide),"beforeOpen"in R&&t(14,c=R.beforeOpen),"beforeHide"in R&&t(15,d=R.beforeHide),"$$scope"in R&&t(19,l=R.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&262145&&T!=r&&H(r),n.$$.dirty[0]&128&&B(b,!0),n.$$.dirty[0]&64&&g&&D(),n.$$.dirty[0]&1&&(r?A():M())},[r,s,o,a,u,S,g,b,L,h,Y,G,B,f,c,d,O,j,T,l,i,N,V,ee,J]}class pn extends Te{constructor(e){super(),Se(this,e,v1,w1,_e,{class:1,active:0,popup:2,overlayClose:3,btnClose:4,escHide:13,beforeOpen:14,beforeHide:15,show:16,hide:5,isActive:17},null,[-1,-1])}get show(){return this.$$.ctx[16]}get hide(){return this.$$.ctx[5]}get isActive(){return this.$$.ctx[17]}}function To(n,e,t){const i=n.slice();return i[12]=e[t],i}const y1=n=>({}),Co=n=>({uniqueId:n[4]});function Oo(n){let e,t,i=Ie(n[3]),l=[];for(let r=0;r<i.length;r+=1)l[r]=Eo(To(n,i,r));const s=r=>P(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=Ne()},m(r,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(r,o);k(r,e,o),t=!0},p(r,o){if(o&8){i=Ie(r[3]);let a;for(a=0;a<i.length;a+=1){const u=To(r,i,a);l[a]?(l[a].p(u,o),E(l[a],1)):(l[a]=Eo(u),l[a].c(),E(l[a],1),l[a].m(e.parentNode,e))}for(ae(),a=i.length;a<l.length;a+=1)s(a);ue()}},i(r){if(!t){for(let o=0;o<i.length;o+=1)E(l[o]);t=!0}},o(r){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)P(l[o]);t=!1},d(r){r&&y(e),xt(l,r)}}}function Eo(n){let e,t,i=El(n[12])+"",l,s,r,o;return{c(){e=w("div"),t=w("pre"),l=x(i),s=I(),p(e,"class","help-block help-block-error")},m(a,u){k(a,e,u),v(e,t),v(t,l),v(e,s),o=!0},p(a,u){(!o||u&8)&&i!==(i=El(a[12])+"")&&ke(l,i)},i(a){o||(a&&vt(()=>{o&&(r||(r=ut(e,Ct,{duration:150},!0)),r.run(1))}),o=!0)},o(a){a&&(r||(r=ut(e,Ct,{duration:150},!1)),r.run(0)),o=!1},d(a){a&&y(e),a&&r&&r.end()}}}function k1(n){let e,t,i,l,s,r;const o=n[9].default,a=lt(o,n,n[8],Co);let u=!n[0]&&Oo(n);return{c(){e=w("div"),a&&a.c(),t=I(),u&&u.c(),p(e,"class",n[1]),Z(e,"error",n[3].length)},m(f,c){var d;k(f,e,c),a&&a.m(e,null),v(e,t),u&&u.m(e,null),n[11](e),l=!0,s||(r=[we(i=Oe.call(null,e,{text:n[0]?El((d=n[3])==null?void 0:d[0]):""})),$(e,"click",n[10])],s=!0)},p(f,[c]){var d;a&&a.p&&(!l||c&256)&&rt(a,o,f,f[8],l?st(o,f[8],c,y1):ot(f[8]),Co),f[0]?u&&(ae(),P(u,1,1,()=>{u=null}),ue()):u?(u.p(f,c),c&1&&E(u,1)):(u=Oo(f),u.c(),E(u,1),u.m(e,null)),(!l||c&2)&&p(e,"class",f[1]),i&&et(i.update)&&c&9&&i.update.call(null,{text:f[0]?El((d=f[3])==null?void 0:d[0]):""}),(!l||c&10)&&Z(e,"error",f[3].length)},i(f){l||(E(a,f),E(u),l=!0)},o(f){P(a,f),P(u),l=!1},d(f){f&&y(e),a&&a.d(f),u&&u.d(),n[11](null),s=!1,me(r)}}}const Lo="Invalid value";function El(n){return n?typeof n=="object"?(n==null?void 0:n.message)||(n==null?void 0:n.code)||Lo:n||Lo:""}function S1(n,e,t){let i;Q(n,ql,g=>t(7,i=g));let{$$slots:l={},$$scope:s}=e;const r="field_"+K.randomString(7);let{name:o=""}=e,{inlineError:a=!1}=e,{class:u=void 0}=e,f,c=[];function d(){yh(o)}_n(()=>(f.addEventListener("input",d),f.addEventListener("change",d),()=>{f.removeEventListener("input",d),f.removeEventListener("change",d)}));function m(g){We.call(this,n,g)}function h(g){le[g?"unshift":"push"](()=>{f=g,t(2,f)})}return n.$$set=g=>{"name"in g&&t(5,o=g.name),"inlineError"in g&&t(0,a=g.inlineError),"class"in g&&t(1,u=g.class),"$$scope"in g&&t(8,s=g.$$scope)},n.$$.update=()=>{n.$$.dirty&160&&t(3,c=K.toArray(K.getNestedVal(i,o)))},[a,u,f,c,r,o,d,i,s,l,m,h]}class Le extends Te{constructor(e){super(),Se(this,e,S1,k1,_e,{name:5,inlineError:0,class:1,changed:6})}get changed(){return this.$$.ctx[6]}}function T1(n){let e,t,i,l,s,r,o,a;return{c(){e=w("label"),t=x("New email"),l=I(),s=w("input"),p(e,"for",i=n[14]),p(s,"type","email"),p(s,"id",r=n[14]),s.autofocus=!0,s.required=!0},m(u,f){k(u,e,f),v(e,t),k(u,l,f),k(u,s,f),ye(s,n[2]),s.focus(),o||(a=$(s,"input",n[7]),o=!0)},p(u,f){f&16384&&i!==(i=u[14])&&p(e,"for",i),f&16384&&r!==(r=u[14])&&p(s,"id",r),f&4&&s.value!==u[2]&&ye(s,u[2])},d(u){u&&(y(e),y(l),y(s)),o=!1,a()}}}function C1(n){let e,t,i,l,s;return t=new Le({props:{class:"form-field required",name:"newEmail",$$slots:{default:[T1,({uniqueId:r})=>({14:r}),({uniqueId:r})=>r?16384:0]},$$scope:{ctx:n}}}),{c(){e=w("form"),U(t.$$.fragment),p(e,"id",n[4]),p(e,"class","grid grid-sm")},m(r,o){k(r,e,o),F(t,e,null),i=!0,l||(s=$(e,"submit",be(n[5])),l=!0)},p(r,o){const a={};o&49156&&(a.$$scope={dirty:o,ctx:r}),t.$set(a)},i(r){i||(E(t.$$.fragment,r),i=!0)},o(r){P(t.$$.fragment,r),i=!1},d(r){r&&y(e),q(t),l=!1,s()}}}function O1(n){let e;return{c(){e=w("h5"),e.textContent="Change email",p(e,"class","block txt-center")},m(t,i){k(t,e,i)},p:X,d(t){t&&y(e)}}}function E1(n){let e,t,i,l,s,r,o;return{c(){e=w("button"),t=w("span"),t.textContent="Cancel",i=I(),l=w("button"),s=w("span"),s.textContent="Send confirmation link",p(t,"class","txt"),p(e,"type","button"),p(e,"class","btn btn-transparent m-r-auto"),e.disabled=n[3],p(s,"class","txt"),p(l,"form",n[4]),p(l,"type","submit"),p(l,"class","btn btn-expanded-sm btn-primary"),l.disabled=n[3],Z(l,"btn-loading",n[3])},m(a,u){k(a,e,u),v(e,t),k(a,i,u),k(a,l,u),v(l,s),r||(o=$(e,"click",n[0]),r=!0)},p(a,u){u&8&&(e.disabled=a[3]),u&8&&(l.disabled=a[3]),u&8&&Z(l,"btn-loading",a[3])},d(a){a&&(y(e),y(i),y(l)),r=!1,o()}}}function L1(n){let e,t,i={beforeHide:n[8],popup:!0,class:"overlay-panel-sm",$$slots:{footer:[E1],header:[O1],default:[C1]},$$scope:{ctx:n}};return e=new pn({props:i}),n[9](e),e.$on("show",n[10]),e.$on("hide",n[11]),{c(){U(e.$$.fragment)},m(l,s){F(e,l,s),t=!0},p(l,[s]){const r={};s&8&&(r.beforeHide=l[8]),s&32780&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){n[9](null),q(e,l)}}}function I1(n,e,t){const i=ft(),l="email_"+K.randomString(5);let s,r="",o=!1;function a(){return f(),s==null?void 0:s.show()}function u(){return s==null?void 0:s.hide()}function f(){Zt({}),t(2,r="")}async function c(){t(3,o=!0);try{await z.collection("users").requestEmailChange(r),t(3,o=!1),i("submit"),ht(`A confirmation link was sent to ${r}.`),u()}catch(_){_.isAbort||(t(3,o=!1),z.error(_))}}function d(){r=this.value,t(2,r)}const m=()=>!o;function h(_){le[_?"unshift":"push"](()=>{s=_,t(1,s)})}function g(_){We.call(this,n,_)}function b(_){We.call(this,n,_)}return[u,s,r,o,l,c,a,d,m,h,g,b]}class P1 extends Te{constructor(e){super(),Se(this,e,I1,L1,_e,{show:6,hide:0})}get show(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[0]}}function Io(n){let e,t,i;return{c(){e=w("button"),e.innerHTML='<i class="iconoir-xmark txt-sm"></i>',p(e,"type","button"),p(e,"class","btn btn-xs btn-outline btn-circle btn-close svelte-60psra")},m(l,s){k(l,e,s),t||(i=[we(Oe.call(null,e,{position:"right",text:"Remove avatar"})),$(e,"click",Ke(be(n[11])))],t=!0)},p:X,d(l){l&&y(e),t=!1,me(i)}}}function j1(n){let e,t=n[8]&&Io(n);return{c(){t&&t.c(),e=Ne()},m(i,l){t&&t.m(i,l),k(i,e,l)},p(i,l){i[8]?t?t.p(i,l):(t=Io(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&y(e),t&&t.d(i)}}}function N1(n){let e;return{c(){e=w("i"),p(e,"class","iconoir-media-image-plus")},m(t,i){k(t,e,i)},p:X,d(t){t&&y(e)}}}function ts(n){var f;let e,t,i,l,s,r,o;t=new Xi({props:{class:"thumb-xl "+(n[8]?"":"thumb-handle"),user:n[1],file:(f=n[2])==null?void 0:f[0],fallbackToOAuth2:!1,$$slots:{placeholder:[N1],default:[j1]},$$scope:{ctx:n}}});let a=[{for:i=n[8]?null:n[32]},{class:"inline-flex"}],u={};for(let c=0;c<a.length;c+=1)u=Me(u,a[c]);return{c(){e=w(n[8]?"div":"label"),U(t.$$.fragment),_l(n[8]?"div":"label")(e,u)},m(c,d){k(c,e,d),F(t,e,null),s=!0,r||(o=we(l=Oe.call(null,e,n[8]?null:"Upload avatar")),r=!0)},p(c,d){var h;const m={};d[0]&256&&(m.class="thumb-xl "+(c[8]?"":"thumb-handle")),d[0]&2&&(m.user=c[1]),d[0]&4&&(m.file=(h=c[2])==null?void 0:h[0]),d[0]&256|d[1]&4&&(m.$$scope={dirty:d,ctx:c}),t.$set(m),_l(c[8]?"div":"label")(e,u=_t(a,[(!s||d[0]&256|d[1]&2&&i!==(i=c[8]?null:c[32]))&&{for:i},{class:"inline-flex"}])),l&&et(l.update)&&d[0]&256&&l.update.call(null,c[8]?null:"Upload avatar")},i(c){s||(E(t.$$.fragment,c),s=!0)},o(c){P(t.$$.fragment,c),s=!1},d(c){c&&y(e),q(t),r=!1,o()}}}function A1(n){let e,t,i,l=n[8]?"div":"label",s,r,o,a,u=(n[8]?"div":"label")&&ts(n);return{c(){e=w("input"),i=I(),u&&u.c(),s=Ne(),p(e,"type","file"),p(e,"class","hidden"),p(e,"id",t=n[32])},m(f,c){k(f,e,c),k(f,i,c),u&&u.m(f,c),k(f,s,c),o||(a=$(e,"change",n[19]),o=!0)},p(f,c){(!r||c[1]&2&&t!==(t=f[32]))&&p(e,"id",t),f[8],l?_e(l,f[8]?"div":"label")?(u.d(1),u=ts(f),l=f[8]?"div":"label",u.c(),u.m(s.parentNode,s)):u.p(f,c):(u=ts(f),l=f[8]?"div":"label",u.c(),u.m(s.parentNode,s))},i:X,o(f){P(u,f),r=!1},d(f){f&&(y(e),y(i),y(s)),u&&u.d(f),o=!1,a()}}}function D1(n){let e,t,i,l,s,r,o,a;return{c(){e=w("label"),t=x("Full name"),l=I(),s=w("input"),p(e,"for",i=n[32]),p(s,"type","text"),p(s,"id",r=n[32])},m(u,f){k(u,e,f),v(e,t),k(u,l,f),k(u,s,f),ye(s,n[1].name),o||(a=$(s,"input",n[20]),o=!0)},p(u,f){f[1]&2&&i!==(i=u[32])&&p(e,"for",i),f[1]&2&&r!==(r=u[32])&&p(s,"id",r),f[0]&2&&s.value!==u[1].name&&ye(s,u[1].name)},d(u){u&&(y(e),y(l),y(s)),o=!1,a()}}}function M1(n){let e,t,i,l,s,r,o,a;return{c(){e=w("label"),t=x("Username"),l=I(),s=w("input"),p(e,"for",i=n[32]),p(s,"type","text"),p(s,"id",r=n[32]),s.required=!0},m(u,f){k(u,e,f),v(e,t),k(u,l,f),k(u,s,f),ye(s,n[1].username),o||(a=$(s,"input",n[21]),o=!0)},p(u,f){f[1]&2&&i!==(i=u[32])&&p(e,"for",i),f[1]&2&&r!==(r=u[32])&&p(s,"id",r),f[0]&2&&s.value!==u[1].username&&ye(s,u[1].username)},d(u){u&&(y(e),y(l),y(s)),o=!1,a()}}}function Po(n){let e,t,i;function l(o,a){return o[1].email?$1:H1}let s=l(n),r=s(n);return{c(){e=w("button"),r.c(),p(e,"type","button"),p(e,"class","btn btn-xs btn-transparent")},m(o,a){k(o,e,a),r.m(e,null),t||(i=$(e,"click",Ke(function(){var u,f;et((u=n[5])==null?void 0:u.show())&&((f=n[5])==null||f.show().apply(this,arguments))})),t=!0)},p(o,a){n=o,s!==(s=l(n))&&(r.d(1),r=s(n),r&&(r.c(),r.m(e,null)))},d(o){o&&y(e),r.d(),t=!1,i()}}}function H1(n){let e;return{c(){e=x("Set email")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function $1(n){let e;return{c(){e=x("Change email")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function R1(n){var c;let e,t,i,l,s,r,o,a,u,f=((c=n[9])==null?void 0:c.id)==n[1].id&&Po(n);return{c(){e=w("label"),t=x("Email"),l=I(),s=w("div"),r=w("input"),u=I(),f&&f.c(),p(e,"for",i=n[32]),p(r,"type","email"),p(r,"id",o=n[32]),r.value=a=n[1].email,r.readOnly=!0,p(s,"class","field-group")},m(d,m){k(d,e,m),v(e,t),k(d,l,m),k(d,s,m),v(s,r),v(s,u),f&&f.m(s,null)},p(d,m){var h;m[1]&2&&i!==(i=d[32])&&p(e,"for",i),m[1]&2&&o!==(o=d[32])&&p(r,"id",o),m[0]&2&&a!==(a=d[1].email)&&r.value!==a&&(r.value=a),((h=d[9])==null?void 0:h.id)==d[1].id?f?f.p(d,m):(f=Po(d),f.c(),f.m(s,null)):f&&(f.d(1),f=null)},d(d){d&&(y(e),y(l),y(s)),f&&f.d()}}}function F1(n){let e,t,i,l,s,r,o,a,u,f;return{c(){e=w("input"),i=I(),l=w("label"),s=w("span"),s.textContent="Public visible email",r=I(),o=w("i"),p(e,"type","checkbox"),p(e,"id",t=n[32]),p(s,"class","txt"),p(o,"class","iconoir-info-circle link-hint"),p(l,"for",a=n[32])},m(c,d){k(c,e,d),e.checked=n[1].emailVisibility,k(c,i,d),k(c,l,d),v(l,s),v(l,r),v(l,o),u||(f=[$(e,"change",n[22]),we(Oe.call(null,o,"By default other users can see only your avatar, name and username."))],u=!0)},p(c,d){d[1]&2&&t!==(t=c[32])&&p(e,"id",t),d[0]&2&&(e.checked=c[1].emailVisibility),d[1]&2&&a!==(a=c[32])&&p(l,"for",a)},d(c){c&&(y(e),y(i),y(l)),u=!1,me(f)}}}function q1(n){let e,t,i,l,s,r,o,a;return{c(){e=w("input"),i=I(),l=w("label"),s=w("span"),s.textContent="Enable email notifications for watched projects",p(e,"type","checkbox"),p(e,"id",t=n[32]),p(s,"class","txt"),p(l,"for",r=n[32])},m(u,f){k(u,e,f),e.checked=n[1].allowEmailNotifications,k(u,i,f),k(u,l,f),v(l,s),o||(a=$(e,"change",n[23]),o=!0)},p(u,f){f[1]&2&&t!==(t=u[32])&&p(e,"id",t),f[0]&2&&(e.checked=u[1].allowEmailNotifications),f[1]&2&&r!==(r=u[32])&&p(l,"for",r)},d(u){u&&(y(e),y(i),y(l)),o=!1,a()}}}function U1(n){let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g;return t=new Le({props:{class:"avatar-field block txt-center",name:"avatar",$$slots:{default:[A1,({uniqueId:b})=>({32:b}),({uniqueId:b})=>[0,b?2:0]]},$$scope:{ctx:n}}}),l=new Le({props:{class:"form-field",name:"name",$$slots:{default:[D1,({uniqueId:b})=>({32:b}),({uniqueId:b})=>[0,b?2:0]]},$$scope:{ctx:n}}}),r=new Le({props:{class:"form-field required",name:"username",$$slots:{default:[M1,({uniqueId:b})=>({32:b}),({uniqueId:b})=>[0,b?2:0]]},$$scope:{ctx:n}}}),a=new Le({props:{class:"form-field",name:"email",$$slots:{default:[R1,({uniqueId:b})=>({32:b}),({uniqueId:b})=>[0,b?2:0]]},$$scope:{ctx:n}}}),f=new Le({props:{class:"form-field form-field-toggle",name:"emailVisibility",$$slots:{default:[F1,({uniqueId:b})=>({32:b}),({uniqueId:b})=>[0,b?2:0]]},$$scope:{ctx:n}}}),d=new Le({props:{class:"form-field form-field-toggle",name:"allowEmailNotifications",$$slots:{default:[q1,({uniqueId:b})=>({32:b}),({uniqueId:b})=>[0,b?2:0]]},$$scope:{ctx:n}}}),{c(){e=w("form"),U(t.$$.fragment),i=I(),U(l.$$.fragment),s=I(),U(r.$$.fragment),o=I(),U(a.$$.fragment),u=I(),U(f.$$.fragment),c=I(),U(d.$$.fragment),p(e,"id",n[10]),p(e,"class","grid grid-sm")},m(b,_){k(b,e,_),F(t,e,null),v(e,i),F(l,e,null),v(e,s),F(r,e,null),v(e,o),F(a,e,null),v(e,u),F(f,e,null),v(e,c),F(d,e,null),m=!0,h||(g=$(e,"submit",be(n[12])),h=!0)},p(b,_){const C={};_[0]&262|_[1]&6&&(C.$$scope={dirty:_,ctx:b}),t.$set(C);const L={};_[0]&2|_[1]&6&&(L.$$scope={dirty:_,ctx:b}),l.$set(L);const T={};_[0]&2|_[1]&6&&(T.$$scope={dirty:_,ctx:b}),r.$set(T);const O={};_[0]&546|_[1]&6&&(O.$$scope={dirty:_,ctx:b}),a.$set(O);const S={};_[0]&2|_[1]&6&&(S.$$scope={dirty:_,ctx:b}),f.$set(S);const j={};_[0]&2|_[1]&6&&(j.$$scope={dirty:_,ctx:b}),d.$set(j)},i(b){m||(E(t.$$.fragment,b),E(l.$$.fragment,b),E(r.$$.fragment,b),E(a.$$.fragment,b),E(f.$$.fragment,b),E(d.$$.fragment,b),m=!0)},o(b){P(t.$$.fragment,b),P(l.$$.fragment,b),P(r.$$.fragment,b),P(a.$$.fragment,b),P(f.$$.fragment,b),P(d.$$.fragment,b),m=!1},d(b){b&&y(e),q(t),q(l),q(r),q(a),q(f),q(d),h=!1,g()}}}function W1(n){let e;return{c(){e=w("h5"),e.textContent="Account settings",p(e,"class","block txt-center")},m(t,i){k(t,e,i)},p:X,d(t){t&&y(e)}}}function V1(n){let e,t,i,l,s,r,o;return{c(){e=w("div"),e.innerHTML='<i class="iconoir-send"></i> <span class="txt">Password change request</span>',t=I(),i=w("hr"),l=I(),s=w("div"),s.innerHTML='<i class="iconoir-warning-triangle"></i> <span class="txt">Delete account</span>',p(e,"tabindex","0"),p(e,"class","dropdown-item closable"),p(s,"tabindex","0"),p(s,"class","dropdown-item closable link-danger")},m(a,u){k(a,e,u),k(a,t,u),k(a,i,u),k(a,l,u),k(a,s,u),r||(o=[$(e,"click",n[14]),$(s,"click",n[13])],r=!0)},p:X,d(a){a&&(y(e),y(t),y(i),y(l),y(s)),r=!1,me(o)}}}function z1(n){let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g,b;return s=new Nt({props:{class:"dropdown dropdown-upside dropdown-nowrap dropdown-left dropdown-sm",$$slots:{default:[V1]},$$scope:{ctx:n}}}),{c(){e=w("div"),t=w("button"),i=w("i"),l=I(),U(s.$$.fragment),r=I(),o=w("button"),a=w("span"),a.textContent="Cancel",f=I(),c=w("button"),d=w("span"),d.textContent="Save changes",p(i,"class","iconoir-more-horiz txt-lg"),p(t,"type","button"),p(t,"class","btn btn-sm btn-circle btn-transparent"),t.disabled=n[3],p(t,"aria-label","More"),p(e,"class","inline-flex m-r-auto"),p(a,"class","txt"),p(o,"type","button"),p(o,"class","btn btn-transparent"),o.disabled=u=!n[6],p(d,"class","txt"),p(c,"form",n[10]),p(c,"type","submit"),p(c,"class","btn btn-expanded-sm btn-primary"),c.disabled=m=n[3]||!n[6]||!n[7],Z(c,"btn-loading",n[3])},m(_,C){k(_,e,C),v(e,t),v(t,i),v(t,l),F(s,t,null),k(_,r,C),k(_,o,C),v(o,a),k(_,f,C),k(_,c,C),v(c,d),h=!0,g||(b=$(o,"click",n[0]),g=!0)},p(_,C){const L={};C[1]&4&&(L.$$scope={dirty:C,ctx:_}),s.$set(L),(!h||C[0]&8)&&(t.disabled=_[3]),(!h||C[0]&64&&u!==(u=!_[6]))&&(o.disabled=u),(!h||C[0]&200&&m!==(m=_[3]||!_[6]||!_[7]))&&(c.disabled=m),(!h||C[0]&8)&&Z(c,"btn-loading",_[3])},i(_){h||(E(s.$$.fragment,_),h=!0)},o(_){P(s.$$.fragment,_),h=!1},d(_){_&&(y(e),y(r),y(o),y(f),y(c)),q(s),g=!1,b()}}}function B1(n){let e,t,i,l,s={beforeHide:n[24],popup:!0,$$slots:{footer:[z1],header:[W1],default:[U1]},$$scope:{ctx:n}};e=new pn({props:s}),n[25](e),e.$on("show",n[26]),e.$on("hide",n[27]);let r={};return i=new P1({props:r}),n[28](i),{c(){U(e.$$.fragment),t=I(),U(i.$$.fragment)},m(o,a){F(e,o,a),k(o,t,a),F(i,o,a),l=!0},p(o,a){const u={};a[0]&64&&(u.beforeHide=o[24]),a[0]&1006|a[1]&4&&(u.$$scope={dirty:a,ctx:o}),e.$set(u);const f={};i.$set(f)},i(o){l||(E(e.$$.fragment,o),E(i.$$.fragment,o),l=!0)},o(o){P(e.$$.fragment,o),P(i.$$.fragment,o),l=!1},d(o){o&&y(t),n[25](null),q(e,o),n[28](null),q(i,o)}}}function Z1(n,e,t){let i,l,s,r;Q(n,Jn,R=>t(9,r=R));const o=ft(),a="settings_"+K.randomString(5);let u,f,c={},d=null,m=!1,h=!1,g=!1,b="";function _(R){return L(),t(1,c=structuredClone(R||{})),t(18,b=JSON.stringify(c)),u==null?void 0:u.show()}function C(){return u==null?void 0:u.hide()}function L(){Zt({}),t(2,d=null)}function T(){t(1,c.avatar=null,c),t(2,d=null)}async function O(){t(3,m=!0);try{const R={name:c.name,username:c.username,emailVisibility:c.emailVisibility,allowEmailNotifications:c.allowEmailNotifications,avatar:c.avatar};d!=null&&d.length&&(R.avatar=d[0]),t(1,c=await z.collection("users").update(c.id,R)),t(3,m=!1),o("save",c),ht("Successfully saved account settings."),await St(),C()}catch(R){R.isAbort||(t(3,m=!1),z.error(R))}}function S(){if(!(c!=null&&c.id))return;let R=`Do you really want to delete your Presentator account and all of its related resources?

Note that projects that have more than one owner will not be deleted.`;t(16,h=!0),Et(R,async()=>j(),()=>{setTimeout(()=>{t(16,h=!1)},0)})}async function j(){if(c!=null&&c.id){t(16,h=!0);try{const R=c.id==(r==null?void 0:r.id);await z.collection("users").delete(c.id),t(16,h=!1),o("delete",c),ht(`Successfully deleted user ${c.username}.`),R&&z.logout()}catch(R){R.isAbort||(z.error(R),t(16,h=!1))}}}async function H(){if(c!=null&&c.email){t(17,g=!0);try{await z.collection("users").requestPasswordReset(c.email),ht(`Successfully sent password change email to ${c.email}.`),t(17,g=!1)}catch(R){R.isAbort||(z.error(R),t(17,g=!1))}}}function D(){d=this.files,t(2,d)}function A(){c.name=this.value,t(1,c)}function M(){c.username=this.value,t(1,c)}function Y(){c.emailVisibility=this.checked,t(1,c)}function G(){c.allowEmailNotifications=this.checked,t(1,c)}const B=()=>s;function N(R){le[R?"unshift":"push"](()=>{u=R,t(4,u)})}function V(R){We.call(this,n,R)}function ee(R){We.call(this,n,R)}function J(R){le[R?"unshift":"push"](()=>{f=R,t(5,f)})}return n.$$.update=()=>{n.$$.dirty[0]&6&&t(8,i=(c==null?void 0:c.avatar)||(d==null?void 0:d.length)),n.$$.dirty[0]&262150&&t(7,l=(d==null?void 0:d.length)||b!=JSON.stringify(c)),n.$$.dirty[0]&196616&&t(6,s=!m&&!h&&!g)},[C,c,d,m,u,f,s,l,i,r,a,T,O,S,H,_,h,g,b,D,A,M,Y,G,B,N,V,ee,J]}class Y1 extends Te{constructor(e){super(),Se(this,e,Z1,B1,_e,{show:15,hide:0},null,[-1,-1])}get show(){return this.$$.ctx[15]}get hide(){return this.$$.ctx[0]}}function jo(n,e,t){const i=n.slice();return i[13]=e[t][0],i[14]=e[t][1],i}const K1=n=>({}),No=n=>({}),G1=n=>({}),Ao=n=>({});function Do(n){let e,t,i,l,s,r,o,a,u,f;t=new Vs({props:{class:"app-logo-sm",withText:!1}});const c=n[8]["header-left"],d=lt(c,n,n[12],Ao),m=n[8]["header-right"],h=lt(m,n,n[12],No);return o=new m1({}),u=new Xi({props:{tabindex:"0",class:"thumb thumb-dark thumb-circle thumb-handle",user:n[6],$$slots:{default:[X1]},$$scope:{ctx:n}}}),{c(){e=w("header"),U(t.$$.fragment),i=I(),d&&d.c(),l=I(),s=w("div"),h&&h.c(),r=I(),U(o.$$.fragment),a=I(),U(u.$$.fragment),p(s,"class","inline-flex flex-gap-sm m-l-auto"),p(e,"class","app-header")},m(g,b){k(g,e,b),F(t,e,null),v(e,i),d&&d.m(e,null),v(e,l),v(e,s),h&&h.m(s,null),v(s,r),F(o,s,null),v(s,a),F(u,s,null),f=!0},p(g,b){d&&d.p&&(!f||b&4096)&&rt(d,c,g,g[12],f?st(c,g[12],b,G1):ot(g[12]),Ao),h&&h.p&&(!f||b&4096)&&rt(h,m,g,g[12],f?st(m,g[12],b,K1):ot(g[12]),No);const _={};b&64&&(_.user=g[6]),b&4192&&(_.$$scope={dirty:b,ctx:g}),u.$set(_)},i(g){f||(E(t.$$.fragment,g),E(d,g),E(h,g),E(o.$$.fragment,g),E(u.$$.fragment,g),f=!0)},o(g){P(t.$$.fragment,g),P(d,g),P(h,g),P(o.$$.fragment,g),P(u.$$.fragment,g),f=!1},d(g){g&&y(e),q(t),d&&d.d(g),h&&h.d(g),q(o),q(u)}}}function J1(n){let e,t,i,l,s,r,o;return{c(){e=w("button"),e.innerHTML='<i class="iconoir-settings"></i> <span class="txt">Settings</span>',t=I(),i=w("hr"),l=I(),s=w("button"),s.innerHTML='<i class="iconoir-log-out"></i> <span class="txt">Logout</span>',p(e,"type","button"),p(e,"class","dropdown-item closable"),p(s,"type","button"),p(s,"class","dropdown-item")},m(a,u){k(a,e,u),k(a,t,u),k(a,i,u),k(a,l,u),k(a,s,u),r||(o=[$(e,"click",Ke(n[9])),$(s,"click",n[10])],r=!0)},p:X,d(a){a&&(y(e),y(t),y(i),y(l),y(s)),r=!1,me(o)}}}function X1(n){let e,t;return e=new Nt({props:{class:"dropdown",$$slots:{default:[J1]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,l){const s={};l&4192&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function Mo(n){var a;let e,t,i,l,s,r,o=((a=n[7])==null?void 0:a.links)&&Ho(n);return{c(){e=w("footer"),o&&o.c(),t=I(),i=w("a"),l=w("i"),s=I(),r=w("span"),r.textContent="Presentator v3.2.9",p(l,"class","iconoir-github"),p(r,"class","txt"),p(i,"href","https://github.com/presentator/presentator/releases"),p(i,"target","_blank"),p(i,"rel","noopener noreferrer"),p(e,"class","app-footer")},m(u,f){k(u,e,f),o&&o.m(e,null),v(e,t),v(e,i),v(i,l),v(i,s),v(i,r)},p(u,f){var c;(c=u[7])!=null&&c.links?o?o.p(u,f):(o=Ho(u),o.c(),o.m(e,t)):o&&(o.d(1),o=null)},d(u){u&&y(e),o&&o.d()}}}function Ho(n){var l;let e,t=Ie(Object.entries((l=n[7])==null?void 0:l.links)),i=[];for(let s=0;s<t.length;s+=1)i[s]=$o(jo(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Ne()},m(s,r){for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(s,r);k(s,e,r)},p(s,r){var o;if(r&128){t=Ie(Object.entries((o=s[7])==null?void 0:o.links));let a;for(a=0;a<t.length;a+=1){const u=jo(s,t,a);i[a]?i[a].p(u,r):(i[a]=$o(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&y(e),xt(i,s)}}}function $o(n){let e,t=n[13]+"",i,l,s,r;return{c(){e=w("a"),i=x(t),s=I(),r=w("span"),r.textContent="|",p(e,"href",l=n[14]),p(e,"target","_blank"),p(e,"rel","noopener noreferrer"),p(r,"class","delimiter")},m(o,a){k(o,e,a),v(e,i),k(o,s,a),k(o,r,a)},p(o,a){a&128&&t!==(t=o[13]+"")&&ke(i,t),a&128&&l!==(l=o[14])&&p(e,"href",l)},d(o){o&&(y(e),y(s),y(r))}}}function Q1(n){let e,t,i,l,s,r,o,a,u,f,c;document.title=e=K.joinNonEmpty([n[1],"Presentator"]," - ");let d=n[2]&&Do(n);const m=n[8].default,h=lt(m,n,n[12],null);let g=n[3]&&Mo(n),b={};return f=new Y1({props:b}),n[11](f),{c(){t=I(),i=w("div"),d&&d.c(),l=I(),s=w("main"),r=w("div"),h&&h.c(),o=I(),g&&g.c(),u=I(),U(f.$$.fragment),p(r,"class","app-content"),p(s,"class","app-body"),p(i,"class",a="app-layout "+n[0]),Z(i,"fullpage",n[4])},m(_,C){k(_,t,C),k(_,i,C),d&&d.m(i,null),v(i,l),v(i,s),v(s,r),h&&h.m(r,null),v(s,o),g&&g.m(s,null),k(_,u,C),F(f,_,C),c=!0},p(_,[C]){(!c||C&2)&&e!==(e=K.joinNonEmpty([_[1],"Presentator"]," - "))&&(document.title=e),_[2]?d?(d.p(_,C),C&4&&E(d,1)):(d=Do(_),d.c(),E(d,1),d.m(i,l)):d&&(ae(),P(d,1,1,()=>{d=null}),ue()),h&&h.p&&(!c||C&4096)&&rt(h,m,_,_[12],c?st(m,_[12],C,null):ot(_[12]),null),_[3]?g?g.p(_,C):(g=Mo(_),g.c(),g.m(s,null)):g&&(g.d(1),g=null),(!c||C&1&&a!==(a="app-layout "+_[0]))&&p(i,"class",a),(!c||C&17)&&Z(i,"fullpage",_[4]);const L={};f.$set(L)},i(_){c||(E(d),E(h,_),E(f.$$.fragment,_),c=!0)},o(_){P(d),P(h,_),P(f.$$.fragment,_),c=!1},d(_){_&&(y(t),y(i),y(u)),d&&d.d(),h&&h.d(_),g&&g.d(),n[11](null),q(f,_)}}}function x1(n,e,t){let i,l;Q(n,Jn,b=>t(6,i=b)),Q(n,_i,b=>t(7,l=b));let{$$slots:s={},$$scope:r}=e,{class:o=""}=e,{title:a=""}=e,{header:u=!0}=e,{footer:f=!0}=e,{fullpage:c=!1}=e,d;const m=()=>d==null?void 0:d.show(i),h=()=>z.logout();function g(b){le[b?"unshift":"push"](()=>{d=b,t(5,d)})}return n.$$set=b=>{"class"in b&&t(0,o=b.class),"title"in b&&t(1,a=b.title),"header"in b&&t(2,u=b.header),"footer"in b&&t(3,f=b.footer),"fullpage"in b&&t(4,c=b.fullpage),"$$scope"in b&&t(12,r=b.$$scope)},[o,a,u,f,c,d,i,l,s,m,h,g,r]}class Oi extends Te{constructor(e){super(),Se(this,e,x1,Q1,_e,{class:0,title:1,header:2,footer:3,fullpage:4})}}function Ro(n,e,t){const i=n.slice();return i[6]=e[t],i}function e_(n){let e,t,i,l,s;function r(){return n[3](n[6])}function o(){return n[4](n[6])}return{c(){e=w("img"),Wn(e.src,t=z.baseUrl+"/_/images/oauth2/"+n[6].name+".svg")||p(e,"src",t),p(e,"alt",i=n[6].displayName+" logo"),p(e,"class","svelte-l24196")},m(a,u){k(a,e,u),l||(s=[$(e,"error",r),$(e,"load",o)],l=!0)},p(a,u){n=a,u&1&&!Wn(e.src,t=z.baseUrl+"/_/images/oauth2/"+n[6].name+".svg")&&p(e,"src",t),u&1&&i!==(i=n[6].displayName+" logo")&&p(e,"alt",i)},d(a){a&&y(e),l=!1,me(s)}}}function t_(n){let e;return{c(){e=w("i"),p(e,"class","iconoir-fingerprint")},m(t,i){k(t,e,i)},p:X,d(t){t&&y(e)}}}function Fo(n){let e,t,i,l,s;function r(f,c){return f[1][f[6].name]?t_:e_}let o=r(n),a=o(n);function u(){return n[5](n[6])}return{c(){e=w("button"),a.c(),t=I(),p(e,"type","button"),p(e,"class","auth-provider svelte-l24196")},m(f,c){k(f,e,c),a.m(e,null),v(e,t),l||(s=[we(i=Oe.call(null,e,n[6].displayName)),$(e,"click",u)],l=!0)},p(f,c){n=f,o===(o=r(n))&&a?a.p(n,c):(a.d(1),a=o(n),a&&(a.c(),a.m(e,t))),i&&et(i.update)&&c&1&&i.update.call(null,n[6].displayName)},d(f){f&&y(e),a.d(),l=!1,me(s)}}}function n_(n){let e,t=Ie(n[0]),i=[];for(let l=0;l<t.length;l+=1)i[l]=Fo(Ro(n,t,l));return{c(){e=w("nav");for(let l=0;l<i.length;l+=1)i[l].c();p(e,"class","auth-providers-list svelte-l24196")},m(l,s){k(l,e,s);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(l,[s]){if(s&7){t=Ie(l[0]);let r;for(r=0;r<t.length;r+=1){const o=Ro(l,t,r);i[r]?i[r].p(o,s):(i[r]=Fo(o),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},i:X,o:X,d(l){l&&y(e),xt(i,l)}}}function i_(n,e,t){let{providers:i=[]}=e,l={};function s(u){z.collection("users").authWithOAuth2({provider:u,createData:{allowEmailNotifications:!0}}).then(()=>{z.replaceWithRemembered()}).catch(f=>{f.isAbort||z.error(f)})}const r=u=>{t(1,l[u.name]=!0,l)},o=u=>{delete l[u.name]},a=u=>s(u.name);return n.$$set=u=>{"providers"in u&&t(0,i=u.providers)},[i,l,s,r,o,a]}class xc extends Te{constructor(e){super(),Se(this,e,i_,n_,_e,{providers:0})}}function l_(n){let e,t,i,l=n[6]&&qo(n),s=n[0].authProviders.length&&Uo(n);return{c(){e=w("div"),l&&l.c(),t=I(),s&&s.c(),p(e,"class","panel-content")},m(r,o){k(r,e,o),l&&l.m(e,null),v(e,t),s&&s.m(e,null),i=!0},p(r,o){r[6]?l?(l.p(r,o),o&64&&E(l,1)):(l=qo(r),l.c(),E(l,1),l.m(e,t)):l&&(ae(),P(l,1,1,()=>{l=null}),ue()),r[0].authProviders.length?s?(s.p(r,o),o&1&&E(s,1)):(s=Uo(r),s.c(),E(s,1),s.m(e,null)):s&&(ae(),P(s,1,1,()=>{s=null}),ue())},i(r){i||(E(l),E(s),i=!0)},o(r){P(l),P(s),i=!1},d(r){r&&y(e),l&&l.d(),s&&s.d()}}}function s_(n){let e;return{c(){e=w("span"),p(e,"class","loader")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function qo(n){let e,t,i,l,s,r;return e=new Le({props:{class:"form-field form-field-lg",name:"identity",$$slots:{default:[r_,({uniqueId:o})=>({11:o}),({uniqueId:o})=>o?2048:0]},$$scope:{ctx:n}}}),i=new Le({props:{class:"form-field form-field-lg",name:"password",$$slots:{default:[o_,({uniqueId:o})=>({11:o}),({uniqueId:o})=>o?2048:0]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment),t=I(),U(i.$$.fragment),l=I(),s=w("button"),s.innerHTML='<span class="txt">Login</span> <i class="iconoir-arrow-right"></i>',p(s,"type","submit"),p(s,"class","btn btn-block btn-lg btn-primary btn-next"),Z(s,"btn-disabled",n[5]),Z(s,"btn-loading",n[5])},m(o,a){F(e,o,a),k(o,t,a),F(i,o,a),k(o,l,a),k(o,s,a),r=!0},p(o,a){const u={};a&6154&&(u.$$scope={dirty:a,ctx:o}),e.$set(u);const f={};a&6160&&(f.$$scope={dirty:a,ctx:o}),i.$set(f),(!r||a&32)&&Z(s,"btn-disabled",o[5]),(!r||a&32)&&Z(s,"btn-loading",o[5])},i(o){r||(E(e.$$.fragment,o),E(i.$$.fragment,o),r=!0)},o(o){P(e.$$.fragment,o),P(i.$$.fragment,o),r=!1},d(o){o&&(y(t),y(l),y(s)),q(e,o),q(i,o)}}}function r_(n){let e,t,i,l,s,r,o,a,u,f;return{c(){e=w("div"),t=w("label"),i=w("i"),r=I(),o=w("input"),p(i,"class","iconoir-user"),p(t,"for",l=n[11]),p(t,"class","addon prefix"),o.autofocus=!0,o.required=!0,p(o,"type","text"),p(o,"id",a=n[11]),p(o,"placeholder",n[1]),p(e,"class","field-group")},m(c,d){k(c,e,d),v(e,t),v(t,i),v(e,r),v(e,o),ye(o,n[3]),o.focus(),u||(f=[we(s=Oe.call(null,t,{position:"left",text:n[1]})),$(o,"input",n[8])],u=!0)},p(c,d){d&2048&&l!==(l=c[11])&&p(t,"for",l),s&&et(s.update)&&d&2&&s.update.call(null,{position:"left",text:c[1]}),d&2048&&a!==(a=c[11])&&p(o,"id",a),d&2&&p(o,"placeholder",c[1]),d&8&&o.value!==c[3]&&ye(o,c[3])},d(c){c&&y(e),u=!1,me(f)}}}function o_(n){let e,t,i,l,s,r,o,a,u,f,c;return{c(){e=w("div"),t=w("label"),i=w("i"),s=I(),r=w("input"),a=I(),u=w("a"),u.textContent="Forgotten password?",p(i,"class","iconoir-lock"),p(t,"for",l=n[11]),p(t,"class","addon prefix"),r.required=!0,p(r,"type","password"),p(r,"id",o=n[11]),p(r,"placeholder","Password"),p(e,"class","field-group m-b-10"),p(u,"href","/forgotten-password"),p(u,"class","link-primary txt-sm")},m(d,m){k(d,e,m),v(e,t),v(t,i),v(e,s),v(e,r),ye(r,n[4]),k(d,a,m),k(d,u,m),f||(c=[we(Oe.call(null,t,{position:"left",text:"Password"})),$(r,"input",n[9]),we(wi.call(null,u))],f=!0)},p(d,m){m&2048&&l!==(l=d[11])&&p(t,"for",l),m&2048&&o!==(o=d[11])&&p(r,"id",o),m&16&&r.value!==d[4]&&ye(r,d[4])},d(d){d&&(y(e),y(a),y(u)),f=!1,me(c)}}}function Uo(n){let e,t,i,l=n[6]&&Wo();return t=new xc({props:{providers:n[0].authProviders}}),{c(){l&&l.c(),e=I(),U(t.$$.fragment)},m(s,r){l&&l.m(s,r),k(s,e,r),F(t,s,r),i=!0},p(s,r){s[6]?l||(l=Wo(),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null);const o={};r&1&&(o.providers=s[0].authProviders),t.$set(o)},i(s){i||(E(t.$$.fragment,s),i=!0)},o(s){P(t.$$.fragment,s),i=!1},d(s){s&&y(e),l&&l.d(s),q(t,s)}}}function Wo(n){let e;return{c(){e=w("p"),e.textContent="Or sign in with",p(e,"class","m-t-base m-b-sm")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function a_(n){let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g;i=new Vs({});const b=[s_,l_],_=[];function C(L,T){return L[2]?0:1}return a=C(n),u=_[a]=b[a](n),{c(){e=w("div"),t=w("header"),U(i.$$.fragment),l=I(),s=w("form"),r=w("h4"),r.textContent=`${ed}`,o=I(),u.c(),f=I(),c=w("div"),d=w("a"),d.innerHTML="Don&#39;t have an account yet? <strong>Register!</strong>",p(t,"class","block txt-center m-b-base"),p(r,"class","m-b-base"),p(s,"class","panel txt-center"),p(d,"href","/register"),p(d,"class","fade"),p(c,"class","block txt-center m-t-base"),p(e,"class","wrapper wrapper-sm m-b-base entrance-top")},m(L,T){k(L,e,T),v(e,t),F(i,t,null),v(e,l),v(e,s),v(s,r),v(s,o),_[a].m(s,null),v(e,f),v(e,c),v(c,d),m=!0,h||(g=[$(s,"submit",be(n[7])),we(wi.call(null,d))],h=!0)},p(L,T){let O=a;a=C(L),a===O?_[a].p(L,T):(ae(),P(_[O],1,1,()=>{_[O]=null}),ue(),u=_[a],u?u.p(L,T):(u=_[a]=b[a](L),u.c()),E(u,1),u.m(s,null))},i(L){m||(E(i.$$.fragment,L),E(u),m=!0)},o(L){P(i.$$.fragment,L),P(u),m=!1},d(L){L&&y(e),q(i),_[a].d(),h=!1,me(g)}}}function u_(n){let e,t;return e=new Oi({props:{fullpage:!0,header:!1,title:ed,$$slots:{default:[a_]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,[l]){const s={};l&4223&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}const ed="Login";function f_(n,e,t){let i,l="",s={},r=!1,o="",a="",u=!1;f();async function f(){t(2,r=!0);try{t(0,s=await z.collection("users").listAuthMethods()),t(2,r=!1)}catch(h){h!=null&&h.isAbort&&(z.error(h),t(2,r=!1))}}async function c(){if(!u){t(5,u=!0);try{await z.collection("users").authWithPassword(o,a),Wc(),z.replaceWithRemembered()}catch{qs("Invalid login credentials or unverified user.")}t(5,u=!1)}}function d(){o=this.value,t(3,o)}function m(){a=this.value,t(4,a)}return n.$$.update=()=>{n.$$.dirty&1&&t(6,i=s.emailPassword||s.usernamePassword),n.$$.dirty&1&&(s.emailPassword&&s.usernamePassword?t(1,l="Username or email"):s.emailPassword?t(1,l="Email"):s.usernamePassword?t(1,l="Username"):t(1,l=""))},[s,l,r,o,a,u,i,c,d,m]}class c_ extends Te{constructor(e){super(),Se(this,e,f_,u_,_e,{})}}function d_(n){let e,t,i,l=n[9]&&Vo(n),s=n[1].authProviders.length&&zo(n);return{c(){e=w("div"),l&&l.c(),t=I(),s&&s.c(),p(e,"class","panel-content")},m(r,o){k(r,e,o),l&&l.m(e,null),v(e,t),s&&s.m(e,null),i=!0},p(r,o){r[9]?l?(l.p(r,o),o&512&&E(l,1)):(l=Vo(r),l.c(),E(l,1),l.m(e,t)):l&&(ae(),P(l,1,1,()=>{l=null}),ue()),r[1].authProviders.length?s?(s.p(r,o),o&2&&E(s,1)):(s=zo(r),s.c(),E(s,1),s.m(e,null)):s&&(ae(),P(s,1,1,()=>{s=null}),ue())},i(r){i||(E(l),E(s),i=!0)},o(r){P(l),P(s),i=!1},d(r){r&&y(e),l&&l.d(),s&&s.d()}}}function p_(n){let e;return{c(){e=w("span"),p(e,"class","loader")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function m_(n){let e,t,i,l,s,r,o,a;return{c(){e=w("div"),t=w("div"),i=w("p"),l=x(`Go check your email for verify your account:
                            `),s=w("br"),r=I(),o=w("strong"),a=x(n[0]),p(t,"class","content txt-center"),p(e,"class","alert m-0")},m(u,f){k(u,e,f),v(e,t),v(t,i),v(i,l),v(i,s),v(i,r),v(i,o),v(o,a)},p(u,f){f&1&&ke(a,u[0])},i:X,o:X,d(u){u&&y(e)}}}function Vo(n){let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g,b;return e=new Le({props:{class:"form-field form-field-lg",name:"email",$$slots:{default:[h_,({uniqueId:_})=>({19:_}),({uniqueId:_})=>_?524288:0]},$$scope:{ctx:n}}}),i=new Le({props:{class:"form-field form-field-lg",name:"username",$$slots:{default:[__,({uniqueId:_})=>({19:_}),({uniqueId:_})=>_?524288:0]},$$scope:{ctx:n}}}),s=new Le({props:{class:"form-field form-field-lg",name:"password",$$slots:{default:[g_,({uniqueId:_})=>({19:_}),({uniqueId:_})=>_?524288:0]},$$scope:{ctx:n}}}),o=new Le({props:{class:"form-field form-field-lg",name:"passwordConfirm",$$slots:{default:[b_,({uniqueId:_})=>({19:_}),({uniqueId:_})=>_?524288:0]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment),t=I(),U(i.$$.fragment),l=I(),U(s.$$.fragment),r=I(),U(o.$$.fragment),a=I(),u=w("button"),u.innerHTML='<span class="txt">Register</span> <i class="iconoir-arrow-right"></i>',f=I(),c=w("p"),d=x(`By registering you agree with our
                            `),m=w("a"),h=x("Terms and Privacy policy"),p(u,"type","submit"),p(u,"class","btn btn-block btn-lg btn-primary btn-next"),Z(u,"btn-disabled",n[6]),Z(u,"btn-loading",n[6]),p(m,"href",g=n[10].termsUrl),p(m,"target","_blank"),p(m,"rel","noreferrer noopener"),p(c,"class","m-t-xs m-b-sm txt-sm txt-hint")},m(_,C){F(e,_,C),k(_,t,C),F(i,_,C),k(_,l,C),F(s,_,C),k(_,r,C),F(o,_,C),k(_,a,C),k(_,u,C),k(_,f,C),k(_,c,C),v(c,d),v(c,m),v(m,h),b=!0},p(_,C){const L={};C&1572865&&(L.$$scope={dirty:C,ctx:_}),e.$set(L);const T={};C&1572876&&(T.$$scope={dirty:C,ctx:_}),i.$set(T);const O={};C&1572880&&(O.$$scope={dirty:C,ctx:_}),s.$set(O);const S={};C&1572896&&(S.$$scope={dirty:C,ctx:_}),o.$set(S),(!b||C&64)&&Z(u,"btn-disabled",_[6]),(!b||C&64)&&Z(u,"btn-loading",_[6]),(!b||C&1024&&g!==(g=_[10].termsUrl))&&p(m,"href",g)},i(_){b||(E(e.$$.fragment,_),E(i.$$.fragment,_),E(s.$$.fragment,_),E(o.$$.fragment,_),b=!0)},o(_){P(e.$$.fragment,_),P(i.$$.fragment,_),P(s.$$.fragment,_),P(o.$$.fragment,_),b=!1},d(_){_&&(y(t),y(l),y(r),y(a),y(u),y(f),y(c)),q(e,_),q(i,_),q(s,_),q(o,_)}}}function h_(n){let e,t,i,l,s,r,o,a,u;return{c(){e=w("div"),t=w("label"),i=w("i"),s=I(),r=w("input"),p(i,"class","iconoir-mail"),p(t,"for",l=n[19]),p(t,"class","addon prefix"),r.autofocus=!0,p(r,"type","email"),p(r,"id",o=n[19]),p(r,"name","email"),p(r,"placeholder","Email"),p(e,"class","field-group")},m(f,c){k(f,e,c),v(e,t),v(t,i),v(e,s),v(e,r),ye(r,n[0]),r.focus(),a||(u=[we(Oe.call(null,t,{position:"left",text:"Email"})),$(r,"input",n[13])],a=!0)},p(f,c){c&524288&&l!==(l=f[19])&&p(t,"for",l),c&524288&&o!==(o=f[19])&&p(r,"id",o),c&1&&r.value!==f[0]&&ye(r,f[0])},d(f){f&&y(e),a=!1,me(u)}}}function __(n){let e,t,i,l,s,r,o,a,u;return{c(){e=w("div"),t=w("label"),i=w("i"),s=I(),r=w("input"),p(i,"class","iconoir-user"),p(t,"for",l=n[19]),p(t,"class","addon prefix"),p(r,"type","text"),p(r,"id",o=n[19]),p(r,"name","username"),p(r,"placeholder","Username"),p(e,"class","field-group")},m(f,c){k(f,e,c),v(e,t),v(t,i),v(e,s),v(e,r),ye(r,n[3]),a||(u=[we(Oe.call(null,t,{position:"left",text:"Username"})),$(r,"input",n[14]),$(r,"input",n[15])],a=!0)},p(f,c){c&524288&&l!==(l=f[19])&&p(t,"for",l),c&524288&&o!==(o=f[19])&&p(r,"id",o),c&8&&r.value!==f[3]&&ye(r,f[3])},d(f){f&&y(e),a=!1,me(u)}}}function g_(n){let e,t,i,l,s,r,o,a,u;return{c(){e=w("div"),t=w("label"),i=w("i"),s=I(),r=w("input"),p(i,"class","iconoir-lock"),p(t,"for",l=n[19]),p(t,"class","addon prefix"),r.required=!0,p(r,"type","password"),p(r,"id",o=n[19]),p(r,"name","password"),p(r,"placeholder","Password"),p(e,"class","field-group")},m(f,c){k(f,e,c),v(e,t),v(t,i),v(e,s),v(e,r),ye(r,n[4]),a||(u=[we(Oe.call(null,t,{position:"left",text:"Password"})),$(r,"input",n[16])],a=!0)},p(f,c){c&524288&&l!==(l=f[19])&&p(t,"for",l),c&524288&&o!==(o=f[19])&&p(r,"id",o),c&16&&r.value!==f[4]&&ye(r,f[4])},d(f){f&&y(e),a=!1,me(u)}}}function b_(n){let e,t,i,l,s,r,o,a,u;return{c(){e=w("div"),t=w("label"),i=w("i"),s=I(),r=w("input"),p(i,"class","iconoir-lock"),p(t,"for",l=n[19]),p(t,"class","addon prefix"),r.required=!0,p(r,"type","password"),p(r,"id",o=n[19]),p(r,"name","passwordConfirm"),p(r,"placeholder","Password confirm"),p(e,"class","field-group")},m(f,c){k(f,e,c),v(e,t),v(t,i),v(e,s),v(e,r),ye(r,n[5]),a||(u=[we(Oe.call(null,t,{position:"left",text:"Password confirm"})),$(r,"input",n[17])],a=!0)},p(f,c){c&524288&&l!==(l=f[19])&&p(t,"for",l),c&524288&&o!==(o=f[19])&&p(r,"id",o),c&32&&r.value!==f[5]&&ye(r,f[5])},d(f){f&&y(e),a=!1,me(u)}}}function zo(n){let e,t,i,l=n[9]&&Bo();return t=new xc({props:{providers:n[1].authProviders}}),{c(){l&&l.c(),e=I(),U(t.$$.fragment)},m(s,r){l&&l.m(s,r),k(s,e,r),F(t,s,r),i=!0},p(s,r){s[9]?l||(l=Bo(),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null);const o={};r&2&&(o.providers=s[1].authProviders),t.$set(o)},i(s){i||(E(t.$$.fragment,s),i=!0)},o(s){P(t.$$.fragment,s),i=!1},d(s){s&&y(e),l&&l.d(s),q(t,s)}}}function Bo(n){let e;return{c(){e=w("p"),e.textContent="Or sign up with",p(e,"class","m-t-base m-b-sm")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function w_(n){let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g;i=new Vs({});const b=[m_,p_,d_],_=[];function C(L,T){return L[8]?0:L[7]?1:2}return a=C(n),u=_[a]=b[a](n),{c(){e=w("div"),t=w("header"),U(i.$$.fragment),l=I(),s=w("form"),r=w("h4"),r.textContent=`${td}`,o=I(),u.c(),f=I(),c=w("div"),d=w("a"),d.innerHTML="Already have an account? <strong>Login!</strong>",p(t,"class","block txt-center m-b-base"),p(r,"class","m-b-base"),p(s,"class","panel txt-center"),p(d,"href","/login"),p(d,"class","fade"),p(c,"class","block txt-center m-t-base"),p(e,"class","wrapper wrapper-sm m-b-base entrance-top")},m(L,T){k(L,e,T),v(e,t),F(i,t,null),v(e,l),v(e,s),v(s,r),v(s,o),_[a].m(s,null),v(e,f),v(e,c),v(c,d),m=!0,h||(g=[$(s,"submit",be(n[11])),we(wi.call(null,d))],h=!0)},p(L,T){let O=a;a=C(L),a===O?_[a].p(L,T):(ae(),P(_[O],1,1,()=>{_[O]=null}),ue(),u=_[a],u?u.p(L,T):(u=_[a]=b[a](L),u.c()),E(u,1),u.m(s,null))},i(L){m||(E(i.$$.fragment,L),E(u),m=!0)},o(L){P(i.$$.fragment,L),P(u),m=!1},d(L){L&&y(e),q(i),_[a].d(),h=!1,me(g)}}}function v_(n){let e,t;return e=new Oi({props:{fullpage:!0,header:!1,title:td,$$slots:{default:[w_]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,[l]){const s={};l&1050623&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}const td="Register";function y_(n,e,t){let i,l,s;Q(n,_i,S=>t(10,s=S));let r="",o="",a="",u="",f=!1,c={},d=!1,m=!1,h=!1;g();async function g(){t(7,d=!0);try{t(1,c=await z.collection("users").listAuthMethods())}catch(S){z.error(S)}t(7,d=!1)}async function b(){if(!f){t(6,f=!0);try{const S=await z.collection("users").create({email:r,username:o,password:a,passwordConfirm:u,allowEmailNotifications:!0});if(Wc(),r&&await z.collection("users").requestVerification(r),c.onlyVerified)t(8,m=!0);else{const j=c.usernamePassword?S.username:r;try{await z.collection("users").authWithPassword(j,a)}catch{}cn("/")}}catch(S){z.error(S)}t(6,f=!1)}}function _(){r=this.value,t(0,r)}const C=()=>{t(2,h=!0)};function L(){o=this.value,t(3,o),t(2,h),t(12,l),t(0,r)}function T(){a=this.value,t(4,a)}function O(){u=this.value,t(5,u)}return n.$$.update=()=>{var S;n.$$.dirty&2&&t(9,i=c.emailPassword||c.usernamePassword),n.$$.dirty&1&&t(12,l=((S=r.split("@"))==null?void 0:S[0])||""),n.$$.dirty&4100&&(h||t(3,o=l))},[r,c,h,o,a,u,f,d,m,i,s,b,l,_,C,L,T,O]}class k_ extends Te{constructor(e){super(),Se(this,e,y_,v_,_e,{})}}const S_=n=>({isEmpty:n&32}),Zo=n=>({isEmpty:n[5]}),T_=n=>({isEmpty:n&32}),Yo=n=>({isEmpty:n[5]});function Ko(n){let e,t,i,l,s,r,o;return{c(){e=w("button"),t=w("span"),t.textContent="Clear",p(t,"class","txt"),p(e,"type","button"),p(e,"class",i="btn btn-warning btn-"+(n[7][n[3]]||"sm")+" btn-expanded-"+(n[7][n[3]]||"sm"))},m(a,u){k(a,e,u),v(e,t),s=!0,r||(o=$(e,"click",Ke(n[9])),r=!0)},p(a,u){(!s||u&8&&i!==(i="btn btn-warning btn-"+(a[7][a[3]]||"sm")+" btn-expanded-"+(a[7][a[3]]||"sm")))&&p(e,"class",i)},i(a){s||(a&&vt(()=>{s&&(l||(l=ut(e,En,{duration:150,x:5},!0)),l.run(1))}),s=!0)},o(a){a&&(l||(l=ut(e,En,{duration:150,x:5},!1)),l.run(0)),s=!1},d(a){a&&y(e),a&&l&&l.end(),r=!1,o()}}}function C_(n){let e,t,i,l,s,r,o,a,u,f,c,d;const m=n[11].prefix,h=lt(m,n,n[10],Yo);let g=!n[5]&&Ko(n);const b=n[11].suffix,_=lt(b,n,n[10],Zo);return{c(){e=w("div"),t=w("div"),h&&h.c(),i=I(),l=w("div"),l.innerHTML='<i class="iconoir-search"></i>',s=I(),r=w("input"),o=I(),g&&g.c(),a=I(),_&&_.c(),p(l,"class","addon prefix"),p(r,"type","text"),p(r,"id",n[6]),p(r,"placeholder",n[2]),p(t,"class","field-group"),p(e,"class",u="form-field form-field-"+n[3]+" search-bar "+n[1])},m(C,L){k(C,e,L),v(e,t),h&&h.m(t,null),v(t,i),v(t,l),v(t,s),v(t,r),n[12](r),ye(r,n[0]),v(t,o),g&&g.m(t,null),v(t,a),_&&_.m(t,null),f=!0,c||(d=[$(r,"input",n[13]),$(t,"click",n[8])],c=!0)},p(C,[L]){h&&h.p&&(!f||L&1056)&&rt(h,m,C,C[10],f?st(m,C[10],L,T_):ot(C[10]),Yo),(!f||L&4)&&p(r,"placeholder",C[2]),L&1&&r.value!==C[0]&&ye(r,C[0]),C[5]?g&&(ae(),P(g,1,1,()=>{g=null}),ue()):g?(g.p(C,L),L&32&&E(g,1)):(g=Ko(C),g.c(),E(g,1),g.m(t,a)),_&&_.p&&(!f||L&1056)&&rt(_,b,C,C[10],f?st(b,C[10],L,S_):ot(C[10]),Zo),(!f||L&10&&u!==(u="form-field form-field-"+C[3]+" search-bar "+C[1]))&&p(e,"class",u)},i(C){f||(E(h,C),E(g),E(_,C),f=!0)},o(C){P(h,C),P(g),P(_,C),f=!1},d(C){C&&y(e),h&&h.d(C),n[12](null),g&&g.d(),_&&_.d(C),c=!1,me(d)}}}function O_(n,e,t){let i,{$$slots:l={},$$scope:s}=e;const r="search_"+K.randomString(5),o={lg:"sm",md:"sm",sm:"xs"};let{class:a=""}=e,{value:u}=e,{placeholder:f="Search..."}=e,{size:c="lg"}=e,d;function m(){d==null||d.focus()}function h(){t(0,u="")}function g(_){le[_?"unshift":"push"](()=>{d=_,t(4,d)})}function b(){u=this.value,t(0,u)}return n.$$set=_=>{"class"in _&&t(1,a=_.class),"value"in _&&t(0,u=_.value),"placeholder"in _&&t(2,f=_.placeholder),"size"in _&&t(3,c=_.size),"$$scope"in _&&t(10,s=_.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t(5,i=K.isEmpty(u))},[u,a,f,c,d,i,r,o,m,h,s,l,g,b]}class nd extends Te{constructor(e){super(),Se(this,e,O_,C_,_e,{class:1,value:0,placeholder:2,size:3})}}const Qi=Ve([]),tn=Ve(!1),xi=Ve("");function Ul(){Qi.set([]),tn.set(!1),xi.set("")}const an=jt([Qi,xi],([n,e])=>n.length?e&&n.find(t=>t.id==e)||n[0]:null);an.set=n=>{K.isObject(n)?Yn(n,!0):xi.set(n)};function Yn(n,e=!1){n&&(Qi.update(t=>(K.pushOrReplaceObject(t,n),t)),e&&xi.set(n.id))}function ns(n){n&&(Qi.update(e=>(K.removeByKey(e,"id",n.id),e)),xi.update(e=>e==n.id?"":e))}function Go(n){let e,t=n[0].value+"",i;return{c(){e=w("small"),i=x(t),p(e,"class","txt-hint m-l-auto")},m(l,s){k(l,e,s),v(e,i)},p(l,s){s&1&&t!==(t=l[0].value+"")&&ke(i,t)},d(l){l&&y(e)}}}function E_(n){let e,t,i=n[0].label+"",l,s,r=n[0].value&&Go(n);return{c(){e=w("div"),t=w("span"),l=x(i),s=I(),r&&r.c(),p(t,"class","txt"),p(e,"class","flex")},m(o,a){k(o,e,a),v(e,t),v(t,l),v(e,s),r&&r.m(e,null)},p(o,[a]){a&1&&i!==(i=o[0].label+"")&&ke(l,i),o[0].value?r?r.p(o,a):(r=Go(o),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:X,o:X,d(o){o&&y(e),r&&r.d()}}}function L_(n,e,t){let{item:i={}}=e;return n.$$set=l=>{"item"in l&&t(0,i=l.item)},[i]}class Jo extends Te{constructor(e){super(),Se(this,e,L_,E_,_e,{item:0})}}function Xo(n){let e,t,i,l,s,r,o;return{c(){e=w("div"),t=w("input"),i=I(),l=w("div"),s=w("input"),p(t,"type","number"),p(t,"min","1"),p(t,"placeholder","Width"),t.required=!0,p(e,"class","col-3"),p(s,"type","number"),p(s,"min","1"),p(s,"placeholder","Height"),s.required=!0,p(l,"class","col-3")},m(a,u){k(a,e,u),v(e,t),ye(t,n[3]),k(a,i,u),k(a,l,u),v(l,s),ye(s,n[4]),r||(o=[$(t,"input",n[8]),we(Oe.call(null,e,"Width")),$(s,"input",n[9]),we(Oe.call(null,l,"Height"))],r=!0)},p(a,u){u&8&&wt(t.value)!==a[3]&&ye(t,a[3]),u&16&&wt(s.value)!==a[4]&&ye(s,a[4])},d(a){a&&(y(e),y(i),y(l)),r=!1,me(o)}}}function I_(n){let e,t,i,l,s,r,o;function a(c){n[7](c)}let u={id:n[0],upside:!0,labelComponent:Jo,optionComponent:Jo,items:n[1]};n[2]!==void 0&&(u.keyOfSelected=n[2]),i=new dn({props:u}),le.push(()=>De(i,"keyOfSelected",a));let f=n[2]==""&&Xo(n);return{c(){e=w("div"),t=w("div"),U(i.$$.fragment),r=I(),f&&f.c(),p(t,"class",s="col-"+(n[2]==""?6:12)),p(e,"class","grid grid-sm")},m(c,d){k(c,e,d),v(e,t),F(i,t,null),v(e,r),f&&f.m(e,null),o=!0},p(c,[d]){const m={};d&1&&(m.id=c[0]),d&2&&(m.items=c[1]),!l&&d&4&&(l=!0,m.keyOfSelected=c[2],Ae(()=>l=!1)),i.$set(m),(!o||d&4&&s!==(s="col-"+(c[2]==""?6:12)))&&p(t,"class",s),c[2]==""?f?f.p(c,d):(f=Xo(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(c){o||(E(i.$$.fragment,c),o=!0)},o(c){P(i.$$.fragment,c),o=!1},d(c){c&&y(e),q(i),f&&f.d()}}}function P_(n,e,t){var b;let{id:i}=e,{options:l=[]}=e,{value:s=((b=l==null?void 0:l[0])==null?void 0:b.value)||""}=e,r=s,o="",a=0,u=0;function f(_){t(6,r=_),t(5,s=_),d()}function c(){var _;t(2,o=((_=l.find(C=>C.value==s))==null?void 0:_.value)||""),d()}function d(){const _=s.split("x");t(3,a=(_==null?void 0:_[0])<<0),t(4,u=(_==null?void 0:_[1])<<0)}function m(_){o=_,t(2,o)}function h(){a=wt(this.value),t(3,a)}function g(){u=wt(this.value),t(4,u)}return n.$$set=_=>{"id"in _&&t(0,i=_.id),"options"in _&&t(1,l=_.options),"value"in _&&t(5,s=_.value)},n.$$.update=()=>{n.$$.dirty&96&&r!=s&&(c(),f(s)),n.$$.dirty&2&&l&&c(),n.$$.dirty&4&&o&&f(o),n.$$.dirty&24&&(a||u)&&f(`${a}x${u}`)},[i,l,o,a,u,s,r,m,h,g]}class j_ extends Te{constructor(e){super(),Se(this,e,P_,I_,_e,{id:0,options:1,value:5})}}function N_(n){let e,t,i,l,s,r,o,a,u,f,c;return u=kf(n[5][0]),{c(){e=w("input"),i=I(),l=w("label"),s=w("i"),r=I(),o=w("span"),o.textContent="Desktop",p(e,"type","radio"),p(e,"id",t=n[13]),p(e,"name","type"),e.__value=oi,ye(e,e.__value),p(s,"class","iconoir-modern-tv svelte-1i8gqwf"),p(o,"class","txt"),p(l,"for",a=n[13]),p(l,"class","svelte-1i8gqwf"),u.p(e)},m(d,m){k(d,e,m),e.checked=e.__value===n[1],k(d,i,m),k(d,l,m),v(l,s),v(l,r),v(l,o),f||(c=$(e,"change",n[4]),f=!0)},p(d,m){m&8192&&t!==(t=d[13])&&p(e,"id",t),m&2&&(e.checked=e.__value===d[1]),m&8192&&a!==(a=d[13])&&p(l,"for",a)},d(d){d&&(y(e),y(i),y(l)),u.r(),f=!1,c()}}}function A_(n){let e,t,i,l,s,r,o,a,u,f,c;return u=kf(n[5][0]),{c(){e=w("input"),i=I(),l=w("label"),s=w("i"),r=I(),o=w("span"),o.textContent="Mobile",p(e,"type","radio"),p(e,"id",t=n[13]),p(e,"name","type"),e.__value=id,ye(e,e.__value),p(s,"class","iconoir-smartphone-device svelte-1i8gqwf"),p(o,"class","txt"),p(l,"for",a=n[13]),p(l,"class","svelte-1i8gqwf"),u.p(e)},m(d,m){k(d,e,m),e.checked=e.__value===n[1],k(d,i,m),k(d,l,m),v(l,s),v(l,r),v(l,o),f||(c=$(e,"change",n[6]),f=!0)},p(d,m){m&8192&&t!==(t=d[13])&&p(e,"id",t),m&2&&(e.checked=e.__value===d[1]),m&8192&&a!==(a=d[13])&&p(l,"for",a)},d(d){d&&(y(e),y(i),y(l)),u.r(),f=!1,c()}}}function D_(n){let e,t,i,l,s;return t=new Le({props:{class:"group-item",$$slots:{default:[N_,({uniqueId:r})=>({13:r}),({uniqueId:r})=>r?8192:0]},$$scope:{ctx:n}}}),l=new Le({props:{class:"group-item",$$slots:{default:[A_,({uniqueId:r})=>({13:r}),({uniqueId:r})=>r?8192:0]},$$scope:{ctx:n}}}),{c(){e=w("div"),U(t.$$.fragment),i=I(),U(l.$$.fragment),p(e,"class","radio-group type-group svelte-1i8gqwf")},m(r,o){k(r,e,o),F(t,e,null),v(e,i),F(l,e,null),s=!0},p(r,o){const a={};o&24578&&(a.$$scope={dirty:o,ctx:r}),t.$set(a);const u={};o&24578&&(u.$$scope={dirty:o,ctx:r}),l.$set(u)},i(r){s||(E(t.$$.fragment,r),E(l.$$.fragment,r),s=!0)},o(r){P(t.$$.fragment,r),P(l.$$.fragment,r),s=!1},d(r){r&&y(e),q(t),q(l)}}}function M_(n){let e,t,i,l;return e=new Le({props:{class:"form-field m-b-sm entrance-top",$$slots:{default:[$_,({uniqueId:s})=>({13:s}),({uniqueId:s})=>s?8192:0]},$$scope:{ctx:n}}}),i=new Le({props:{class:"form-field entrance-top",name:"scale",$$slots:{default:[R_,({uniqueId:s})=>({13:s}),({uniqueId:s})=>s?8192:0]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment),t=I(),U(i.$$.fragment)},m(s,r){F(e,s,r),k(s,t,r),F(i,s,r),l=!0},p(s,r){const o={};r&24577&&(o.$$scope={dirty:r,ctx:s}),e.$set(o);const a={};r&24577&&(a.$$scope={dirty:r,ctx:s}),i.$set(a)},i(s){l||(E(e.$$.fragment,s),E(i.$$.fragment,s),l=!0)},o(s){P(e.$$.fragment,s),P(i.$$.fragment,s),l=!1},d(s){s&&y(t),q(e,s),q(i,s)}}}function H_(n){let e,t;return e=new Le({props:{class:"form-field entrance-top",name:"scale",$$slots:{default:[F_,({uniqueId:i})=>({13:i}),({uniqueId:i})=>i?8192:0]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,l){const s={};l&24577&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function $_(n){let e,t,i;function l(r){n[8](r)}let s={id:n[13],options:n[2]};return n[0].size!==void 0&&(s.value=n[0].size),e=new j_({props:s}),le.push(()=>De(e,"value",l)),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};o&8192&&(a.id=r[13]),!t&&o&1&&(t=!0,a.value=r[0].size,Ae(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function R_(n){let e,t,i,l,s,r,o,a,u;return{c(){e=w("input"),l=I(),s=w("label"),r=w("span"),r.textContent="Auto scale",p(e,"type","checkbox"),p(e,"id",t=n[13]),e.checked=i=n[0].scale==0,p(r,"class","txt"),p(s,"for",o=n[13])},m(f,c){k(f,e,c),k(f,l,c),k(f,s,c),v(s,r),a||(u=$(e,"change",n[9]),a=!0)},p(f,c){c&8192&&t!==(t=f[13])&&p(e,"id",t),c&1&&i!==(i=f[0].scale==0)&&(e.checked=i),c&8192&&o!==(o=f[13])&&p(s,"for",o)},d(f){f&&(y(e),y(l),y(s)),a=!1,u()}}}function F_(n){let e,t,i,l,s,r,o,a,u;return{c(){e=w("input"),l=I(),s=w("label"),r=w("span"),r.textContent="2x Retina rescale",p(e,"type","checkbox"),p(e,"id",t=n[13]),e.checked=i=n[0].scale==.5,p(r,"class","txt"),p(s,"for",o=n[13])},m(f,c){k(f,e,c),k(f,l,c),k(f,s,c),v(s,r),a||(u=$(e,"change",n[7]),a=!0)},p(f,c){c&8192&&t!==(t=f[13])&&p(e,"id",t),c&1&&i!==(i=f[0].scale==.5)&&(e.checked=i),c&8192&&o!==(o=f[13])&&p(s,"for",o)},d(f){f&&(y(e),y(l),y(s)),a=!1,u()}}}function q_(n){let e,t,i,l,s,r;e=new Le({props:{class:"form-field m-b-sm",$$slots:{default:[D_]},$$scope:{ctx:n}}});const o=[H_,M_],a=[];function u(f,c){return f[1]==oi?0:1}return i=u(n),l=a[i]=o[i](n),{c(){U(e.$$.fragment),t=I(),l.c(),s=Ne()},m(f,c){F(e,f,c),k(f,t,c),a[i].m(f,c),k(f,s,c),r=!0},p(f,[c]){const d={};c&16386&&(d.$$scope={dirty:c,ctx:f}),e.$set(d);let m=i;i=u(f),i===m?a[i].p(f,c):(ae(),P(a[m],1,1,()=>{a[m]=null}),ue(),l=a[i],l?l.p(f,c):(l=a[i]=o[i](f),l.c()),E(l,1),l.m(s.parentNode,s))},i(f){r||(E(e.$$.fragment,f),E(l),r=!0)},o(f){P(e.$$.fragment,f),P(l),r=!1},d(f){f&&(y(t),y(s)),q(e,f),a[i].d(f)}}}const oi="desktop",id="mobile";function U_(n,e,t){let{prototype:i}=e;const l=[{label:"Google Pixel",value:"412x732"},{label:"iPhone XS",value:"375x812"},{label:"iPhone 13/14",value:"390x844"},{label:"iPad Pro",value:"1024x1366"},{label:"Other",value:""}];let s=oi,r=s;function o(){t(1,s=i.size?id:oi),t(3,r=s),s==oi&&!i.scale&&t(0,i.scale=1,i)}function a(){t(0,i.size="",i),t(0,i.scale=i.scale==.5?.5:1,i)}function u(){t(0,i.size=l[0].value,i),t(0,i.scale=0,i)}const f=[[]];function c(){s=this.__value,t(1,s)}function d(){s=this.__value,t(1,s)}const m=b=>{var _;(_=b==null?void 0:b.target)!=null&&_.checked?t(0,i.scale=.5,i):t(0,i.scale=1,i)};function h(b){n.$$.not_equal(i.size,b)&&(i.size=b,t(0,i))}const g=b=>{var _;(_=b==null?void 0:b.target)!=null&&_.checked?t(0,i.scale=0,i):t(0,i.scale=1,i)};return n.$$set=b=>{"prototype"in b&&t(0,i=b.prototype)},n.$$.update=()=>{n.$$.dirty&1&&i&&o(),n.$$.dirty&10&&r!=s&&(t(3,r=s),s==oi?a():u())},[i,s,l,r,c,f,d,m,h,g]}class ld extends Te{constructor(e){super(),Se(this,e,U_,q_,_e,{prototype:0})}}function W_(n){let e,t,i,l,s,r,o,a;return{c(){e=w("label"),t=x("Project title"),l=I(),s=w("input"),p(e,"for",i=n[17]),p(s,"type","text"),p(s,"id",r=n[17]),s.autofocus=!0,s.required=!0},m(u,f){k(u,e,f),v(e,t),k(u,l,f),k(u,s,f),ye(s,n[2].title),s.focus(),o||(a=$(s,"input",n[10]),o=!0)},p(u,f){f&131072&&i!==(i=u[17])&&p(e,"for",i),f&131072&&r!==(r=u[17])&&p(s,"id",r),f&4&&s.value!==u[2].title&&ye(s,u[2].title)},d(u){u&&(y(e),y(l),y(s)),o=!1,a()}}}function Qo(n){let e,t,i,l,s;function r(a){n[11](a)}let o={};return n[3]!==void 0&&(o.prototype=n[3]),i=new ld({props:o}),le.push(()=>De(i,"prototype",r)),{c(){e=w("div"),e.textContent="Prototype",t=I(),U(i.$$.fragment),p(e,"class","block m-b-10")},m(a,u){k(a,e,u),k(a,t,u),F(i,a,u),s=!0},p(a,u){const f={};!l&&u&8&&(l=!0,f.prototype=a[3],Ae(()=>l=!1)),i.$set(f)},i(a){s||(E(i.$$.fragment,a),s=!0)},o(a){P(i.$$.fragment,a),s=!1},d(a){a&&(y(e),y(t)),q(i,a)}}}function V_(n){let e,t,i,l,s,r;t=new Le({props:{class:"form-field required",name:"title",$$slots:{default:[W_,({uniqueId:a})=>({17:a}),({uniqueId:a})=>a?131072:0]},$$scope:{ctx:n}}});let o=!n[2].id&&Qo(n);return{c(){e=w("form"),U(t.$$.fragment),i=I(),o&&o.c(),p(e,"id",n[5]),p(e,"class","content")},m(a,u){k(a,e,u),F(t,e,null),v(e,i),o&&o.m(e,null),l=!0,s||(r=$(e,"submit",be(n[6])),s=!0)},p(a,u){const f={};u&393220&&(f.$$scope={dirty:u,ctx:a}),t.$set(f),a[2].id?o&&(ae(),P(o,1,1,()=>{o=null}),ue()):o?(o.p(a,u),u&4&&E(o,1)):(o=Qo(a),o.c(),E(o,1),o.m(e,null))},i(a){l||(E(t.$$.fragment,a),E(o),l=!0)},o(a){P(t.$$.fragment,a),P(o),l=!1},d(a){a&&y(e),q(t),o&&o.d(),s=!1,r()}}}function z_(n){let e,t=n[2].id?"Update project":"Create project",i;return{c(){e=w("h5"),i=x(t),p(e,"class","block txt-center")},m(l,s){k(l,e,s),v(e,i)},p(l,s){s&4&&t!==(t=l[2].id?"Update project":"Create project")&&ke(i,t)},d(l){l&&y(e)}}}function B_(n){let e,t,i,l,s=n[2].id?"Update project":"Create project",r,o,a;return{c(){e=w("button"),t=x("Cancel"),i=I(),l=w("button"),r=x(s),p(e,"type","button"),p(e,"class","btn btn-transparent"),e.disabled=n[4],p(l,"type","submit"),p(l,"form",n[5]),p(l,"class","btn btn-expanded btn-primary m-l-auto"),l.disabled=n[4],Z(l,"btn-loading",n[4])},m(u,f){k(u,e,f),v(e,t),k(u,i,f),k(u,l,f),v(l,r),o||(a=$(e,"click",n[9]),o=!0)},p(u,f){f&16&&(e.disabled=u[4]),f&4&&s!==(s=u[2].id?"Update project":"Create project")&&ke(r,s),f&16&&(l.disabled=u[4]),f&16&&Z(l,"btn-loading",u[4])},d(u){u&&(y(e),y(i),y(l)),o=!1,a()}}}function Z_(n){let e,t,i={popup:!0,overlayClose:!n[4],escHide:!n[4],beforeHide:n[12],$$slots:{footer:[B_],header:[z_],default:[V_]},$$scope:{ctx:n}};return e=new pn({props:i}),n[13](e),e.$on("show",n[14]),e.$on("hide",n[15]),{c(){U(e.$$.fragment)},m(l,s){F(e,l,s),t=!0},p(l,[s]){const r={};s&16&&(r.overlayClose=!l[4]),s&16&&(r.escHide=!l[4]),s&16&&(r.beforeHide=l[12]),s&262172&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){n[13](null),q(e,l)}}}function Y_(n,e,t){const i="project_upsert_"+K.randomString(5),l=ft();let{successRedirect:s=!0}=e,r,o={},a={},u=!1;function f(T){return Zt({}),t(2,o=Object.assign({users:[z.authStore.model.id]},T)),t(3,a={}),o.id||(t(3,a.size="",a),t(3,a.scale=1,a)),r==null?void 0:r.show()}function c(){return r==null?void 0:r.hide()}async function d(){if(!u){t(4,u=!0);try{let T;o.id?T=await z.collection("projects").update(o.id,o):(T=await z.collection("projects").create(o),await z.collection("prototypes").create(Object.assign({project:T.id,title:K.isDesktopPrototype(a)?"Desktop":"Mobile"},a))),l("submit",T),t(4,u=!1),s?mi("/projects/"+T.id+"/prototypes"):c()}catch(T){T.isAbort||(t(4,u=!1),z.error(T))}}}const m=()=>c();function h(){o.title=this.value,t(2,o)}function g(T){a=T,t(3,a)}const b=()=>!u;function _(T){le[T?"unshift":"push"](()=>{r=T,t(1,r)})}function C(T){We.call(this,n,T)}function L(T){We.call(this,n,T)}return n.$$set=T=>{"successRedirect"in T&&t(7,s=T.successRedirect)},[c,r,o,a,u,i,d,s,f,m,h,g,b,_,C,L]}class sd extends Te{constructor(e){super(),Se(this,e,Y_,Z_,_e,{successRedirect:7,show:8,hide:0})}get show(){return this.$$.ctx[8]}get hide(){return this.$$.ctx[0]}}const K_=n=>({isLoading:n&1,img:n&1024}),xo=n=>({isLoading:n[0],img:n[10]});function ea(n){let e;return{c(){e=w("span"),p(e,"class",n[8])},m(t,i){k(t,e,i)},p(t,i){i&256&&p(e,"class",t[8])},d(t){t&&y(e)}}}function G_(n){let e,t,i,l,s,r,o,a,u,f=n[0]&&ea(n);const c=n[17].default,d=lt(c,n,n[16],xo);return{c(){e=w("figure"),t=w("img"),l=I(),f&&f.c(),s=I(),d&&d.c(),p(t,"crossorigin","anonymous"),p(t,"loading",n[7]),p(t,"fetchpriority",n[5]),p(t,"alt",n[2]),p(t,"width",n[3]),p(t,"height",n[4]),p(t,"draggable",n[6]),Wn(t.src,i=n[1])||p(t,"src",i),p(e,"class",r="lazy-load "+n[9]),Z(e,"loading",n[0])},m(m,h){k(m,e,h),v(e,t),n[21](t),v(e,l),f&&f.m(e,null),v(e,s),d&&d.m(e,null),o=!0,a||(u=[$(t,"load",n[11]),$(t,"error",n[12]),$(t,"click",n[18]),$(t,"mousedown",n[19]),$(t,"touchstart",n[20])],a=!0)},p(m,[h]){(!o||h&128)&&p(t,"loading",m[7]),(!o||h&32)&&p(t,"fetchpriority",m[5]),(!o||h&4)&&p(t,"alt",m[2]),(!o||h&8)&&p(t,"width",m[3]),(!o||h&16)&&p(t,"height",m[4]),(!o||h&64)&&p(t,"draggable",m[6]),(!o||h&2&&!Wn(t.src,i=m[1]))&&p(t,"src",i),m[0]?f?f.p(m,h):(f=ea(m),f.c(),f.m(e,s)):f&&(f.d(1),f=null),d&&d.p&&(!o||h&66561)&&rt(d,c,m,m[16],o?st(c,m[16],h,K_):ot(m[16]),xo),(!o||h&512&&r!==(r="lazy-load "+m[9]))&&p(e,"class",r),(!o||h&513)&&Z(e,"loading",m[0])},i(m){o||(E(d,m),o=!0)},o(m){P(d,m),o=!1},d(m){m&&y(e),n[21](null),f&&f.d(),d&&d.d(m),a=!1,me(u)}}}function J_(n,e,t){let{$$slots:i={},$$scope:l}=e;const s=ft();let{src:r}=e,{alt:o=void 0}=e,{width:a=void 0}=e,{height:u=void 0}=e,{fetchpriority:f=void 0}=e,{draggable:c=null}=e,{scale:d=void 0}=e,{loading:m="lazy"}=e,{loaderClass:h="loader"}=e,{isLoading:g=!0}=e,{class:b=""}=e,_,C=r;function L(){return _!=null&&_.naturalWidth?_.clientWidth/_.naturalWidth:1}function T(){S(),s("load",_),t(0,g=!1)}function O(){t(0,g=!1),s("error",_)}function S(){if(!_||!_.complete||typeof d>"u")return;t(10,_.style.width="auto",_),t(10,_.style.height="auto",_),d==0?t(10,_.style["max-width"]="100%",_):t(10,_.style["max-width"]="",_);const M=d>0?_.naturalWidth*d:_.naturalWidth;t(10,_.style.width=M+"px",_)}function j(M){We.call(this,n,M)}function H(M){We.call(this,n,M)}function D(M){We.call(this,n,M)}function A(M){le[M?"unshift":"push"](()=>{_=M,t(10,_)})}return n.$$set=M=>{"src"in M&&t(1,r=M.src),"alt"in M&&t(2,o=M.alt),"width"in M&&t(3,a=M.width),"height"in M&&t(4,u=M.height),"fetchpriority"in M&&t(5,f=M.fetchpriority),"draggable"in M&&t(6,c=M.draggable),"scale"in M&&t(13,d=M.scale),"loading"in M&&t(7,m=M.loading),"loaderClass"in M&&t(8,h=M.loaderClass),"isLoading"in M&&t(0,g=M.isLoading),"class"in M&&t(9,b=M.class),"$$scope"in M&&t(16,l=M.$$scope)},n.$$.update=()=>{n.$$.dirty&32770&&C!=r&&(t(15,C=r),t(0,g=!0)),n.$$.dirty&8192&&typeof d<"u"&&S()},[g,r,o,a,u,f,c,m,h,b,_,T,O,d,L,C,l,i,j,H,D,A]}class Yt extends Te{constructor(e){super(),Se(this,e,J_,G_,_e,{src:1,alt:2,width:3,height:4,fetchpriority:5,draggable:6,scale:13,loading:7,loaderClass:8,isLoading:0,class:9,widthRatio:14})}get widthRatio(){return this.$$.ctx[14]}}function is(n){let e,t=n[0][n[3]]+"",i,l,s,r,o,a,u,f=[{spellcheck:l=!1},{tabindex:"0"},{contenteditable:s=n[8]&&!n[1]},{"data-placeholder":n[4]},{class:r="contenteditable inline-edit "+n[6]},n[10]],c={};for(let d=0;d<f.length;d+=1)c=Me(c,f[d]);return{c(){e=w(n[2]),i=x(t),_l(n[2])(e,c),Z(e,"svelte-obfpdk",!0)},m(d,m){k(d,e,m),v(e,i),n[12](e),a||(u=[$(e,"focus",n[13]),$(e,"blur",n[14]),$(e,"keypress",n[15]),we(o=Oe.call(null,e,n[8]?"":{position:"bottom-left",text:n[5]}))],a=!0)},p(d,m){m&9&&t!==(t=d[0][d[3]]+"")&&Ud(i,t,d[8]&&!d[1]),_l(d[2])(e,c=_t(f,[{spellcheck:l},{tabindex:"0"},m&258&&s!==(s=d[8]&&!d[1])&&{contenteditable:s},m&16&&{"data-placeholder":d[4]},m&64&&r!==(r="contenteditable inline-edit "+d[6])&&{class:r},m&1024&&d[10]])),o&&et(o.update)&&m&288&&o.update.call(null,d[8]?"":{position:"bottom-left",text:d[5]}),Z(e,"svelte-obfpdk",!0)},d(d){d&&y(e),n[12](null),a=!1,me(u)}}}function X_(n){let e,t=n[2],i=n[2]&&is(n);return{c(){e=w("div"),i&&i.c(),p(e,"class","inline-edit-container svelte-obfpdk")},m(l,s){k(l,e,s),i&&i.m(e,null)},p(l,[s]){l[2]?t?_e(t,l[2])?(i.d(1),i=is(l),t=l[2],i.c(),i.m(e,null)):i.p(l,s):(i=is(l),t=l[2],i.c(),i.m(e,null)):t&&(i.d(1),i=null,t=l[2])},i:X,o:X,d(l){l&&y(e),i&&i.d(l)}}}function Q_(n,e,t){const i=["collection","model","disabled","tag","prop","placeholder","tooltip","class"];let l=at(e,i),{collection:s=""}=e,{model:r={}}=e,{disabled:o=!1}=e,{tag:a="div"}=e,{prop:u="title"}=e,{placeholder:f="Title"}=e,{tooltip:c="Edit title"}=e,{class:d=""}=e,m,h=!1;async function g(){if(!m)return;const T=m.textContent;if(T||t(7,m.textContent=r[u],m),T!=r[u])try{const O={};O[u]=T;const S=await z.collection(s).update(r.id,O,{requestKey:"inline_"+s+r.id});t(0,r[u]=S[u],r),t(0,r.updated=S.updated,r)}catch(O){O.isAbort||console.warn("Failed to update "+u,O)}}function b(T){le[T?"unshift":"push"](()=>{m=T,t(7,m)})}const _=()=>t(8,h=!0),C=()=>{t(8,h=!1),g()},L=T=>{T.code=="Enter"&&(T.preventDefault(),m==null||m.blur())};return n.$$set=T=>{e=Me(Me({},e),Bt(T)),t(10,l=at(e,i)),"collection"in T&&t(11,s=T.collection),"model"in T&&t(0,r=T.model),"disabled"in T&&t(1,o=T.disabled),"tag"in T&&t(2,a=T.tag),"prop"in T&&t(3,u=T.prop),"placeholder"in T&&t(4,f=T.placeholder),"tooltip"in T&&t(5,c=T.tooltip),"class"in T&&t(6,d=T.class)},[r,o,a,u,f,c,d,m,h,g,l,s,b,_,C,L]}class Xs extends Te{constructor(e){super(),Se(this,e,Q_,X_,_e,{collection:11,model:0,disabled:1,tag:2,prop:3,placeholder:4,tooltip:5,class:6})}}function ta(n,e,t){const i=n.slice();return i[23]=e[t],i}function x_(n){let e;return{c(){e=w("i"),p(e,"class","iconoir-media-image")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function eg(n){let e,t=[],i=new Map,l,s=Ie(n[1]);const r=o=>o[23].id;for(let o=0;o<s.length;o+=1){let a=ta(n,s,o),u=r(a);i.set(u,t[o]=na(u,a))}return{c(){e=w("div");for(let o=0;o<t.length;o+=1)t[o].c();p(e,"class","card-images-set")},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);l=!0},p(o,a){a&2&&(s=Ie(o[1]),ae(),t=yt(t,a,r,1,o,s,i,e,It,na,null,ta),ue())},i(o){if(!l){for(let a=0;a<s.length;a+=1)E(t[a]);l=!0}},o(o){for(let a=0;a<t.length;a+=1)P(t[a]);l=!1},d(o){o&&y(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function na(n,e){let t,i,l,s;return i=new Yt({props:{src:z.files.getUrl(e[23],e[23].file,{thumb:"450x0"}),alt:e[23].title}}),{key:n,first:null,c(){t=w("div"),U(i.$$.fragment),l=I(),p(t,"class","card-img"),qe(t,"background-color",e[23].background),this.first=t},m(r,o){k(r,t,o),F(i,t,null),v(t,l),s=!0},p(r,o){e=r;const a={};o&2&&(a.src=z.files.getUrl(e[23],e[23].file,{thumb:"450x0"})),o&2&&(a.alt=e[23].title),i.$set(a),o&2&&qe(t,"background-color",e[23].background)},i(r){s||(E(i.$$.fragment,r),s=!0)},o(r){P(i.$$.fragment,r),s=!1},d(r){r&&y(t),q(i)}}}function ia(n){let e,t,i,l,s;function r(u,f){return u[0].expand.projectUserPreferences_via_project[0].favorite?ng:tg}let o=r(n),a=o(n);return{c(){e=w("div"),t=w("button"),a.c(),p(t,"type","button"),p(t,"class","btn btn-sm btn-circle btn-transparent"),Z(t,"fade",!n[0].expand.projectUserPreferences_via_project[0].favorite),p(e,"class","ctrl ctrl-top-left")},m(u,f){k(u,e,f),v(e,t),a.m(t,null),l||(s=[we(i=Oe.call(null,t,n[0].expand.projectUserPreferences_via_project[0].favorite?"Remove from favorites":"Add to favorites")),$(t,"click",Ke(n[11]))],l=!0)},p(u,f){o!==(o=r(u))&&(a.d(1),a=o(u),a&&(a.c(),a.m(t,null))),i&&et(i.update)&&f&1&&i.update.call(null,u[0].expand.projectUserPreferences_via_project[0].favorite?"Remove from favorites":"Add to favorites"),f&1&&Z(t,"fade",!u[0].expand.projectUserPreferences_via_project[0].favorite)},d(u){u&&y(e),a.d(),l=!1,me(s)}}}function tg(n){let e;return{c(){e=w("i"),p(e,"class","iconoir-star")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function ng(n){let e;return{c(){e=w("i"),p(e,"class","iconoir-star-solid txt-warning")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function ig(n){let e,t,i;return{c(){e=w("i"),t=I(),i=w("span"),i.textContent="Watch",p(e,"class","iconoir-eye-solid"),p(i,"class","txt")},m(l,s){k(l,e,s),k(l,t,s),k(l,i,s)},d(l){l&&(y(e),y(t),y(i))}}}function lg(n){let e,t,i;return{c(){e=w("i"),t=I(),i=w("span"),i.textContent="Unwatch",p(e,"class","iconoir-eye"),p(i,"class","txt")},m(l,s){k(l,e,s),k(l,t,s),k(l,i,s)},d(l){l&&(y(e),y(t),y(i))}}}function sg(n){let e,t,i;return{c(){e=w("div"),e.innerHTML='<i class="iconoir-repository"></i> <span class="txt">Archive</span>',p(e,"class","dropdown-item")},m(l,s){k(l,e,s),t||(i=$(e,"click",n[14]),t=!0)},p:X,d(l){l&&y(e),t=!1,i()}}}function rg(n){let e,t,i;return{c(){e=w("div"),e.innerHTML='<i class="iconoir-repository"></i> <span class="txt">Unarchive</span>',p(e,"class","dropdown-item")},m(l,s){k(l,e,s),t||(i=$(e,"click",n[13]),t=!0)},p:X,d(l){l&&y(e),t=!1,i()}}}function og(n){let e,t,i,l,s,r,o,a;function u(g,b){return g[0].expand.projectUserPreferences_via_project[0].watch?lg:ig}let f=u(n),c=f(n);function d(g,b){return g[0].archived?rg:sg}let m=d(n),h=m(n);return{c(){e=w("div"),c.c(),t=I(),h.c(),i=I(),l=w("hr"),s=I(),r=w("div"),r.innerHTML='<i class="iconoir-trash"></i> <span class="txt">Delete</span>',p(e,"class","dropdown-item"),p(r,"class","dropdown-item link-danger")},m(g,b){k(g,e,b),c.m(e,null),k(g,t,b),h.m(g,b),k(g,i,b),k(g,l,b),k(g,s,b),k(g,r,b),o||(a=[$(e,"click",n[12]),$(r,"click",n[15])],o=!0)},p(g,b){f!==(f=u(g))&&(c.d(1),c=f(g),c&&(c.c(),c.m(e,null))),m===(m=d(g))&&h?h.p(g,b):(h.d(1),h=m(g),h&&(h.c(),h.m(i.parentNode,i)))},d(g){g&&(y(e),y(t),y(i),y(l),y(s),y(r)),c.d(),h.d(g),o=!1,me(a)}}}function la(n){let e,t,i,l,s,r,o;return{c(){e=w("div"),t=w("i"),i=I(),l=w("span"),s=x(n[2]),p(t,"class","iconoir-message-text"),p(l,"class","txt"),p(e,"class","meta-item txt-warning")},m(a,u){k(a,e,u),v(e,t),v(e,i),v(e,l),v(l,s),r||(o=we(Oe.call(null,e,"Unread comments")),r=!0)},p(a,u){u&4&&ke(s,a[2])},d(a){a&&y(e),r=!1,o()}}}function sa(n){let e,t,i;return{c(){e=w("div"),e.innerHTML='<i class="iconoir-repository"></i>',p(e,"class","meta-item")},m(l,s){k(l,e,s),t||(i=we(Oe.call(null,e,"Archived")),t=!0)},d(l){l&&y(e),t=!1,i()}}}function ag(n){var ce,oe;let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g,b,_,C,L,T,O,S,j,H,D,A,M;const Y=[eg,x_],G=[];function B(pe,Ee){return pe[1].length?0:1}i=B(n),l=G[i]=Y[i](n);let N=((oe=(ce=n[0].expand)==null?void 0:ce.projectUserPreferences_via_project)==null?void 0:oe[0])&&ia(n);h=new Nt({props:{class:"dropdown dropdown-nowrap dropdown-sm",$$slots:{default:[og]},$$scope:{ctx:n}}});function V(pe){n[18](pe)}let ee={tag:"h5",class:"title",collection:"projects"};n[0]!==void 0&&(ee.model=n[0]),_=new Xs({props:ee}),le.push(()=>De(_,"model",V));let J=n[2]&&la(n),R=n[0].archived&&sa();return{c(){e=w("div"),t=w("figure"),l.c(),s=I(),r=w("div"),N&&N.c(),o=I(),a=w("div"),a.innerHTML='<i class="iconoir-media-image-list preview-icon" title="View project"></i>',u=I(),f=w("div"),c=w("button"),d=w("i"),m=I(),U(h.$$.fragment),g=I(),b=w("div"),U(_.$$.fragment),L=I(),T=w("div"),J&&J.c(),O=I(),R&&R.c(),S=I(),j=w("div"),j.innerHTML='<div class="iconoir-calendar"></div>',p(a,"class","ctrl ctrl-center"),p(d,"class","iconoir-more-vert"),p(c,"type","button"),p(c,"class","btn btn-sm btn-circle btn-transparent fade"),p(f,"class","ctrl ctrl-top-right"),p(r,"class","card-overlay handle"),p(t,"class","card-featured"),p(j,"class","meta-item"),p(T,"class","meta"),p(b,"class","card-content"),p(e,"class","card entrance-top")},m(pe,Ee){k(pe,e,Ee),v(e,t),G[i].m(t,null),v(t,s),v(t,r),N&&N.m(r,null),v(r,o),v(r,a),v(r,u),v(r,f),v(f,c),v(c,d),v(c,m),F(h,c,null),v(e,g),v(e,b),F(_,b,null),v(b,L),v(b,T),J&&J.m(T,null),v(T,O),R&&R.m(T,null),v(T,S),v(T,j),D=!0,A||(M=[$(f,"click",Ke(n[10])),$(r,"auxclick",n[16]),$(r,"click",n[17]),we(H=Oe.call(null,j,{text:"Created "+K.relativeDate(n[0].created),sub:K.formatToLocalDate(n[0].created)}))],A=!0)},p(pe,[Ee]){var Fe,ne;let tt=i;i=B(pe),i===tt?G[i].p(pe,Ee):(ae(),P(G[tt],1,1,()=>{G[tt]=null}),ue(),l=G[i],l?l.p(pe,Ee):(l=G[i]=Y[i](pe),l.c()),E(l,1),l.m(t,s)),(ne=(Fe=pe[0].expand)==null?void 0:Fe.projectUserPreferences_via_project)!=null&&ne[0]?N?N.p(pe,Ee):(N=ia(pe),N.c(),N.m(r,o)):N&&(N.d(1),N=null);const se={};Ee&67108865&&(se.$$scope={dirty:Ee,ctx:pe}),h.$set(se);const ge={};!C&&Ee&1&&(C=!0,ge.model=pe[0],Ae(()=>C=!1)),_.$set(ge),pe[2]?J?J.p(pe,Ee):(J=la(pe),J.c(),J.m(T,O)):J&&(J.d(1),J=null),pe[0].archived?R||(R=sa(),R.c(),R.m(T,S)):R&&(R.d(1),R=null),H&&et(H.update)&&Ee&1&&H.update.call(null,{text:"Created "+K.relativeDate(pe[0].created),sub:K.formatToLocalDate(pe[0].created)})},i(pe){D||(E(l),E(h.$$.fragment,pe),E(_.$$.fragment,pe),D=!0)},o(pe){P(l),P(h.$$.fragment,pe),P(_.$$.fragment,pe),D=!1},d(pe){pe&&y(e),G[i].d(),N&&N.d(),q(h),q(_),J&&J.d(),R&&R.d(),A=!1,me(M)}}}function ug(n,e,t){let i,l;Q(n,gn,A=>t(9,l=A));let{project:s}=e,r=[];function o(A){var Y,G,B,N,V,ee,J,R;t(1,r=[]);const M=((B=(G=(Y=A==null?void 0:A.expand)==null?void 0:Y.prototypes_via_project)==null?void 0:G.sort(function(ce,oe){return ce.created<oe.created?-1:ce.created>oe.created?1:0}))==null?void 0:B.slice(-3))||[];for(let ce of M){let oe=null;(N=ce.screensOrder)!=null&&N[0]&&(oe=(ee=(V=ce.expand)==null?void 0:V.screens_via_prototype)==null?void 0:ee.find(pe=>{var Ee;return pe.id==((Ee=ce.screensOrder)==null?void 0:Ee[0])})),oe||(oe=(R=(J=ce.expand)==null?void 0:J.screens_via_prototype)==null?void 0:R[0]),oe&&r.push(oe)}}function a(A,M=!1){const Y="/projects/"+A.id+"/prototypes";M?window.open("#"+Y,"_blank").focus():mi(Y)}async function u(A){Et(`Do you really want to delete project ${A.title} and all its related screens?`,async()=>f(A),()=>{var M;(M=document.activeElement)==null||M.blur()})}async function f(A){try{await z.collection("projects").delete(A.id),ns(A),ht(`Successfully deleted project ${A.title}.`)}catch(M){M.isAbort||z.error(M)}}async function c(A){Et(`Do you really want to archive project ${A.title}?`,async()=>d(A),()=>{var M;(M=document.activeElement)==null||M.blur()})}async function d(A){try{await z.collection("projects").update(A.id,{archived:!0}),A.archived||ns(A),ht(`Successfully archived project ${A.title}.`)}catch(M){M.isAbort||z.error(M)}}async function m(A){Et(`Do you really want to unarchive project ${A.title}?`,async()=>h(A),()=>{var M;(M=document.activeElement)==null||M.blur()})}async function h(A){try{await z.collection("projects").update(A.id,{archived:!1}),A.archived&&ns(A),ht(`Successfully unarchived project ${A.title}.`)}catch(M){M.isAbort||z.error(M)}}async function g(A){if(!(A!=null&&A.id))return A;try{return A.watch=!A.watch,await z.collection("projectUserPreferences").update(A.id,{watch:A.watch})}catch(M){M.isAbort||z.error(M)}}async function b(A){if(!(A!=null&&A.id))return A;try{return A.favorite=!A.favorite,await z.collection("projectUserPreferences").update(A.id,{favorite:A.favorite})}catch(M){M.isAbort||z.error(M)}}function _(A){We.call(this,n,A)}const C=A=>{var M,Y;b(s.expand.projectUserPreferences_via_project[0]),t(0,s),(Y=(M=A.target)==null?void 0:M.closest("button"))==null||Y.blur()},L=()=>{g(s.expand.projectUserPreferences_via_project[0]),t(0,s)},T=()=>m(s),O=()=>c(s),S=()=>u(s),j=()=>{a(s,!0)},H=()=>{a(s)};function D(A){s=A,t(0,s)}return n.$$set=A=>{"project"in A&&t(0,s=A.project)},n.$$.update=()=>{n.$$.dirty&1&&o(s),n.$$.dirty&513&&t(2,i=l.filter(A=>{var M,Y,G,B,N,V;return!A.read&&((V=(N=(B=(G=(Y=(M=A==null?void 0:A.expand)==null?void 0:M.comment)==null?void 0:Y.expand)==null?void 0:G.screen)==null?void 0:B.expand)==null?void 0:N.prototype)==null?void 0:V.project)==s.id}).length)},[s,r,i,a,u,c,m,g,b,l,_,C,L,T,O,S,j,H,D]}class rd extends Te{constructor(e){super(),Se(this,e,ug,ag,_e,{project:0})}}function ra(n,e,t){const i=n.slice();return i[20]=e[t],i[21]=e,i[22]=t,i}function oa(n,e,t){const i=n.slice();return i[20]=e[t],i[23]=e,i[24]=t,i}function fg(n){let e,t,i,l,s=n[4].length&&aa(n),r=n[4].length&&n[3].length&&fa(),o=n[3].length&&ca(n);return{c(){s&&s.c(),e=I(),r&&r.c(),t=I(),o&&o.c(),i=Ne()},m(a,u){s&&s.m(a,u),k(a,e,u),r&&r.m(a,u),k(a,t,u),o&&o.m(a,u),k(a,i,u),l=!0},p(a,u){a[4].length?s?(s.p(a,u),u&16&&E(s,1)):(s=aa(a),s.c(),E(s,1),s.m(e.parentNode,e)):s&&(ae(),P(s,1,1,()=>{s=null}),ue()),a[4].length&&a[3].length?r||(r=fa(),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),a[3].length?o?(o.p(a,u),u&8&&E(o,1)):(o=ca(a),o.c(),E(o,1),o.m(i.parentNode,i)):o&&(ae(),P(o,1,1,()=>{o=null}),ue())},i(a){l||(E(s),E(o),l=!0)},o(a){P(s),P(o),l=!1},d(a){a&&(y(e),y(t),y(i)),s&&s.d(a),r&&r.d(a),o&&o.d(a)}}}function cg(n){let e;function t(s,r){return s[5]?mg:pg}let i=t(n),l=i(n);return{c(){l.c(),e=Ne()},m(s,r){l.m(s,r),k(s,e,r)},p(s,r){i===(i=t(s))&&l?l.p(s,r):(l.d(1),l=i(s),l&&(l.c(),l.m(e.parentNode,e)))},i:X,o:X,d(s){s&&y(e),l.d(s)}}}function dg(n){let e;return{c(){e=w("div"),e.innerHTML='<span class="loader loader-lg"></span>',p(e,"class","block txt-center m-t-lg")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function aa(n){let e,t=[],i=new Map,l,s=Ie(n[4]);const r=o=>o[20].id;for(let o=0;o<s.length;o+=1){let a=oa(n,s,o),u=r(a);i.set(u,t[o]=ua(u,a))}return{c(){e=w("div");for(let o=0;o<t.length;o+=1)t[o].c();p(e,"class","cards-list")},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);l=!0},p(o,a){a&16&&(s=Ie(o[4]),ae(),t=yt(t,a,r,1,o,s,i,e,It,ua,null,oa),ue())},i(o){if(!l){for(let a=0;a<s.length;a+=1)E(t[a]);l=!0}},o(o){for(let a=0;a<t.length;a+=1)P(t[a]);l=!1},d(o){o&&y(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function ua(n,e){let t,i,l,s;function r(a){e[15](a,e[20],e[23],e[24])}let o={};return e[20]!==void 0&&(o.project=e[20]),i=new rd({props:o}),le.push(()=>De(i,"project",r)),{key:n,first:null,c(){t=Ne(),U(i.$$.fragment),this.first=t},m(a,u){k(a,t,u),F(i,a,u),s=!0},p(a,u){e=a;const f={};!l&&u&16&&(l=!0,f.project=e[20],Ae(()=>l=!1)),i.$set(f)},i(a){s||(E(i.$$.fragment,a),s=!0)},o(a){P(i.$$.fragment,a),s=!1},d(a){a&&y(t),q(i,a)}}}function fa(n){let e;return{c(){e=w("hr")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function ca(n){let e,t=[],i=new Map,l,s=Ie(n[3]);const r=o=>o[20].id;for(let o=0;o<s.length;o+=1){let a=ra(n,s,o),u=r(a);i.set(u,t[o]=da(u,a))}return{c(){e=w("div");for(let o=0;o<t.length;o+=1)t[o].c();p(e,"class","cards-list")},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);l=!0},p(o,a){a&8&&(s=Ie(o[3]),ae(),t=yt(t,a,r,1,o,s,i,e,It,da,null,ra),ue())},i(o){if(!l){for(let a=0;a<s.length;a+=1)E(t[a]);l=!0}},o(o){for(let a=0;a<t.length;a+=1)P(t[a]);l=!1},d(o){o&&y(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function da(n,e){let t,i,l,s;function r(a){e[16](a,e[20],e[21],e[22])}let o={};return e[20]!==void 0&&(o.project=e[20]),i=new rd({props:o}),le.push(()=>De(i,"project",r)),{key:n,first:null,c(){t=Ne(),U(i.$$.fragment),this.first=t},m(a,u){k(a,t,u),F(i,a,u),s=!0},p(a,u){e=a;const f={};!l&&u&8&&(l=!0,f.project=e[20],Ae(()=>l=!1)),i.$set(f)},i(a){s||(E(i.$$.fragment,a),s=!0)},o(a){P(i.$$.fragment,a),s=!1},d(a){a&&y(t),q(i,a)}}}function pg(n){let e,t,i,l,s,r,o,a,u,f;return{c(){e=w("div"),t=w("div"),t.innerHTML='<i class="iconoir-grid-plus"></i>',i=I(),l=w("h6"),l.textContent="You don't have any active projects yet!",s=I(),r=w("div"),r.innerHTML="<p>Create a new project to share your designs, collect feedback and more.</p>",o=I(),a=w("button"),a.innerHTML='<i class="iconoir-plus"></i> <span class="txt">New project</span>',p(t,"class","icon"),p(l,"class","title"),p(r,"class","content"),p(a,"type","button"),p(a,"class","btn btn-expanded btn-primary btn-lg m-t-base"),p(e,"class","placeholder-block entrance-top")},m(c,d){k(c,e,d),v(e,t),v(e,i),v(e,l),v(e,s),v(e,r),v(e,o),v(e,a),u||(f=$(a,"click",n[14]),u=!0)},p:X,d(c){c&&y(e),u=!1,f()}}}function mg(n){let e;return{c(){e=w("div"),e.innerHTML='<div class="icon"><i class="iconoir-grid-xmark"></i></div> <h6 class="title">No projects found!</h6>',p(e,"class","placeholder-block m-b-sm entrance-top")},m(t,i){k(t,e,i)},p:X,d(t){t&&y(e)}}}function pa(n){let e,t,i,l,s;return{c(){e=w("button"),e.innerHTML='<span class="txt">Load more</span>',t=I(),i=w("div"),p(e,"type","button"),p(e,"class","btn btn-semitransparent btn-expanded btn-lg m-b-sm entrance-top"),Z(e,"btn-disabled",n[7]),Z(e,"btn-loading",n[7]),p(i,"class","clearfix")},m(r,o){k(r,e,o),k(r,t,o),k(r,i,o),l||(s=$(e,"click",n[17]),l=!0)},p(r,o){o&128&&Z(e,"btn-disabled",r[7]),o&128&&Z(e,"btn-loading",r[7])},d(r){r&&(y(e),y(t),y(i)),l=!1,s()}}}function ma(n){let e,t,i;return{c(){e=w("button"),e.textContent="Reset filters",p(e,"type","button"),p(e,"class","btn btn-transparent btn-hint btn-expanded entrance-top")},m(l,s){k(l,e,s),t||(i=$(e,"click",n[9]),t=!0)},p:X,d(l){l&&y(e),t=!1,i()}}}function hg(n){let e,t,i,l,s,r,o,a;const u=[dg,cg,fg],f=[];function c(g,b){return g[7]&&!g[0].length?0:!g[7]&&!g[0].length?1:2}e=c(n),t=f[e]=u[e](n);let d=n[6]&&pa(n),m=!n[7]&&n[5]&&ma(n),h={};return o=new sd({props:h}),n[18](o),{c(){t.c(),i=I(),l=w("div"),d&&d.c(),s=I(),m&&m.c(),r=I(),U(o.$$.fragment),p(l,"class","block txt-center m-t-base")},m(g,b){f[e].m(g,b),k(g,i,b),k(g,l,b),d&&d.m(l,null),v(l,s),m&&m.m(l,null),k(g,r,b),F(o,g,b),a=!0},p(g,[b]){let _=e;e=c(g),e===_?f[e].p(g,b):(ae(),P(f[_],1,1,()=>{f[_]=null}),ue(),t=f[e],t?t.p(g,b):(t=f[e]=u[e](g),t.c()),E(t,1),t.m(i.parentNode,i)),g[6]?d?d.p(g,b):(d=pa(g),d.c(),d.m(l,s)):d&&(d.d(1),d=null),!g[7]&&g[5]?m?m.p(g,b):(m=ma(g),m.c(),m.m(l,null)):m&&(m.d(1),m=null);const C={};o.$set(C)},i(g){a||(E(t),E(o.$$.fragment,g),a=!0)},o(g){P(t),P(o.$$.fragment,g),a=!1},d(g){g&&(y(i),y(l),y(r)),f[e].d(g),d&&d.d(),m&&m.d(),n[18](null),q(o,g)}}}const ha=50;function _g(n,e,t){let i,l,s,r,o,a;Q(n,tn,j=>t(7,o=j)),Q(n,Qi,j=>t(0,a=j));let{search:u=""}=e,{archived:f=!1}=e,c,d=1,m=0,h;b();async function g(j=1){j<=1&&b(),ve(tn,o=!0,o);let H=`project.archived=${f}`;return u&&(H+=z.filter("&&project.title~{:title}",{title:u})),z.collection("projectUserPreferences").getList(j,ha,{sort:"-favorite,-lastVisited,-project.created",filter:H,skipTotal:1,expand:"project.prototypes_via_project.screens_via_prototype",requestKey:"projects_list"}).then(D=>{var A;t(2,d=D.page),t(12,m=D.items.length);for(const M of D.items){const Y=(A=M.expand)==null?void 0:A.project;if(!Y){console.warn("missing project for preference",M.id);continue}delete M.expand,Y.expand=Y.expand||{},Y.expand.projectUserPreferences_via_project=[M],Yn(Y)}ve(tn,o=!1,o)}).catch(D=>{D!=null&&D.isAbort||(ve(tn,o=!1,o),z.error(D))})}function b(){Ul(),t(12,m=0),t(2,d=1)}function _(){t(10,u=""),t(11,f=!1)}const C=()=>c==null?void 0:c.show();function L(j,H,D,A){D[A]=j,t(4,s),t(0,a)}function T(j,H,D,A){D[A]=j,t(3,r),t(0,a)}const O=()=>g(d+1);function S(j){le[j?"unshift":"push"](()=>{c=j,t(1,c)})}return n.$$set=j=>{"search"in j&&t(10,u=j.search),"archived"in j&&t(11,f=j.archived)},n.$$.update=()=>{n.$$.dirty&4096&&t(6,i=m==ha),n.$$.dirty&11264&&(u!==-1||f!==-1)&&(ve(tn,o=!0,o),clearTimeout(h),t(13,h=setTimeout(()=>g(1),50))),n.$$.dirty&3072&&t(5,l=u||f),n.$$.dirty&1&&t(4,s=a.filter(j=>{var H,D,A;return(A=(D=(H=j.expand)==null?void 0:H.projectUserPreferences_via_project)==null?void 0:D[0])==null?void 0:A.favorite})),n.$$.dirty&1&&t(3,r=a.filter(j=>{var H,D,A;return!((A=(D=(H=j.expand)==null?void 0:H.projectUserPreferences_via_project)==null?void 0:D[0])!=null&&A.favorite)}))},[a,c,d,r,s,l,i,o,g,_,u,f,m,h,C,L,T,O,S]}class gg extends Te{constructor(e){super(),Se(this,e,_g,hg,_e,{search:10,archived:11})}}function bg(n){let e,t,i;function l(r){n[5](r)}let s={class:"projects-filter-select fade m-l-xs",items:n[3]};return n[2]!==void 0&&(s.keyOfSelected=n[2]),e=new dn({props:s}),le.push(()=>De(e,"keyOfSelected",l)),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};!t&&o&4&&(t=!0,a.keyOfSelected=r[2],Ae(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function wg(n){let e,t,i,l,s,r,o;function a(m){n[6](m)}let u={placeholder:"Search projects...",$$slots:{suffix:[bg]},$$scope:{ctx:n}};n[1]!==void 0&&(u.value=n[1]),e=new nd({props:u}),le.push(()=>De(e,"value",a));function f(m){n[7](m)}function c(m){n[8](m)}let d={};return n[1]!==void 0&&(d.search=n[1]),n[2]!==void 0&&(d.archived=n[2]),l=new gg({props:d}),le.push(()=>De(l,"search",f)),le.push(()=>De(l,"archived",c)),{c(){U(e.$$.fragment),i=I(),U(l.$$.fragment)},m(m,h){F(e,m,h),k(m,i,h),F(l,m,h),o=!0},p(m,h){const g={};h&1028&&(g.$$scope={dirty:h,ctx:m}),!t&&h&2&&(t=!0,g.value=m[1],Ae(()=>t=!1)),e.$set(g);const b={};!s&&h&2&&(s=!0,b.search=m[1],Ae(()=>s=!1)),!r&&h&4&&(r=!0,b.archived=m[2],Ae(()=>r=!1)),l.$set(b)},i(m){o||(E(e.$$.fragment,m),E(l.$$.fragment,m),o=!0)},o(m){P(e.$$.fragment,m),P(l.$$.fragment,m),o=!1},d(m){m&&y(i),q(e,m),q(l,m)}}}function vg(n){let e,t;return{c(){e=w("nav"),t=w("div"),t.textContent=`${od}`,p(t,"class","breadcrumb-item"),p(e,"class","breadcrumbs")},m(i,l){k(i,e,l),v(e,t)},p:X,d(i){i&&y(e)}}}function yg(n){let e,t,i;return{c(){e=w("button"),e.innerHTML='<i class="iconoir-plus"></i> <div class="txt">New project</div>',p(e,"type","button"),p(e,"class","btn btn-primary")},m(l,s){k(l,e,s),t||(i=$(e,"click",n[4]),t=!0)},p:X,d(l){l&&y(e),t=!1,i()}}}function kg(n){let e,t,i,l;e=new Oi({props:{title:od,$$slots:{"header-right":[yg],"header-left":[vg],default:[wg]},$$scope:{ctx:n}}});let s={};return i=new sd({props:s}),n[9](i),{c(){U(e.$$.fragment),t=I(),U(i.$$.fragment)},m(r,o){F(e,r,o),k(r,t,o),F(i,r,o),l=!0},p(r,[o]){const a={};o&1031&&(a.$$scope={dirty:o,ctx:r}),e.$set(a);const u={};i.$set(u)},i(r){l||(E(e.$$.fragment,r),E(i.$$.fragment,r),l=!0)},o(r){P(e.$$.fragment,r),P(i.$$.fragment,r),l=!1},d(r){r&&y(t),q(e,r),n[9](null),q(i,r)}}}const od="Projects";function Sg(n,e,t){const i=[{label:"Active projects",value:!1},{label:"Archived projects",value:!0}];let l,s="",r=!1;const o=()=>l==null?void 0:l.show();function a(m){r=m,t(2,r)}function u(m){s=m,t(1,s)}function f(m){s=m,t(1,s)}function c(m){r=m,t(2,r)}function d(m){le[m?"unshift":"push"](()=>{l=m,t(0,l)})}return[l,s,r,i,o,a,u,f,c,d]}class Tg extends Te{constructor(e){super(),Se(this,e,Sg,kg,_e,{})}}function Cg(n){let e,t,i,l,s,r,o,a;return{c(){e=w("label"),t=x("Title"),l=I(),s=w("input"),p(e,"for",i=n[18]),p(s,"type","text"),p(s,"id",r=n[18]),s.required=!0},m(u,f){k(u,e,f),v(e,t),k(u,l,f),k(u,s,f),ye(s,n[1].title),o||(a=[$(s,"input",n[9]),$(s,"input",n[10])],o=!0)},p(u,f){f&262144&&i!==(i=u[18])&&p(e,"for",i),f&262144&&r!==(r=u[18])&&p(s,"id",r),f&2&&s.value!==u[1].title&&ye(s,u[1].title)},d(u){u&&(y(e),y(l),y(s)),o=!1,me(a)}}}function Og(n){let e,t,i,l,s,r,o,a,u,f;t=new Le({props:{class:"form-field required",name:"title",$$slots:{default:[Cg,({uniqueId:m})=>({18:m}),({uniqueId:m})=>m?262144:0]},$$scope:{ctx:n}}});function c(m){n[11](m)}let d={};return n[1]!==void 0&&(d.prototype=n[1]),r=new ld({props:d}),le.push(()=>De(r,"prototype",c)),{c(){e=w("form"),U(t.$$.fragment),i=I(),l=w("div"),l.innerHTML='Type<sup class="txt-danger">*</sup>',s=I(),U(r.$$.fragment),p(l,"class","block m-b-10"),p(e,"id",n[5]),p(e,"class","content")},m(m,h){k(m,e,h),F(t,e,null),v(e,i),v(e,l),v(e,s),F(r,e,null),a=!0,u||(f=$(e,"submit",be(n[6])),u=!0)},p(m,h){const g={};h&786438&&(g.$$scope={dirty:h,ctx:m}),t.$set(g);const b={};!o&&h&2&&(o=!0,b.prototype=m[1],Ae(()=>o=!1)),r.$set(b)},i(m){a||(E(t.$$.fragment,m),E(r.$$.fragment,m),a=!0)},o(m){P(t.$$.fragment,m),P(r.$$.fragment,m),a=!1},d(m){m&&y(e),q(t),q(r),u=!1,f()}}}function Eg(n){let e,t=n[1].id?"Update prototype":"Create prototype",i;return{c(){e=w("h5"),i=x(t),p(e,"class","block txt-center")},m(l,s){k(l,e,s),v(e,i)},p(l,s){s&2&&t!==(t=l[1].id?"Update prototype":"Create prototype")&&ke(i,t)},d(l){l&&y(e)}}}function Lg(n){let e,t,i,l,s,r=n[1].id?"Update prototype":"Create prototype",o,a,u;return{c(){e=w("button"),t=w("span"),t.textContent="Cancel",i=I(),l=w("button"),s=w("span"),o=x(r),p(t,"class","txt"),p(e,"type","button"),p(e,"class","btn btn-transparent"),e.disabled=n[4],p(s,"class","txt"),p(l,"type","submit"),p(l,"form",n[5]),p(l,"class","btn btn-expanded btn-primary m-l-auto"),l.disabled=n[4],Z(l,"btn-loading",n[4])},m(f,c){k(f,e,c),v(e,t),k(f,i,c),k(f,l,c),v(l,s),v(s,o),a||(u=$(e,"click",n[8]),a=!0)},p(f,c){c&16&&(e.disabled=f[4]),c&2&&r!==(r=f[1].id?"Update prototype":"Create prototype")&&ke(o,r),c&16&&(l.disabled=f[4]),c&16&&Z(l,"btn-loading",f[4])},d(f){f&&(y(e),y(i),y(l)),a=!1,u()}}}function Ig(n){let e,t,i={popup:!0,overlayClose:!n[4],escHide:!n[4],beforeHide:n[12],$$slots:{footer:[Lg],header:[Eg],default:[Og]},$$scope:{ctx:n}};return e=new pn({props:i}),n[13](e),e.$on("show",n[14]),e.$on("hide",n[15]),{c(){U(e.$$.fragment)},m(l,s){F(e,l,s),t=!0},p(l,[s]){const r={};s&16&&(r.overlayClose=!l[4]),s&16&&(r.escHide=!l[4]),s&16&&(r.beforeHide=l[12]),s&524310&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){n[13](null),q(e,l)}}}function Pg(n,e,t){const i="prototype_"+K.randomString(5),l=ft();let s,r={},o=!1,a=!1;function u(O){return c(),t(1,r=Object.assign({},O)),s==null?void 0:s.show()}function f(){return s==null?void 0:s.hide()}function c(){Zt({}),t(2,a=!1)}async function d(){if(!(!r.project||o)){t(4,o=!0);try{let O;r.id?(O=await z.collection("prototypes").update(r.id,r),ht(`Successfully updated prototype ${r.title}.`)):(O=await z.collection("prototypes").create(r),ht(`Successfully created prototype ${r.title}.`)),t(4,o=!1),f(),l("submit",O)}catch(O){O.isAbort||(t(4,o=!1),z.error(O))}}}const m=()=>f(),h=()=>{t(2,a=!0)};function g(){r.title=this.value,t(1,r),t(2,a)}function b(O){r=O,t(1,r),t(2,a)}const _=()=>!o;function C(O){le[O?"unshift":"push"](()=>{s=O,t(3,s)})}function L(O){We.call(this,n,O)}function T(O){We.call(this,n,O)}return n.$$.update=()=>{n.$$.dirty&6&&!a&&!r.id&&t(1,r.title=r.size?"Mobile":"Desktop",r)},[f,r,a,s,o,i,d,u,m,h,g,b,_,C,L,T]}class jg extends Te{constructor(e){super(),Se(this,e,Pg,Ig,_e,{show:7,hide:0})}get show(){return this.$$.ctx[7]}get hide(){return this.$$.ctx[0]}}const Ng=n=>({}),_a=n=>({});function ga(n,e,t){const i=n.slice();return i[19]=e[t],i}const Ag=n=>({}),ba=n=>({});function Dg(n){let e,t,i=[],l=new Map,s,r,o,a,u,f;const c=n[9].before,d=lt(c,n,n[16],ba);let m=Ie(n[2]);const h=_=>_[19].id;for(let _=0;_<m.length;_+=1){let C=ga(n,m,_),L=h(C);l.set(L,i[_]=wa(L,C))}const g=n[9].after,b=lt(g,n,n[16],_a);return{c(){e=w("nav"),d&&d.c(),t=I();for(let _=0;_<i.length;_+=1)i[_].c();s=I(),r=w("button"),r.innerHTML='<i class="iconoir-plus"></i>',o=I(),b&&b.c(),p(r,"type","button"),p(r,"class","btn btn-circle btn-transparent link-hint"),p(e,"class","prototypes-bar entrance-left svelte-fzv0qw")},m(_,C){k(_,e,C),d&&d.m(e,null),v(e,t);for(let L=0;L<i.length;L+=1)i[L]&&i[L].m(e,null);v(e,s),v(e,r),v(e,o),b&&b.m(e,null),a=!0,u||(f=[we(Oe.call(null,r,{text:"New prototype",position:"right"})),$(r,"click",n[6])],u=!0)},p(_,C){d&&d.p&&(!a||C&65536)&&rt(d,c,_,_[16],a?st(c,_[16],C,Ag):ot(_[16]),ba),C&61&&(m=Ie(_[2]),ae(),i=yt(i,C,h,1,_,m,l,e,It,wa,s,ga),ue()),b&&b.p&&(!a||C&65536)&&rt(b,g,_,_[16],a?st(g,_[16],C,Ng):ot(_[16]),_a)},i(_){if(!a){E(d,_);for(let C=0;C<m.length;C+=1)E(i[C]);E(b,_),a=!0}},o(_){P(d,_);for(let C=0;C<i.length;C+=1)P(i[C]);P(b,_),a=!1},d(_){_&&y(e),d&&d.d(_);for(let C=0;C<i.length;C+=1)i[C].d();b&&b.d(_),u=!1,me(f)}}}function Mg(n){let e,t,i,l,s,r,o,a,u,f;return{c(){e=w("div"),t=w("div"),t.innerHTML='<i class="iconoir-pen-tablet"></i>',i=I(),l=w("h6"),l.textContent="The project doesn't have any prototypes yet!",s=I(),r=w("div"),r.innerHTML="<p>Create a new desktop or mobile prototype.</p>",o=I(),a=w("button"),a.innerHTML='<i class="iconoir-plus"></i> <span class="txt">New prototype</span>',p(t,"class","icon"),p(l,"class","title"),p(r,"class","content"),p(a,"type","button"),p(a,"class","btn btn-expanded btn-primary btn-lg m-t-base"),p(e,"class","placeholder-block entrance-top")},m(c,d){k(c,e,d),v(e,t),v(e,i),v(e,l),v(e,s),v(e,r),v(e,o),v(e,a),u||(f=$(a,"click",n[6]),u=!0)},p:X,i:X,o:X,d(c){c&&y(e),u=!1,f()}}}function Hg(n){let e;return{c(){e=w("div"),e.innerHTML='<span class="loader loader-lg"></span>',p(e,"class","block txt-center m-t-lg")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function $g(n){let e,t,i,l,s,r,o,a,u;function f(){return n[10](n[19])}function c(){return n[11](n[19])}function d(){return n[12](n[19])}return{c(){e=w("button"),e.innerHTML='<i class="iconoir-edit-pencil"></i> <span class="txt">Edit</span>',t=I(),i=w("button"),i.innerHTML='<i class="iconoir-copy"></i> <span class="txt">Duplicate</span>',l=I(),s=w("hr"),r=I(),o=w("button"),o.innerHTML='<i class="iconoir-trash"></i> <span class="txt">Delete</span>',p(e,"type","button"),p(e,"class","dropdown-item closable"),p(i,"type","button"),p(i,"class","dropdown-item closable"),p(o,"type","button"),p(o,"class","dropdown-item link-danger closable")},m(m,h){k(m,e,h),k(m,t,h),k(m,i,h),k(m,l,h),k(m,s,h),k(m,r,h),k(m,o,h),a||(u=[$(e,"click",be(f)),$(i,"click",be(c)),$(o,"click",be(d))],a=!0)},p(m,h){n=m},d(m){m&&(y(e),y(t),y(i),y(l),y(s),y(r),y(o)),a=!1,me(u)}}}function wa(n,e){let t,i,l,s,r,o=e[19].title+"",a,u,f,c,d,m,h,g,b,_,C;h=new Nt({props:{class:"dropdown dropdown-nowrap dropdown-sm dropdown-right",$$slots:{default:[$g]},$$scope:{ctx:e}}});function L(){return e[13](e[19])}return{key:n,first:null,c(){var T;t=w("button"),i=w("i"),s=I(),r=w("span"),a=x(o),u=I(),f=w("div"),c=w("div"),d=w("i"),m=I(),U(h.$$.fragment),p(i,"class",l=or(K.getPrototypeIcon(e[19]))+" svelte-fzv0qw"),p(r,"class","txt txt-ellipsis"),p(d,"class","iconoir-more-vert txt-sm txt-sm"),p(c,"class","meta-item"),p(f,"class","meta"),p(t,"type","button"),p(t,"class",g="btn "+(((T=e[3])==null?void 0:T.id)==e[19].id?"btn-semitransparent":"btn-transparent link-hint")),this.first=t},m(T,O){k(T,t,O),v(t,i),v(t,s),v(t,r),v(r,a),v(t,u),v(t,f),v(f,c),v(c,d),v(c,m),F(h,c,null),b=!0,_||(C=$(t,"click",be(L)),_=!0)},p(T,O){var j;e=T,(!b||O&4&&l!==(l=or(K.getPrototypeIcon(e[19]))+" svelte-fzv0qw"))&&p(i,"class",l),(!b||O&4)&&o!==(o=e[19].title+"")&&ke(a,o);const S={};O&65541&&(S.$$scope={dirty:O,ctx:e}),h.$set(S),(!b||O&12&&g!==(g="btn "+(((j=e[3])==null?void 0:j.id)==e[19].id?"btn-semitransparent":"btn-transparent link-hint")))&&p(t,"class",g)},i(T){b||(E(h.$$.fragment,T),b=!0)},o(T){P(h.$$.fragment,T),b=!1},d(T){T&&y(t),q(h),_=!1,C()}}}function Rg(n){let e,t,i,l,s;const r=[Hg,Mg,Dg],o=[];function a(f,c){return f[1]?0:!f[1]&&!f[2].length?1:2}e=a(n),t=o[e]=r[e](n);let u={};return l=new jg({props:u}),n[14](l),l.$on("submit",n[15]),{c(){t.c(),i=I(),U(l.$$.fragment)},m(f,c){o[e].m(f,c),k(f,i,c),F(l,f,c),s=!0},p(f,[c]){let d=e;e=a(f),e===d?o[e].p(f,c):(ae(),P(o[d],1,1,()=>{o[d]=null}),ue(),t=o[e],t?t.p(f,c):(t=o[e]=r[e](f),t.c()),E(t,1),t.m(i.parentNode,i));const m={};l.$set(m)},i(f){s||(E(t),E(l.$$.fragment,f),s=!0)},o(f){P(t),P(l.$$.fragment,f),s=!1},d(f){f&&y(i),o[e].d(f),n[14](null),q(l,f)}}}function Fg(n,e,t){let i,l,s;Q(n,li,S=>t(1,i=S)),Q(n,Ft,S=>t(2,l=S)),Q(n,Tt,S=>t(3,s=S));let{$$slots:r={},$$scope:o}=e,{projectId:a}=e,{initialPrototypeId:u=""}=e,f;async function c(S,j){if(S){ve(li,i=!0,i);try{ve(Tt,s=j,s),ve(Ft,l=await z.collection("prototypes").getFullList({filter:`project="${S}"`,sort:"created"}),l),ve(li,i=!1,i)}catch(H){H!=null&&H.isAbort||(z.error(H),ve(li,i=!1,i))}}}function d(S){S!=null&&S.id&&Et("Do you really want to delete the selected prototype and all its screens?",()=>z.collection("prototypes").delete(S.id).then(()=>{qh(S),ht(`Successfully deleted prototype ${S.title}.`)}).catch(j=>{z.error(j)}))}function m(S){Et("Do you really want to duplicate the selected prototype and all of its screens and hotspots?",async()=>h(S))}async function h(S){if(S!=null&&S.id)try{const j=await z.send("/api/pr/duplicate-prototype/"+encodeURIComponent(S.id),{method:"POST"});zi(j,!0)}catch(j){j.isAbort||z.error(j)}}function g(){f==null||f.show({project:a})}const b=S=>f==null?void 0:f.show(S),_=S=>m(S),C=S=>d(S),L=S=>{ve(Tt,s=S.id,s)};function T(S){le[S?"unshift":"push"](()=>{f=S,t(0,f)})}const O=S=>{S.detail&&zi(S.detail,!0)};return n.$$set=S=>{"projectId"in S&&t(7,a=S.projectId),"initialPrototypeId"in S&&t(8,u=S.initialPrototypeId),"$$scope"in S&&t(16,o=S.$$scope)},n.$$.update=()=>{n.$$.dirty&384&&c(a,u)},[f,i,l,s,d,m,g,a,u,r,b,_,C,L,T,O,o]}class qg extends Te{constructor(e){super(),Se(this,e,Fg,Rg,_e,{projectId:7,initialPrototypeId:8})}}function ad(n,{from:e,to:t},i={}){const l=getComputedStyle(n),s=l.transform==="none"?"":l.transform,[r,o]=l.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*r/t.width-(t.left+r),u=e.top+e.height*o/t.height-(t.top+o),{delay:f=0,duration:c=m=>Math.sqrt(m)*120,easing:d=zs}=i;return{delay:f,duration:et(c)?c(Math.sqrt(a*a+u*u)):c,easing:d,css:(m,h)=>{const g=h*a,b=h*u,_=m+h*e.width/t.width,C=m+h*e.height/t.height;return`transform: ${s} translate(${g}px, ${b}px) scale(${_}, ${C});`}}}const Ug=n=>({dragover:n&1}),va=n=>({dragover:n[0]});function Wg(n){let e,t,i,l;const s=n[3].default,r=lt(s,n,n[2],va);return{c(){e=w("div"),r&&r.c()},m(o,a){k(o,e,a),r&&r.m(e,null),t=!0,i||(l=[$(e,"dragover",Ke(be(n[4]))),$(e,"dragenter",Ke(be(n[5]))),$(e,"dragleave",be(n[6])),$(e,"drop",Ke(be(n[7])))],i=!0)},p(o,[a]){r&&r.p&&(!t||a&5)&&rt(r,s,o,o[2],t?st(s,o[2],a,Ug):ot(o[2]),va)},i(o){t||(E(r,o),t=!0)},o(o){P(r,o),t=!1},d(o){o&&y(e),r&&r.d(o),i=!1,me(l)}}}function Vg(n,e,t){let{$$slots:i={},$$scope:l}=e;const s=ft();let r=!1;function o(c){We.call(this,n,c)}const a=c=>{t(0,r=!0),s("dragenter")},u=c=>{c.currentTarget.contains(c.relatedTarget)||(c.stopPropagation(),t(0,r=!1),s("dragleave"))},f=c=>{t(0,r=!1),c.dataTransfer.files.length&&s("drop",c.dataTransfer.files)};return n.$$set=c=>{"$$scope"in c&&t(2,l=c.$$scope)},[r,s,l,i,o,a,u,f]}class ud extends Te{constructor(e){super(),Se(this,e,Vg,Wg,_e,{})}}const zg=n=>({dragging:n&4,dragover:n&8}),ya=n=>({dragging:n[2],dragover:n[3]});function Bg(n){let e,t,i,l,s;const r=n[10].default,o=lt(r,n,n[9],ya);return{c(){e=w("div"),o&&o.c(),p(e,"draggable",t=!n[1]),p(e,"class","sortable svelte-beosc3"),Z(e,"dragging",n[2]),Z(e,"dragover",n[3])},m(a,u){k(a,e,u),o&&o.m(e,null),i=!0,l||(s=[$(e,"dragover",be(n[11])),$(e,"dragleave",be(n[12])),$(e,"dragend",n[13]),$(e,"dragstart",n[14]),$(e,"drop",be(n[15]))],l=!0)},p(a,[u]){o&&o.p&&(!i||u&524)&&rt(o,r,a,a[9],i?st(r,a[9],u,zg):ot(a[9]),ya),(!i||u&2&&t!==(t=!a[1]))&&p(e,"draggable",t),(!i||u&4)&&Z(e,"dragging",a[2]),(!i||u&8)&&Z(e,"dragover",a[3])},i(a){i||(E(o,a),i=!0)},o(a){P(o,a),i=!1},d(a){a&&y(e),o&&o.d(a),l=!1,me(s)}}}function Zg(n,e,t){let{$$slots:i={},$$scope:l}=e;const s=ft();let{index:r}=e,{list:o=[]}=e,{group:a="default"}=e,{disabled:u=!1}=e,{dragHandleClass:f=""}=e,c=!1,d=!1;function m(T,O){if(!(!T||u)){if(f&&!T.target.classList.contains(f)){t(3,d=!1),t(2,c=!1),T.preventDefault();return}t(2,c=!0),T.dataTransfer.effectAllowed="move",T.dataTransfer.dropEffect="move",T.dataTransfer.setData("text/plain",JSON.stringify({index:O,group:a})),s("drag",T)}}function h(T,O){if(t(3,d=!1),t(2,c=!1),!T||u)return;T.dataTransfer.dropEffect="move";let S={};try{S=JSON.parse(T.dataTransfer.getData("text/plain"))}catch{}if(S.group!=a)return;const j=S.index<<0;j<O?(o.splice(O+1,0,o[j]),o.splice(j,1)):(o.splice(O,0,o[j]),o.splice(j+1,1)),t(6,o),s("sort",{oldIndex:j,newIndex:O,list:o})}const g=()=>{t(3,d=!0)},b=()=>{t(3,d=!1)},_=()=>{t(3,d=!1),t(2,c=!1)},C=T=>m(T,r),L=T=>h(T,r);return n.$$set=T=>{"index"in T&&t(0,r=T.index),"list"in T&&t(6,o=T.list),"group"in T&&t(7,a=T.group),"disabled"in T&&t(1,u=T.disabled),"dragHandleClass"in T&&t(8,f=T.dragHandleClass),"$$scope"in T&&t(9,l=T.$$scope)},[r,u,c,d,m,h,o,a,f,l,i,g,b,_,C,L]}class Yg extends Te{constructor(e){super(),Se(this,e,Zg,Bg,_e,{index:0,list:6,group:7,disabled:1,dragHandleClass:8})}}const Kg=n=>({uniqueId:n&1,isUploading:n&4,dragover:n&16384}),ka=n=>({uniqueId:n[0],isUploading:n[2],dragover:n[14]});function Gg(n){let e,t,i,l,s;const r=n[4].default,o=lt(r,n,n[10],ka);return{c(){e=w("input"),t=I(),o&&o.c(),e.multiple=!0,p(e,"id",n[0]),p(e,"type","file"),p(e,"accept","image/*"),p(e,"class","hidden")},m(a,u){k(a,e,u),n[7](e),k(a,t,u),o&&o.m(a,u),i=!0,l||(s=$(e,"change",n[8]),l=!0)},p(a,u){(!i||u&1)&&p(e,"id",a[0]),o&&o.p&&(!i||u&17413)&&rt(o,r,a,a[10],i?st(r,a[10],u,Kg):ot(a[10]),ka)},i(a){i||(E(o,a),i=!0)},o(a){P(o,a),i=!1},d(a){a&&(y(e),y(t)),n[7](null),o&&o.d(a),l=!1,s()}}}function Jg(n){let e,t,i,l;return e=new ud({props:{$$slots:{default:[Gg,({dragover:s})=>({14:s}),({dragover:s})=>s?16384:0]},$$scope:{ctx:n}}}),e.$on("drop",n[9]),{c(){U(e.$$.fragment)},m(s,r){F(e,s,r),t=!0,i||(l=[$(window,"drop",be(n[6])),$(window,"dragover",Ke(be(n[5])))],i=!0)},p(s,[r]){const o={};r&17415&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){P(e.$$.fragment,s),t=!1},d(s){q(e,s),i=!1,me(l)}}}function Xg(n,e,t){let i,l;Q(n,Tt,_=>t(11,i=_)),Q(n,pt,_=>t(12,l=_));let{$$slots:s={},$$scope:r}=e;const o=ft();let{id:a="uploader_"+K.randomString(5)}=e,u,f=!1;async function c(_){if(f||!(i!=null&&i.id)||!(_!=null&&_.length))return;t(2,f=!0);const C=[];let L=[];for(let S=0;S<_.length;S++){const j=_.item(S);let H="s"+S;H+=K.randomString(15-H.length);const D=l==null?void 0:l[l.length-1],A=new FormData;A.append("id",H),A.append("file",j),A.append("title",j.name.split(".").slice(0,-1).join(".")||j.name),A.append("prototype",i.id),A.append("background",(D==null?void 0:D.background)||""),A.append("alignment",(D==null?void 0:D.alignment)||""),C.push(z.collection("screens").create(A,{requestKey:null})),L.push(H)}const T=[],O={};try{const S=await Promise.allSettled(C);for(const H of S)H.status==="fulfilled"?(O[H.value.id]=H.value,Ln(H.value)):T.push(H);L=L.filter(H=>!!O[H]);const j=await z.collection("prototypes").update(i.id,{"screensOrder+":L},{$autoCancel:!1});zi(j),o("upload",Object.values(O)),u&&t(1,u.value="",u)}catch(S){console.warn("screens upload error:",S)}T.length>0&&(console.warn("failed to upload:",T),vh("Failed to upload some of the selected files.")),t(2,f=!1)}function d(_){We.call(this,n,_)}const m=_=>{c(_.dataTransfer.files)};function h(_){le[_?"unshift":"push"](()=>{u=_,t(1,u)})}const g=_=>c(_.target.files),b=_=>{c(_.detail)};return n.$$set=_=>{"id"in _&&t(0,a=_.id),"$$scope"in _&&t(10,r=_.$$scope)},[a,u,f,c,s,d,m,h,g,b,r]}class Qg extends Te{constructor(e){super(),Se(this,e,Xg,Jg,_e,{id:0})}}function Sa(n,e,t){const i=n.slice();return i[38]=e[t],i}function Ta(n,e,t){var o,a,u,f,c;const i=n.slice();i[43]=e[t],i[47]=e,i[48]=t;const l=(o=i[10])==null?void 0:o.filter(function(...m){return n[30](i[43],...m)}).length;i[44]=l;const s=(a=i[10])==null?void 0:a.filter(function(...m){return n[31](i[43],...m)}).length;i[45]=s;const r=i[45]+(((c=(f=(u=i[43].expand)==null?void 0:u.comments_via_screen)==null?void 0:f.filter(d=>!d.replyTo&&!d.resolved))==null?void 0:c.length)||0);return i[46]=r,i}function xg(n){let e,t=[],i=new Map,l,s,r,o,a,u,f=Ie(n[5]?n[8].slice(0,n[5]):n[8]);const c=m=>{var h;return((h=m[3])==null?void 0:h.id)+m[43].id};for(let m=0;m<f.length;m+=1){let h=Ta(n,f,m),g=c(h);i.set(g,t[m]=Oa(g,h))}r=new Qg({props:{id:"screen_uploader",$$slots:{default:[fb,({dragover:m,isUploading:h})=>({41:m,42:h}),({dragover:m,isUploading:h})=>[0,(m?1024:0)|(h?2048:0)]]},$$scope:{ctx:n}}}),r.$on("upload",pb);let d=n[7]&&Ea(n);return{c(){e=w("div");for(let m=0;m<t.length;m+=1)t[m].c();l=I(),s=w("div"),U(r.$$.fragment),o=I(),d&&d.c(),a=Ne(),p(s,"class","card card-placeholder"),p(e,"class","cards-list compact screens-list entrance-top"),Z(e,"reordering",n[4])},m(m,h){k(m,e,h);for(let g=0;g<t.length;g+=1)t[g]&&t[g].m(e,null);v(e,l),v(e,s),F(r,s,null),k(m,o,h),d&&d.m(m,h),k(m,a,h),u=!0},p(m,h){if(h[0]&140601|h[1]&263168){f=Ie(m[5]?m[8].slice(0,m[5]):m[8]),ae();for(let b=0;b<t.length;b+=1)t[b].r();t=yt(t,h,c,1,m,f,i,e,Df,Oa,l,Ta);for(let b=0;b<t.length;b+=1)t[b].a();ue()}const g={};h[1]&527360&&(g.$$scope={dirty:h,ctx:m}),r.$set(g),(!u||h[0]&16)&&Z(e,"reordering",m[4]),m[7]?d?(d.p(m,h),h[0]&128&&E(d,1)):(d=Ea(m),d.c(),E(d,1),d.m(a.parentNode,a)):d&&(ae(),P(d,1,1,()=>{d=null}),ue())},i(m){if(!u){for(let h=0;h<f.length;h+=1)E(t[h]);E(r.$$.fragment,m),E(d),u=!0}},o(m){for(let h=0;h<t.length;h+=1)P(t[h]);P(r.$$.fragment,m),P(d),u=!1},d(m){m&&(y(e),y(o),y(a));for(let h=0;h<t.length;h+=1)t[h].d();q(r),d&&d.d(m)}}}function eb(n){let e;return{c(){e=w("div"),e.innerHTML='<span class="loader loader-lg"></span>',p(e,"class","block txt-center m-t-lg")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function tb(n){let e;return{c(){e=w("i"),p(e,"class","iconoir-media-image")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function nb(n){let e,t,i;return t=new Yt({props:{src:z.files.getUrl(n[43],n[43].file,{thumb:"450x0"}),alt:n[43].title,draggable:!1}}),{c(){e=w("div"),U(t.$$.fragment),p(e,"class","card-img"),qe(e,"background-color",n[43].background)},m(l,s){k(l,e,s),F(t,e,null),i=!0},p(l,s){const r={};s[0]&288&&(r.src=z.files.getUrl(l[43],l[43].file,{thumb:"450x0"})),s[0]&288&&(r.alt=l[43].title),t.$set(r),s[0]&288&&qe(e,"background-color",l[43].background)},i(l){i||(E(t.$$.fragment,l),i=!0)},o(l){P(t.$$.fragment,l),i=!1},d(l){l&&y(e),q(t)}}}function ib(n){let e;return{c(){e=w("span"),p(e,"class","loader loader-lg")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function lb(n){let e,t,i,l,s,r,o;function a(){n[22].call(e,n[43])}function u(...f){return n[23](n[43],...f)}return{c(){e=w("input"),i=I(),l=w("label"),p(e,"type","checkbox"),p(e,"id",t=n[49]),p(l,"for",s=n[49])},m(f,c){k(f,e,c),e.checked=n[0][n[43].id],k(f,i,c),k(f,l,c),r||(o=[$(e,"change",a),$(e,"change",u)],r=!0)},p(f,c){n=f,c[1]&262144&&t!==(t=n[49])&&p(e,"id",t),c[0]&289&&(e.checked=n[0][n[43].id]),c[1]&262144&&s!==(s=n[49])&&p(l,"for",s)},d(f){f&&(y(e),y(i),y(l)),r=!1,me(o)}}}function sb(n){let e,t,i;function l(){return n[24](n[43])}return{c(){e=w("div"),e.innerHTML='<i class="iconoir-trash"></i> <span class="txt">Delete</span>',p(e,"class","dropdown-item link-danger closable")},m(s,r){k(s,e,r),t||(i=$(e,"click",Ke(be(l))),t=!0)},p(s,r){n=s},d(s){s&&y(e),t=!1,i()}}}function rb(n){let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g,b,_,C,L;const T=[ib,nb,tb],O=[];function S(j,H){return j[43].isReplacing?0:j[43].file?1:2}return t=S(n),i=O[t]=T[t](n),u=new Le({props:{class:"form-field m-0",$$slots:{default:[lb,({uniqueId:j})=>({49:j}),({uniqueId:j})=>[0,j?262144:0]]},$$scope:{ctx:n}}}),g=new Nt({props:{class:"dropdown dropdown-sm",$$slots:{default:[sb]},$$scope:{ctx:n}}}),{c(){e=w("figure"),i.c(),l=I(),s=w("a"),r=w("div"),r.innerHTML='<i class="iconoir-play-solid preview-icon"></i>',o=I(),a=w("div"),U(u.$$.fragment),f=I(),c=w("div"),d=w("button"),m=w("i"),h=I(),U(g.$$.fragment),p(r,"class","ctrl ctrl-center"),p(a,"class","ctrl ctrl-top-left"),p(m,"class","iconoir-more-vert"),p(d,"type","button"),p(d,"class","btn btn-sm btn-circle btn-transparent fade"),p(c,"class","ctrl ctrl-top-right"),p(s,"href",b=`/projects/${n[3].project}/prototypes/${n[3].id}/screens/${n[43].id}`),p(s,"class","card-overlay handle"),p(s,"draggable",!1),p(e,"class","card-featured"),p(e,"draggable",!1),Z(e,"dragover",n[41])},m(j,H){k(j,e,H),O[t].m(e,null),v(e,l),v(e,s),v(s,r),v(s,o),v(s,a),F(u,a,null),v(s,f),v(s,c),v(c,d),v(d,m),v(d,h),F(g,d,null),_=!0,C||(L=[$(a,"click",Ke(n[21])),$(d,"mousedown",Ke(be(n[19]))),$(d,"click",Ke(be(n[20]))),we(wi.call(null,s))],C=!0)},p(j,H){let D=t;t=S(j),t===D?O[t].p(j,H):(ae(),P(O[D],1,1,()=>{O[D]=null}),ue(),i=O[t],i?i.p(j,H):(i=O[t]=T[t](j),i.c()),E(i,1),i.m(e,l));const A={};H[0]&289|H[1]&786432&&(A.$$scope={dirty:H,ctx:j}),u.$set(A);const M={};H[0]&288|H[1]&524288&&(M.$$scope={dirty:H,ctx:j}),g.$set(M),(!_||H[0]&296&&b!==(b=`/projects/${j[3].project}/prototypes/${j[3].id}/screens/${j[43].id}`))&&p(s,"href",b),(!_||H[1]&1024)&&Z(e,"dragover",j[41])},i(j){_||(E(i),E(u.$$.fragment,j),E(g.$$.fragment,j),_=!0)},o(j){P(i),P(u.$$.fragment,j),P(g.$$.fragment,j),_=!1},d(j){j&&y(e),O[t].d(),q(u),q(g),C=!1,me(L)}}}function ob(n){let e,t,i;function l(r){n[25](r)}let s={index:n[48],$$slots:{default:[rb]},$$scope:{ctx:n}};return n[8]!==void 0&&(s.list=n[8]),e=new Yg({props:s}),le.push(()=>De(e,"list",l)),e.$on("drag",n[26]),e.$on("sort",n[27]),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};o[0]&288&&(a.index=r[48]),o[0]&297|o[1]&525312&&(a.$$scope={dirty:o,ctx:r}),!t&&o[0]&256&&(t=!0,a.list=r[8],Ae(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function Ca(n){let e,t,i,l,s=n[46]+"",r,o,a,u;return{c(){e=w("div"),t=w("i"),i=I(),l=w("span"),r=x(s),p(t,"class","iconoir-message-text"),p(l,"class","txt"),p(e,"class","meta-item"),Z(e,"txt-warning",n[44]>0)},m(f,c){k(f,e,c),v(e,t),v(e,i),v(e,l),v(l,r),a||(u=we(o=Oe.call(null,e,n[46]+" unresolved"+(n[44]?`
`+n[44]+" unread":""))),a=!0)},p(f,c){n=f,c[0]&1312&&s!==(s=n[46]+"")&&ke(r,s),o&&et(o.update)&&c[0]&1312&&o.update.call(null,n[46]+" unresolved"+(n[44]?`
`+n[44]+" unread":"")),c[0]&1312&&Z(e,"txt-warning",n[44]>0)},d(f){f&&y(e),a=!1,u()}}}function Oa(n,e){let t,i,l,s,r,o,a,u,f,c,d,m,h=X,g,b,_;function C(...S){return e[28](e[43],...S)}i=new ud({props:{$$slots:{default:[ob,({dragover:S})=>({41:S}),({dragover:S})=>[0,S?1024:0]]},$$scope:{ctx:e}}}),i.$on("drop",C);function L(S){e[29](S,e[43],e[47],e[48])}let T={tag:"h5",class:"title",collection:"screens"};e[43]!==void 0&&(T.model=e[43]),r=new Xs({props:T}),le.push(()=>De(r,"model",L));let O=e[46]&&Ca(e);return{key:n,first:null,c(){t=w("div"),U(i.$$.fragment),l=I(),s=w("div"),U(r.$$.fragment),a=I(),u=w("div"),O&&O.c(),f=I(),c=w("div"),c.innerHTML='<div class="iconoir-calendar"></div>',p(c,"class","meta-item"),p(u,"class","meta"),p(s,"class","card-content"),p(t,"class","card screen-card"),Z(t,"selected",e[0][e[43].id]),this.first=t},m(S,j){k(S,t,j),F(i,t,null),v(t,l),v(t,s),F(r,s,null),v(s,a),v(s,u),O&&O.m(u,null),v(u,f),v(u,c),g=!0,b||(_=we(d=Oe.call(null,c,{text:"Created "+K.relativeDate(e[43].created),sub:K.formatToLocalDate(e[43].created)})),b=!0)},p(S,j){e=S;const H={};j[0]&297|j[1]&525312&&(H.$$scope={dirty:j,ctx:e}),i.$set(H);const D={};!o&&j[0]&288&&(o=!0,D.model=e[43],Ae(()=>o=!1)),r.$set(D),e[46]?O?O.p(e,j):(O=Ca(e),O.c(),O.m(u,f)):O&&(O.d(1),O=null),d&&et(d.update)&&j[0]&288&&d.update.call(null,{text:"Created "+K.relativeDate(e[43].created),sub:K.formatToLocalDate(e[43].created)}),(!g||j[0]&289)&&Z(t,"selected",e[0][e[43].id])},r(){m=t.getBoundingClientRect()},f(){Of(t),h()},a(){h(),h=Cf(t,m,ad,{duration:250})},i(S){g||(E(i.$$.fragment,S),E(r.$$.fragment,S),g=!0)},o(S){P(i.$$.fragment,S),P(r.$$.fragment,S),g=!1},d(S){S&&y(t),q(i),q(r),O&&O.d(),b=!1,_()}}}function ab(n){let e,t,i,l,s;return{c(){e=w("div"),e.innerHTML='<i class="iconoir-upload-square"></i>',t=I(),i=w("div"),i.textContent="Upload screens",l=I(),s=w("div"),s.textContent="Drop or click here to upload new screens",p(e,"class","icon"),p(i,"class","title"),p(s,"class","content")},m(r,o){k(r,e,o),k(r,t,o),k(r,i,o),k(r,l,o),k(r,s,o)},d(r){r&&(y(e),y(t),y(i),y(l),y(s))}}}function ub(n){let e;return{c(){e=w("span"),p(e,"class","loader loader-primary")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function fb(n){let e,t;function i(r,o){return r[42]?ub:ab}let l=i(n),s=l(n);return{c(){e=w("label"),t=w("div"),s.c(),p(t,"class","placeholder"),p(e,"for","screen_uploader"),p(e,"class","card-featured"),Z(e,"dragover",n[41]),Z(e,"no-pointer-events",n[42])},m(r,o){k(r,e,o),v(e,t),s.m(t,null)},p(r,o){l!==(l=i(r))&&(s.d(1),s=l(r),s&&(s.c(),s.m(t,null))),o[1]&1024&&Z(e,"dragover",r[41]),o[1]&2048&&Z(e,"no-pointer-events",r[42])},d(r){r&&y(e),s.d()}}}function Ea(n){let e,t,i,l,s,r,o=n[7]==1?"screen":"screens",a,u,f,c,d,m,h,g,b,_,C,L,T=n[11].length>1&&La(n);return{c(){e=w("div"),t=w("div"),i=x("Selected "),l=w("strong"),s=x(n[7]),r=I(),a=x(o),u=I(),T&&T.c(),f=I(),c=w("button"),d=w("span"),d.textContent="Delete",m=I(),h=w("button"),g=w("i"),p(t,"class","info"),p(d,"class","txt"),p(c,"type","button"),p(c,"class","btn btn-sm btn-semitransparent btn-danger btn-expanded-sm"),c.disabled=n[6],Z(c,"btn-loading",n[1]),p(g,"class","iconoir-xmark"),p(h,"type","button"),p(h,"class","btn btn-sm btn-circle btn-transparent m-l-auto"),h.disabled=n[6],p(e,"class","bulk-bar")},m(O,S){k(O,e,S),v(e,t),v(t,i),v(t,l),v(l,s),v(l,r),v(l,a),v(e,u),T&&T.m(e,null),v(e,f),v(e,c),v(c,d),v(e,m),v(e,h),v(h,g),_=!0,C||(L=[$(c,"click",n[16]),we(Oe.call(null,h,{position:"top",text:"Clear selection"})),$(h,"click",n[14])],C=!0)},p(O,S){(!_||S[0]&128)&&ke(s,O[7]),(!_||S[0]&128)&&o!==(o=O[7]==1?"screen":"screens")&&ke(a,o),O[11].length>1?T?(T.p(O,S),S[0]&2048&&E(T,1)):(T=La(O),T.c(),E(T,1),T.m(e,f)):T&&(ae(),P(T,1,1,()=>{T=null}),ue()),(!_||S[0]&64)&&(c.disabled=O[6]),(!_||S[0]&2)&&Z(c,"btn-loading",O[1]),(!_||S[0]&64)&&(h.disabled=O[6])},i(O){_||(E(T),O&&vt(()=>{_&&(b||(b=ut(e,En,{duration:150,y:10,opacity:0},!0)),b.run(1))}),_=!0)},o(O){P(T),O&&(b||(b=ut(e,En,{duration:150,y:10,opacity:0},!1)),b.run(0)),_=!1},d(O){O&&y(e),T&&T.d(),O&&b&&b.end(),C=!1,me(L)}}}function La(n){let e,t,i,l,s,r,o;return r=new Nt({props:{class:"dropdown dropdown-upside dropdown-sm",$$slots:{default:[cb]},$$scope:{ctx:n}}}),{c(){e=w("button"),t=w("span"),t.textContent="Move to",i=I(),l=w("i"),s=I(),U(r.$$.fragment),p(t,"class","txt"),p(l,"class","iconoir-nav-arrow-down"),p(e,"type","button"),p(e,"class","btn btn-sm btn-semitransparent btn-expanded-sm"),e.disabled=n[6],Z(e,"btn-loading",n[2])},m(a,u){k(a,e,u),v(e,t),v(e,i),v(e,l),v(e,s),F(r,e,null),o=!0},p(a,u){const f={};u[0]&2056|u[1]&524288&&(f.$$scope={dirty:u,ctx:a}),r.$set(f),(!o||u[0]&64)&&(e.disabled=a[6]),(!o||u[0]&4)&&Z(e,"btn-loading",a[2])},i(a){o||(E(r.$$.fragment,a),o=!0)},o(a){P(r.$$.fragment,a),o=!1},d(a){a&&y(e),q(r)}}}function Ia(n){let e,t,i=n[38].title+"",l,s,r,o;function a(){return n[32](n[38])}return{c(){e=w("button"),t=w("span"),l=x(i),s=I(),p(t,"class","txt"),p(e,"type","button"),p(e,"class","dropdown-item closable")},m(u,f){k(u,e,f),v(e,t),v(t,l),v(e,s),r||(o=$(e,"click",a),r=!0)},p(u,f){n=u,f[0]&2048&&i!==(i=n[38].title+"")&&ke(l,i)},d(u){u&&y(e),r=!1,o()}}}function Pa(n,e){var s;let t,i,l=e[38].id!=((s=e[3])==null?void 0:s.id)&&Ia(e);return{key:n,first:null,c(){t=Ne(),l&&l.c(),i=Ne(),this.first=t},m(r,o){k(r,t,o),l&&l.m(r,o),k(r,i,o)},p(r,o){var a;e=r,e[38].id!=((a=e[3])==null?void 0:a.id)?l?l.p(e,o):(l=Ia(e),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(r){r&&(y(t),y(i)),l&&l.d(r)}}}function cb(n){let e=[],t=new Map,i,l=Ie(n[11]);const s=r=>r[38].id;for(let r=0;r<l.length;r+=1){let o=Sa(n,l,r),a=s(o);t.set(a,e[r]=Pa(a,o))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();i=Ne()},m(r,o){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(r,o);k(r,i,o)},p(r,o){o[0]&34824&&(l=Ie(r[11]),e=yt(e,o,s,1,r,l,t,i.parentNode,Af,Pa,i,Sa))},d(r){r&&y(i);for(let o=0;o<e.length;o+=1)e[o].d(r)}}}function db(n){let e,t,i,l,s,r;const o=[eb,xg],a=[];function u(f,c){var d;return f[9]&&!f[8].length?0:(d=f[3])!=null&&d.id?1:-1}return~(e=u(n))&&(t=a[e]=o[e](n)),{c(){t&&t.c(),i=Ne()},m(f,c){~e&&a[e].m(f,c),k(f,i,c),l=!0,s||(r=$(window,"keydown",n[12]),s=!0)},p(f,c){let d=e;e=u(f),e===d?~e&&a[e].p(f,c):(t&&(ae(),P(a[d],1,1,()=>{a[d]=null}),ue()),~e?(t=a[e],t?t.p(f,c):(t=a[e]=o[e](f),t.c()),E(t,1),t.m(i.parentNode,i)):t=null)},i(f){l||(E(t),l=!0)},o(f){P(t),l=!1},d(f){f&&y(i),~e&&a[e].d(f),s=!1,r()}}}function pb(){var n;(n=document.querySelector(".screens-list"))==null||n.scrollIntoView({behavior:"smooth",block:"end"})}function mb(n,e,t){let i,l,s,r,o,a,u;Q(n,pt,se=>t(8,s=se)),Q(n,Tt,se=>t(3,r=se)),Q(n,Ai,se=>t(9,o=se)),Q(n,gn,se=>t(10,a=se)),Q(n,Ft,se=>t(11,u=se));let f,c={},d=!1,m=!1,h=!1,g=0;async function b(){for(t(18,f=r==null?void 0:r.id),T(),t(5,g=50),await _();g<s.length;)await K.yieldToMain(),t(5,g+=15);t(5,g=0)}async function _(){if(r!=null&&r.id){Ys(),ve(Ai,o=!0,o);try{let se=await z.collection("screens").getFullList({filter:`prototype="${r.id}"`,expand:"comments_via_screen",fields:"*,expand.comments_via_screen.id,expand.comments_via_screen.replyTo,expand.comments_via_screen.resolved",sort:"created"});const ge=[];for(const Fe of r.screensOrder){const ne=se.findIndex(de=>de.id==Fe);ne<0||(ge.push(se[ne]),se.splice(ne,1))}for(let Fe of se)ge.push(Fe);ve(pt,s=ge,s),ve(Ai,o=!1,o)}catch(se){se!=null&&se.isAbort||(z.error(se),ve(Ai,o=!1,o))}}}function C(se){if(se.ctrlKey&&se.code=="KeyA"&&!K.isInput(se.target)){se.preventDefault();for(const ge of s)t(0,c[ge.id]=!0,c)}}async function L(){const se=s.map(ge=>ge.id);if(JSON.stringify(r.screensOrder)!=JSON.stringify(se))try{t(4,h=!0),await z.collection("prototypes").update(r.id,{screensOrder:se}),ve(Tt,r.screensOrder=se,r),t(4,h=!1)}catch(ge){ge.isAbort||(t(4,h=!1),z.error(ge))}}function T(){t(0,c={})}async function O(se){const ge=Object.keys(c);Et(`Do you really want to move the selected ${ge.length} ${ge.length==1?"screen":"screens"}?`,async()=>S(se))}async function S(se){const ge=Object.keys(c);if(!(!ge.length||!(se!=null&&se.id)||l)){t(2,m=!0);try{const Fe=[],ne={prototype:se.id};for(let de of ge)Fe.push(z.collection("screens").update(de,ne,{requestKey:"move_"+de}));Fe.push(z.collection("prototypes").update(r.id,{"screensOrder-":ge})),await Promise.all(Fe),T(),ve(Tt,r=se.id,r)}catch(Fe){z.error(Fe)}t(2,m=!1)}}function j(){const se=Object.keys(c);Et(`Do you really want to delete the selected ${se.length} ${se.length==1?"screen":"screens"}?`,async()=>H())}async function H(){const se=Object.keys(c);if(!(!se.length||l)){t(1,d=!0);try{const ge=se.map(ne=>z.collection("screens").delete(ne));await Promise.all(ge);const Fe=s.filter(ne=>se.includes(ne.id));for(const ne of Fe)ks(ne);T(),L(),ht(`Successfully deleted ${se.length} ${se.length==1?"screen":"screens"}.`)}catch(ge){ge.isAbort||(z.error(ge),b())}t(1,d=!1)}}async function D(se){Et(`Do you really want to delete ${se.title}?`,async()=>A(se),()=>{var ge;(ge=document.activeElement)==null||ge.blur()})}async function A(se){try{await z.collection("screens").delete(se.id),ks(se),T(),ht(`Successfully deleted screen ${se.title}.`)}catch(ge){ge.isAbort||(z.error(ge),b())}}function M(se){We.call(this,n,se)}function Y(se){We.call(this,n,se)}function G(se){We.call(this,n,se)}function B(se){c[se.id]=this.checked,t(0,c)}const N=(se,ge)=>{ge.target.checked||(delete c[se.id],t(0,c),ge.target.blur())},V=se=>D(se);function ee(se){s=se,pt.set(s)}const J=se=>{if(!se.detail)return;const ge=document.createElement("div");ge.className="draggable-ghost",document.body.appendChild(ge),se.detail.dataTransfer.setDragImage(ge,0,0),setTimeout(()=>{ge==null||ge.remove()},0)},R=()=>{L()},ce=(se,ge)=>{h||Gs(se,ge.detail[0])};function oe(se,ge,Fe,ne){Fe[ne]=se,t(5,g)}const pe=(se,ge)=>{var Fe,ne;return((ne=(Fe=ge.expand)==null?void 0:Fe.comment)==null?void 0:ne.screen)==se.id},Ee=(se,ge)=>{var Fe,ne,de,W,ie,Ue;return!((ne=(Fe=ge.expand)==null?void 0:Fe.comment)!=null&&ne.replyTo)&&!((W=(de=ge.expand)==null?void 0:de.comment)!=null&&W.resolved)&&((Ue=(ie=ge.expand)==null?void 0:ie.comment)==null?void 0:Ue.screen)==se.id},tt=se=>O(se);return n.$$.update=()=>{n.$$.dirty[0]&262152&&f!=(r==null?void 0:r.id)&&b(),n.$$.dirty[0]&1&&t(7,i=Object.keys(c).length),n.$$.dirty[0]&6&&t(6,l=d||m)},[c,d,m,r,h,g,l,i,s,o,a,u,C,L,T,O,j,D,f,M,Y,G,B,N,V,ee,J,R,ce,oe,pe,Ee,tt]}class hb extends Te{constructor(e){super(),Se(this,e,mb,db,_e,{},null,[-1,-1])}}function ja(n){let e,t,i=n[0].name&&Na(n),l=n[2]&&Aa();return{c(){e=w("div"),i&&i.c(),t=I(),l&&l.c(),p(e,"class","row")},m(s,r){k(s,e,r),i&&i.m(e,null),v(e,t),l&&l.m(e,null)},p(s,r){s[0].name?i?i.p(s,r):(i=Na(s),i.c(),i.m(e,t)):i&&(i.d(1),i=null),s[2]?l||(l=Aa(),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(s){s&&y(e),i&&i.d(),l&&l.d()}}}function Na(n){let e,t=n[0].name+"",i,l;return{c(){e=w("span"),i=x(t),p(e,"class","user-name txt-ellipsis"),p(e,"title",l=n[0].name)},m(s,r){k(s,e,r),v(e,i)},p(s,r){r&1&&t!==(t=s[0].name+"")&&ke(i,t),r&1&&l!==(l=s[0].name)&&p(e,"title",l)},d(s){s&&y(e)}}}function Aa(n){let e;return{c(){e=w("span"),e.textContent="You",p(e,"class","label label-sm label-warning")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function Da(n){let e,t,i,l=n[0].email+"",s,r;return{c(){e=w("small"),e.textContent="|",t=I(),i=w("small"),s=x(l),p(i,"class","user-email txt-ellipsis"),p(i,"title",r=n[0].email)},m(o,a){k(o,e,a),k(o,t,a),k(o,i,a),v(i,s)},p(o,a){a&1&&l!==(l=o[0].email+"")&&ke(s,l),a&1&&r!==(r=o[0].email)&&p(i,"title",r)},d(o){o&&(y(e),y(t),y(i))}}}function _b(n){let e,t,i,l,s,r,o,a,u=n[0].username+"",f,c,d,m,h,g;t=new Xi({props:{user:n[0]}});let b=(n[0].name||n[2])&&ja(n),_=n[0].email&&Da(n);const C=n[5].default,L=lt(C,n,n[4],null);return{c(){e=w("div"),U(t.$$.fragment),i=I(),l=w("div"),b&&b.c(),s=I(),r=w("div"),o=w("small"),a=x("@"),f=x(u),d=I(),_&&_.c(),m=I(),L&&L.c(),p(o,"class","user-username txt-ellipsis"),p(o,"title",c="@"+n[0].username),p(r,"class","row txt-hint"),p(l,"class","content"),p(e,"class",h="list-item "+n[1])},m(T,O){k(T,e,O),F(t,e,null),v(e,i),v(e,l),b&&b.m(l,null),v(l,s),v(l,r),v(r,o),v(o,a),v(o,f),v(r,d),_&&_.m(r,null),v(e,m),L&&L.m(e,null),g=!0},p(T,[O]){const S={};O&1&&(S.user=T[0]),t.$set(S),T[0].name||T[2]?b?b.p(T,O):(b=ja(T),b.c(),b.m(l,s)):b&&(b.d(1),b=null),(!g||O&1)&&u!==(u=T[0].username+"")&&ke(f,u),(!g||O&1&&c!==(c="@"+T[0].username))&&p(o,"title",c),T[0].email?_?_.p(T,O):(_=Da(T),_.c(),_.m(r,null)):_&&(_.d(1),_=null),L&&L.p&&(!g||O&16)&&rt(L,C,T,T[4],g?st(C,T[4],O,null):ot(T[4]),null),(!g||O&2&&h!==(h="list-item "+T[1]))&&p(e,"class",h)},i(T){g||(E(t.$$.fragment,T),E(L,T),g=!0)},o(T){P(t.$$.fragment,T),P(L,T),g=!1},d(T){T&&y(e),q(t),b&&b.d(),_&&_.d(),L&&L.d(T)}}}function gb(n,e,t){let i,l;Q(n,Jn,u=>t(3,l=u));let{$$slots:s={},$$scope:r}=e,{user:o={}}=e,{class:a=""}=e;return n.$$set=u=>{"user"in u&&t(0,o=u.user),"class"in u&&t(1,a=u.class),"$$scope"in u&&t(4,r=u.$$scope)},n.$$.update=()=>{n.$$.dirty&9&&t(2,i=(l==null?void 0:l.id)==o.id)},[o,a,i,l,r,s]}class fd extends Te{constructor(e){super(),Se(this,e,gb,_b,_e,{user:0,class:1})}}function Ma(n,e,t){const i=n.slice();return i[31]=e[t],i}function Ha(n,e,t){const i=n.slice();return i[28]=e[t],i}function $a(n,e,t){const i=n.slice();return i[31]=e[t],i}function Ra(n,e,t){const i=n.slice();return i[28]=e[t],i}function bb(n){let e=[],t=new Map,i,l,s=Ie(n[8]);const r=a=>a[31].id;for(let a=0;a<s.length;a+=1){let u=$a(n,s,a),f=r(u);t.set(f,e[a]=qa(f,u))}let o=null;return s.length||(o=Fa()),{c(){for(let a=0;a<e.length;a+=1)e[a].c();i=Ne(),o&&o.c()},m(a,u){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,u);k(a,i,u),o&&o.m(a,u),l=!0},p(a,u){u[0]&2340&&(s=Ie(a[8]),ae(),e=yt(e,u,r,1,a,s,t,i.parentNode,It,qa,i,$a),ue(),!s.length&&o?o.p(a,u):s.length?o&&(o.d(1),o=null):(o=Fa(),o.c(),o.m(i.parentNode,i)))},i(a){if(!l){for(let u=0;u<s.length;u+=1)E(e[u]);l=!0}},o(a){for(let u=0;u<e.length;u+=1)P(e[u]);l=!1},d(a){a&&y(i);for(let u=0;u<e.length;u+=1)e[u].d(a);o&&o.d(a)}}}function wb(n){let e,t=Ie(Array(n[2].users.length||1)),i=[];for(let l=0;l<t.length;l+=1)i[l]=Ua(Ra(n,t,l));return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=Ne()},m(l,s){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(l,s);k(l,e,s)},p(l,s){if(s[0]&4){t=Ie(Array(l[2].users.length||1));let r;for(r=0;r<t.length;r+=1){const o=Ra(l,t,r);i[r]?i[r].p(o,s):(i[r]=Ua(),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},i:X,o:X,d(l){l&&y(e),xt(i,l)}}}function Fa(n){let e;return{c(){e=w("div"),e.innerHTML='<div class="block txt-center p-5"><span class="txt-hint">The project doesn&#39;t have any owners yet.</span></div> ',p(e,"class","list-item txt-hint")},m(t,i){k(t,e,i)},p:X,d(t){t&&y(e)}}}function vb(n){let e,t,i,l,s,r,o;function a(){return n[15](n[31])}return{c(){e=w("button"),t=w("span"),t.textContent="Revoke access",s=I(),p(t,"class","txt"),p(e,"type","button"),p(e,"class","btn btn-sm btn-semitransparent btn-danger"),e.disabled=i=n[2].users.length==1||n[5]},m(u,f){k(u,e,f),v(e,t),k(u,s,f),r||(o=[we(l=Oe.call(null,e,n[2].users.length==1?"You can't remove the only project owner":"")),$(e,"click",be(a))],r=!0)},p(u,f){n=u,f[0]&36&&i!==(i=n[2].users.length==1||n[5])&&(e.disabled=i),l&&et(l.update)&&f[0]&4&&l.update.call(null,n[2].users.length==1?"You can't remove the only project owner":"")},d(u){u&&(y(e),y(s)),r=!1,me(o)}}}function qa(n,e){let t,i,l;return i=new fd({props:{user:e[31],$$slots:{default:[vb]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=Ne(),U(i.$$.fragment),this.first=t},m(s,r){k(s,t,r),F(i,s,r),l=!0},p(s,r){e=s;const o={};r[0]&256&&(o.user=e[31]),r[0]&292|r[1]&128&&(o.$$scope={dirty:r,ctx:e}),i.$set(o)},i(s){l||(E(i.$$.fragment,s),l=!0)},o(s){P(i.$$.fragment,s),l=!1},d(s){s&&y(t),q(i,s)}}}function Ua(n){let e;return{c(){e=w("div"),e.innerHTML='<figure class="thumb thumb-circle"></figure> <div class="content"><div class="skeleton-loader"></div></div> ',p(e,"class","list-item")},m(t,i){k(t,e,i)},p:X,d(t){t&&y(e)}}}function Wa(n){let e;return{c(){e=w("div"),p(e,"class","clearfix m-b-sm")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function yb(n){let e;return{c(){e=w("div"),e.innerHTML='<div class="block txt-center"><span class="txt-hint">No users found.</span></div>',p(e,"class","list-item svelte-1tb8gd9")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function kb(n){let e=[],t=new Map,i,l,s=Ie(n[6]);const r=o=>o[31].id;for(let o=0;o<s.length;o+=1){let a=Ma(n,s,o),u=r(a);t.set(u,e[o]=Va(u,a))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();i=Ne()},m(o,a){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(o,a);k(o,i,a),l=!0},p(o,a){a[0]&1104&&(s=Ie(o[6]),ae(),e=yt(e,a,r,1,o,s,t,i.parentNode,It,Va,i,Ma),ue())},i(o){if(!l){for(let a=0;a<s.length;a+=1)E(e[a]);l=!0}},o(o){for(let a=0;a<e.length;a+=1)P(e[a]);l=!1},d(o){o&&y(i);for(let a=0;a<e.length;a+=1)e[a].d(o)}}}function Sb(n){let e,t=Ie(Array(n[6].length||1)),i=[];for(let l=0;l<t.length;l+=1)i[l]=za(Ha(n,t,l));return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=Ne()},m(l,s){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(l,s);k(l,e,s)},p(l,s){if(s[0]&64){t=Ie(Array(l[6].length||1));let r;for(r=0;r<t.length;r+=1){const o=Ha(l,t,r);i[r]?i[r].p(o,s):(i[r]=za(),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},i:X,o:X,d(l){l&&y(e),xt(i,l)}}}function Tb(n){let e,t,i,l,s;function r(){return n[17](n[31])}return{c(){e=w("button"),t=w("span"),t.textContent="Add",i=I(),p(t,"class","txt"),p(e,"type","button"),p(e,"class","btn btn-sm btn-expanded-sm btn-semitransparent"),e.disabled=n[4]},m(o,a){k(o,e,a),v(e,t),k(o,i,a),l||(s=$(e,"click",be(r)),l=!0)},p(o,a){n=o,a[0]&16&&(e.disabled=n[4])},d(o){o&&(y(e),y(i)),l=!1,s()}}}function Va(n,e){let t,i,l;return i=new fd({props:{user:e[31],$$slots:{default:[Tb]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=Ne(),U(i.$$.fragment),this.first=t},m(s,r){k(s,t,r),F(i,s,r),l=!0},p(s,r){e=s;const o={};r[0]&64&&(o.user=e[31]),r[0]&80|r[1]&128&&(o.$$scope={dirty:r,ctx:e}),i.$set(o)},i(s){l||(E(i.$$.fragment,s),l=!0)},o(s){P(i.$$.fragment,s),l=!1},d(s){s&&y(t),q(i,s)}}}function za(n){let e;return{c(){e=w("div"),e.innerHTML='<figure class="thumb thumb-circle"></figure> <div class="content"><div class="skeleton-loader"></div></div> ',p(e,"class","list-item svelte-1tb8gd9")},m(t,i){k(t,e,i)},p:X,d(t){t&&y(e)}}}function Cb(n){let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g,b;const _=[wb,bb],C=[];function L(A,M){return A[9]?0:1}l=L(n),s=C[l]=_[l](n);function T(A){n[16](A)}let O={class:"m-b-0",placeholder:"Search users..."};n[1]!==void 0&&(O.value=n[1]),u=new nd({props:O}),le.push(()=>De(u,"value",T));let S=(n[7]||n[1])&&Wa();const j=[Sb,kb,yb],H=[];function D(A,M){return A[7]?0:A[6].length?1:A[1]?2:-1}return~(h=D(n))&&(g=H[h]=j[h](n)),{c(){e=w("h6"),e.textContent="Current owners",t=I(),i=w("div"),s.c(),r=I(),o=w("hr"),a=I(),U(u.$$.fragment),c=I(),S&&S.c(),d=I(),m=w("div"),g&&g.c(),p(e,"class","m-b-sm"),p(i,"class","list list-current-owners"),p(m,"class","list list-suggestions svelte-1tb8gd9")},m(A,M){k(A,e,M),k(A,t,M),k(A,i,M),C[l].m(i,null),k(A,r,M),k(A,o,M),k(A,a,M),F(u,A,M),k(A,c,M),S&&S.m(A,M),k(A,d,M),k(A,m,M),~h&&H[h].m(m,null),b=!0},p(A,M){let Y=l;l=L(A),l===Y?C[l].p(A,M):(ae(),P(C[Y],1,1,()=>{C[Y]=null}),ue(),s=C[l],s?s.p(A,M):(s=C[l]=_[l](A),s.c()),E(s,1),s.m(i,null));const G={};!f&&M[0]&2&&(f=!0,G.value=A[1],Ae(()=>f=!1)),u.$set(G),A[7]||A[1]?S||(S=Wa(),S.c(),S.m(d.parentNode,d)):S&&(S.d(1),S=null);let B=h;h=D(A),h===B?~h&&H[h].p(A,M):(g&&(ae(),P(H[B],1,1,()=>{H[B]=null}),ue()),~h?(g=H[h],g?g.p(A,M):(g=H[h]=j[h](A),g.c()),E(g,1),g.m(m,null)):g=null)},i(A){b||(E(s),E(u.$$.fragment,A),E(g),b=!0)},o(A){P(s),P(u.$$.fragment,A),P(g),b=!1},d(A){A&&(y(e),y(t),y(i),y(r),y(o),y(a),y(c),y(d),y(m)),C[l].d(),q(u,A),S&&S.d(A),~h&&H[h].d()}}}function Ob(n){let e;return{c(){e=w("h5"),e.textContent="Manage project owners",p(e,"class","block txt-center")},m(t,i){k(t,e,i)},p:X,d(t){t&&y(e)}}}function Eb(n){let e,t,i,l,s;return{c(){e=w("button"),t=w("span"),t.textContent="Close",p(t,"class","txt"),p(e,"type","button"),p(e,"class","btn btn-transparent m-r-auto"),e.disabled=i=n[4]||n[5]},m(r,o){k(r,e,o),v(e,t),l||(s=$(e,"click",n[14]),l=!0)},p(r,o){o[0]&48&&i!==(i=r[4]||r[5])&&(e.disabled=i)},d(r){r&&y(e),l=!1,s()}}}function Lb(n){let e,t,i={popup:!0,overlayClose:!n[4],escHide:!n[4],beforeHide:n[18],$$slots:{footer:[Eb],header:[Ob],default:[Cb]},$$scope:{ctx:n}};return e=new pn({props:i}),n[19](e),e.$on("show",n[20]),e.$on("hide",n[21]),{c(){U(e.$$.fragment)},m(l,s){F(e,l,s),t=!0},p(l,s){const r={};s[0]&16&&(r.overlayClose=!l[4]),s[0]&16&&(r.escHide=!l[4]),s[0]&16&&(r.beforeHide=l[18]),s[0]&1014|s[1]&128&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){n[19](null),q(e,l)}}}const Ba="project_owners_list",ls="project_owners_suggestions";function Ib(n,e,t){let i,l;Q(n,an,N=>t(2,i=N)),Q(n,Jn,N=>t(22,l=N));const s=ft();let r,o="",a=!1,u=!1,f=[],c=!1,d=[],m=!1,h;function g(){return _(),r==null?void 0:r.show()}function b(){return z.cancelRequest(Ba),z.cancelRequest(ls),clearTimeout(h),r==null?void 0:r.hide()}async function _(){var N;if((N=i==null?void 0:i.users)!=null&&N.length){t(8,d=[]),t(9,m=!0);try{const V=await z.collection("users").getFullList({filter:i.users.map(ee=>`id="${ee}"`).join("||"),requestKey:Ba});for(let ee of i.users){const J=V.find(R=>R.id==ee);J&&d.push(J)}t(9,m=!1)}catch(V){V.isAbort||(z.error(V),t(9,m=!1))}}}async function C(){var N,V;t(7,c=!0);try{let ee=["username","name","email"].map(R=>`${R}~"${o.replaceAll('"',"")}"`).join("||");(N=i==null?void 0:i.users)!=null&&N.length&&(ee=((V=i==null?void 0:i.users)==null?void 0:V.map(R=>`id!="${R}"`).join("&&"))+` && (${ee})`);const J=await z.collection("users").getList(1,30,{filter:ee,requestKey:ls});t(6,f=J.items),t(7,c=!1)}catch(ee){ee.isAbort||(z.error(ee),t(7,c=!1))}}function L(N){Et(`Do you really want to add user ${K.getUserDisplayName(N)} to the project owners?`,async()=>T(N))}async function T(N){if(!(a||!(N!=null&&N.id))){t(4,a=!0);try{const V=await z.collection("projects").update(i.id,{"users+":N.id});Yn(V),K.removeByKey(f,"id",N.id),t(6,f),t(1,o),t(13,h),f.length||t(1,o=""),ht(`Successfully added ${K.getUserDisplayName(N)} to the project owners list.`),s("add",N),t(4,a=!1)}catch(V){V.isAbort||(z.error(V),t(4,a=!1))}}}function O(N){let V=`Do you really want to remove the project access of user ${K.getUserDisplayName(N)}?`;l.id==N.id&&(V=`You no longer will have access to the project! 

Do you really want to remove your user from the project owners list?`),Et(V,async()=>S(N))}async function S(N){if(!(u||!(N!=null&&N.id))){t(5,u=!0);try{const V=await z.collection("projects").update(i.id,{"users-":N.id});Yn(V),l.id==N.id?(ht(`Successfully removed your user from the ${i.title} owners list.`),cn("/projects")):ht(`Successfully removed ${K.getUserDisplayName(N)} from the ${i.title} owners list.`),s("remove",N),K.removeByKey(d,"id",N.id),t(8,d),o&&C(),t(5,u=!1)}catch(V){V.isAbort||(z.error(V),t(5,u=!1))}}}fn(()=>{b()});const j=()=>b(),H=N=>O(N);function D(N){o=N,t(1,o)}const A=N=>L(N),M=()=>!a;function Y(N){le[N?"unshift":"push"](()=>{r=N,t(3,r)})}function G(N){We.call(this,n,N)}function B(N){We.call(this,n,N)}return n.$$.update=()=>{n.$$.dirty[0]&8194&&(o?(t(7,c=!0),clearTimeout(h),t(13,h=setTimeout(C,100))):(clearTimeout(h),z.cancelRequest(ls),t(6,f=[]))),n.$$.dirty[0]&4&&(i==null?void 0:i.users)!==-1&&_()},[b,o,i,r,a,u,f,c,d,m,L,O,g,h,j,H,D,A,M,Y,G,B]}class Pb extends Te{constructor(e){super(),Se(this,e,Ib,Lb,_e,{show:12,hide:0},null,[-1,-1])}get show(){return this.$$.ctx[12]}get hide(){return this.$$.ctx[0]}}function jb(n){let e,t,i,l,s;return{c(){e=w("i"),p(e,"class",t=n[2]+" "+(n[3]?n[1]:n[0])),p(e,"aria-label","Copy")},m(r,o){k(r,e,o),l||(s=[we(i=Oe.call(null,e,n[3]?"":"Copy")),$(e,"click",Ke(n[4]))],l=!0)},p(r,[o]){o&15&&t!==(t=r[2]+" "+(r[3]?r[1]:r[0]))&&p(e,"class",t),i&&et(i.update)&&o&8&&i.update.call(null,r[3]?"":"Copy")},i:X,o:X,d(r){r&&y(e),l=!1,me(s)}}}function Nb(n,e,t){let{value:i=""}=e,{idleClasses:l="iconoir-copy link-hint"}=e,{successClasses:s="iconoir-check txt-success"}=e,{successDuration:r=500}=e,{class:o=""}=e,a;function u(){i&&(K.copyToClipboard(i),clearTimeout(a),t(3,a=setTimeout(()=>{clearTimeout(a),t(3,a=null)},r)))}return fn(()=>{a&&clearTimeout(a)}),n.$$set=f=>{"value"in f&&t(5,i=f.value),"idleClasses"in f&&t(0,l=f.idleClasses),"successClasses"in f&&t(1,s=f.successClasses),"successDuration"in f&&t(6,r=f.successDuration),"class"in f&&t(2,o=f.class)},[l,s,o,a,u,i,r]}class Ab extends Te{constructor(e){super(),Se(this,e,Nb,jb,_e,{value:5,idleClasses:0,successClasses:1,successDuration:6,class:2})}}function Za(n){let e,t,i,l,s,r,o;return{c(){e=w("div"),t=w("div"),i=w("div"),l=w("a"),s=x(n[10]),p(l,"href",n[10]),p(l,"target","_blank"),p(l,"rel","noopener noreferrer"),p(i,"class","content txt-center txt-bold"),p(t,"class","alert alert-warning m-0"),p(e,"class","col-12")},m(a,u){k(a,e,u),v(e,t),v(t,i),v(i,l),v(l,s),r||(o=we(Oe.call(null,l,"Open in new tab")),r=!0)},p(a,u){u&1024&&ke(s,a[10]),u&1024&&p(l,"href",a[10])},d(a){a&&y(e),r=!1,o()}}}function Db(n){let e,t,i,l,s,r,o,a;return{c(){e=w("input"),i=I(),l=w("label"),s=x("Allow comments"),p(e,"type","checkbox"),p(e,"id",t=n[29]),p(l,"for",r=n[29])},m(u,f){k(u,e,f),e.checked=n[2].allowComments,k(u,i,f),k(u,l,f),v(l,s),o||(a=$(e,"change",n[16]),o=!0)},p(u,f){f&536870912&&t!==(t=u[29])&&p(e,"id",t),f&4&&(e.checked=u[2].allowComments),f&536870912&&r!==(r=u[29])&&p(l,"for",r)},d(u){u&&(y(e),y(i),y(l)),o=!1,a()}}}function Ya(n){let e,t,i,l,s,r,o,a;return{c(){e=w("span"),t=w("span"),t.textContent="Change password",i=I(),l=w("i"),p(t,"class","txt"),p(l,"class",s="iconoir-nav-arrow-"+(n[5]?"up":"down")),p(e,"class",r="inline-flex m-l-10 "+(n[5]?"link-base":"link-hint"))},m(u,f){k(u,e,f),v(e,t),v(e,i),v(e,l),o||(a=$(e,"click",Ke(be(n[18]))),o=!0)},p(u,f){f&32&&s!==(s="iconoir-nav-arrow-"+(u[5]?"up":"down"))&&p(l,"class",s),f&32&&r!==(r="inline-flex m-l-10 "+(u[5]?"link-base":"link-hint"))&&p(e,"class",r)},d(u){u&&y(e),o=!1,a()}}}function Mb(n){let e,t,i,l,s,r,o,a,u,f=n[2].passwordProtect&&n[8]&&Ya(n);return{c(){e=w("input"),i=I(),l=w("label"),s=w("div"),s.textContent="Protect with password",r=I(),f&&f.c(),p(e,"type","checkbox"),p(e,"id",t=n[29]),p(s,"class","txt"),p(l,"for",o=n[29])},m(c,d){k(c,e,d),e.checked=n[2].passwordProtect,k(c,i,d),k(c,l,d),v(l,s),v(l,r),f&&f.m(l,null),a||(u=$(e,"change",n[17]),a=!0)},p(c,d){d&536870912&&t!==(t=c[29])&&p(e,"id",t),d&4&&(e.checked=c[2].passwordProtect),c[2].passwordProtect&&c[8]?f?f.p(c,d):(f=Ya(c),f.c(),f.m(l,null)):f&&(f.d(1),f=null),d&536870912&&o!==(o=c[29])&&p(l,"for",o)},d(c){c&&(y(e),y(i),y(l)),f&&f.d(),a=!1,u()}}}function Ka(n){let e,t,i,l;return t=new Le({props:{class:"form-field form-field-toggle p-t-xs",name:"password",$$slots:{default:[Hb,({uniqueId:s})=>({29:s}),({uniqueId:s})=>s?536870912:0]},$$scope:{ctx:n}}}),{c(){e=w("div"),U(t.$$.fragment),p(e,"class","block")},m(s,r){k(s,e,r),F(t,e,null),l=!0},p(s,r){const o={};r&1610612800&&(o.$$scope={dirty:r,ctx:s}),t.$set(o)},i(s){l||(E(t.$$.fragment,s),s&&vt(()=>{l&&(i||(i=ut(e,Ct,{duration:150},!0)),i.run(1))}),l=!0)},o(s){P(t.$$.fragment,s),s&&(i||(i=ut(e,Ct,{duration:150},!1)),i.run(0)),l=!1},d(s){s&&y(e),q(t),s&&i&&i.end()}}}function Hb(n){let e,t,i,l;return{c(){e=w("input"),p(e,"type","password"),p(e,"id",t=n[29]),p(e,"placeholder","Password"),p(e,"minlength","5"),e.required=!0},m(s,r){k(s,e,r),ye(e,n[6]),i||(l=$(e,"input",n[19]),i=!0)},p(s,r){r&536870912&&t!==(t=s[29])&&p(e,"id",t),r&64&&e.value!==s[6]&&ye(e,s[6])},d(s){s&&y(e),i=!1,l()}}}function $b(n){let e,t,i,l,s,r,o,a,u,f;return{c(){var c;e=w("input"),s=I(),r=w("label"),o=x("Restrict access to prototypes"),p(e,"type","checkbox"),p(e,"id",t=n[29]),e.checked=i=((c=n[2].onlyPrototypes)==null?void 0:c.length)>0,e.disabled=l=!n[9].length,p(r,"for",a=n[29])},m(c,d){k(c,e,d),k(c,s,d),k(c,r,d),v(r,o),u||(f=$(e,"change",n[20]),u=!0)},p(c,d){var m;d&536870912&&t!==(t=c[29])&&p(e,"id",t),d&4&&i!==(i=((m=c[2].onlyPrototypes)==null?void 0:m.length)>0)&&(e.checked=i),d&512&&l!==(l=!c[9].length)&&(e.disabled=l),d&536870912&&a!==(a=c[29])&&p(r,"for",a)},d(c){c&&(y(e),y(s),y(r)),u=!1,f()}}}function Ga(n){let e,t,i,l;return t=new Le({props:{class:"form-field link-prototypes-dropdown p-t-xs",$$slots:{default:[Rb]},$$scope:{ctx:n}}}),{c(){e=w("div"),U(t.$$.fragment),p(e,"class","block")},m(s,r){k(s,e,r),F(t,e,null),l=!0},p(s,r){const o={};r&1073742340&&(o.$$scope={dirty:r,ctx:s}),t.$set(o)},i(s){l||(E(t.$$.fragment,s),s&&vt(()=>{l&&(i||(i=ut(e,Ct,{duration:150},!0)),i.run(1))}),l=!0)},o(s){P(t.$$.fragment,s),s&&(i||(i=ut(e,Ct,{duration:150},!1)),i.run(0)),l=!1},d(s){s&&y(e),q(t),s&&i&&i.end()}}}function Rb(n){let e,t,i;function l(r){n[21](r)}let s={items:n[9],closable:!1,multiple:!0,upside:!0,selectPlaceholder:"Select prototypes"};return n[2].onlyPrototypes!==void 0&&(s.keyOfSelected=n[2].onlyPrototypes),e=new dn({props:s}),le.push(()=>De(e,"keyOfSelected",l)),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};o&512&&(a.items=r[9]),!t&&o&4&&(t=!0,a.keyOfSelected=r[2].onlyPrototypes,Ae(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function Fb(n){let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g=n[2].id&&Za(n);i=new Le({props:{class:"form-field form-field-toggle",name:"allowComments",$$slots:{default:[Db,({uniqueId:C})=>({29:C}),({uniqueId:C})=>C?536870912:0]},$$scope:{ctx:n}}}),r=new Le({props:{class:"form-field form-field-toggle",name:"passwordProtect",$$slots:{default:[Mb,({uniqueId:C})=>({29:C}),({uniqueId:C})=>C?536870912:0]},$$scope:{ctx:n}}});let b=n[2].passwordProtect&&n[5]&&Ka(n);f=new Le({props:{class:"form-field form-field-toggle",$$slots:{default:[$b,({uniqueId:C})=>({29:C}),({uniqueId:C})=>C?536870912:0]},$$scope:{ctx:n}}});let _=n[4]&&Ga(n);return{c(){e=w("form"),g&&g.c(),t=I(),U(i.$$.fragment),l=I(),s=w("div"),U(r.$$.fragment),o=I(),b&&b.c(),a=I(),u=w("div"),U(f.$$.fragment),c=I(),_&&_.c(),p(s,"class","col-12"),p(u,"class","col-12"),p(e,"id",n[11]),p(e,"class","grid")},m(C,L){k(C,e,L),g&&g.m(e,null),v(e,t),F(i,e,null),v(e,l),v(e,s),F(r,s,null),v(s,o),b&&b.m(s,null),v(e,a),v(e,u),F(f,u,null),v(u,c),_&&_.m(u,null),d=!0,m||(h=$(e,"submit",be(n[12])),m=!0)},p(C,L){C[2].id?g?g.p(C,L):(g=Za(C),g.c(),g.m(e,t)):g&&(g.d(1),g=null);const T={};L&1610612740&&(T.$$scope={dirty:L,ctx:C}),i.$set(T);const O={};L&1610613028&&(O.$$scope={dirty:L,ctx:C}),r.$set(O),C[2].passwordProtect&&C[5]?b?(b.p(C,L),L&36&&E(b,1)):(b=Ka(C),b.c(),E(b,1),b.m(s,null)):b&&(ae(),P(b,1,1,()=>{b=null}),ue());const S={};L&1610613268&&(S.$$scope={dirty:L,ctx:C}),f.$set(S),C[4]?_?(_.p(C,L),L&16&&E(_,1)):(_=Ga(C),_.c(),E(_,1),_.m(u,null)):_&&(ae(),P(_,1,1,()=>{_=null}),ue())},i(C){d||(E(i.$$.fragment,C),E(r.$$.fragment,C),E(b),E(f.$$.fragment,C),E(_),d=!0)},o(C){P(i.$$.fragment,C),P(r.$$.fragment,C),P(b),P(f.$$.fragment,C),P(_),d=!1},d(C){C&&y(e),g&&g.d(),q(i),q(r),b&&b.d(),q(f),_&&_.d(),m=!1,h()}}}function qb(n){let e,t,i,l,s=n[2].id?"Update link":"Create link",r,o,a,u,f;return{c(){e=w("div"),t=w("button"),t.innerHTML='<i class="iconoir-arrow-left"></i>',i=I(),l=w("h5"),r=x(s),o=I(),a=w("div"),a.textContent="",p(t,"type","button"),p(t,"class","btn btn-circle btn-sm btn-transparent btn-hint"),p(e,"class","flex-fill"),p(l,"class","title"),p(a,"class","flex-fill")},m(c,d){k(c,e,d),v(e,t),k(c,i,d),k(c,l,d),v(l,r),k(c,o,d),k(c,a,d),u||(f=[we(Oe.call(null,t,{position:"right",text:"Back"})),$(t,"click",n[1])],u=!0)},p(c,d){d&4&&s!==(s=c[2].id?"Update link":"Create link")&&ke(r,s)},d(c){c&&(y(e),y(i),y(l),y(o),y(a)),u=!1,me(f)}}}function Ub(n){let e,t,i,l,s=n[2].id?"Update":"Create",r,o,a,u;return{c(){e=w("button"),e.innerHTML='<span class="txt">Back</span>',t=I(),i=w("button"),l=w("span"),r=x(s),o=x(" link"),p(e,"type","button"),p(e,"class","btn btn-transparent m-r-auto"),p(l,"class","txt"),p(i,"type","submit"),p(i,"form",n[11]),p(i,"class","btn btn-expanded btn-primary"),i.disabled=n[7],Z(i,"btn-loading",n[7])},m(f,c){k(f,e,c),k(f,t,c),k(f,i,c),v(i,l),v(l,r),v(l,o),a||(u=$(e,"click",n[1]),a=!0)},p(f,c){c&4&&s!==(s=f[2].id?"Update":"Create")&&ke(r,s),c&128&&(i.disabled=f[7]),c&128&&Z(i,"btn-loading",f[7])},d(f){f&&(y(e),y(t),y(i)),a=!1,u()}}}function Wb(n){let e,t,i;const l=[{popup:!0},{beforeHide:n[22]},n[13]];function s(o){n[24](o)}let r={$$slots:{footer:[Ub],header:[qb],default:[Fb]},$$scope:{ctx:n}};for(let o=0;o<l.length;o+=1)r=Me(r,l[o]);return n[0]!==void 0&&(r.active=n[0]),e=new pn({props:r}),n[23](e),le.push(()=>De(e,"active",s)),e.$on("show",n[25]),e.$on("hide",n[26]),{c(){U(e.$$.fragment)},m(o,a){F(e,o,a),i=!0},p(o,[a]){const u=a&8320?_t(l,[l[0],a&128&&{beforeHide:o[22]},a&8192&&Lt(o[13])]):{};a&1073743860&&(u.$$scope={dirty:a,ctx:o}),!t&&a&1&&(t=!0,u.active=o[0],Ae(()=>t=!1)),e.$set(u)},i(o){i||(E(e.$$.fragment,o),i=!0)},o(o){P(e.$$.fragment,o),i=!1},d(o){n[23](null),q(e,o)}}}function Vb(n,e,t){let i,l;const s=["active","show","hide"];let r=at(e,s),o;Q(n,Ft,ee=>t(15,o=ee));const a=ft(),u="link_upsert_"+K.randomString(5);let{active:f=!1}=e,c,d={},m=!1,h=!1,g="",b=!1,_=!1;function C(ee){return t(2,d=structuredClone(ee)),T(),c==null?void 0:c.show()}function L(){return c==null?void 0:c.hide()}function T(){var ee;Zt({}),t(4,m=((ee=d.onlyPrototypes)==null?void 0:ee.length)>0),t(8,_=!!d.passwordProtect),t(5,h=!d.id||!_),t(6,g=""),t(7,b=!1)}async function O(){t(7,b=!0);try{const ee=!d.id,J={project:d.project,allowComments:d.allowComments,onlyPrototypes:m?d.onlyPrototypes:[],passwordProtect:d.passwordProtect};ee&&!J.passwordProtect?(J.password="pb123456",J.passwordConfirm=J.password):J.passwordProtect&&h&&(J.password=g,J.passwordConfirm=J.password),ee?(t(2,d=await z.collection("links").create(J)),ht("Successfully created new project link.")):(t(2,d=await z.collection("links").update(d.id,J)),ht("Successfully updated project link.")),t(7,b=!1),L(),a("save",d)}catch(ee){t(7,b=!1),ee.isAbort||z.error(ee)}}function S(){d.allowComments=this.checked,t(2,d)}function j(){d.passwordProtect=this.checked,t(2,d)}const H=()=>t(5,h=!h);function D(){g=this.value,t(6,g)}const A=ee=>{t(4,m=ee.target.checked)};function M(ee){n.$$.not_equal(d.onlyPrototypes,ee)&&(d.onlyPrototypes=ee,t(2,d))}const Y=()=>!b;function G(ee){le[ee?"unshift":"push"](()=>{c=ee,t(3,c)})}function B(ee){f=ee,t(0,f)}function N(ee){We.call(this,n,ee)}function V(ee){We.call(this,n,ee)}return n.$$set=ee=>{e=Me(Me({},e),Bt(ee)),t(13,r=at(e,s)),"active"in ee&&t(0,f=ee.active)},n.$$.update=()=>{n.$$.dirty&4&&t(10,i=K.getProjectLinkUrl(d)),n.$$.dirty&32768&&t(9,l=o.map(ee=>({value:ee.id,label:ee.title}))||[])},[f,L,d,c,m,h,g,b,_,l,i,u,O,r,C,o,S,j,H,D,A,M,Y,G,B,N,V]}class zb extends Te{constructor(e){super(),Se(this,e,Vb,Wb,_e,{active:0,show:14,hide:1})}get show(){return this.$$.ctx[14]}get hide(){return this.$$.ctx[1]}}function Bb(n){let e,t,i,l,s=[{type:t=n[5].type||"text"},{value:n[4]},{disabled:n[3]},{readOnly:n[2]},n[5]],r={};for(let o=0;o<s.length;o+=1)r=Me(r,s[o]);return{c(){e=w("input"),zn(e,r)},m(o,a){k(o,e,a),"value"in r&&(e.value=r.value),e.autofocus&&e.focus(),i||(l=$(e,"input",n[6]),i=!0)},p(o,[a]){zn(e,r=_t(s,[a&32&&t!==(t=o[5].type||"text")&&{type:t},a&16&&e.value!==o[4]&&{value:o[4]},a&8&&{disabled:o[3]},a&4&&{readOnly:o[2]},a&32&&o[5]])),"value"in r&&(e.value=r.value)},i:X,o:X,d(o){o&&y(e),i=!1,l()}}}function Zb(n,e,t){let i;const l=["value","separator","readonly","disabled"];let s=at(e,l),{value:r=[]}=e,{separator:o=","}=e,{readonly:a=null}=e,{disabled:u=null}=e;const f=c=>{t(0,r=K.splitNonEmpty(c.target.value,o))};return n.$$set=c=>{e=Me(Me({},e),Bt(c)),t(5,s=at(e,l)),"value"in c&&t(0,r=c.value),"separator"in c&&t(1,o=c.separator),"readonly"in c&&t(2,a=c.readonly),"disabled"in c&&t(3,u=c.disabled)},n.$$.update=()=>{n.$$.dirty&3&&t(4,i=K.joinNonEmpty(r,o+" "))},[r,o,a,u,i,s,f]}class Yb extends Te{constructor(e){super(),Se(this,e,Zb,Bb,_e,{value:0,separator:1,readonly:2,disabled:3})}}function Ja(n){let e,t,i,l,s,r,o;return{c(){e=w("div"),t=w("div"),i=w("div"),l=w("a"),s=x(n[7]),p(l,"href",n[7]),p(l,"target","_blank"),p(l,"rel","noopener noreferrer"),p(i,"class","content txt-center txt-bold"),p(t,"class","alert alert-warning m-0"),p(e,"class","col-12")},m(a,u){k(a,e,u),v(e,t),v(t,i),v(i,l),v(l,s),r||(o=we(Oe.call(null,l,"Open in new tab")),r=!0)},p(a,u){u&128&&ke(s,a[7]),u&128&&p(l,"href",a[7])},d(a){a&&y(e),r=!1,o()}}}function Kb(n){let e,t,i,l,s,r,o,a,u;function f(d){n[12](d)}let c={id:n[21],required:!0,autofocus:!0};return n[4]!==void 0&&(c.value=n[4]),s=new Yb({props:c}),le.push(()=>De(s,"value",f)),{c(){e=w("label"),t=x("Email(s)"),l=I(),U(s.$$.fragment),o=I(),a=w("div"),a.textContent="Separate multiple emails with comma.",p(e,"for",i=n[21]),p(a,"class","help-block")},m(d,m){k(d,e,m),v(e,t),k(d,l,m),F(s,d,m),k(d,o,m),k(d,a,m),u=!0},p(d,m){(!u||m&2097152&&i!==(i=d[21]))&&p(e,"for",i);const h={};m&2097152&&(h.id=d[21]),!r&&m&16&&(r=!0,h.value=d[4],Ae(()=>r=!1)),s.$set(h)},i(d){u||(E(s.$$.fragment,d),u=!0)},o(d){P(s.$$.fragment,d),u=!1},d(d){d&&(y(e),y(l),y(o),y(a)),q(s,d)}}}function Gb(n){let e,t,i,l,s,r,o,a,u;return{c(){e=w("label"),t=x("Additional message"),l=I(),s=w("textarea"),p(e,"for",i=n[21]),p(s,"id",r=n[21]),p(s,"rows","3"),p(s,"placeholder",o=n[2].passwordProtected?"eg. The password is...":"")},m(f,c){k(f,e,c),v(e,t),k(f,l,c),k(f,s,c),ye(s,n[5]),a||(u=$(s,"input",n[13]),a=!0)},p(f,c){c&2097152&&i!==(i=f[21])&&p(e,"for",i),c&2097152&&r!==(r=f[21])&&p(s,"id",r),c&4&&o!==(o=f[2].passwordProtected?"eg. The password is...":"")&&p(s,"placeholder",o),c&32&&ye(s,f[5])},d(f){f&&(y(e),y(l),y(s)),a=!1,u()}}}function Jb(n){let e,t,i,l,s,r,o,a,u=n[2].id&&Ja(n);return i=new Le({props:{class:"form-field required",name:"emails",$$slots:{default:[Kb,({uniqueId:f})=>({21:f}),({uniqueId:f})=>f?2097152:0]},$$scope:{ctx:n}}}),s=new Le({props:{class:"form-field",name:"message",$$slots:{default:[Gb,({uniqueId:f})=>({21:f}),({uniqueId:f})=>f?2097152:0]},$$scope:{ctx:n}}}),{c(){e=w("form"),u&&u.c(),t=I(),U(i.$$.fragment),l=I(),U(s.$$.fragment),p(e,"id",n[8]),p(e,"class","grid grid-sm")},m(f,c){k(f,e,c),u&&u.m(e,null),v(e,t),F(i,e,null),v(e,l),F(s,e,null),r=!0,o||(a=$(e,"submit",be(n[9])),o=!0)},p(f,c){f[2].id?u?u.p(f,c):(u=Ja(f),u.c(),u.m(e,t)):u&&(u.d(1),u=null);const d={};c&6291472&&(d.$$scope={dirty:c,ctx:f}),i.$set(d);const m={};c&6291492&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){r||(E(i.$$.fragment,f),E(s.$$.fragment,f),r=!0)},o(f){P(i.$$.fragment,f),P(s.$$.fragment,f),r=!1},d(f){f&&y(e),u&&u.d(),q(i),q(s),o=!1,a()}}}function Xb(n){let e,t,i,l,s,r,o,a;return{c(){e=w("div"),t=w("button"),t.innerHTML='<i class="iconoir-arrow-left"></i>',i=I(),l=w("h5"),l.textContent="Share project link",s=I(),r=w("div"),r.textContent="",p(t,"type","button"),p(t,"class","btn btn-circle btn-sm btn-transparent btn-hint"),p(e,"class","flex-fill"),p(l,"class","title"),p(r,"class","flex-fill")},m(u,f){k(u,e,f),v(e,t),k(u,i,f),k(u,l,f),k(u,s,f),k(u,r,f),o||(a=[we(Oe.call(null,t,{position:"right",text:"Back"})),$(t,"click",n[1])],o=!0)},p:X,d(u){u&&(y(e),y(i),y(l),y(s),y(r)),o=!1,me(a)}}}function Qb(n){let e,t,i,l,s,r,o,a,u;return{c(){e=w("button"),t=w("span"),t.textContent="Back",i=I(),l=w("button"),s=w("i"),r=I(),o=w("span"),o.textContent="Send",p(t,"class","txt"),p(e,"type","button"),p(e,"class","btn btn-transparent m-r-auto"),p(e,"disable",n[6]),p(s,"class","iconoir-send-mail"),p(o,"class","txt"),p(l,"type","submit"),p(l,"form",n[8]),p(l,"class","btn btn-expanded-sm btn-primary"),l.disabled=n[6],Z(l,"btn-loading",n[6])},m(f,c){k(f,e,c),v(e,t),k(f,i,c),k(f,l,c),v(l,s),v(l,r),v(l,o),a||(u=$(e,"click",n[1]),a=!0)},p(f,c){c&64&&p(e,"disable",f[6]),c&64&&(l.disabled=f[6]),c&64&&Z(l,"btn-loading",f[6])},d(f){f&&(y(e),y(i),y(l)),a=!1,u()}}}function xb(n){let e,t,i;const l=[{popup:!0},{beforeHide:n[14]},n[10]];function s(o){n[16](o)}let r={$$slots:{footer:[Qb],header:[Xb],default:[Jb]},$$scope:{ctx:n}};for(let o=0;o<l.length;o+=1)r=Me(r,l[o]);return n[0]!==void 0&&(r.active=n[0]),e=new pn({props:r}),n[15](e),le.push(()=>De(e,"active",s)),e.$on("show",n[17]),e.$on("hide",n[18]),{c(){U(e.$$.fragment)},m(o,a){F(e,o,a),i=!0},p(o,[a]){const u=a&1088?_t(l,[l[0],a&64&&{beforeHide:o[14]},a&1024&&Lt(o[10])]):{};a&4194548&&(u.$$scope={dirty:a,ctx:o}),!t&&a&1&&(t=!0,u.active=o[0],Ae(()=>t=!1)),e.$set(u)},i(o){i||(E(e.$$.fragment,o),i=!0)},o(o){P(e.$$.fragment,o),i=!1},d(o){n[15](null),q(e,o)}}}function e0(n,e,t){let i;const l=["active","show","hide"];let s=at(e,l);const r=ft(),o="share_"+K.randomString(5);let{active:a=!1}=e,u,f={},c=[],d="",m=!1;function h(D=null){return b(),t(2,f=D?structuredClone(D):{}),u==null?void 0:u.show()}function g(){return u==null?void 0:u.hide()}function b(){Zt({}),t(6,m=!1),t(4,c=[]),t(5,d="")}async function _(){t(6,m=!0);try{await z.send("/api/pr/share/"+encodeURIComponent(f.id),{method:"POST",body:{emails:c,message:d}}),t(6,m=!1),g(),r("submit"),ht("Successfully shared the project link!")}catch(D){D.isAbort||(t(6,m=!1),z.error(D))}}function C(D){c=D,t(4,c)}function L(){d=this.value,t(5,d)}const T=()=>!m;function O(D){le[D?"unshift":"push"](()=>{u=D,t(3,u)})}function S(D){a=D,t(0,a)}function j(D){We.call(this,n,D)}function H(D){We.call(this,n,D)}return n.$$set=D=>{e=Me(Me({},e),Bt(D)),t(10,s=at(e,l)),"active"in D&&t(0,a=D.active)},n.$$.update=()=>{n.$$.dirty&4&&t(7,i=K.getProjectLinkUrl(f))},[a,g,f,u,c,d,m,i,o,_,s,h,C,L,T,O,S,j,H]}class t0 extends Te{constructor(e){super(),Se(this,e,e0,xb,_e,{active:0,show:11,hide:1})}get show(){return this.$$.ctx[11]}get hide(){return this.$$.ctx[1]}}function Xa(n,e,t){const i=n.slice();i[29]=e[t];const l=K.getProjectLinkUrl(i[29]);return i[30]=l,i}function n0(n){let e=[],t=new Map,i,l,s=Ie(n[7]);const r=a=>a[29].id;for(let a=0;a<s.length;a+=1){let u=Xa(n,s,a),f=r(u);t.set(f,e[a]=xa(f,u))}let o=null;return s.length||(o=Qa()),{c(){for(let a=0;a<e.length;a+=1)e[a].c();i=Ne(),o&&o.c()},m(a,u){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,u);k(a,i,u),o&&o.m(a,u),l=!0},p(a,u){u[0]&2272&&(s=Ie(a[7]),ae(),e=yt(e,u,r,1,a,s,t,i.parentNode,It,xa,i,Xa),ue(),!s.length&&o?o.p(a,u):s.length?o&&(o.d(1),o=null):(o=Qa(),o.c(),o.m(i.parentNode,i)))},i(a){if(!l){for(let u=0;u<s.length;u+=1)E(e[u]);l=!0}},o(a){for(let u=0;u<e.length;u+=1)P(e[u]);l=!1},d(a){a&&y(i);for(let u=0;u<e.length;u+=1)e[u].d(a);o&&o.d(a)}}}function i0(n){let e;return{c(){e=w("div"),e.innerHTML='<div class="skeleton-loader"></div>',p(e,"class","project-link")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function Qa(n){let e;return{c(){e=w("div"),e.textContent=`Create project links that you can send to your clients and teammates for feedback.
                `,p(e,"class","block txt-center txt-hint")},m(t,i){k(t,e,i)},p:X,d(t){t&&y(e)}}}function xa(n,e){let t,i,l,s=e[30]+"",r,o,a,u,f,c,d,m,h,g,b,_,C,L,T,O,S,j,H,D,A,M,Y,G,B,N,V,ee;u=new Ab({props:{class:"m-l-5",value:e[30]}});function J(){return e[14](e[29])}function R(){return e[15](e[29])}function ce(){return e[16](e[29])}return{key:n,first:null,c(){var oe;t=w("div"),i=w("div"),l=w("a"),r=x(s),a=I(),U(u.$$.fragment),f=I(),c=w("div"),d=w("span"),m=x("Comments"),g=I(),b=w("span"),_=x("Password"),L=I(),T=w("span"),O=x("Restricted"),j=I(),H=w("nav"),D=w("button"),D.innerHTML='<i class="iconoir-share-android"></i>',A=I(),M=w("button"),M.innerHTML='<i class="iconoir-settings"></i>',Y=I(),G=w("button"),G.innerHTML='<i class="iconoir-trash"></i>',B=I(),p(l,"href",o=e[30]),p(l,"target","_blank"),p(l,"rel","noopener noreferrer"),p(l,"class","url"),p(d,"class",h="meta-item label-sm label label-"+(e[29].allowComments?"success":"disabled")),p(b,"class",C="meta-item label-sm label label-"+(e[29].passwordProtect?"success":"disabled")),p(T,"class",S="meta-item label-sm label label-"+((oe=e[29].onlyPrototypes)!=null&&oe.length?"success":"disabled")),p(c,"class","meta"),p(i,"class","content"),p(D,"type","button"),p(D,"class","ctrl-item btn btn-sm btn-circle btn-transparent btn-hint"),p(M,"type","button"),p(M,"class","ctrl-item btn btn-sm btn-circle btn-transparent btn-hint"),p(G,"type","button"),p(G,"class","ctrl-item btn btn-sm btn-circle btn-transparent btn-hint"),p(H,"class","ctrls"),p(t,"class","project-link"),this.first=t},m(oe,pe){k(oe,t,pe),v(t,i),v(i,l),v(l,r),v(i,a),F(u,i,null),v(i,f),v(i,c),v(c,d),v(d,m),v(c,g),v(c,b),v(b,_),v(c,L),v(c,T),v(T,O),v(t,j),v(t,H),v(H,D),v(H,A),v(H,M),v(H,Y),v(H,G),v(t,B),N=!0,V||(ee=[we(Oe.call(null,l,{position:"top",text:"Open in new tab"})),we(Oe.call(null,D,"Share")),$(D,"click",J),we(Oe.call(null,M,"Settings")),$(M,"click",R),we(Oe.call(null,G,"Delete")),$(G,"click",ce)],V=!0)},p(oe,pe){var tt;e=oe,(!N||pe[0]&128)&&s!==(s=e[30]+"")&&ke(r,s),(!N||pe[0]&128&&o!==(o=e[30]))&&p(l,"href",o);const Ee={};pe[0]&128&&(Ee.value=e[30]),u.$set(Ee),(!N||pe[0]&128&&h!==(h="meta-item label-sm label label-"+(e[29].allowComments?"success":"disabled")))&&p(d,"class",h),(!N||pe[0]&128&&C!==(C="meta-item label-sm label label-"+(e[29].passwordProtect?"success":"disabled")))&&p(b,"class",C),(!N||pe[0]&128&&S!==(S="meta-item label-sm label label-"+((tt=e[29].onlyPrototypes)!=null&&tt.length?"success":"disabled")))&&p(T,"class",S)},i(oe){N||(E(u.$$.fragment,oe),N=!0)},o(oe){P(u.$$.fragment,oe),N=!1},d(oe){oe&&y(t),q(u),V=!1,me(ee)}}}function l0(n){let e,t,i,l;const s=[i0,n0],r=[];function o(a,u){return a[8]?0:1}return t=o(n),i=r[t]=s[t](n),{c(){e=w("div"),i.c(),p(e,"class","project-links-list")},m(a,u){k(a,e,u),r[t].m(e,null),l=!0},p(a,u){let f=t;t=o(a),t===f?r[t].p(a,u):(ae(),P(r[f],1,1,()=>{r[f]=null}),ue(),i=r[t],i?i.p(a,u):(i=r[t]=s[t](a),i.c()),E(i,1),i.m(e,null))},i(a){l||(E(i),l=!0)},o(a){P(i),l=!1},d(a){a&&y(e),r[t].d()}}}function s0(n){let e;return{c(){e=w("h5"),e.textContent="Project links",p(e,"class","block txt-center")},m(t,i){k(t,e,i)},p:X,d(t){t&&y(e)}}}function r0(n){let e,t,i,l,s,r,o,a;return{c(){e=w("button"),e.innerHTML='<span class="txt">Close</span>',t=I(),i=w("button"),l=w("i"),s=I(),r=w("span"),r.textContent="New link",p(e,"type","button"),p(e,"class","btn btn-transparent m-r-auto"),p(l,"class","iconoir-plus"),p(r,"class","txt"),p(i,"type","button"),p(i,"class","btn btn-expanded btn-primary"),i.disabled=n[8]},m(u,f){k(u,e,f),k(u,t,f),k(u,i,f),v(i,l),v(i,s),v(i,r),o||(a=[$(e,"click",n[13]),$(i,"click",function(){var c,d;et((c=n[6])==null?void 0:c.show({project:n[10].id,allowComments:!0}))&&((d=n[6])==null||d.show({project:n[10].id,allowComments:!0}).apply(this,arguments))})],o=!0)},p(u,f){n=u,f[0]&256&&(i.disabled=n[8])},d(u){u&&(y(e),y(t),y(i)),o=!1,me(a)}}}function o0(n){let e,t,i,l,s,r,o,a,u;function f(b){n[18](b)}let c={popup:!0,class:n[9]?"temp-hide":"",$$slots:{footer:[r0],header:[s0],default:[l0]},$$scope:{ctx:n}};n[0]!==void 0&&(c.active=n[0]),e=new pn({props:c}),n[17](e),le.push(()=>De(e,"active",f)),e.$on("show",n[19]),e.$on("hide",n[20]);function d(b){n[22](b)}let m={};n[2]!==void 0&&(m.active=n[2]),l=new zb({props:m}),n[21](l),le.push(()=>De(l,"active",d)),l.$on("save",n[23]);function h(b){n[25](b)}let g={};return n[3]!==void 0&&(g.active=n[3]),o=new t0({props:g}),n[24](o),le.push(()=>De(o,"active",h)),{c(){U(e.$$.fragment),i=I(),U(l.$$.fragment),r=I(),U(o.$$.fragment)},m(b,_){F(e,b,_),k(b,i,_),F(l,b,_),k(b,r,_),F(o,b,_),u=!0},p(b,_){const C={};_[0]&512&&(C.class=b[9]?"temp-hide":""),_[0]&1504|_[1]&4&&(C.$$scope={dirty:_,ctx:b}),!t&&_[0]&1&&(t=!0,C.active=b[0],Ae(()=>t=!1)),e.$set(C);const L={};!s&&_[0]&4&&(s=!0,L.active=b[2],Ae(()=>s=!1)),l.$set(L);const T={};!a&&_[0]&8&&(a=!0,T.active=b[3],Ae(()=>a=!1)),o.$set(T)},i(b){u||(E(e.$$.fragment,b),E(l.$$.fragment,b),E(o.$$.fragment,b),u=!0)},o(b){P(e.$$.fragment,b),P(l.$$.fragment,b),P(o.$$.fragment,b),u=!1},d(b){b&&(y(i),y(r)),n[17](null),q(e,b),n[21](null),q(l,b),n[24](null),q(o,b)}}}const eu="list_links";function a0(n,e,t){let i;Q(n,an,V=>t(10,i=V));const l=ft();let{active:s=!1}=e,r,o,a,u=!1,f=!1,c=[{id:1},{id:2}],d=!1,m=!1;function h(){return b(),r==null?void 0:r.show()}function g(){return z.cancelRequest(eu),r==null?void 0:r.hide()}async function b(){t(8,d=!0);try{t(7,c=await z.collection("links").getFullList({filter:`project='${i==null?void 0:i.id}'`,requestKey:eu}))}catch(V){V.isAbort||z.error(V)}t(8,d=!1)}function _(V){Et("Do you really want to delete the selected project link?",()=>C(V))}async function C(V){if(V!=null&&V.id)try{await z.collection("links").delete(V.id),K.removeByKey(c,"id",V.id),t(7,c),ht("Successfully deleted project link."),l("delete",V)}catch(ee){ee.isAbort||z.error(ee)}}fn(()=>{g()});const L=()=>g(),T=V=>o==null?void 0:o.show(V),O=V=>a==null?void 0:a.show(V),S=V=>_(V);function j(V){le[V?"unshift":"push"](()=>{r=V,t(4,r)})}function H(V){s=V,t(0,s)}function D(V){We.call(this,n,V)}function A(V){We.call(this,n,V)}function M(V){le[V?"unshift":"push"](()=>{a=V,t(6,a)})}function Y(V){u=V,t(2,u)}const G=V=>{K.pushOrReplaceObject(c,V.detail),t(7,c)};function B(V){le[V?"unshift":"push"](()=>{o=V,t(5,o)})}function N(V){f=V,t(3,f)}return n.$$set=V=>{"active"in V&&t(0,s=V.active)},n.$$.update=()=>{n.$$.dirty[0]&12&&t(9,m=u||f)},[s,g,u,f,r,o,a,c,d,m,i,_,h,L,T,O,S,j,H,D,A,M,Y,G,B,N]}class u0 extends Te{constructor(e){super(),Se(this,e,a0,o0,_e,{active:0,show:12,hide:1},null,[-1,-1])}get show(){return this.$$.ctx[12]}get hide(){return this.$$.ctx[1]}}function tu(n){let e;return{c(){e=w("div"),e.innerHTML='<span class="loader loader-lg"></span>',p(e,"class","block txt-center")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function f0(n){let e,t,i,l,s,r,o=n[7]&&tu();return i=new qg({props:{projectId:n[0].projectId,initialPrototypeId:n[6]}}),s=new hb({}),{c(){o&&o.c(),e=I(),t=w("div"),U(i.$$.fragment),l=I(),U(s.$$.fragment),p(t,"class","screens-list-wrapper svelte-1y0govx"),Z(t,"hidden",n[7])},m(a,u){o&&o.m(a,u),k(a,e,u),k(a,t,u),F(i,t,null),v(t,l),F(s,t,null),r=!0},p(a,u){a[7]?o||(o=tu(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null);const f={};u&1&&(f.projectId=a[0].projectId),u&64&&(f.initialPrototypeId=a[6]),i.$set(f),(!r||u&128)&&Z(t,"hidden",a[7])},i(a){r||(E(i.$$.fragment,a),E(s.$$.fragment,a),r=!0)},o(a){P(i.$$.fragment,a),P(s.$$.fragment,a),r=!1},d(a){a&&(y(e),y(t)),o&&o.d(a),q(i),q(s)}}}function c0(n){let e;return{c(){e=w("div"),p(e,"class","breadcrumb-item")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function d0(n){let e,t,i,l;function s(o){n[11](o)}let r={collection:"projects"};return n[2]!==void 0&&(r.model=n[2]),t=new Xs({props:r}),le.push(()=>De(t,"model",s)),{c(){e=w("div"),U(t.$$.fragment),p(e,"class","breadcrumb-item entrance-left")},m(o,a){k(o,e,a),F(t,e,null),l=!0},p(o,a){const u={};!i&&a&4&&(i=!0,u.model=o[2],Ae(()=>i=!1)),t.$set(u)},i(o){l||(E(t.$$.fragment,o),l=!0)},o(o){P(t.$$.fragment,o),l=!1},d(o){o&&y(e),q(t)}}}function nu(n){let e,t,i,l,s,r;return{c(){e=w("div"),t=w("button"),t.innerHTML='<i class="iconoir-user-plus"></i>',i=I(),l=w("button"),l.innerHTML='<i class="iconoir-internet txt-base"></i>',p(t,"type","button"),p(t,"class","menu-item"),p(l,"type","button"),p(l,"class","menu-item"),p(e,"class","header-menu entrance-left")},m(o,a){k(o,e,a),v(e,t),v(e,i),v(e,l),s||(r=[we(Oe.call(null,t,"Project owners")),$(t,"click",n[12]),we(Oe.call(null,l,"Share")),$(l,"click",n[13])],s=!0)},p:X,d(o){o&&y(e),s=!1,me(r)}}}function p0(n){var g;let e,t,i,l,s,r,o,a,u,f;const c=[d0,c0],d=[];function m(b,_){var C;return(C=b[2])!=null&&C.id?0:1}l=m(n),s=d[l]=c[l](n);let h=((g=n[2])==null?void 0:g.id)&&nu(n);return{c(){e=w("nav"),t=w("a"),t.textContent="Projects",i=I(),s.c(),r=I(),h&&h.c(),o=Ne(),p(t,"href","/projects"),p(t,"class","breadcrumb-item"),p(e,"class","breadcrumbs svelte-1y0govx")},m(b,_){k(b,e,_),v(e,t),v(e,i),d[l].m(e,null),k(b,r,_),h&&h.m(b,_),k(b,o,_),a=!0,u||(f=we(wi.call(null,t)),u=!0)},p(b,_){var L;let C=l;l=m(b),l===C?d[l].p(b,_):(ae(),P(d[C],1,1,()=>{d[C]=null}),ue(),s=d[l],s?s.p(b,_):(s=d[l]=c[l](b),s.c()),E(s,1),s.m(e,null)),(L=b[2])!=null&&L.id?h?h.p(b,_):(h=nu(b),h.c(),h.m(o.parentNode,o)):h&&(h.d(1),h=null)},i(b){a||(E(s),a=!0)},o(b){P(s),a=!1},d(b){b&&(y(e),y(r),y(o)),d[l].d(),h&&h.d(b),u=!1,f()}}}function iu(n){let e;return{c(){e=w("label"),e.innerHTML='<i class="iconoir-upload-square"></i> <span class="txt">Upload screens</span>',p(e,"for","screen_uploader"),p(e,"class","btn btn-primary btn-screen-upload entrance-right")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function m0(n){var i;let e,t=((i=n[1])==null?void 0:i.id)&&iu();return{c(){t&&t.c(),e=Ne()},m(l,s){t&&t.m(l,s),k(l,e,s)},p(l,s){var r;(r=l[1])!=null&&r.id?t||(t=iu(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){l&&y(e),t&&t.d(l)}}}function h0(n){let e,t,i,l,s,r;e=new Oi({props:{title:n[5],$$slots:{"header-right":[m0],"header-left":[p0],default:[f0]},$$scope:{ctx:n}}});let o={};i=new Pb({props:o}),n[14](i);let a={};return s=new u0({props:a}),n[15](s),{c(){U(e.$$.fragment),t=I(),U(i.$$.fragment),l=I(),U(s.$$.fragment)},m(u,f){F(e,u,f),k(u,t,f),F(i,u,f),k(u,l,f),F(s,u,f),r=!0},p(u,[f]){const c={};f&32&&(c.title=u[5]),f&131295&&(c.$$scope={dirty:f,ctx:u}),e.$set(c);const d={};i.$set(d);const m={};s.$set(m)},i(u){r||(E(e.$$.fragment,u),E(i.$$.fragment,u),E(s.$$.fragment,u),r=!0)},o(u){P(e.$$.fragment,u),P(i.$$.fragment,u),P(s.$$.fragment,u),r=!1},d(u){u&&(y(t),y(l)),q(e,u),n[14](null),q(i,u),n[15](null),q(s,u)}}}function _0(n,e,t){let i,l,s,r,o;Q(n,tn,T=>t(9,l=T)),Q(n,Tt,T=>t(1,s=T)),Q(n,li,T=>t(10,r=T)),Q(n,an,T=>t(2,o=T));let{params:a}=e,u,f,c="",d,m;async function h(T){Ul(),Bs(),ve(tn,l=!0,l);try{const O=await z.collection("projects").getOne(T);Yn(O,!0),ve(tn,l=!1,l)}catch(O){O.isAbort||(ve(tn,l=!1,l),z.error(O))}}function g(T){o=T,an.set(o)}const b=()=>u==null?void 0:u.show(),_=()=>f==null?void 0:f.show();function C(T){le[T?"unshift":"push"](()=>{u=T,t(3,u)})}function L(T){le[T?"unshift":"push"](()=>{f=T,t(4,f)})}return n.$$set=T=>{"params"in T&&t(0,a=T.params)},n.$$.update=()=>{n.$$.dirty&257&&d!=a.projectId&&(t(8,d=a.projectId),t(6,m=a.prototypeId),h(d)),n.$$.dirty&4&&o!=null&&o.title&&t(5,c=o.title),n.$$.dirty&1536&&t(7,i=l||r),n.$$.dirty&2&&s!=null&&s.id&&cn(`/projects/${s.project}/prototypes/${s.id}`)},[a,s,o,u,f,c,m,i,d,l,r,g,b,_,C,L]}class g0 extends Te{constructor(e){super(),Se(this,e,_0,h0,_e,{params:0})}}const Pn=Ve([]),Ei=Ve(null),pi=Ve(!1),Hn=Ve(!1),Hi=Ve(!1);function b0(){Pn.set([]),Ei.set(null),pi.set(!1),Hn.set(!1)}const qt=jt([Pn,Ei],([n,e])=>!n.length||e===null?null:n.find(t=>t.id===e));qt.set=n=>{K.isObject(n)?bi(n,!0):Ei.set(n)};function bi(n,e=!1){n&&(Pn.update(t=>(K.pushOrReplaceObject(t,n),t)),e&&Ei.set(n.id))}function cd(n){n&&(Pn.update(e=>e.filter(t=>t.id!=n.id&&t.replyTo!=n.id)),Ei.update(e=>e==n.id?n.replyTo||null:e))}function Ss(){Pn.update(n=>n.filter(e=>!!e.id)),Ei.update(n=>n===""?null:n)}const Qs=jt([Pn,Je],([n,e])=>n.filter(t=>t.screen==(e==null?void 0:e.id)).sort((t,i)=>!t.created||t.created>i.created?1:-1)),dd=jt([Qs],([n])=>n.filter(e=>!e.replyTo)),pd=jt([Qs],([n])=>n.filter(e=>e.id&&!e.replyTo&&!e.resolved));let sn;async function md(n){return sn==null||sn(),z.collection("comments").subscribe("*",e=>{e.action==="delete"?cd(e.record):bi(e.record)},{filter:`screen.prototype="${n}"`,expand:"user"}).then(e=>(sn=e,e)).catch(e=>{console.warn("failed to init comments subscription:",e)})}async function hd(n,e=void 0){var t;b0(),pi.set(!0);try{const i=await z.collection("comments").getFullList({filter:`screen.prototype="${n}"`,expand:"user"});Pn.set(i),Vn(Ti)===Ce.comments&&e&&((t=i.find(l=>l.id==e))!=null&&t.resolved&&Hi.set(!0),qt.set(e)),pi.set(!1)}catch(i){i.isAbort||(pi.set(!1),z.error(i))}}const un=Ve([]),$i=Ve(!1);function w0(){un.set([]),$i.set(!1)}function Ri(n){un.update(e=>(K.pushOrReplaceObject(e,n),e))}function _d(n){un.update(e=>(K.removeByKey(e,"id",n==null?void 0:n.id),e))}const v0=jt([un,Je],([n,e])=>n.filter(t=>t.screens.length&&(e==null?void 0:e.id)&&t.screens.includes(e.id)));let rn;async function gd(n){return rn==null||rn(),z.collection("hotspotTemplates").subscribe("*",e=>{e.action==="delete"?_d(e.record):Ri(e.record)},{filter:`prototype="${n}"`}).then(e=>(rn=e,e)).catch(e=>{console.warn("failed to init templates subscription:",e)})}async function bd(n){w0(),$i.set(!0);try{const e=await z.collection("hotspotTemplates").getFullList({filter:`prototype="${n}"`});e.sort((t,i)=>!t.created||t.created>i.created?1:-1),un.set(e),$i.set(!1)}catch(e){e.isAbort||($i.set(!1),z.error(e))}}const xe={note:"note",screen:"screen",overlay:"overlay",back:"back",prev:"prev",next:"next",url:"url",scroll:"scroll"};Object.freeze(xe);const bn=Ve([]),Li=Ve(null),Fi=Ve(!1),y0=Ve(!1),mn=Ve(!1);function k0(){bn.set([]),Li.set(null),Fi.set(!1),y0.set(!1),mn.set(!1)}const Be=jt([bn,Li],([n,e])=>!n.length||e===null?null:n.find(t=>t.id===e));Be.set=n=>{K.isObject(n)?Cn(n,!0):Li.set(n)};function Cn(n,e=!1){n&&(bn.update(t=>(K.pushOrReplaceObject(t,n),t)),e&&Li.set(n.id))}function wd(n){n&&(bn.update(e=>(K.removeByKey(e,"id",n.id),e)),Li.update(e=>e==n.id?null:e))}function Ts(){bn.update(n=>n.filter(e=>!!e.id)),Li.update(n=>n===""?null:n)}const vd=jt([Je,bn,un],([n,e,t])=>yd(n,e,t));function yd(n,e,t){return e.filter(i=>{var l;if(!(n!=null&&n.id))return!1;if(i.screen==n.id)return!0;for(let s of t)if(i.hotspotTemplate==s.id&&((l=s.screens)!=null&&l.includes(n.id)))return!0;return!1})}let on;async function kd(n){return on==null||on(),z.collection("hotspots").subscribe("*",e=>{e.action=="delete"?wd(e.record):Cn(e.record)},{filter:`screen.prototype="${n}" || hotspotTemplate.prototype="${n}"`}).then(e=>(on=e,e)).catch(e=>{console.warn("failed to init hotspots subscription:",e)})}async function Sd(n){k0(),Fi.set(!0);try{const e=await z.collection("hotspots").getFullList({filter:`screen.prototype="${n}" || hotspotTemplate.prototype="${n}"`});bn.set(e),Fi.set(!1)}catch(e){e.isAbort||(Fi.set(!1),z.error(e))}}function lu(n,e,t){const i=n.slice();return i[9]=e[t],i}function su(n){let e,t=[],i=new Map,l,s,r,o=Ie(n[3]);const a=u=>u[9].id;for(let u=0;u<o.length;u+=1){let f=lu(n,o,u),c=a(f);i.set(c,t[u]=ru(c,f))}return{c(){e=w("div");for(let u=0;u<t.length;u+=1)t[u].c();p(e,"class",l="screens-bar "+n[1])},m(u,f){k(u,e,f);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(u,f){f&12&&(o=Ie(u[3]),ae(),t=yt(t,f,a,1,u,o,i,e,It,ru,null,lu),ue()),(!r||f&2&&l!==(l="screens-bar "+u[1]))&&p(e,"class",l)},i(u){if(!r){for(let f=0;f<o.length;f+=1)E(t[f]);u&&vt(()=>{r&&(s||(s=ut(e,Ct,{duration:150},!0)),s.run(1))}),r=!0}},o(u){for(let f=0;f<t.length;f+=1)P(t[f]);u&&(s||(s=ut(e,Ct,{duration:150},!1)),s.run(0)),r=!1},d(u){u&&y(e);for(let f=0;f<t.length;f+=1)t[f].d();u&&s&&s.end()}}}function ru(n,e){let t,i,l,s,r,o,a,u;i=new Yt({props:{src:z.files.getUrl(e[9],e[9].file,{thumb:"100x100"}),alt:e[9].title}});function f(){return e[7](e[9])}return{key:n,first:null,c(){t=w("button"),U(i.$$.fragment),l=I(),p(t,"type","button"),p(t,"data-screen-id",s=e[9].id),p(t,"class","thumb thumb-handle"),Z(t,"thumb-highlight-mode-accent",e[2].id==e[9].id),this.first=t},m(c,d){k(c,t,d),F(i,t,null),v(t,l),o=!0,a||(u=[we(r=Oe.call(null,t,{position:"top",text:e[9].title})),$(t,"click",Ke(be(f)))],a=!0)},p(c,d){e=c;const m={};d&8&&(m.src=z.files.getUrl(e[9],e[9].file,{thumb:"100x100"})),d&8&&(m.alt=e[9].title),i.$set(m),(!o||d&8&&s!==(s=e[9].id))&&p(t,"data-screen-id",s),r&&et(r.update)&&d&8&&r.update.call(null,{position:"top",text:e[9].title}),(!o||d&12)&&Z(t,"thumb-highlight-mode-accent",e[2].id==e[9].id)},i(c){o||(E(i.$$.fragment,c),o=!0)},o(c){P(i.$$.fragment,c),o=!1},d(c){c&&y(t),q(i),a=!1,me(u)}}}function S0(n){let e,t,i=n[0]&&su(n);return{c(){i&&i.c(),e=Ne()},m(l,s){i&&i.m(l,s),k(l,e,s),t=!0},p(l,[s]){l[0]?i?(i.p(l,s),s&1&&E(i,1)):(i=su(l),i.c(),E(i,1),i.m(e.parentNode,e)):i&&(ae(),P(i,1,1,()=>{i=null}),ue())},i(l){t||(E(i),t=!0)},o(l){P(i),t=!1},d(l){l&&y(e),i&&i.d(l)}}}function T0(n,e,t){let i,l;Q(n,Je,d=>t(2,i=d)),Q(n,pt,d=>t(3,l=d));let{active:s=!0}=e,{class:r=""}=e;function o(){t(0,s=!0)}function a(){t(0,s=!1)}function u(){s?a():o()}async function f(){if(!s||!(i!=null&&i.id))return;await St();const d=document.querySelector(`[data-screen-id="${i.id}"]`);d&&(d.scrollIntoView(),document.activeElement&&d.parentNode.contains(document.activeElement)&&d.focus())}_n(()=>{f()});const c=d=>{ve(Je,i=d.id,i)};return n.$$set=d=>{"active"in d&&t(0,s=d.active),"class"in d&&t(1,r=d.class)},n.$$.update=()=>{n.$$.dirty&5&&s&&i!=null&&i.id&&f()},[s,r,i,l,o,a,u,c]}class Td extends Te{constructor(e){super(),Se(this,e,T0,S0,_e,{active:0,class:1,show:4,hide:5,toggle:6})}get show(){return this.$$.ctx[4]}get hide(){return this.$$.ctx[5]}get toggle(){return this.$$.ctx[6]}}function C0(n){let e,t,i,l,s,r;const o=n[12].default,a=lt(o,n,n[11],null);let u=[{class:t="draggable "+n[0]},n[5]],f={};for(let c=0;c<u.length;c+=1)f=Me(f,u[c]);return{c(){e=w("div"),a&&a.c(),zn(e,f),Z(e,"dragging",n[4])},m(c,d){k(c,e,d),a&&a.m(e,null),n[15](e),l=!0,s||(r=[$(e,"mousedown",n[16]),$(e,"touchstart",n[2]),$(e,"click",n[13]),$(e,"keydown",n[14]),we(i=Oe.call(null,e,n[1]))],s=!0)},p(c,[d]){a&&a.p&&(!l||d&2048)&&rt(a,o,c,c[11],l?st(o,c[11],d,null):ot(c[11]),null),zn(e,f=_t(u,[(!l||d&1&&t!==(t="draggable "+c[0]))&&{class:t},d&32&&c[5]])),i&&et(i.update)&&d&2&&i.update.call(null,c[1]),Z(e,"dragging",c[4])},i(c){l||(E(a,c),l=!0)},o(c){P(a,c),l=!1},d(c){c&&y(e),a&&a.d(c),n[15](null),s=!1,me(r)}}}function O0(n,e,t){let i;const l=["disabled","tolerance","passive","parentSelector","class","tooltip","getElem","dragInit"];let s=at(e,l),{$$slots:r={},$$scope:o}=e;const a=ft();let{disabled:u=!1}=e,{tolerance:f=6}=e,{passive:c=!1}=e,{parentSelector:d=null}=e,{class:m=void 0}=e,{tooltip:h=null}=e,g,b=0,_=0,C=0,L=0,T=!1,O=!1,S=!1;function j(){return g}function H(N){u||!g||!N||(N.stopPropagation(),K.normalizePointerEvent(N),b=N.clientX,_=N.clientY,C=b-g.offsetLeft,L=_-g.offsetTop,document.addEventListener("touchmove",A),document.addEventListener("mousemove",A),document.addEventListener("touchend",D),document.addEventListener("mouseup",D),a("draginit",{event:N,elem:g}))}function D(N){var ee;K.normalizePointerEvent(N);const V=S;(ee=i==null?void 0:i.classList)==null||ee.remove("child-dragging"),S&&(N.touches||N.preventDefault(),t(4,S=!1),T=!1,O=!1,g.classList.remove("no-pointer-events","dragging"),a("dragstop",{event:N,elem:g})),document.removeEventListener("touchmove",A),document.removeEventListener("mousemove",A),document.removeEventListener("touchend",D),document.removeEventListener("mouseup",D),a("dragrelease",{event:N,elem:g,dragged:V})}function A(N){K.normalizePointerEvent(N);let V=N.clientX-C,ee=N.clientY-L;if(!S&&Math.abs(V-g.offsetLeft)<f&&Math.abs(ee-g.offsetTop)<f)return;N.touches||N.preventDefault();let J=N.clientX-b,R=N.clientY-_;const ce={event:N,elem:g,diffX:J,diffY:R};if(S||(t(4,S=!0),g.classList.add("no-pointer-events","dragging"),i.classList.add("child-dragging"),a("dragstart",ce)),a("dragging",ce),!c){if(N.shiftKey?!T&&!O&&(Math.abs(J)>Math.abs(R)?(T=!1,O=!0):(T=!0,O=!1)):(T=!1,O=!1),!T){let oe=i.scrollWidth||i.offsetWidth;V+g.offsetWidth>oe&&(V=oe-g.offsetWidth),V=V<0?0:V,t(3,g.style.left=V+"px",g)}if(!O){let oe=i.scrollHeight||i.offsetHeight;ee+g.offsetHeight>oe&&(ee=oe-g.offsetHeight),ee=ee<0?0:ee,t(3,g.style.top=ee+"px",g)}}}function M(N){We.call(this,n,N)}function Y(N){We.call(this,n,N)}function G(N){le[N?"unshift":"push"](()=>{g=N,t(3,g)})}const B=N=>{N.button==0&&H(N)};return n.$$set=N=>{e=Me(Me({},e),Bt(N)),t(5,s=at(e,l)),"disabled"in N&&t(6,u=N.disabled),"tolerance"in N&&t(7,f=N.tolerance),"passive"in N&&t(8,c=N.passive),"parentSelector"in N&&t(9,d=N.parentSelector),"class"in N&&t(0,m=N.class),"tooltip"in N&&t(1,h=N.tooltip),"$$scope"in N&&t(11,o=N.$$scope)},n.$$.update=()=>{n.$$.dirty&520&&(i=(g==null?void 0:g.closest(d))||(g==null?void 0:g.parentNode))},[m,h,H,g,S,s,u,f,c,d,j,o,r,M,Y,G,B]}class xs extends Te{constructor(e){super(),Se(this,e,O0,C0,_e,{disabled:6,tolerance:7,passive:8,parentSelector:9,class:0,tooltip:1,getElem:10,dragInit:2})}get getElem(){return this.$$.ctx[10]}get dragInit(){return this.$$.ctx[2]}}function E0(n){let e;const t=n[10].default,i=lt(t,n,n[13],null);return{c(){i&&i.c()},m(l,s){i&&i.m(l,s),e=!0},p(l,s){i&&i.p&&(!e||s&8192)&&rt(i,t,l,l[13],e?st(t,l[13],s,null):ot(l[13]),null)},i(l){e||(E(i,l),e=!0)},o(l){P(i,l),e=!1},d(l){i&&i.d(l)}}}function L0(n){let e;return{c(){e=w("span"),p(e,"class","loader loader-xs loader-danger-alt")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function I0(n){let e,t,i,l;const s=[L0,E0],r=[];function o(a,u){return a[2]?0:1}return e=o(n),t=r[e]=s[e](n),{c(){t.c(),i=Ne()},m(a,u){r[e].m(a,u),k(a,i,u),l=!0},p(a,u){let f=e;e=o(a),e===f?r[e].p(a,u):(ae(),P(r[f],1,1,()=>{r[f]=null}),ue(),t=r[e],t?t.p(a,u):(t=r[e]=s[e](a),t.c()),E(t,1),t.m(i.parentNode,i))},i(a){l||(E(t),l=!0)},o(a){P(t),l=!1},d(a){a&&y(i),r[e].d(a)}}}function P0(n){let e,t;return e=new xs({props:{disabled:n[1],class:"comment-pin "+(n[0].resolved?"resolved":"")+" "+(n[4]?"unread":""),parentSelector:".screen-preview-img-wrapper","data-comment-pin":n[0].id,style:"left: min(calc(100% - "+cl+"px), "+n[0].left*n[3]+"px); top: min(calc(100% - "+cl+"px), "+n[0].top*n[3]+"px)",$$slots:{default:[I0]},$$scope:{ctx:n}}}),e.$on("dragstop",n[11]),e.$on("click",n[12]),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,[l]){const s={};l&2&&(s.disabled=i[1]),l&17&&(s.class="comment-pin "+(i[0].resolved?"resolved":"")+" "+(i[4]?"unread":"")),l&1&&(s["data-comment-pin"]=i[0].id),l&9&&(s.style="left: min(calc(100% - "+cl+"px), "+i[0].left*i[3]+"px); top: min(calc(100% - "+cl+"px), "+i[0].top*i[3]+"px)"),l&8196&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}const cl=36;function j0(n,e,t){let i,l,s,r,o;Q(n,gn,_=>t(8,s=_)),Q(n,Un,_=>t(9,r=_)),Q(n,qt,_=>t(5,o=_));let{$$slots:a={},$$scope:u}=e,{comment:f}=e,{disabled:c=!1}=e,{scale:d=null}=e,m=!1;async function h(_){if(_&&(Object.assign(f,{left:_.offsetLeft/i,top:_.offsetTop/i}),bi(f),!!f.id)){t(2,m=!0);try{const C={left:f.left,top:f.top};await z.collection("comments").update(f.id,C),t(2,m=!1)}catch(C){C.isAbort||(z.error(C),t(2,m=!1))}}}const g=_=>{h(_.detail.elem)},b=()=>{o!=f&&Ss(),ve(qt,o=f,o)};return n.$$set=_=>{"comment"in _&&t(0,f=_.comment),"disabled"in _&&t(1,c=_.disabled),"scale"in _&&t(7,d=_.scale),"$$scope"in _&&t(13,u=_.$$scope)},n.$$.update=()=>{n.$$.dirty&640&&t(3,i=d===null?r:d),n.$$.dirty&257&&t(4,l=f!=null&&f.id?!!(s!=null&&s.find(_=>{var C,L;return!_.read&&(_.comment==f.id||((L=(C=_.expand)==null?void 0:C.comment)==null?void 0:L.replyTo)==f.id)})):!1)},[f,c,m,i,l,o,h,d,s,r,a,g,b,u]}class N0 extends Te{constructor(e){super(),Se(this,e,j0,P0,_e,{comment:0,disabled:1,scale:7})}}function ou(n){let e,t,i={class:"resize-handle",passive:!0,parentSelector:".screen-preview-img-wrapper"};return e=new xs({props:i}),n[21](e),e.$on("draginit",n[22]),e.$on("dragstart",n[23]),e.$on("dragstop",n[24]),e.$on("dragrelease",n[25]),e.$on("dragging",n[26]),{c(){U(e.$$.fragment)},m(l,s){F(e,l,s),t=!0},p(l,s){const r={};e.$set(r)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){n[21](null),q(e,l)}}}function A0(n){let e,t,i=!n[1]&&ou(n);return{c(){i&&i.c(),e=Ne()},m(l,s){i&&i.m(l,s),k(l,e,s),t=!0},p(l,s){l[1]?i&&(ae(),P(i,1,1,()=>{i=null}),ue()):i?(i.p(l,s),s[0]&2&&E(i,1)):(i=ou(l),i.c(),E(i,1),i.m(e.parentNode,e))},i(l){t||(E(i),t=!0)},o(l){P(i),t=!1},d(l){l&&y(e),i&&i.d(l)}}}function D0(n){var l;let e,t,i={class:"hotspot type-"+n[0].type+" "+(n[1]?"preview":"")+" "+(((l=n[4])==null?void 0:l.id)==n[0].id?"active":"")+" "+(n[13]?"no-pointer-events":"")+" "+(n[0].hotspotTemplate?"template":""),"data-hotspot":n[0].id,parentSelector:Cs,disabled:n[13]||n[1]||n[0].disabled,style:`
        left: min(calc(100% - `+n[0].width*n[12]+"px), "+n[0].left*n[12]+`px);
        top: min(calc(100% - `+n[0].height*n[12]+"px), "+n[0].top*n[12]+`px);
        width: `+n[0].width*n[12]+`px;
        height: `+n[0].height*n[12]+`px;
    `,tooltip:n[10],$$slots:{default:[A0]},$$scope:{ctx:n}};return e=new xs({props:i}),n[27](e),e.$on("dragstart",n[28]),e.$on("dragrelease",n[29]),e.$on("dragstop",n[15]),e.$on("click",n[30]),{c(){U(e.$$.fragment)},m(s,r){F(e,s,r),t=!0},p(s,r){var a;const o={};r[0]&8211&&(o.class="hotspot type-"+s[0].type+" "+(s[1]?"preview":"")+" "+(((a=s[4])==null?void 0:a.id)==s[0].id?"active":"")+" "+(s[13]?"no-pointer-events":"")+" "+(s[0].hotspotTemplate?"template":"")),r[0]&1&&(o["data-hotspot"]=s[0].id),r[0]&8195&&(o.disabled=s[13]||s[1]||s[0].disabled),r[0]&4097&&(o.style=`
        left: min(calc(100% - `+s[0].width*s[12]+"px), "+s[0].left*s[12]+`px);
        top: min(calc(100% - `+s[0].height*s[12]+"px), "+s[0].top*s[12]+`px);
        width: `+s[0].width*s[12]+`px;
        height: `+s[0].height*s[12]+`px;
    `),r[0]&1024&&(o.tooltip=s[10]),r[0]&7163|r[1]&4194304&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){P(e.$$.fragment,s),t=!1},d(s){n[27](null),q(e,s)}}}let ss,rs;const Cs=".active-screen-preview-wrapper",M0=".screen-preview",dl=25;function H0(n,e,t){let i,l,s,r,o,a,u,f,c,d,m,h,g;Q(n,ri,fe=>t(33,r=fe)),Q(n,si,fe=>t(34,o=fe)),Q(n,Je,fe=>t(35,a=fe)),Q(n,_i,fe=>t(36,u=fe)),Q(n,Bc,fe=>t(37,f=fe)),Q(n,gi,fe=>t(38,c=fe)),Q(n,pt,fe=>t(39,d=fe)),Q(n,Be,fe=>t(4,m=fe)),Q(n,mn,fe=>t(5,h=fe)),Q(n,Un,fe=>t(20,g=fe));const b=Cs+" .screen-preview-img img";let{hotspot:_}=e,{preview:C=!1}=e,{scale:L=null}=e,{backFunc:T=null}=e,O,S,j,H=0,D=0,A=0,M=0,Y=!1,G;function B(){var fe;t(10,G=void 0),(m==null?void 0:m.id)!=_.id&&(_.type==xe.note?t(10,G={position:"follow",text:(fe=_.settings)==null?void 0:fe.note,hideOnClick:!1}):C||t(10,G={position:"top",text:`Ctrl + Click to follow
Shift + Click to duplicate`,delay:500,hideOnClick:!0}))}function N(fe=!1){return(!S||fe)&&(S=document.querySelector(Cs)),S}function V(){l&&Object.assign(_,{left:l.offsetLeft/i,top:l.offsetTop/i,width:l.offsetWidth/i,height:l.offsetHeight/i})}async function ee(fe){var Pe,re;if(l&&((re=(Pe=fe==null?void 0:fe.detail)==null?void 0:Pe.event)!=null&&re.altKey&&await J(),V(),Cn(_),!!_.id)){Y=!0;try{const He={left:_.left,top:_.top,width:_.width,height:_.height};await z.collection("hotspots").update(_.id,He),Y=!1}catch(He){He.isAbort||(z.error(He),Y=!1)}}}async function J(){const fe=document.querySelector(b);if(!fe)return;V();const Pe=K.closestFeatureEdge(fe,{x:_.left,y:_.top,w:_.width,h:_.height});t(0,_.left+=Pe.x,_),t(0,_.top+=Pe.y,_),t(0,_.width=Pe.w,_),t(0,_.height=Pe.h,_),await St()}async function R(){const fe=N().offsetWidth||1/0,Pe=structuredClone(_);Pe.id="hcopy"+K.randomString(10),Pe.left=Pe.left+Pe.width,Pe.disabled=!0,Pe.left+Pe.width>fe&&(Pe.left=fe-Pe.width),Cn(Pe);try{Cn(await z.collection("hotspots").create(Pe)),Y=!1}catch(re){re.isAbort||(z.error(re),Y=!1,wd(Pe))}}function ce(){switch(_.type){case xe.screen:return oe();case xe.overlay:return pe();case xe.back:return Ee();case xe.prev:return tt();case xe.next:return se();case xe.url:return ge();case xe.scroll:return Fe()}}function oe(){const fe=d.find(Pe=>Pe.id==_.settings.screen);de(fe)}function pe(){ve(gi,c=_.settings,c)}function Ee(){T?T():f!=null&&f.id&&de(f)}function tt(){const fe=ys(-1);de(fe)}function se(){const fe=ys(1);de(fe)}function ge(){u!=null&&u.allowHotspotsUrl&&window.open(_.settings.url||"#","_blank","noopener,noreferrer")}function Fe(){var fe;(fe=document.querySelector(M0))==null||fe.scrollTo({behavior:"smooth",top:_.settings.scrollTop||0,left:_.settings.scrollLeft||0})}function ne(){clearTimeout(rs),clearTimeout(ss),ve(ri,r=null,r),ve(si,o="",o)}function de(fe){if(!fe){ne();return}if(!_.settings.transition){ne(),ve(Je,a=fe.id,a);return}ve(si,o=_.settings.transition,o),ve(ri,r=fe.id,r),clearTimeout(ss),ss=setTimeout(()=>{ve(Je,a=r==null?void 0:r.id,a),clearTimeout(rs),rs=setTimeout(()=>{ve(si,o="",o),ve(ri,r="",r)},100)},350)}function W(fe){le[fe?"unshift":"push"](()=>{j=fe,t(3,j)})}const ie=()=>{ve(mn,h=!0,h)},Ue=()=>{l&&(t(6,H=l.offsetWidth),t(7,D=l.offsetHeight),t(8,A=l.offsetLeft),t(9,M=l.offsetTop))},kt=fe=>{ee(fe),ve(mn,h=!1,h)},ze=fe=>{fe.detail.dragged||(ve(mn,h=!1,h),(m==null?void 0:m.id)!=(_==null?void 0:_.id)&&ve(Be,m=_,m))},ct=fe=>{if(!l)return;let Pe=H+fe.detail.diffX,re=D+fe.detail.diffY,He=A,nt=M;const Xe=N().offsetWidth,gt=N().offsetHeight;Pe<0&&(Pe=-1*fe.detail.diffX,He=A+fe.detail.diffX,He<0&&(He=0,Pe=A)),He+Pe>=Xe&&(Pe=Xe-He,Pe<dl&&(Pe=dl,He=Xe-Pe)),re<0&&(re=-1*fe.detail.diffY,nt=M+fe.detail.diffY,nt<0&&(nt=0,re=M)),nt+re>=gt&&(re=gt-nt,re<dl&&(re=dl,nt=gt-re)),t(0,_.width=Pe/i,_),t(0,_.height=re/i,_),t(0,_.left=He/i,_),t(0,_.top=nt/i,_)};function Dt(fe){le[fe?"unshift":"push"](()=>{O=fe,t(2,O)})}const Mt=()=>{ve(mn,h=!0,h)},te=()=>{ve(mn,h=!1,h)},Ze=fe=>{if(fe.stopImmediatePropagation(),!h){if(!C&&(_!=null&&_.id)&&fe.shiftKey)return R();m!=_&&Ts(),C||fe.ctrlKey?ce():ve(Be,m=_,m)}};return n.$$set=fe=>{"hotspot"in fe&&t(0,_=fe.hotspot),"preview"in fe&&t(1,C=fe.preview),"scale"in fe&&t(18,L=fe.scale),"backFunc"in fe&&t(19,T=fe.backFunc)},n.$$.update=()=>{n.$$.dirty[0]&1310720&&t(12,i=L===null?g:L),n.$$.dirty[0]&9&&_.startResizing&&j&&(j.dragInit(_.startResizing),delete _.startResizing),n.$$.dirty[0]&4&&t(11,l=O==null?void 0:O.getElem()),n.$$.dirty[0]&49&&t(13,s=h||m&&m.id!=_.id),n.$$.dirty[0]&3&&(_||C)&&B()},N(!0),[_,C,O,j,m,h,H,D,A,M,G,l,i,s,N,ee,R,ce,L,T,g,W,ie,Ue,kt,ze,ct,Dt,Mt,te,Ze]}class Wl extends Te{constructor(e){super(),Se(this,e,H0,D0,_e,{hotspot:0,preview:1,scale:18,backFunc:19},null,[-1,-1])}}function au(n,e,t){const i=n.slice();return i[18]=e[t],i}function uu(n){let e,t,i,l,s,r,o=[],a=new Map,u=`${n[1].offsetTop*n[6]}px`,f=`${n[1].offsetLeft*n[6]}px`,c=`${n[1].offseRight*n[6]}px`,d=`${n[1].offsetBottom*n[6]}px`,m,h,g,b,_={src:z.files.getUrl(n[0],n[0].file),alt:n[0].title,draggable:!1,loading:"eager",loaderClass:"hidden",fetchpriority:"high",scale:n[6]};l=new Yt({props:_}),n[13](l),l.$on("load",n[8]);let C=Ie(n[5]);const L=T=>T[18].id;for(let T=0;T<C.length;T+=1){let O=au(n,C,T),S=L(O);a.set(S,o[T]=fu(S,O))}return{c(){e=w("div"),t=w("div"),i=w("div"),U(l.$$.fragment),s=I(),r=w("div");for(let T=0;T<o.length;T+=1)o[T].c();p(r,"class","hotspots"),p(i,"class","screen-overlay-offset"),qe(i,"margin-top",u),qe(i,"margin-left",f),qe(i,"margin-right",c),qe(i,"margin-bottom",d),p(t,"class",m="screen-overlay "+(n[1].fixOverlay?"fixed":"")+" transition-"+(n[1].transition||"none")+" position-"+n[1].overlayPosition),p(e,"class","screen-overlay-container")},m(T,O){k(T,e,O),v(e,t),v(t,i),F(l,i,null),v(i,s),v(i,r);for(let S=0;S<o.length;S+=1)o[S]&&o[S].m(r,null);h=!0,g||(b=$(e,"click",n[14]),g=!0)},p(T,O){const S={};O&1&&(S.src=z.files.getUrl(T[0],T[0].file)),O&1&&(S.alt=T[0].title),O&64&&(S.scale=T[6]),l.$set(S),O&176&&(C=Ie(T[5]),ae(),o=yt(o,O,L,1,T,C,a,r,It,fu,null,au),ue()),O&66&&u!==(u=`${T[1].offsetTop*T[6]}px`)&&qe(i,"margin-top",u),O&66&&f!==(f=`${T[1].offsetLeft*T[6]}px`)&&qe(i,"margin-left",f),O&66&&c!==(c=`${T[1].offseRight*T[6]}px`)&&qe(i,"margin-right",c),O&66&&d!==(d=`${T[1].offsetBottom*T[6]}px`)&&qe(i,"margin-bottom",d),(!h||O&2&&m!==(m="screen-overlay "+(T[1].fixOverlay?"fixed":"")+" transition-"+(T[1].transition||"none")+" position-"+T[1].overlayPosition))&&p(t,"class",m)},i(T){if(!h){E(l.$$.fragment,T);for(let O=0;O<C.length;O+=1)E(o[O]);h=!0}},o(T){P(l.$$.fragment,T);for(let O=0;O<o.length;O+=1)P(o[O]);h=!1},d(T){T&&y(e),n[13](null),q(l);for(let O=0;O<o.length;O+=1)o[O].d();g=!1,b()}}}function fu(n,e){let t,i,l;return i=new Wl({props:{preview:!0,hotspot:e[18],scale:e[4],backFunc:e[7]}}),{key:n,first:null,c(){t=Ne(),U(i.$$.fragment),this.first=t},m(s,r){k(s,t,r),F(i,s,r),l=!0},p(s,r){e=s;const o={};r&32&&(o.hotspot=e[18]),r&16&&(o.scale=e[4]),i.$set(o)},i(s){l||(E(i.$$.fragment,s),l=!0)},o(s){P(i.$$.fragment,s),l=!1},d(s){s&&y(t),q(i,s)}}}function $0(n){let e,t,i,l,s=n[3]&&n[1]&&uu(n);return{c(){s&&s.c(),e=Ne()},m(r,o){s&&s.m(r,o),k(r,e,o),t=!0,i||(l=$(window,"resize",n[12]),i=!0)},p(r,[o]){r[3]&&r[1]?s?(s.p(r,o),o&10&&E(s,1)):(s=uu(r),s.c(),E(s,1),s.m(e.parentNode,e)):s&&(ae(),P(s,1,1,()=>{s=null}),ue())},i(r){t||(E(s),t=!0)},o(r){P(s),t=!1},d(r){r&&y(e),s&&s.d(r),i=!1,l()}}}function R0(n,e,t){let i,l,s,r,o,a,u;Q(n,gi,O=>t(1,l=O)),Q(n,pt,O=>t(16,s=O)),Q(n,Ci,O=>t(9,r=O)),Q(n,un,O=>t(10,o=O)),Q(n,bn,O=>t(11,a=O)),Q(n,Un,O=>t(6,u=O));let f=null,c=null,d=!1,m=null,h=null;function g(){t(0,c=l!=null&&l.screen?s.find(O=>O.id==l.screen):null),c?t(3,d=!0):b()}function b(){t(3,d=!1),l&&ve(gi,l=null,l),c&&t(0,c=null)}function _(O=250){d&&(h&&clearTimeout(h),h=setTimeout(()=>{t(4,m=f?f.widthRatio():null),h=null},O))}fn(()=>{h&&clearTimeout(h)});const C=()=>_();function L(O){le[O?"unshift":"push"](()=>{f=O,t(2,f)})}const T=function(O){l.outsideClose&&O.target==this&&b()};return n.$$.update=()=>{n.$$.dirty&2&&l!=-1&&g(),n.$$.dirty&3073&&t(5,i=c!=null&&c.id?yd(c,a,o):[]),n.$$.dirty&512&&r!==-1&&_()},[c,l,f,d,m,i,u,b,_,r,o,a,C,L,T]}class F0 extends Te{constructor(e){super(),Se(this,e,R0,$0,_e,{})}}function cu(n,e,t){const i=n.slice();return i[43]=e[t],i}function du(n,e,t){const i=n.slice();return i[48]=e[t],i[50]=t,i}function pu(n,e,t){const i=n.slice();return i[43]=e[t],i}function mu(n,e,t){const i=n.slice();return i[43]=e[t],i}function hu(n){let e,t,i,l,s=`${n[2].fixedHeader*n[12]}px`,r=`-${n[2].fixedHeader*n[12]}px`,o;return l=new Yt({props:{class:"screen-preview-img",src:z.files.getUrl(n[2],n[2].file),alt:n[2].title,draggable:!1,loaderClass:"hidden",fetchpriority:"high",scale:n[4].scale,$$slots:{default:[q0]},$$scope:{ctx:n}}}),l.$on("click",n[25]),{c(){e=w("div"),t=w("div"),i=w("div"),U(l.$$.fragment),p(i,"class","fixed-screen-hotspots-wrapper"),p(t,"class","fixed-screen-overflow"),p(e,"class","fixed-screen-header"),qe(e,"height",s),qe(e,"margin-top",r)},m(a,u){k(a,e,u),v(e,t),v(t,i),F(l,i,null),o=!0},p(a,u){const f={};u[0]&4&&(f.src=z.files.getUrl(a[2],a[2].file)),u[0]&4&&(f.alt=a[2].title),u[0]&16&&(f.scale=a[4].scale),u[0]&65536|u[1]&4194304&&(f.$$scope={dirty:u,ctx:a}),l.$set(f),u[0]&4100&&s!==(s=`${a[2].fixedHeader*a[12]}px`)&&qe(e,"height",s),u[0]&4100&&r!==(r=`-${a[2].fixedHeader*a[12]}px`)&&qe(e,"margin-top",r)},i(a){o||(E(l.$$.fragment,a),o=!0)},o(a){P(l.$$.fragment,a),o=!1},d(a){a&&y(e),q(l)}}}function _u(n,e){let t,i,l;return i=new Wl({props:{preview:!0,hotspot:e[43]}}),{key:n,first:null,c(){t=Ne(),U(i.$$.fragment),this.first=t},m(s,r){k(s,t,r),F(i,s,r),l=!0},p(s,r){e=s;const o={};r[0]&65536&&(o.hotspot=e[43]),i.$set(o)},i(s){l||(E(i.$$.fragment,s),l=!0)},o(s){P(i.$$.fragment,s),l=!1},d(s){s&&y(t),q(i,s)}}}function q0(n){let e,t=[],i=new Map,l,s=Ie(n[16]);const r=o=>"header_"+o[43].id;for(let o=0;o<s.length;o+=1){let a=mu(n,s,o),u=r(a);i.set(u,t[o]=_u(u,a))}return{c(){e=w("div");for(let o=0;o<t.length;o+=1)t[o].c();p(e,"class","hotspots svelte-r47g7")},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);l=!0},p(o,a){a[0]&65536&&(s=Ie(o[16]),ae(),t=yt(t,a,r,1,o,s,i,e,It,_u,null,mu),ue())},i(o){if(!l){for(let a=0;a<s.length;a+=1)E(t[a]);l=!0}},o(o){for(let a=0;a<t.length;a+=1)P(t[a]);l=!1},d(o){o&&y(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function U0(n){let e,t=[],i=new Map,l,s=Ie(n[17]);const r=o=>o[48].id;for(let o=0;o<s.length;o+=1){let a=du(n,s,o),u=r(a);i.set(u,t[o]=bu(u,a))}return{c(){e=w("div");for(let o=0;o<t.length;o+=1)t[o].c();p(e,"class","comment-pins svelte-r47g7")},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);l=!0},p(o,a){a[0]&393728&&(s=Ie(o[17]),ae(),t=yt(t,a,r,1,o,s,i,e,It,bu,null,du),ue())},i(o){if(!l){for(let a=0;a<s.length;a+=1)E(t[a]);l=!0}},o(o){for(let a=0;a<t.length;a+=1)P(t[a]);l=!1},d(o){o&&y(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function W0(n){let e,t=[],i=new Map,l,s,r,o=Ie(n[16]);const a=u=>u[43].id;for(let u=0;u<o.length;u+=1){let f=pu(n,o,u),c=a(f);i.set(c,t[u]=wu(c,f))}return s=new F0({}),{c(){e=w("div");for(let u=0;u<t.length;u+=1)t[u].c();l=I(),U(s.$$.fragment),p(e,"class","hotspots svelte-r47g7")},m(u,f){k(u,e,f);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);k(u,l,f),F(s,u,f),r=!0},p(u,f){f[0]&65538&&(o=Ie(u[16]),ae(),t=yt(t,f,a,1,u,o,i,e,It,wu,null,pu),ue())},i(u){if(!r){for(let f=0;f<o.length;f+=1)E(t[f]);E(s.$$.fragment,u),r=!0}},o(u){for(let f=0;f<t.length;f+=1)P(t[f]);P(s.$$.fragment,u),r=!1},d(u){u&&(y(e),y(l));for(let f=0;f<t.length;f+=1)t[f].d();q(s,u)}}}function gu(n){let e,t;return e=new N0({props:{disabled:!n[9],comment:n[48],$$slots:{default:[V0]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,l){const s={};l[0]&512&&(s.disabled=!i[9]),l[0]&131072&&(s.comment=i[48]),l[0]&131072|l[1]&4194304&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function V0(n){let e=(n[48].id?n[50]+1:"")+"",t,i;return{c(){t=x(e),i=I()},m(l,s){k(l,t,s),k(l,i,s)},p(l,s){s[0]&131072&&e!==(e=(l[48].id?l[50]+1:"")+"")&&ke(t,e)},d(l){l&&(y(t),y(i))}}}function bu(n,e){let t,i,l,s=(!e[48].resolved||e[18])&&gu(e);return{key:n,first:null,c(){t=Ne(),s&&s.c(),i=Ne(),this.first=t},m(r,o){k(r,t,o),s&&s.m(r,o),k(r,i,o),l=!0},p(r,o){e=r,!e[48].resolved||e[18]?s?(s.p(e,o),o[0]&393216&&E(s,1)):(s=gu(e),s.c(),E(s,1),s.m(i.parentNode,i)):s&&(ae(),P(s,1,1,()=>{s=null}),ue())},i(r){l||(E(s),l=!0)},o(r){P(s),l=!1},d(r){r&&(y(t),y(i)),s&&s.d(r)}}}function wu(n,e){let t,i,l;return i=new Wl({props:{hotspot:e[43],preview:e[1]==Ce.preview}}),{key:n,first:null,c(){t=Ne(),U(i.$$.fragment),this.first=t},m(s,r){k(s,t,r),F(i,s,r),l=!0},p(s,r){e=s;const o={};r[0]&65536&&(o.hotspot=e[43]),r[0]&2&&(o.preview=e[1]==Ce.preview),i.$set(o)},i(s){l||(E(i.$$.fragment,s),l=!0)},o(s){P(i.$$.fragment,s),l=!1},d(s){s&&y(t),q(i,s)}}}function vu(n){let e,t,i,l,s=`${n[2].fixedFooter*n[12]}px`,r=`-${n[2].fixedFooter*n[12]}px`,o;return l=new Yt({props:{class:"screen-preview-img",src:z.files.getUrl(n[2],n[2].file),alt:n[2].title,draggable:!1,loading:"eager",loaderClass:"hidden",fetchpriority:"high",scale:n[4].scale,$$slots:{default:[z0]},$$scope:{ctx:n}}}),l.$on("click",n[25]),{c(){e=w("div"),t=w("div"),i=w("div"),U(l.$$.fragment),p(i,"class","fixed-screen-hotspots-wrapper"),p(t,"class","fixed-screen-overflow"),p(e,"class","fixed-screen-footer"),qe(e,"height",s),qe(e,"margin-top",r)},m(a,u){k(a,e,u),v(e,t),v(t,i),F(l,i,null),o=!0},p(a,u){const f={};u[0]&4&&(f.src=z.files.getUrl(a[2],a[2].file)),u[0]&4&&(f.alt=a[2].title),u[0]&16&&(f.scale=a[4].scale),u[0]&65536|u[1]&4194304&&(f.$$scope={dirty:u,ctx:a}),l.$set(f),u[0]&4100&&s!==(s=`${a[2].fixedFooter*a[12]}px`)&&qe(e,"height",s),u[0]&4100&&r!==(r=`-${a[2].fixedFooter*a[12]}px`)&&qe(e,"margin-top",r)},i(a){o||(E(l.$$.fragment,a),o=!0)},o(a){P(l.$$.fragment,a),o=!1},d(a){a&&y(e),q(l)}}}function yu(n,e){let t,i,l;return i=new Wl({props:{preview:!0,hotspot:e[43]}}),{key:n,first:null,c(){t=Ne(),U(i.$$.fragment),this.first=t},m(s,r){k(s,t,r),F(i,s,r),l=!0},p(s,r){e=s;const o={};r[0]&65536&&(o.hotspot=e[43]),i.$set(o)},i(s){l||(E(i.$$.fragment,s),l=!0)},o(s){P(i.$$.fragment,s),l=!1},d(s){s&&y(t),q(i,s)}}}function z0(n){let e,t=[],i=new Map,l,s=Ie(n[16]);const r=o=>"footer_"+o[43].id;for(let o=0;o<s.length;o+=1){let a=cu(n,s,o),u=r(a);i.set(u,t[o]=yu(u,a))}return{c(){e=w("div");for(let o=0;o<t.length;o+=1)t[o].c();p(e,"class","hotspots svelte-r47g7")},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);l=!0},p(o,a){a[0]&65536&&(s=Ie(o[16]),ae(),t=yt(t,a,r,1,o,s,i,e,It,yu,null,cu),ue())},i(o){if(!l){for(let a=0;a<s.length;a+=1)E(t[a]);l=!0}},o(o){for(let a=0;a<t.length;a+=1)P(t[a]);l=!1},d(o){o&&y(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function ku(n){let e,t,i,l,s,r,o,a,u=n[19].fixedHeader>0&&n[1]==Ce.preview&&Su(n);s=new Yt({props:{class:"screen-preview-img",src:z.files.getUrl(n[19],n[19].file),alt:n[19].title,loading:"eager",loaderClass:"loader",fetchpriority:"high",draggable:!1,scale:n[4].scale}}),s.$on("load",n[36]);let f=n[19].fixedFooter>0&&n[1]==Ce.preview&&Tu(n);return{c(){e=w("div"),t=w("div"),u&&u.c(),i=I(),l=w("div"),U(s.$$.fragment),r=I(),f&&f.c(),p(l,"class","screen-preview-img-wrapper"),p(t,"class",o="screen-preview align-"+(n[2].alignment||"center")+" svelte-r47g7"),Z(t,"fit-to-screen",n[3]),qe(t,"width",n[11]?`${n[11]}px`:void 0),qe(t,"height",n[10]?`${n[10]}px`:void 0),qe(t,"background-color",n[19].background||Ll),p(e,"class","transition-item new")},m(c,d){k(c,e,d),v(e,t),u&&u.m(t,null),v(t,i),v(t,l),F(s,l,null),v(t,r),f&&f.m(t,null),n[37](t),a=!0},p(c,d){c[19].fixedHeader>0&&c[1]==Ce.preview?u?(u.p(c,d),d[0]&524290&&E(u,1)):(u=Su(c),u.c(),E(u,1),u.m(t,i)):u&&(ae(),P(u,1,1,()=>{u=null}),ue());const m={};d[0]&524288&&(m.src=z.files.getUrl(c[19],c[19].file)),d[0]&524288&&(m.alt=c[19].title),d[0]&16&&(m.scale=c[4].scale),s.$set(m),c[19].fixedFooter>0&&c[1]==Ce.preview?f?(f.p(c,d),d[0]&524290&&E(f,1)):(f=Tu(c),f.c(),E(f,1),f.m(t,null)):f&&(ae(),P(f,1,1,()=>{f=null}),ue()),(!a||d[0]&4&&o!==(o="screen-preview align-"+(c[2].alignment||"center")+" svelte-r47g7"))&&p(t,"class",o),(!a||d[0]&12)&&Z(t,"fit-to-screen",c[3]),d[0]&2048&&qe(t,"width",c[11]?`${c[11]}px`:void 0),d[0]&1024&&qe(t,"height",c[10]?`${c[10]}px`:void 0),d[0]&524288&&qe(t,"background-color",c[19].background||Ll)},i(c){a||(E(u),E(s.$$.fragment,c),E(f),a=!0)},o(c){P(u),P(s.$$.fragment,c),P(f),a=!1},d(c){c&&y(e),u&&u.d(),q(s),f&&f.d(),n[37](null)}}}function Su(n){let e,t,i,l=`${n[19].fixedHeader*n[12]}px`,s=`-${n[19].fixedHeader*n[12]}px`,r;return i=new Yt({props:{class:"screen-preview-img",src:z.files.getUrl(n[19],n[19].file),alt:n[19].title,draggable:!1,loaderClass:"hidden",fetchpriority:"high",scale:n[4].scale}}),{c(){e=w("div"),t=w("div"),U(i.$$.fragment),p(t,"class","fixed-screen-overflow"),p(e,"class","fixed-screen-header"),qe(e,"height",l),qe(e,"margin-top",s)},m(o,a){k(o,e,a),v(e,t),F(i,t,null),r=!0},p(o,a){const u={};a[0]&524288&&(u.src=z.files.getUrl(o[19],o[19].file)),a[0]&524288&&(u.alt=o[19].title),a[0]&16&&(u.scale=o[4].scale),i.$set(u),a[0]&528384&&l!==(l=`${o[19].fixedHeader*o[12]}px`)&&qe(e,"height",l),a[0]&528384&&s!==(s=`-${o[19].fixedHeader*o[12]}px`)&&qe(e,"margin-top",s)},i(o){r||(E(i.$$.fragment,o),r=!0)},o(o){P(i.$$.fragment,o),r=!1},d(o){o&&y(e),q(i)}}}function Tu(n){let e,t,i,l=`${n[19].fixedFooter*n[12]}px`,s=`-${n[19].fixedFooter*n[12]}px`,r;return i=new Yt({props:{class:"screen-preview-img",src:z.files.getUrl(n[19],n[19].file),alt:n[19].title,loading:"eager",loaderClass:"hidden",fetchpriority:"high",scale:n[4].scale}}),{c(){e=w("div"),t=w("div"),U(i.$$.fragment),p(t,"class","fixed-screen-overflow"),p(e,"class","fixed-screen-footer"),qe(e,"height",l),qe(e,"margin-top",s)},m(o,a){k(o,e,a),v(e,t),F(i,t,null),r=!0},p(o,a){const u={};a[0]&524288&&(u.src=z.files.getUrl(o[19],o[19].file)),a[0]&524288&&(u.alt=o[19].title),a[0]&16&&(u.scale=o[4].scale),i.$set(u),a[0]&528384&&l!==(l=`${o[19].fixedFooter*o[12]}px`)&&qe(e,"height",l),a[0]&528384&&s!==(s=`-${o[19].fixedFooter*o[12]}px`)&&qe(e,"margin-top",s)},i(o){r||(E(i.$$.fragment,o),r=!0)},o(o){P(i.$$.fragment,o),r=!1},d(o){o&&y(e),q(i)}}}function B0(n){var B;let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g,b,_,C,L,T,O,S=n[2].fixedHeader>0&&n[1]==Ce.preview&&hu(n);function j(N){n[32](N)}let H={class:"screen-preview-img",src:z.files.getUrl(n[2],n[2].file),alt:n[2].title,loading:"eager",loaderClass:"loader",fetchpriority:"high",draggable:!1,scale:n[4].scale};n[8]!==void 0&&(H.isLoading=n[8]),a=new Yt({props:H}),le.push(()=>De(a,"isLoading",j)),a.$on("load",n[33]),a.$on("mousedown",n[34]),a.$on("touchstart",n[24]),a.$on("click",n[25]),a.$on("click",n[23]);const D=[W0,U0],A=[];function M(N,V){return N[1]==Ce.hotspots||N[1]==Ce.preview?0:N[1]==Ce.comments?1:-1}~(d=M(n))&&(m=A[d]=D[d](n));let Y=n[2].fixedFooter>0&&n[1]==Ce.preview&&vu(n),G=n[13]&&((B=n[19])==null?void 0:B.id)&&ku(n);return{c(){e=w("div"),t=w("div"),i=w("div"),l=w("div"),S&&S.c(),s=I(),r=w("div"),o=w("div"),U(a.$$.fragment),c=I(),m&&m.c(),h=I(),Y&&Y.c(),b=I(),G&&G.c(),p(o,"class","tooltip-wrapper"),p(r,"class","screen-preview-img-wrapper active-screen-preview-wrapper svelte-r47g7"),Z(r,"loading",n[8]),p(l,"class",g="screen-preview align-"+(n[2].alignment||"center")+" svelte-r47g7"),Z(l,"fit-to-screen",n[3]),qe(l,"width",n[11]?`${n[11]}px`:void 0),qe(l,"height",n[10]?`${n[10]}px`:void 0),qe(l,"background-color",n[2].background||Ll),p(i,"class","transition-item old"),p(t,"class",_="transition-container transition-"+n[13]+" svelte-r47g7"),Z(t,"active",n[13]),p(e,"class",C="screen-preview-holder "+(n[4].size?"mobile":"desktop")),Z(e,"in-transition",!!n[13]),Z(e,"hints",n[7]||n[14]),Z(e,"annotations",n[15])},m(N,V){k(N,e,V),v(e,t),v(t,i),v(i,l),S&&S.m(l,null),v(l,s),v(l,r),v(r,o),F(a,o,null),v(r,c),~d&&A[d].m(r,null),v(l,h),Y&&Y.m(l,null),n[35](l),v(t,b),G&&G.m(t,null),L=!0,T||(O=[$(window,"resize",n[31]),we(f=Oe.call(null,o,n[6]))],T=!0)},p(N,V){var R;N[2].fixedHeader>0&&N[1]==Ce.preview?S?(S.p(N,V),V[0]&6&&E(S,1)):(S=hu(N),S.c(),E(S,1),S.m(l,s)):S&&(ae(),P(S,1,1,()=>{S=null}),ue());const ee={};V[0]&4&&(ee.src=z.files.getUrl(N[2],N[2].file)),V[0]&4&&(ee.alt=N[2].title),V[0]&16&&(ee.scale=N[4].scale),!u&&V[0]&256&&(u=!0,ee.isLoading=N[8],Ae(()=>u=!1)),a.$set(ee),f&&et(f.update)&&V[0]&64&&f.update.call(null,N[6]);let J=d;d=M(N),d===J?~d&&A[d].p(N,V):(m&&(ae(),P(A[J],1,1,()=>{A[J]=null}),ue()),~d?(m=A[d],m?m.p(N,V):(m=A[d]=D[d](N),m.c()),E(m,1),m.m(r,null)):m=null),(!L||V[0]&256)&&Z(r,"loading",N[8]),N[2].fixedFooter>0&&N[1]==Ce.preview?Y?(Y.p(N,V),V[0]&6&&E(Y,1)):(Y=vu(N),Y.c(),E(Y,1),Y.m(l,null)):Y&&(ae(),P(Y,1,1,()=>{Y=null}),ue()),(!L||V[0]&4&&g!==(g="screen-preview align-"+(N[2].alignment||"center")+" svelte-r47g7"))&&p(l,"class",g),(!L||V[0]&12)&&Z(l,"fit-to-screen",N[3]),V[0]&2048&&qe(l,"width",N[11]?`${N[11]}px`:void 0),V[0]&1024&&qe(l,"height",N[10]?`${N[10]}px`:void 0),V[0]&4&&qe(l,"background-color",N[2].background||Ll),N[13]&&((R=N[19])!=null&&R.id)?G?(G.p(N,V),V[0]&532480&&E(G,1)):(G=ku(N),G.c(),E(G,1),G.m(t,null)):G&&(ae(),P(G,1,1,()=>{G=null}),ue()),(!L||V[0]&8192&&_!==(_="transition-container transition-"+N[13]+" svelte-r47g7"))&&p(t,"class",_),(!L||V[0]&8192)&&Z(t,"active",N[13]),(!L||V[0]&16&&C!==(C="screen-preview-holder "+(N[4].size?"mobile":"desktop")))&&p(e,"class",C),(!L||V[0]&8208)&&Z(e,"in-transition",!!N[13]),(!L||V[0]&16528)&&Z(e,"hints",N[7]||N[14]),(!L||V[0]&32784)&&Z(e,"annotations",N[15])},i(N){L||(E(S),E(a.$$.fragment,N),E(m),E(Y),E(G),L=!0)},o(N){P(S),P(a.$$.fragment,N),P(m),P(Y),P(G),L=!1},d(N){N&&y(e),S&&S.d(),q(a),~d&&A[d].d(),Y&&Y.d(),n[35](null),G&&G.d(),T=!1,me(O)}}}const Ll="var(--baseColor)";function Z0(n,e,t){let i,l,s,r,o,a,u,f,c,d,m,h,g,b,_,C,L,T,O,S,j;Q(n,pt,W=>t(41,r=W)),Q(n,Ti,W=>t(1,o=W)),Q(n,Je,W=>t(2,a=W)),Q(n,Un,W=>t(12,u=W)),Q(n,Be,W=>t(26,f=W)),Q(n,qt,W=>t(27,c=W)),Q(n,Ci,W=>t(3,d=W)),Q(n,Tt,W=>t(4,m=W)),Q(n,Jn,W=>t(28,h=W)),Q(n,an,W=>t(29,g=W)),Q(n,mn,W=>t(30,b=W)),Q(n,si,W=>t(13,_=W)),Q(n,Tl,W=>t(14,C=W)),Q(n,Cl,W=>t(15,L=W)),Q(n,vd,W=>t(16,T=W)),Q(n,dd,W=>t(17,O=W)),Q(n,Hi,W=>t(18,S=W)),Q(n,ri,W=>t(19,j=W));let H,D,A={},M,Y,G=!1,B=!1,N=!0;function V(){let W=m==null?void 0:m.scale;if(!a||W&&!d){ve(Un,u=W,u);return}K.loadImage(z.files.getUrl(a,a.file)).then(ie=>{!ie.success||!ie.width||(clearTimeout(M),M=setTimeout(()=>{if(!H||!(a!=null&&a.id))return;const Ue=W>0?ie.width*W:ie.width;H.clientWidth<Ue?W=H.clientWidth/ie.width||1:W||(W=1),ve(Un,u=W,u)},0))})}function ee(W,ie="",Ue=100){ie=ie||"default",clearTimeout(A[ie]),A[ie]=setTimeout(W,Ue)}function J(W,ie){ie=ie||H,ie&&(W=="left"?ie.scrollLeft=0:W=="right"?ie.scrollLeft=ie.scrollWidth:ie.scrollLeft=(ie.scrollWidth-ie.offsetWidth)/2)}function R(W){if(o!=Ce.comments||c)return;W.preventDefault();const ie={id:"",left:W.offsetX/u,top:W.offsetY/u,message:"",screen:a==null?void 0:a.id};bi(ie,!0)}function ce(W){if(o!=Ce.hotspots||f)return;K.normalizePointerEvent(W),W.touches||W.preventDefault();const ie={id:"",left:W.offsetX/u,top:W.offsetY/u,width:25,height:25,type:xe.screen,settings:{},screen:a==null?void 0:a.id,startResizing:W};Cn(ie,!0)}function oe(){clearTimeout(B),t(7,G=!1)}function pe(){o==Ce.preview&&(t(7,G=!0),clearTimeout(B),B=setTimeout(()=>{t(7,G=!1)},500))}_n(()=>{for(let W of r.slice(0,50))K.loadImage(z.files.getUrl(W,W.file));return()=>{clearTimeout(B),clearTimeout(M);for(let W in A)clearTimeout(A[W])}});const Ee=()=>{ee(()=>{J(a==null?void 0:a.alignment,H),V()})};function tt(W){N=W,t(8,N)}const se=W=>{var ie;(ie=W.detail)==null||ie.scrollIntoView(top),J(a.alignment),ee(()=>{K.triggerEvent("mainScreenLoaded")},"mainScreenLoaded")},ge=W=>{W.button==0&&ce(W)};function Fe(W){le[W?"unshift":"push"](()=>{H=W,t(0,H)})}const ne=()=>J(j.alignment,D);function de(W){le[W?"unshift":"push"](()=>{D=W,t(5,D)})}return n.$$.update=()=>{var W,ie,Ue,kt,ze,ct;n.$$.dirty[0]&16&&t(11,i=((ie=(W=m==null?void 0:m.size)==null?void 0:W.split("x"))==null?void 0:ie[0])<<0),n.$$.dirty[0]&16&&t(10,l=((kt=(Ue=m==null?void 0:m.size)==null?void 0:Ue.split("x"))==null?void 0:kt[1])<<0),n.$$.dirty[0]&5&&J(a==null?void 0:a.alignment,H),n.$$.dirty[0]&13&&(d||ee(()=>J(a==null?void 0:a.alignment,H),"",0)),n.$$.dirty[0]&28&&(a||m||d)&&(oe(),V()),n.$$.dirty[0]&1275068418&&(o==Ce.hotspots&&!f&&!b?t(6,Y={position:"follow",text:"Click and drag to create hotspot",sub:'Hold "Alt" to snap'}):o==Ce.comments&&!c?t(6,Y={position:"follow",text:"Click to leave a comment"}):t(6,Y=void 0)),n.$$.dirty[0]&805306368&&t(9,s=(h==null?void 0:h.id)&&((ct=(ze=g==null?void 0:g.expand)==null?void 0:ze.users)==null?void 0:ct.find(Dt=>Dt.id==h.id)))},[H,o,a,d,m,D,Y,G,N,s,l,i,u,_,C,L,T,O,S,j,V,ee,J,R,ce,pe,f,c,h,g,b,Ee,tt,se,ge,Fe,ne,de]}class Cd extends Te{constructor(e){super(),Se(this,e,Z0,B0,_e,{},null,[-1,-1])}}function Cu(n,e,t){const i=n.slice();return i[45]=e[t][0],i[46]=e[t][1],i}function Y0(n){let e;return{c(){e=w("i"),p(e,"class","iconoir-settings")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function K0(n){let e;return{c(){e=w("div"),p(e,"class","loader loader-xs")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function G0(n){let e,t,i,l;return{c(){e=w("input"),p(e,"type","text"),p(e,"id",t=n[44]),e.required=!0,p(e,"placeholder","Screen title")},m(s,r){k(s,e,r),ye(e,n[9].title),i||(l=$(e,"input",n[20]),i=!0)},p(s,r){r[1]&8192&&t!==(t=s[44])&&p(e,"id",t),r[0]&512&&e.value!==s[9].title&&ye(e,s[9].title)},d(s){s&&y(e),i=!1,l()}}}function Ou(n){let e,t,i;function l(){return n[22](n[45])}return{c(){e=w("button"),e.textContent=`${n[46]} `,p(e,"type","button"),p(e,"class","btn btn-sm btn-semitransparent"),Z(e,"btn-primary",n[9].alignment==n[45]||!n[9].alignment&&n[45]=="center")},m(s,r){k(s,e,r),t||(i=$(e,"click",be(l)),t=!0)},p(s,r){n=s,r[0]&1536&&Z(e,"btn-primary",n[9].alignment==n[45]||!n[9].alignment&&n[45]=="center")},d(s){s&&y(e),t=!1,i()}}}function J0(n){let e,t,i,l,s,r,o,a,u,f=Ie(Object.entries(n[10])),c=[];for(let d=0;d<f.length;d+=1)c[d]=Ou(Cu(n,f,d));return{c(){e=w("label"),t=w("span"),t.textContent="Alignment",i=I(),l=w("i"),r=I(),o=w("div");for(let d=0;d<c.length;d+=1)c[d].c();p(t,"class","txt"),p(l,"class",s="iconoir-keyframes txt-sm "+(n[6]?"txt-disabled":"link-hint")),Z(l,"no-pointer-events",n[6]),p(o,"class","btns-group btns-group-block")},m(d,m){k(d,e,m),v(e,t),v(e,i),v(e,l),k(d,r,m),k(d,o,m);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(o,null);a||(u=[we(Oe.call(null,l,"Apply to all screens")),$(l,"click",Ke(be(n[21])))],a=!0)},p(d,m){if(m[0]&64&&s!==(s="iconoir-keyframes txt-sm "+(d[6]?"txt-disabled":"link-hint"))&&p(l,"class",s),m[0]&64&&Z(l,"no-pointer-events",d[6]),m[0]&17920){f=Ie(Object.entries(d[10]));let h;for(h=0;h<f.length;h+=1){const g=Cu(d,f,h);c[h]?c[h].p(g,m):(c[h]=Ou(g),c[h].c(),c[h].m(o,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=f.length}},d(d){d&&(y(e),y(r),y(o)),xt(c,d),a=!1,me(u)}}}function X0(n){let e,t,i,l,s,r,o,a,u,f,c,d,m=(n[9].background||"none")+"",h,g,b,_;return{c(){e=w("label"),t=w("span"),t.textContent="Background",i=I(),l=w("i"),o=I(),a=w("div"),u=w("input"),c=I(),d=w("label"),h=x(m),p(t,"class","txt"),p(l,"class",s="iconoir-keyframes txt-sm "+(n[6]?"txt-disabled":"link-hint")),Z(l,"no-pointer-events",n[6]),p(e,"for",r=n[44]),p(u,"type","color"),p(u,"id",f=n[44]),Z(u,"fade",!n[9].background),p(d,"for",g=n[44]),p(d,"class","addon txt-mono"),p(a,"class","field-group")},m(C,L){k(C,e,L),v(e,t),v(e,i),v(e,l),k(C,o,L),k(C,a,L),v(a,u),ye(u,n[9].background),v(a,c),v(a,d),v(d,h),b||(_=[we(Oe.call(null,l,"Apply to all screens")),$(l,"click",Ke(be(n[23]))),$(u,"input",n[24])],b=!0)},p(C,L){L[0]&64&&s!==(s="iconoir-keyframes txt-sm "+(C[6]?"txt-disabled":"link-hint"))&&p(l,"class",s),L[0]&64&&Z(l,"no-pointer-events",C[6]),L[1]&8192&&r!==(r=C[44])&&p(e,"for",r),L[1]&8192&&f!==(f=C[44])&&p(u,"id",f),L[0]&512&&ye(u,C[9].background),L[0]&512&&Z(u,"fade",!C[9].background),L[0]&512&&m!==(m=(C[9].background||"none")+"")&&ke(h,m),L[1]&8192&&g!==(g=C[44])&&p(d,"for",g)},d(C){C&&(y(e),y(o),y(a)),b=!1,me(_)}}}function Q0(n){let e,t,i,l,s,r,o,a,u,f,c;return{c(){e=w("input"),i=I(),l=w("label"),s=x("Has fixed header"),o=I(),a=w("i"),p(e,"type","checkbox"),p(e,"id",t=n[44]),p(l,"for",r=n[44]),p(a,"class",u="iconoir-keyframes txt-sm "+(n[6]?"txt-disabled":"link-hint")),Z(a,"no-pointer-events",n[6])},m(d,m){k(d,e,m),e.checked=n[0],k(d,i,m),k(d,l,m),v(l,s),k(d,o,m),k(d,a,m),f||(c=[$(e,"change",n[25]),$(e,"change",n[26]),we(Oe.call(null,a,"Apply to all screens")),$(a,"click",Ke(be(n[27])))],f=!0)},p(d,m){m[1]&8192&&t!==(t=d[44])&&p(e,"id",t),m[0]&1&&(e.checked=d[0]),m[1]&8192&&r!==(r=d[44])&&p(l,"for",r),m[0]&64&&u!==(u="iconoir-keyframes txt-sm "+(d[6]?"txt-disabled":"link-hint"))&&p(a,"class",u),m[0]&64&&Z(a,"no-pointer-events",d[6])},d(d){d&&(y(e),y(i),y(l),y(o),y(a)),f=!1,me(c)}}}function x0(n){let e,t,i,l,s,r,o;return{c(){e=w("div"),t=w("input"),l=I(),s=w("div"),s.textContent="px",p(t,"id",i=n[44]),p(t,"type","number"),p(t,"min","0"),p(s,"class","addon"),p(e,"class","field-group")},m(a,u){k(a,e,u),v(e,t),n[28](t),ye(t,n[9].fixedHeader),v(e,l),v(e,s),r||(o=$(t,"input",n[29]),r=!0)},p(a,u){u[1]&8192&&i!==(i=a[44])&&p(t,"id",i),u[0]&512&&wt(t.value)!==a[9].fixedHeader&&ye(t,a[9].fixedHeader)},d(a){a&&y(e),n[28](null),r=!1,o()}}}function e2(n){let e,t,i,l,s,r,o,a,u,f,c;return{c(){e=w("input"),i=I(),l=w("label"),s=x("Has fixed footer"),o=I(),a=w("i"),p(e,"type","checkbox"),p(e,"id",t=n[44]),p(l,"for",r=n[44]),p(a,"class",u="iconoir-keyframes txt-sm "+(n[6]?"txt-disabled":"link-hint")),Z(a,"no-pointer-events",n[6])},m(d,m){k(d,e,m),e.checked=n[1],k(d,i,m),k(d,l,m),v(l,s),k(d,o,m),k(d,a,m),f||(c=[$(e,"change",n[30]),$(e,"change",n[31]),we(Oe.call(null,a,"Apply to all screens")),$(a,"click",Ke(be(n[32])))],f=!0)},p(d,m){m[1]&8192&&t!==(t=d[44])&&p(e,"id",t),m[0]&2&&(e.checked=d[1]),m[1]&8192&&r!==(r=d[44])&&p(l,"for",r),m[0]&64&&u!==(u="iconoir-keyframes txt-sm "+(d[6]?"txt-disabled":"link-hint"))&&p(a,"class",u),m[0]&64&&Z(a,"no-pointer-events",d[6])},d(d){d&&(y(e),y(i),y(l),y(o),y(a)),f=!1,me(c)}}}function t2(n){let e,t,i,l,s,r,o;return{c(){e=w("div"),t=w("input"),l=I(),s=w("div"),s.textContent="px",p(t,"id",i=n[44]),p(t,"type","number"),p(t,"min","0"),p(s,"class","addon"),p(e,"class","field-group")},m(a,u){k(a,e,u),v(e,t),n[33](t),ye(t,n[9].fixedFooter),v(e,l),v(e,s),r||(o=$(t,"input",n[34]),r=!0)},p(a,u){u[1]&8192&&i!==(i=a[44])&&p(t,"id",i),u[0]&512&&wt(t.value)!==a[9].fixedFooter&&ye(t,a[9].fixedFooter)},d(a){a&&y(e),n[33](null),r=!1,o()}}}function n2(n){let e,t,i,l,s,r,o,a;return{c(){e=w("input"),i=I(),l=w("label"),s=x("Replace screen"),p(e,"type","file"),p(e,"id",t=n[44]),p(e,"class","hidden"),p(l,"for",r=n[44]),p(l,"class","link-hint txt-sm")},m(u,f){k(u,e,f),k(u,i,f),k(u,l,f),v(l,s),o||(a=$(e,"change",n[35]),o=!0)},p(u,f){f[1]&8192&&t!==(t=u[44])&&p(e,"id",t),f[1]&8192&&r!==(r=u[44])&&p(l,"for",r)},d(u){u&&(y(e),y(i),y(l)),o=!1,a()}}}function i2(n){let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g,b,_,C,L,T,O,S,j,H,D,A,M,Y,G;return i=new Le({props:{class:"form-field required",name:"title",$$slots:{default:[G0,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),r=new Le({props:{class:"form-field form-field-sm",name:"alignment",$$slots:{default:[J0,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),u=new Le({props:{class:"form-field form-field-sm",name:"background",$$slots:{default:[X0,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),d=new Le({props:{class:"form-field form-field-sm form-field-toggle",$$slots:{default:[Q0,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),g=new Le({props:{class:"form-field form-field-sm form-field-sm "+(n[0]?"":"invisible"),name:"fixedHeader",$$slots:{default:[x0,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),C=new Le({props:{class:"form-field form-field-sm form-field-toggle",$$slots:{default:[e2,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),O=new Le({props:{class:"form-field form-field-sm form-field-sm "+(n[1]?"":"invisible"),name:"fixedFooter",$$slots:{default:[t2,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),A=new Le({props:{class:"block",name:"file",$$slots:{default:[n2,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),{c(){e=w("form"),t=w("div"),U(i.$$.fragment),l=I(),s=w("div"),U(r.$$.fragment),o=I(),a=w("div"),U(u.$$.fragment),f=I(),c=w("div"),U(d.$$.fragment),m=I(),h=w("div"),U(g.$$.fragment),b=I(),_=w("div"),U(C.$$.fragment),L=I(),T=w("div"),U(O.$$.fragment),S=I(),j=w("hr"),H=I(),D=w("div"),U(A.$$.fragment),p(t,"class","col-12"),p(s,"class","col-6"),p(a,"class","col-6"),p(c,"class","col-6 flex-align-self-center"),p(h,"class","col-6"),p(_,"class","col-6 flex-align-self-center"),p(T,"class","col-6"),p(D,"class","block"),p(e,"class","grid grid-sm")},m(B,N){k(B,e,N),v(e,t),F(i,t,null),v(e,l),v(e,s),F(r,s,null),v(e,o),v(e,a),F(u,a,null),v(e,f),v(e,c),F(d,c,null),v(e,m),v(e,h),F(g,h,null),v(e,b),v(e,_),F(C,_,null),v(e,L),v(e,T),F(O,T,null),v(e,S),v(e,j),v(e,H),v(e,D),F(A,D,null),n[36](e),M=!0,Y||(G=[$(e,"change",n[13]),$(e,"submit",be(n[14])),$(e,"click",Ke(n[19]))],Y=!0)},p(B,N){const V={};N[0]&512|N[1]&270336&&(V.$$scope={dirty:N,ctx:B}),i.$set(V);const ee={};N[0]&576|N[1]&262144&&(ee.$$scope={dirty:N,ctx:B}),r.$set(ee);const J={};N[0]&576|N[1]&270336&&(J.$$scope={dirty:N,ctx:B}),u.$set(J);const R={};N[0]&593|N[1]&270336&&(R.$$scope={dirty:N,ctx:B}),d.$set(R);const ce={};N[0]&1&&(ce.class="form-field form-field-sm form-field-sm "+(B[0]?"":"invisible")),N[0]&528|N[1]&270336&&(ce.$$scope={dirty:N,ctx:B}),g.$set(ce);const oe={};N[0]&610|N[1]&270336&&(oe.$$scope={dirty:N,ctx:B}),C.$set(oe);const pe={};N[0]&2&&(pe.class="form-field form-field-sm form-field-sm "+(B[1]?"":"invisible")),N[0]&544|N[1]&270336&&(pe.$$scope={dirty:N,ctx:B}),O.$set(pe);const Ee={};N[0]&768|N[1]&270336&&(Ee.$$scope={dirty:N,ctx:B}),A.$set(Ee)},i(B){M||(E(i.$$.fragment,B),E(r.$$.fragment,B),E(u.$$.fragment,B),E(d.$$.fragment,B),E(g.$$.fragment,B),E(C.$$.fragment,B),E(O.$$.fragment,B),E(A.$$.fragment,B),M=!0)},o(B){P(i.$$.fragment,B),P(r.$$.fragment,B),P(u.$$.fragment,B),P(d.$$.fragment,B),P(g.$$.fragment,B),P(C.$$.fragment,B),P(O.$$.fragment,B),P(A.$$.fragment,B),M=!1},d(B){B&&y(e),q(i),q(r),q(u),q(d),q(g),q(C),q(O),q(A),n[36](null),Y=!1,me(G)}}}function l2(n){let e,t,i,l,s,r,o,a;function u(h,g){return h[6]?K0:Y0}let f=u(n),c=f(n);function d(h){n[38](h)}let m={class:"screen-settings",focusHide:!n[8],$$slots:{default:[i2]},$$scope:{ctx:n}};return n[7]!==void 0&&(m.active=n[7]),i=new Nt({props:m}),n[37](i),le.push(()=>De(i,"active",d)),i.$on("show",n[11]),i.$on("hide",n[12]),{c(){e=w("div"),c.c(),t=I(),U(i.$$.fragment),p(e,"tabindex","0"),p(e,"class","btn btn-circle btn-hint txt-hint btn-transparent btn-screen-settings")},m(h,g){k(h,e,g),c.m(e,null),v(e,t),F(i,e,null),r=!0,o||(a=we(s=Oe.call(null,e,n[7]?void 0:{position:"top",text:"Screen settings"})),o=!0)},p(h,g){f!==(f=u(h))&&(c.d(1),c=f(h),c&&(c.c(),c.m(e,t)));const b={};g[0]&256&&(b.focusHide=!h[8]),g[0]&891|g[1]&262144&&(b.$$scope={dirty:g,ctx:h}),!l&&g[0]&128&&(l=!0,b.active=h[7],Ae(()=>l=!1)),i.$set(b),s&&et(s.update)&&g[0]&128&&s.update.call(null,h[7]?void 0:{position:"top",text:"Screen settings"})},i(h){r||(E(i.$$.fragment,h),r=!0)},o(h){P(i.$$.fragment,h),r=!1},d(h){h&&y(e),c.d(),n[37](null),q(i),o=!1,a()}}}function s2(n,e,t){let i,l,s,r;Q(n,pt,ie=>t(41,l=ie)),Q(n,Je,ie=>t(9,s=ie)),Q(n,ql,ie=>t(18,r=ie));const o=ft(),a={left:"Left",center:"Center",right:"Right"};let u,f,c,d,m=!1,h=!1,g=!1,b=!1,_=!1,C;function L(){u==null||u.show()}function T(){u==null||u.hide()}j();function O(){Zt({}),t(8,_=!1),j()}function S(){(i||s.id&&f&&!f.reportValidity())&&L()}function j(){t(0,g=s.fixedHeader>0),t(1,b=s.fixedFooter>0)}function H(){clearTimeout(C),C=setTimeout(D,100)}async function D(){if(f!=null&&f.reportValidity()){t(6,m=!0);try{const ie=await z.collection("screens").update(s.id,s);Ln(ie),o("save",ie),t(6,m=!1)}catch(ie){L(),ie!=null&&ie.isAbort||(t(6,m=!1),z.error(ie))}}}async function A(ie,Ue){t(6,m=!0);const kt={};kt[ie]=Ue;try{const ze=[];for(let ct of l)ze.push(z.collection("screens").update(ct.id,kt,{requestKey:"bulk_update_prop_"+ie+ct.id}));await Promise.all(ze).then(ct=>{for(let Dt of ct)Ln(Dt)}),ht("Successfully bulk applied the screen setting."),t(6,m=!1)}catch(ze){ze!=null&&ze.isAbort||(t(6,m=!1),z.error(ze))}}function M(ie){We.call(this,n,ie)}function Y(){s.title=this.value,Je.set(s)}const G=()=>{A("alignment",s.alignment)},B=ie=>{ve(Je,s.alignment=ie,s),D()},N=()=>{A("background",s.background)};function V(){s.background=this.value,Je.set(s)}function ee(){g=this.checked,t(0,g)}const J=ie=>{ie.target.checked&&ie.stopPropagation(),c==null||c.select()},R=()=>A("fixedHeader",s.fixedHeader);function ce(ie){le[ie?"unshift":"push"](()=>{c=ie,t(4,c)})}function oe(){s.fixedHeader=wt(this.value),Je.set(s)}function pe(){b=this.checked,t(1,b)}const Ee=ie=>{ie.target.checked&&ie.stopPropagation(),d==null||d.select()},tt=()=>A("fixedFooter",s.fixedFooter);function se(ie){le[ie?"unshift":"push"](()=>{d=ie,t(5,d)})}function ge(){s.fixedFooter=wt(this.value),Je.set(s)}const Fe=ie=>{ie.target.files.length&&(t(8,_=!0),Gs(s,ie.target.files[0]).finally(()=>{t(8,_=!1)}))};function ne(ie){le[ie?"unshift":"push"](()=>{f=ie,t(3,f)})}function de(ie){le[ie?"unshift":"push"](()=>{u=ie,t(2,u)})}function W(ie){h=ie,t(7,h)}return n.$$.update=()=>{n.$$.dirty[0]&262144&&(i=!K.isEmpty(r)),n.$$.dirty[0]&1&&(g||ve(Je,s.fixedHeader=0,s)),n.$$.dirty[0]&2&&(b||ve(Je,s.fixedFooter=0,s))},[g,b,u,f,c,d,m,h,_,s,a,O,S,H,D,A,L,T,r,M,Y,G,B,N,V,ee,J,R,ce,oe,pe,Ee,tt,se,ge,Fe,ne,de,W]}class r2 extends Te{constructor(e){super(),Se(this,e,s2,l2,_e,{show:16,hide:17},null,[-1,-1])}get show(){return this.$$.ctx[16]}get hide(){return this.$$.ctx[17]}}function Eu(n,e,t){var s;const i=n.slice();i[18]=e[t],i[20]=e,i[21]=t;const l=(s=i[4].filter(function(...o){return n[14](i[18],...o)}))==null?void 0:s.length;return i[19]=l,i}function o2(n){let e,t,i,l,s,r,o,a;function u(...f){return n[10](n[18],...f)}return{c(){var f;e=w("input"),l=I(),s=w("label"),p(e,"type","checkbox"),p(e,"id",t=n[22]),e.checked=i=(f=n[18].screens)==null?void 0:f.includes(n[1].id),p(s,"for",r=n[22])},m(f,c){k(f,e,c),k(f,l,c),k(f,s,c),o||(a=$(e,"change",u),o=!0)},p(f,c){var d;n=f,c&4194304&&t!==(t=n[22])&&p(e,"id",t),c&6&&i!==(i=(d=n[18].screens)==null?void 0:d.includes(n[1].id))&&(e.checked=i),c&4194304&&r!==(r=n[22])&&p(s,"for",r)},d(f){f&&(y(e),y(l),y(s)),o=!1,a()}}}function Lu(n,e){let t,i,l,s,r=e[18].title+"",o,a,u,f,c=e[19]+"",d,m,h,g,b,_;i=new Le({props:{class:"form-field form-field-toggle form-field-auto m-0",$$slots:{default:[o2,({uniqueId:O})=>({22:O}),({uniqueId:O})=>O?4194304:0]},$$scope:{ctx:e}}});function C(...O){return e[11](e[18],...O)}function L(...O){return e[12](e[18],e[20],e[21],...O)}function T(){return e[13](e[18])}return{key:n,first:null,c(){t=w("div"),U(i.$$.fragment),l=I(),s=w("span"),o=x(r),u=I(),f=w("code"),d=x(c),m=I(),h=w("button"),h.innerHTML='<i class="iconoir-trash txt-xs"></i>',p(s,"class","template-title"),p(s,"contenteditable","true"),p(s,"data-placeholder",a=e[18].title),p(s,"title","Edit name"),p(f,"class","txt-hint"),p(h,"type","button"),p(h,"class","btn btn-circle btn-sm btn-danger btn-transparent m-l-auto link-fade delete-btn svelte-1ysnxpb"),p(t,"class","dropdown-item"),this.first=t},m(O,S){k(O,t,S),F(i,t,null),v(t,l),v(t,s),v(s,o),v(t,u),v(t,f),v(f,d),v(t,m),v(t,h),g=!0,b||(_=[$(s,"blur",C),$(s,"keydown",f2),$(s,"input",L),we(Oe.call(null,f,"Total hotspots")),$(h,"click",be(T)),$(t,"click",Ke(e[9]))],b=!0)},p(O,S){e=O;const j={};S&12582918&&(j.$$scope={dirty:S,ctx:e}),i.$set(j),(!g||S&4)&&r!==(r=e[18].title+"")&&Sf(o,r),(!g||S&4&&a!==(a=e[18].title))&&p(s,"data-placeholder",a),(!g||S&20)&&c!==(c=e[19]+"")&&ke(d,c)},i(O){g||(E(i.$$.fragment,O),g=!0)},o(O){P(i.$$.fragment,O),g=!1},d(O){O&&y(t),q(i),b=!1,me(_)}}}function a2(n){let e=[],t=new Map,i,l,s,r,o,a,u=Ie(n[2]);const f=c=>c[18].id;for(let c=0;c<u.length;c+=1){let d=Eu(n,u,c),m=f(d);t.set(m,e[c]=Lu(m,d))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();i=I(),l=w("div"),s=w("button"),s.innerHTML='<i class="iconoir-plus"></i> <span class="txt">New hotspot template</span>',p(s,"type","button"),p(s,"class","btn btn-block btn-sm btn-success btn-semitransparent"),p(l,"class","block p-5"),Z(l,"m-t-5",n[2].length)},m(c,d){for(let m=0;m<e.length;m+=1)e[m]&&e[m].m(c,d);k(c,i,d),k(c,l,d),v(l,s),r=!0,o||(a=$(s,"click",n[8]),o=!0)},p(c,d){d&4194550&&(u=Ie(c[2]),ae(),e=yt(e,d,f,1,c,u,t,i.parentNode,It,Lu,i,Eu),ue()),(!r||d&4)&&Z(l,"m-t-5",c[2].length)},i(c){if(!r){for(let d=0;d<u.length;d+=1)E(e[d]);r=!0}},o(c){for(let d=0;d<e.length;d+=1)P(e[d]);r=!1},d(c){c&&(y(i),y(l));for(let d=0;d<e.length;d+=1)e[d].d(c);o=!1,a()}}}function u2(n){let e,t,i=n[3].length+"",l,s,r=n[3].length==1?"template":"templates",o,a,u,f,c,d;return c=new Nt({props:{class:"dropdown templates-dropdown dropdown-upside",focusHide:!1,disableHide:n[0],$$slots:{default:[a2]},$$scope:{ctx:n}}}),{c(){e=w("div"),t=w("strong"),l=x(i),s=x(" Applied hotspot "),o=x(r),a=I(),u=w("i"),f=I(),U(c.$$.fragment),p(u,"class","iconoir-nav-arrow-up"),p(e,"tabindex","0"),p(e,"type","button"),p(e,"class","btn btn-sm btn-hint txt-hint btn-transparent entrance-right")},m(m,h){k(m,e,h),v(e,t),v(t,l),v(e,s),v(e,o),v(e,a),v(e,u),v(e,f),F(c,e,null),d=!0},p(m,[h]){(!d||h&8)&&i!==(i=m[3].length+"")&&ke(l,i),(!d||h&8)&&r!==(r=m[3].length==1?"template":"templates")&&ke(o,r);const g={};h&1&&(g.disableHide=m[0]),h&8388630&&(g.$$scope={dirty:h,ctx:m}),c.$set(g)},i(m){d||(E(c.$$.fragment,m),d=!0)},o(m){P(c.$$.fragment,m),d=!1},d(m){m&&y(e),q(c)}}}const f2=n=>{n.code==="Enter"&&(n.preventDefault(),n.target.blur())};function c2(n,e,t){let i,l,s,r;Q(n,Je,O=>t(1,i=O)),Q(n,un,O=>t(2,l=O)),Q(n,v0,O=>t(3,s=O)),Q(n,bn,O=>t(4,r=O));const o=ft();let a=!1,u=null;function f(O){clearTimeout(u),u=setTimeout(()=>{c(O)},100)}async function c(O){if(O!=null&&O.id){Ri(O);try{O=await z.collection("hotspotTemplates").update(O.id,O),o("save",O)}catch(S){S.isAbort||z.error(S)}}}function d(O){if(a||!(O!=null&&O.id))return;let S=`Do you really want to delete template "${O.title}" and all of its hotspots?`;t(0,a=!0),Et(S,()=>m(O),()=>{setTimeout(()=>{t(0,a=!1)},0)})}async function m(O){if(O!=null&&O.id){t(0,a=!0);try{await z.collection("hotspotTemplates").delete(O.id),o("delete",O),_d(O),t(0,a=!1)}catch(S){S.isAbort||(z.error(S),t(0,a=!1))}}}async function h(){let O="Template ",S="";for(let H=1;H<1e3&&(S=O+(l.length+H),!!l.find(D=>D.title==S));H++);let j={id:"auto_"+K.randomString(10),prototype:i.prototype,screens:[i.id],title:S};Ri(j);try{j=await z.collection("hotspotTemplates").create(j),Ri(j),o("create",j)}catch(H){H.isAbort||z.error(H)}}fn(()=>{u&&clearTimeout(u)});function g(O){We.call(this,n,O)}return[a,i,l,s,r,f,c,d,h,g,(O,S)=>{S.target.checked?K.pushUnique(O.screens,i.id):K.removeByValue(O.screens,i.id),c(O)},(O,S)=>{var j;(j=S.target.textContent)!=null&&j.trim()||(S.target.textContent=O.title)},(O,S,j,H)=>{var A;const D=(A=H.target.textContent)==null?void 0:A.trim();D&&D!=O.title&&(ve(un,S[j].title=D,l),f(O))},O=>d(O),(O,S)=>S.hotspotTemplate==O.id]}class d2 extends Te{constructor(e){super(),Se(this,e,c2,u2,_e,{})}}function p2(n){let e,t,i,l,s,r,o,a,u,f;return{c(){e=w("input"),i=I(),l=w("label"),s=x("Show hotspots ("),r=x(n[4]),o=x(")"),p(e,"type","checkbox"),p(e,"id",t=n[15]),p(l,"for",a=n[15])},m(c,d){k(c,e,d),n[8](e),e.checked=n[5],k(c,i,d),k(c,l,d),v(l,s),v(l,r),v(l,o),u||(f=$(e,"change",n[9]),u=!0)},p(c,d){d&32768&&t!==(t=c[15])&&p(e,"id",t),d&32&&(e.checked=c[5]),d&16&&ke(r,c[4]),d&32768&&a!==(a=c[15])&&p(l,"for",a)},d(c){c&&(y(e),y(i),y(l)),n[8](null),u=!1,f()}}}function m2(n){let e,t,i,l,s,r,o,a,u,f;return{c(){e=w("input"),i=I(),l=w("label"),s=x("Show notes ("),r=x(n[3]),o=x(")"),p(e,"type","checkbox"),p(e,"id",t=n[15]),p(l,"for",a=n[15])},m(c,d){k(c,e,d),n[11](e),e.checked=n[6],k(c,i,d),k(c,l,d),v(l,s),v(l,r),v(l,o),u||(f=$(e,"change",n[12]),u=!0)},p(c,d){d&32768&&t!==(t=c[15])&&p(e,"id",t),d&64&&(e.checked=c[6]),d&8&&ke(r,c[3]),d&32768&&a!==(a=c[15])&&p(l,"for",a)},d(c){c&&(y(e),y(i),y(l)),n[11](null),u=!1,f()}}}function h2(n){let e,t,i,l,s,r,o,a;return t=new Le({props:{class:"form-field form-field-sm form-field-toggle m-0",$$slots:{default:[p2,({uniqueId:u})=>({15:u}),({uniqueId:u})=>u?32768:0]},$$scope:{ctx:n}}}),s=new Le({props:{class:"form-field form-field-sm form-field-toggle m-0",$$slots:{default:[m2,({uniqueId:u})=>({15:u}),({uniqueId:u})=>u?32768:0]},$$scope:{ctx:n}}}),{c(){e=w("div"),U(t.$$.fragment),i=I(),l=w("div"),U(s.$$.fragment),p(e,"class","dropdown-item"),p(l,"class","dropdown-item")},m(u,f){k(u,e,f),F(t,e,null),k(u,i,f),k(u,l,f),F(s,l,null),r=!0,o||(a=[$(e,"click",Ke(n[10])),$(l,"click",Ke(n[13]))],o=!0)},p(u,f){const c={};f&98354&&(c.$$scope={dirty:f,ctx:u}),t.$set(c);const d={};f&98380&&(d.$$scope={dirty:f,ctx:u}),s.$set(d)},i(u){r||(E(t.$$.fragment,u),E(s.$$.fragment,u),r=!0)},o(u){P(t.$$.fragment,u),P(s.$$.fragment,u),r=!1},d(u){u&&(y(e),y(i),y(l)),q(t),q(s),o=!1,me(a)}}}function _2(n){let e,t,i,l,s,r,o,a,u;function f(d){n[14](d)}let c={class:"dropdown dropdown-upside dropdown-nowrap",$$slots:{default:[h2]},$$scope:{ctx:n}};return n[0]!==void 0&&(c.active=n[0]),l=new Nt({props:c}),le.push(()=>De(l,"active",f)),{c(){e=w("div"),t=w("i"),i=I(),U(l.$$.fragment),p(t,"class","iconoir-switch-on"),p(e,"tabindex","0"),p(e,"type","button"),p(e,"class","btn btn-circle btn-hint txt-hint btn-transparent entrance-right")},m(d,m){k(d,e,m),v(e,t),v(e,i),F(l,e,null),o=!0,a||(u=we(r=Oe.call(null,e,n[0]?void 0:{position:"top",text:"Preview options"})),a=!0)},p(d,[m]){const h={};m&65662&&(h.$$scope={dirty:m,ctx:d}),!s&&m&1&&(s=!0,h.active=d[0],Ae(()=>s=!1)),l.$set(h),r&&et(r.update)&&m&1&&r.update.call(null,d[0]?void 0:{position:"top",text:"Preview options"})},i(d){o||(E(l.$$.fragment,d),o=!0)},o(d){P(l.$$.fragment,d),o=!1},d(d){d&&y(e),q(l),a=!1,u()}}}function g2(n,e,t){let i,l,s,r,o;Q(n,vd,C=>t(7,s=C)),Q(n,Tl,C=>t(5,r=C)),Q(n,Cl,C=>t(6,o=C));let a=!1,u,f;function c(C){le[C?"unshift":"push"](()=>{u=C,t(1,u)})}function d(){r=this.checked,Tl.set(r)}const m=()=>t(1,u.checked^=!0,u);function h(C){le[C?"unshift":"push"](()=>{f=C,t(2,f)})}function g(){o=this.checked,Cl.set(o)}const b=()=>t(2,f.checked^=!0,f);function _(C){a=C,t(0,a)}return n.$$.update=()=>{var C,L;n.$$.dirty&128&&t(4,i=((C=s==null?void 0:s.filter(T=>T.type!=xe.note))==null?void 0:C.length)||0),n.$$.dirty&128&&t(3,l=((L=s==null?void 0:s.filter(T=>T.type==xe.note))==null?void 0:L.length)||0)},[a,u,f,l,i,r,o,s,c,d,m,h,g,b,_]}class Od extends Te{constructor(e){super(),Se(this,e,g2,_2,_e,{})}}function Iu(n,e,t){const i=n.slice();return i[13]=e[t],i[15]=t,i}function os(n){const e=n.slice(),t=e[3].filter(function(...l){return n[11](e[13],...l)}).length||0;return e[16]=t,e}function Pu(n){let e,t,i,l,s,r,o,a,u,f,c,d,m=n[3].length&&ju(n);function h(_,C){return _[5].length?w2:v2}let g=h(n),b=g(n);return{c(){e=w("aside"),t=w("header"),i=w("h6"),i.textContent="Screen comments",l=I(),s=w("button"),s.innerHTML='<i class="iconoir-xmark"></i>',r=I(),m&&m.c(),o=I(),a=w("div"),b.c(),p(s,"type","button"),p(s,"class","btn btn-sm btn-transparent btn-hint btn-circle close-btn"),p(t,"class","sidebar-section sidebar-header"),p(a,"class","sidebar-section sidebar-content"),p(e,"class","screen-preview-sidebar comments-sidebar")},m(_,C){k(_,e,C),v(e,t),v(t,i),v(t,l),v(t,s),v(t,r),m&&m.m(t,null),v(e,o),v(e,a),b.m(a,null),f=!0,c||(d=[we(Oe.call(null,s,{position:"left",text:"Close"})),$(s,"click",be(n[1])),$(e,"introend",K.triggerResize),$(e,"outroend",K.triggerResize)],c=!0)},p(_,C){_[3].length?m?(m.p(_,C),C&8&&E(m,1)):(m=ju(_),m.c(),E(m,1),m.m(t,null)):m&&(ae(),P(m,1,1,()=>{m=null}),ue()),g===(g=h(_))&&b?b.p(_,C):(b.d(1),b=g(_),b&&(b.c(),b.m(a,null)))},i(_){f||(E(m),_&&vt(()=>{f&&(u||(u=ut(e,Ct,{duration:200,axis:"x"},!0)),u.run(1))}),f=!0)},o(_){P(m),_&&(u||(u=ut(e,Ct,{duration:200,axis:"x"},!1)),u.run(0)),f=!1},d(_){_&&y(e),m&&m.d(),b.d(),_&&u&&u.end(),c=!1,me(d)}}}function ju(n){let e,t;return e=new Le({props:{class:"form-field form-field-toggle m-t-xs m-b-5 entrance-top",$$slots:{default:[b2,({uniqueId:i})=>({17:i}),({uniqueId:i})=>i?131072:0]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,l){const s={};l&393236&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function b2(n){let e,t,i,l,s,r,o,a,u,f,c;return{c(){e=w("input"),l=I(),s=w("label"),r=x("Show resolved comments ("),o=x(n[2]),a=x(")"),p(e,"type","checkbox"),p(e,"id",t=n[17]),e.disabled=i=n[2]==0,p(s,"for",u=n[17])},m(d,m){k(d,e,m),e.checked=n[4],k(d,l,m),k(d,s,m),v(s,r),v(s,o),v(s,a),f||(c=$(e,"change",n[10]),f=!0)},p(d,m){m&131072&&t!==(t=d[17])&&p(e,"id",t),m&4&&i!==(i=d[2]==0)&&(e.disabled=i),m&16&&(e.checked=d[4]),m&4&&ke(o,d[2]),m&131072&&u!==(u=d[17])&&p(s,"for",u)},d(d){d&&(y(e),y(l),y(s)),f=!1,c()}}}function w2(n){let e,t=[],i=new Map,l=Ie(n[3]);const s=r=>r[13].id;for(let r=0;r<l.length;r+=1){let o=Iu(n,l,r),a=s(o);i.set(a,t[r]=Mu(a,o))}return{c(){e=w("div");for(let r=0;r<t.length;r+=1)t[r].c();p(e,"class","flex-list primary-comments-list entrance-top")},m(r,o){k(r,e,o);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(r,o){o&88&&(l=Ie(r[3]),t=yt(t,o,s,1,r,l,i,e,Af,Mu,null,Iu))},d(r){r&&y(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function v2(n){let e,t,i,l;function s(a,u){return!a[4]&&a[2]>0?k2:y2}let r=s(n),o=r(n);return{c(){e=w("div"),t=w("div"),t.innerHTML='<i class="iconoir-message-alert"></i>',i=I(),l=w("div"),o.c(),p(t,"class","icon"),p(l,"class","title txt-disabled"),p(e,"class","placeholder-block entrance-top")},m(a,u){k(a,e,u),v(e,t),v(e,i),v(e,l),o.m(l,null)},p(a,u){r!==(r=s(a))&&(o.d(1),o=r(a),o&&(o.c(),o.m(l,null)))},d(a){a&&y(e),o.d()}}}function Nu(n){let e,t,i,l,s=n[15]+1+"",r,o,a,u=K.getCommentAuthor(n[13])+"",f,c,d,m,h=n[13].message+"",g,b,_,C,L=K.relativeDate(n[13].created)+"",T,O,S,j,H,D=n[13].resolved&&Au(),A=n[16]>0&&Du(n);function M(){return n[12](n[13])}return{c(){var Y;e=w("button"),t=w("div"),i=w("strong"),l=x("#"),r=x(s),o=I(),a=w("span"),f=x(u),c=I(),D&&D.c(),d=I(),m=w("div"),g=x(h),b=I(),_=w("div"),C=w("span"),T=x(L),O=I(),A&&A.c(),S=I(),p(i,"class","meta-item number"),p(a,"class","meta-item txt-ellipsis"),p(t,"class","meta"),p(m,"class","content"),p(C,"class","meta-item date"),p(_,"class","meta"),p(e,"type","button"),p(e,"class","bubble primary-comment"),Z(e,"active",n[13].id==((Y=n[6])==null?void 0:Y.id))},m(Y,G){k(Y,e,G),v(e,t),v(t,i),v(i,l),v(i,r),v(t,o),v(t,a),v(a,f),v(t,c),D&&D.m(t,null),v(e,d),v(e,m),v(m,g),v(e,b),v(e,_),v(_,C),v(C,T),v(_,O),A&&A.m(_,null),v(e,S),j||(H=$(e,"click",be(M)),j=!0)},p(Y,G){var B;n=Y,G&8&&s!==(s=n[15]+1+"")&&ke(r,s),G&8&&u!==(u=K.getCommentAuthor(n[13])+"")&&ke(f,u),n[13].resolved?D||(D=Au(),D.c(),D.m(t,null)):D&&(D.d(1),D=null),G&8&&h!==(h=n[13].message+"")&&ke(g,h),G&8&&L!==(L=K.relativeDate(n[13].created)+"")&&ke(T,L),n[16]>0?A?A.p(n,G):(A=Du(n),A.c(),A.m(_,null)):A&&(A.d(1),A=null),G&72&&Z(e,"active",n[13].id==((B=n[6])==null?void 0:B.id))},d(Y){Y&&y(e),D&&D.d(),A&&A.d(),j=!1,H()}}}function Au(n){let e,t,i;return{c(){e=w("span"),e.innerHTML='<i class="iconoir-double-check txt-success"></i>',p(e,"class","meta-item resolved m-l-auto")},m(l,s){k(l,e,s),t||(i=we(Oe.call(null,e,"Resolved")),t=!0)},d(l){l&&y(e),t=!1,i()}}}function Du(n){let e,t=n[16]+"",i,l,s=n[16]==1?"reply":"replies",r;return{c(){e=w("span"),i=x(t),l=I(),r=x(s),p(e,"class","meta-item m-l-auto")},m(o,a){k(o,e,a),v(e,i),v(e,l),v(e,r)},p(o,a){a&8&&t!==(t=o[16]+"")&&ke(i,t),a&8&&s!==(s=o[16]==1?"reply":"replies")&&ke(r,s)},d(o){o&&y(e)}}}function Mu(n,e){let t,i,l=(e[4]||!e[13].resolved)&&Nu(os(e));return{key:n,first:null,c(){t=Ne(),l&&l.c(),i=Ne(),this.first=t},m(s,r){k(s,t,r),l&&l.m(s,r),k(s,i,r)},p(s,r){e=s,e[4]||!e[13].resolved?l?l.p(os(e),r):(l=Nu(os(e)),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(s){s&&(y(t),y(i)),l&&l.d(s)}}}function y2(n){let e;return{c(){e=x("No comments found.")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function k2(n){let e;return{c(){e=x("All comments have been resolved.")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function S2(n){let e,t,i=n[0]&&Pu(n);return{c(){i&&i.c(),e=Ne()},m(l,s){i&&i.m(l,s),k(l,e,s),t=!0},p(l,[s]){l[0]?i?(i.p(l,s),s&1&&E(i,1)):(i=Pu(l),i.c(),E(i,1),i.m(e.parentNode,e)):i&&(ae(),P(i,1,1,()=>{i=null}),ue())},i(l){t||(E(i),t=!0)},o(l){P(i),t=!1},d(l){l&&y(e),i&&i.d(l)}}}function T2(n,e,t){let i,l,s,r,o,a;Q(n,Hi,b=>t(4,r=b)),Q(n,dd,b=>t(9,o=b)),Q(n,qt,b=>t(6,a=b));let{active:u=!1}=e;function f(){u?d():c()}function c(){t(0,u=!0)}function d(){t(0,u=!1)}function m(){r=this.checked,Hi.set(r)}const h=(b,_)=>_.replyTo==b.id,g=b=>{ve(qt,a=b,a)};return n.$$set=b=>{"active"in b&&t(0,u=b.active)},n.$$.update=()=>{n.$$.dirty&512&&t(3,i=o==null?void 0:o.filter(b=>!!b.id)),n.$$.dirty&8&&t(2,l=i.filter(b=>b.resolved).length),n.$$.dirty&4&&l==0&&ve(Hi,r=!1,r),n.$$.dirty&24&&t(5,s=r?i:i.filter(b=>!b.resolved))},[u,d,l,i,r,s,a,f,c,o,m,h,g]}class Ed extends Te{constructor(e){super(),Se(this,e,T2,S2,_e,{active:0,toggle:7,show:8,hide:1})}get toggle(){return this.$$.ctx[7]}get show(){return this.$$.ctx[8]}get hide(){return this.$$.ctx[1]}}function C2(n){let e;const t=n[15].default,i=lt(t,n,n[19],null);return{c(){i&&i.c()},m(l,s){i&&i.m(l,s),e=!0},p(l,s){i&&i.p&&(!e||s&524288)&&rt(i,t,l,l[19],e?st(t,l[19],s,null):ot(l[19]),null)},i(l){e||(E(i,l),e=!0)},o(l){P(i,l),e=!1},d(l){i&&i.d(l)}}}function O2(n){let e,t,i,l,s,r;const o=[{class:"popover "+n[1]},{trigger:n[5]},n[8]];function a(f){n[17](f)}let u={$$slots:{default:[C2]},$$scope:{ctx:n}};for(let f=0;f<o.length;f+=1)u=Me(u,o[f]);return n[0]!==void 0&&(u.active=n[0]),t=new Nt({props:u}),n[16](t),le.push(()=>De(t,"active",a)),t.$on("show",n[6]),t.$on("hide",n[7]),{c(){e=w("div"),U(t.$$.fragment),p(e,"class","popover-container"),Z(e,"active",n[0])},m(f,c){k(f,e,c),F(t,e,null),n[18](e),l=!0,s||(r=[$(window,"resize",n[2]),$(window,"mainScreenLoaded",n[2])],s=!0)},p(f,[c]){const d=c&290?_t(o,[c&2&&{class:"popover "+f[1]},c&32&&{trigger:f[5]},c&256&&Lt(f[8])]):{};c&524288&&(d.$$scope={dirty:c,ctx:f}),!i&&c&1&&(i=!0,d.active=f[0],Ae(()=>i=!1)),t.$set(d),(!l||c&1)&&Z(e,"active",f[0])},i(f){l||(E(t.$$.fragment,f),l=!0)},o(f){P(t.$$.fragment,f),l=!1},d(f){f&&y(e),n[16](null),q(t),n[18](null),s=!1,me(r)}}}let Mn;function E2(){return Mn=Mn||document.querySelector(".popovers"),Mn||(Mn=document.createElement("div"),Mn.classList.add("popovers"),document.body.appendChild(Mn)),Mn}function L2(n,e,t){const i=["active","vPadding","hPadding","class","show","hide","forceHide","throttleRefreshPosition","refreshPosition"];let l=at(e,i),{$$slots:s={},$$scope:r}=e;const o=ft();let{active:a=!1}=e,{vPadding:u=0}=e,{hPadding:f=0}=e,{class:c=void 0}=e,d,m,h,g,b,_;async function C(N,V=null){t(5,h=N),g=V||document.body,m==null||m.show()}function L(){m==null||m.hide()}function T(){m==null||m.forceHide()}function O(N=100){_||(_=setTimeout(()=>{_=null,S()},N))}function S(){if(!a||!h||!d)return;const N=d.offsetWidth,V=d.offsetHeight,ee=g||document.body,J=ee.clientWidth,R=ee.clientHeight;let ce=0,oe=0;const pe=h.getBoundingClientRect();ce=pe.top+u,J-(pe.left+pe.width+f)>=N?oe=pe.left+pe.width+f:pe.left-f>=N?oe=pe.left-f-N:(oe=pe.left+pe.width/2-N/2-f,ce=pe.top+pe.height+u),oe+N>J&&(oe=J-N),oe=oe>=0?oe:0,ce+V>R&&(ce=R-V),ce=ce>=0?ce:0,t(3,d.style.top=(ce<<0)+"px",d),t(3,d.style.left=(oe<<0)+"px",d)}async function j(){M(),await St(),S(),D(),o("show")}function H(){M(),A(),o("hide")}function D(){A(),!(!h||!d)&&(b=new MutationObserver(()=>{O(50)}),b.observe(h,{attributeFilter:["width","height","style","display"],childList:!0,subtree:!0}),b.observe(d,{attributeFilter:["width","height"],childList:!0,subtree:!0}))}function A(){b==null||b.disconnect(),b=null}function M(){clearTimeout(_),_=null}_n(()=>{E2().appendChild(d),S();const N=()=>{O(100)};return document.body.addEventListener("scroll",N,!0),()=>{document.body.removeEventListener("scroll",N,!0),M(),A(),d==null||d.remove()}});function Y(N){le[N?"unshift":"push"](()=>{m=N,t(4,m)})}function G(N){a=N,t(0,a)}function B(N){le[N?"unshift":"push"](()=>{d=N,t(3,d)})}return n.$$set=N=>{e=Me(Me({},e),Bt(N)),t(8,l=at(e,i)),"active"in N&&t(0,a=N.active),"vPadding"in N&&t(9,u=N.vPadding),"hPadding"in N&&t(10,f=N.hPadding),"class"in N&&t(1,c=N.class),"$$scope"in N&&t(19,r=N.$$scope)},[a,c,S,d,m,h,j,H,l,u,f,C,L,T,O,s,Y,G,B,r]}class Ld extends Te{constructor(e){super(),Se(this,e,L2,O2,_e,{active:0,vPadding:9,hPadding:10,class:1,show:11,hide:12,forceHide:13,throttleRefreshPosition:14,refreshPosition:2})}get show(){return this.$$.ctx[11]}get hide(){return this.$$.ctx[12]}get forceHide(){return this.$$.ctx[13]}get throttleRefreshPosition(){return this.$$.ctx[14]}get refreshPosition(){return this.$$.ctx[2]}}function Hu(n){let e,t,i,l,s;return l=new Nt({props:{class:"dropdown dropdown-sm comment-dropdown",$$slots:{default:[I2]},$$scope:{ctx:n}}}),{c(){e=w("button"),t=w("i"),i=I(),U(l.$$.fragment),p(t,"class","iconoir-more-horiz"),p(e,"type","button"),p(e,"class","btn btn-transparent btn-hint btn-xs btn-options"),p(e,"aria-label","Comment options")},m(r,o){k(r,e,o),v(e,t),v(e,i),F(l,e,null),s=!0},p(r,o){const a={};o&257&&(a.$$scope={dirty:o,ctx:r}),l.$set(a)},i(r){s||(E(l.$$.fragment,r),s=!0)},o(r){P(l.$$.fragment,r),s=!1},d(r){r&&y(e),q(l)}}}function I2(n){let e,t,i;return{c(){e=w("div"),e.innerHTML='<i class="iconoir-trash"></i> <span class="txt">Delete</span>',p(e,"class","dropdown-item link-danger")},m(l,s){k(l,e,s),t||(i=$(e,"click",n[6]),t=!0)},p:X,d(l){l&&y(e),t=!1,i()}}}function P2(n){var A;let e,t,i,l,s,r,o,a=K.getCommentAuthor(n[0])+"",u,f,c,d=K.relativeDate(n[0].created)+"",m,h,g,b,_,C=n[0].message+"",L,T,O,S;t=new Xi({props:{user:(A=n[0].expand)==null?void 0:A.user,class:"avatar"}});let j=!n[1]&&Hu(n);const H=n[5].default,D=lt(H,n,n[8],null);return{c(){e=w("div"),U(t.$$.fragment),i=I(),l=w("div"),s=w("div"),r=w("div"),o=w("small"),u=x(a),f=I(),c=w("small"),m=x(d),h=I(),j&&j.c(),g=I(),b=w("div"),_=w("div"),L=x(C),T=I(),D&&D.c(),p(o,"class","name"),p(c,"class","txt-xs txt-hint date"),p(r,"class","inline-flex flex-row-gap-0"),p(s,"class","row"),p(_,"class","message"),p(b,"class","row"),p(l,"class","content"),p(e,"class",O="list-item "+(n[0].replyTo?"reply":"primary")),Z(e,"unread",!1)},m(M,Y){k(M,e,Y),F(t,e,null),v(e,i),v(e,l),v(l,s),v(s,r),v(r,o),v(o,u),v(r,f),v(r,c),v(c,m),v(s,h),j&&j.m(s,null),v(l,g),v(l,b),v(b,_),v(_,L),v(l,T),D&&D.m(l,null),n[7](e),S=!0},p(M,[Y]){var B;const G={};Y&1&&(G.user=(B=M[0].expand)==null?void 0:B.user),t.$set(G),(!S||Y&1)&&a!==(a=K.getCommentAuthor(M[0])+"")&&ke(u,a),(!S||Y&1)&&d!==(d=K.relativeDate(M[0].created)+"")&&ke(m,d),M[1]?j&&(ae(),P(j,1,1,()=>{j=null}),ue()):j?(j.p(M,Y),Y&2&&E(j,1)):(j=Hu(M),j.c(),E(j,1),j.m(s,null)),(!S||Y&1)&&C!==(C=M[0].message+"")&&ke(L,C),D&&D.p&&(!S||Y&256)&&rt(D,H,M,M[8],S?st(H,M[8],Y,null):ot(M[8]),null),(!S||Y&1&&O!==(O="list-item "+(M[0].replyTo?"reply":"primary")))&&p(e,"class",O),(!S||Y&1)&&Z(e,"unread",!1)},i(M){S||(E(t.$$.fragment,M),E(j),E(D,M),S=!0)},o(M){P(t.$$.fragment,M),P(j),P(D,M),S=!1},d(M){M&&y(e),q(t),j&&j.d(),D&&D.d(M),n[7](null)}}}function j2(n,e,t){let i,l;Q(n,Hn,b=>t(9,i=b)),Q(n,qt,b=>t(4,l=b));let{$$slots:s={},$$scope:r}=e;const o=ft();let{comment:a}=e,{readonly:u=!1}=e,f;async function c(){await St(),f==null||f.scrollIntoView({block:"nearest",inline:"nearest"})}function d(){if(!(a!=null&&a.id)||u)return;let b="Do you really want to delete the selected comment?";a.replyTo||(b="Do you really want to delete the selected comment and all of its replies?"),ve(Hn,i=!0,i),Et(b,async()=>m(),()=>{setTimeout(()=>{ve(Hn,i=!1,i)},0)})}async function m(){if(!(!(a!=null&&a.id)||u)){ve(Hn,i=!0,i);try{await z.collection("comments").delete(a.id),o("delete",a),cd(a)}catch(b){b.isAbort||z.error(b)}ve(Hn,i=!1,i)}}const h=()=>d();function g(b){le[b?"unshift":"push"](()=>{f=b,t(2,f)})}return n.$$set=b=>{"comment"in b&&t(0,a=b.comment),"readonly"in b&&t(1,u=b.readonly),"$$scope"in b&&t(8,r=b.$$scope)},n.$$.update=()=>{n.$$.dirty&21&&f&&(l==null?void 0:l.id)==a.id&&c()},[a,u,f,d,l,s,h,g,r]}class N2 extends Te{constructor(e){super(),Se(this,e,j2,P2,_e,{comment:0,readonly:1})}}function $u(n,e,t){const i=n.slice();return i[22]=e[t],i[23]=e,i[24]=t,i}function Ru(n){let e,t=Ie(n[3]),i=[];for(let l=0;l<t.length;l+=1)i[l]=Fu($u(n,t,l));return{c(){e=w("div");for(let l=0;l<i.length;l+=1)i[l].c();p(e,"class","dropdown dropdown-sm collaborators-dropdown")},m(l,s){k(l,e,s);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(l,s){if(s&30){t=Ie(l[3]);let r;for(r=0;r<t.length;r+=1){const o=$u(l,t,r);i[r]?i[r].p(o,s):(i[r]=Fu(o),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(l){l&&y(e),xt(i,l)}}}function Fu(n){let e,t,i=n[22].label+"",l,s,r=n[24],o,a;const u=()=>n[10](e,r),f=()=>n[10](null,r);function c(){return n[11](n[24])}return{c(){e=w("div"),t=x("+"),l=x(i),s=I(),p(e,"class","dropdown-item"),Z(e,"focused",n[24]==n[1])},m(d,m){k(d,e,m),v(e,t),v(e,l),v(e,s),u(),o||(a=$(e,"click",be(c)),o=!0)},p(d,m){n=d,m&8&&i!==(i=n[22].label+"")&&ke(l,i),r!==n[24]&&(f(),r=n[24],u()),m&2&&Z(e,"focused",n[24]==n[1])},d(d){d&&y(e),f(),o=!1,a()}}}function A2(n){let e,t=n[0]&&Ru(n);return{c(){t&&t.c(),e=Ne()},m(i,l){t&&t.m(i,l),k(i,e,l)},p(i,[l]){i[0]?t?t.p(i,l):(t=Ru(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:X,o:X,d(i){i&&y(e),t&&t.d(i)}}}function D2(n,e,t){const i=ft();let{input:l}=e,{list:s=[]}=e,{triggers:r=["+","@"]}=e,o=!1,a=0,u=[],f=[];function c(){o||(t(0,o=!0),t(1,a=0),i("show"))}function d(){o&&(t(0,o=!1),i("hide"))}function m(D){D=typeof D<"u"?D:a;let A=_();if(!A.word||!l||!f[D])return;let M=l.value;t(5,l.value=M.substring(0,A.start)+r[0]+f[D].value+M.substring(A.end+1)+" ",l),l.dispatchEvent(new Event("input")),l.focus(),d()}function h(){a<=0?t(1,a=f.length-1):t(1,a--,a),b()}function g(){a>=f.length-1?t(1,a=0):t(1,a++,a),b()}function b(){var D;(D=u[a])==null||D.scrollIntoView({block:"nearest"})}function _(){const D=typeof l.selectionStart<"u"?l.selectionStart:l.value.length;return K.getWordInfoAt(l.value,D-1)}function C(){var A;const D=_();d(),D.word&&r.indexOf((A=D.word)==null?void 0:A[0])>=0&&(t(3,f=L(D.word.substring(1))),f.length&&c())}function L(D){if(D=(D||"").toLowerCase().replace(/\s+/g,""),!D)return s;const A=[];for(let M=s.length-1;M>=0;M--)(s[M].value+s[M].label||"").toLowerCase().replace(/\s+/g,"").indexOf(D)>=0&&A.push(s[M]);return A}function T(D){if(!o)return;let A=D.code;A=="Enter"?(D.preventDefault(),m()):A=="ArrowUp"?(D.preventDefault(),h()):A=="ArrowDown"&&(D.preventDefault(),g())}function O(){l==null||l.removeEventListener("input",C),l==null||l.removeEventListener("keydown",T)}function S(){O(),l.addEventListener("input",C),l.addEventListener("keydown",T)}fn(()=>{O()});function j(D,A){le[D?"unshift":"push"](()=>{u[A]=D,t(2,u)})}const H=D=>m(D);return n.$$set=D=>{"input"in D&&t(5,l=D.input),"list"in D&&t(6,s=D.list),"triggers"in D&&t(7,r=D.triggers)},n.$$.update=()=>{n.$$.dirty&32&&l&&S()},[o,a,u,f,m,l,s,r,c,d,j,H]}class M2 extends Te{constructor(e){super(),Se(this,e,D2,A2,_e,{input:5,list:6,triggers:7,show:8,hide:9})}get show(){return this.$$.ctx[8]}get hide(){return this.$$.ctx[9]}}function qu(n,e,t){const i=n.slice();return i[42]=e[t][0],i[43]=e[t][1],i}function Uu(n,e,t){const i=n.slice();return i[46]=e[t],i}function Wu(n){let e,t;return e=new Le({props:{class:"form-field form-field-toggle form-field-sm resolved-checkbox",$$slots:{default:[H2,({uniqueId:i})=>({41:i}),({uniqueId:i})=>[0,i?1024:0]]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,l){const s={};l[0]&16|l[1]&263168&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function H2(n){let e,t,i,l,s,r,o,a,u;return{c(){var f;e=w("input"),l=I(),s=w("label"),r=x("Mark as resolved"),p(e,"type","checkbox"),p(e,"id",t=n[41]),e.checked=i=(f=n[4])==null?void 0:f.resolved,p(s,"for",o=n[41])},m(f,c){k(f,e,c),k(f,l,c),k(f,s,c),v(s,r),a||(u=$(e,"change",n[24]),a=!0)},p(f,c){var d;c[1]&1024&&t!==(t=f[41])&&p(e,"id",t),c[0]&16&&i!==(i=(d=f[4])==null?void 0:d.resolved)&&(e.checked=i),c[1]&1024&&o!==(o=f[41])&&p(s,"for",o)},d(f){f&&(y(e),y(l),y(s)),a=!1,u()}}}function Vu(n){let e,t,i=Ie(n[7]),l=[];for(let r=0;r<i.length;r+=1)l[r]=zu(Uu(n,i,r));const s=r=>P(l[r],1,1,()=>{l[r]=null});return{c(){e=w("div");for(let r=0;r<l.length;r+=1)l[r].c();p(e,"class","list comments-list")},m(r,o){k(r,e,o);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null);t=!0},p(r,o){if(o[0]&136){i=Ie(r[7]);let a;for(a=0;a<i.length;a+=1){const u=Uu(r,i,a);l[a]?(l[a].p(u,o),E(l[a],1)):(l[a]=zu(u),l[a].c(),E(l[a],1),l[a].m(e,null))}for(ae(),a=i.length;a<l.length;a+=1)s(a);ue()}},i(r){if(!t){for(let o=0;o<i.length;o+=1)E(l[o]);t=!0}},o(r){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)P(l[o]);t=!1},d(r){r&&y(e),xt(l,r)}}}function zu(n){let e,t;return e=new N2({props:{readonly:!n[3],comment:n[46]}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,l){const s={};l[0]&8&&(s.readonly=!i[3]),l[0]&128&&(s.comment=i[46]),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function Bu(n){let e,t;return e=new Le({props:{class:"form-field",name:"guestEmail",inlineError:!0,$$slots:{default:[$2,({uniqueId:i})=>({41:i}),({uniqueId:i})=>[0,i?1024:0]]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,l){const s={};l[0]&18|l[1]&263168&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function $2(n){let e,t,i,l,s,r,o,a,u,f;return{c(){var c;e=w("div"),t=w("label"),i=w("i"),s=I(),r=w("input"),p(i,"class","iconoir-mail"),p(t,"class","addon"),p(t,"for",l=n[41]),p(r,"type","email"),p(r,"id",o=n[41]),p(r,"placeholder","Your email"),r.autofocus=a=!n[1]&&!((c=n[4])!=null&&c.id)?!0:null,p(e,"class","field-group")},m(c,d){var m;k(c,e,d),v(e,t),v(t,i),v(e,s),v(e,r),ye(r,n[1]),!n[1]&&!((m=n[4])!=null&&m.id)&&r.focus(),u||(f=$(r,"input",n[25]),u=!0)},p(c,d){var m;d[1]&1024&&l!==(l=c[41])&&p(t,"for",l),d[1]&1024&&o!==(o=c[41])&&p(r,"id",o),d[0]&18&&a!==(a=!c[1]&&!((m=c[4])!=null&&m.id)?!0:null)&&(r.autofocus=a),d[0]&2&&r.value!==c[1]&&ye(r,c[1])},d(c){c&&y(e),u=!1,f()}}}function Zu(n){let e,t=n[43]+"",i,l,s,r;function o(){return n[29](n[43])}return{c(){e=w("button"),i=x(t),l=I(),p(e,"type","button"),p(e,"title",n[42]),p(e,"class","emoji closable")},m(a,u){k(a,e,u),v(e,i),v(e,l),s||(r=$(e,"click",be(o)),s=!0)},p(a,u){n=a},d(a){a&&y(e),s=!1,r()}}}function R2(n){let e,t=Ie(Object.entries(n[11])),i=[];for(let l=0;l<t.length;l+=1)i[l]=Zu(qu(n,t,l));return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=Ne()},m(l,s){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(l,s);k(l,e,s)},p(l,s){if(s[0]&2049){t=Ie(Object.entries(l[11]));let r;for(r=0;r<t.length;r+=1){const o=qu(l,t,r);i[r]?i[r].p(o,s):(i[r]=Zu(o),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(l){l&&y(e),xt(i,l)}}}function F2(n){let e,t,i,l,s,r,o,a,u,f,c,d,m,h;return u=new Nt({props:{class:"dropdown emojis-dropdown",$$slots:{default:[R2]},$$scope:{ctx:n}}}),{c(){var g;e=w("textarea"),l=I(),s=w("div"),r=w("button"),o=w("i"),a=I(),U(u.$$.fragment),f=I(),c=w("button"),c.innerHTML='<i class="iconoir-send"></i>',p(e,"id",t=n[41]),e.autofocus=i=!n[9]&&!((g=n[4])!=null&&g.id)?!0:null,p(e,"placeholder","Write a comment (@ to mention)"),p(o,"class","iconoir-emoji"),p(r,"type","button"),p(r,"class","btn btn-transparent btn-hint btn-sm btn-circle"),r.disabled=n[2],p(c,"type","button"),p(c,"class","btn btn-transparent btn-hint btn-sm btn-circle"),Z(c,"btn-loading",n[2]),p(s,"class","ctrls")},m(g,b){var _;k(g,e,b),n[26](e),ye(e,n[0]),k(g,l,b),k(g,s,b),v(s,r),v(r,o),v(r,a),F(u,r,null),v(s,f),v(s,c),d=!0,!n[9]&&!((_=n[4])!=null&&_.id)&&e.focus(),m||(h=[$(e,"input",n[27]),$(e,"keydown",n[28]),we(Oe.call(null,r,{position:"right",text:"Emojis"})),we(Oe.call(null,c,{position:"right",text:"Send (Ctrl + Enter)"})),$(c,"click",be(n[13]))],m=!0)},p(g,b){var C;(!d||b[1]&1024&&t!==(t=g[41]))&&p(e,"id",t),(!d||b[0]&528&&i!==(i=!g[9]&&!((C=g[4])!=null&&C.id)?!0:null))&&(e.autofocus=i),b[0]&1&&ye(e,g[0]);const _={};b[0]&1|b[1]&262144&&(_.$$scope={dirty:b,ctx:g}),u.$set(_),(!d||b[0]&4)&&(r.disabled=g[2]),(!d||b[0]&4)&&Z(c,"btn-loading",g[2])},i(g){d||(E(u.$$.fragment,g),d=!0)},o(g){P(u.$$.fragment,g),d=!1},d(g){g&&(y(e),y(l),y(s)),n[26](null),q(u),m=!1,me(h)}}}function q2(n){var d;let e,t,i,l,s,r,o,a,u=((d=n[4])==null?void 0:d.id)&&Wu(n),f=n[7].length&&Vu(n),c=n[9]&&Bu(n);return s=new Le({props:{class:"form-field",name:"message",inlineError:!0,$$slots:{default:[F2,({uniqueId:m})=>({41:m}),({uniqueId:m})=>[0,m?1024:0]]},$$scope:{ctx:n}}}),o=new M2({props:{input:n[6],list:n[8]}}),o.$on("hide",n[30]),o.$on("show",n[31]),{c(){u&&u.c(),e=I(),f&&f.c(),t=I(),i=w("div"),c&&c.c(),l=I(),U(s.$$.fragment),r=I(),U(o.$$.fragment),p(i,"class","comment-form")},m(m,h){u&&u.m(m,h),k(m,e,h),f&&f.m(m,h),k(m,t,h),k(m,i,h),c&&c.m(i,null),v(i,l),F(s,i,null),v(i,r),F(o,i,null),a=!0},p(m,h){var _;(_=m[4])!=null&&_.id?u?(u.p(m,h),h[0]&16&&E(u,1)):(u=Wu(m),u.c(),E(u,1),u.m(e.parentNode,e)):u&&(ae(),P(u,1,1,()=>{u=null}),ue()),m[7].length?f?(f.p(m,h),h[0]&128&&E(f,1)):(f=Vu(m),f.c(),E(f,1),f.m(t.parentNode,t)):f&&(ae(),P(f,1,1,()=>{f=null}),ue()),m[9]?c?(c.p(m,h),h[0]&512&&E(c,1)):(c=Bu(m),c.c(),E(c,1),c.m(i,l)):c&&(ae(),P(c,1,1,()=>{c=null}),ue());const g={};h[0]&597|h[1]&263168&&(g.$$scope={dirty:h,ctx:m}),s.$set(g);const b={};h[0]&64&&(b.input=m[6]),h[0]&256&&(b.list=m[8]),o.$set(b)},i(m){a||(E(u),E(f),E(c),E(s.$$.fragment,m),E(o.$$.fragment,m),a=!0)},o(m){P(u),P(f),P(c),P(s.$$.fragment,m),P(o.$$.fragment,m),a=!1},d(m){m&&(y(e),y(t),y(i)),u&&u.d(m),f&&f.d(m),c&&c.d(),q(s),q(o)}}}function U2(n){let e,t;const i=[{class:"comments-popover"},{disableHide:!n[10]},{escHide:n[10]},{vPadding:0},{hPadding:5},n[15]];let l={$$slots:{default:[q2]},$$scope:{ctx:n}};for(let s=0;s<i.length;s+=1)l=Me(l,i[s]);return e=new Ld({props:l}),n[32](e),e.$on("hide",n[12]),{c(){U(e.$$.fragment)},m(s,r){F(e,s,r),t=!0},p(s,r){const o=r[0]&33792?_t(i,[i[0],r[0]&1024&&{disableHide:!s[10]},r[0]&1024&&{escHide:s[10]},i[3],i[4],r[0]&32768&&Lt(s[15])]):{};r[0]&1023|r[1]&262144&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){P(e.$$.fragment,s),t=!1},d(s){n[32](null),q(e,s)}}}const Yu="guestEmail";function W2(n,e,t){let i,l,s,r,o,a;const u=["viewport"];let f=at(e,u),c,d,m,h,g,b,_,C;Q(n,Jn,de=>t(18,c=de)),Q(n,Pn,de=>t(34,d=de)),Q(n,an,de=>t(19,m=de)),Q(n,gn,de=>t(35,h=de)),Q(n,qt,de=>t(20,g=de)),Q(n,Je,de=>t(21,b=de)),Q(n,Hn,de=>t(22,_=de)),Q(n,Qs,de=>t(23,C=de));const L=ft(),T={"+1":"","-1":"",ok:"",pray:"",smile:"",confused:"",thinking:"",joy:"",hooray:"",watching:"",love:"",poop:""};let{viewport:O=null}=e,S,j,H="",D="",A=[],M=!1,Y=[];async function G(de){if(!de){S==null||S.forceHide();return}await St();const W=de.replyTo||de.id,ie=document.querySelector(`[data-comment-pin="${W}"]`);if(!ie){S==null||S.forceHide();return}N(),ie.scrollIntoView({block:"nearest",inline:"nearest"}),R(),S==null||S.show(ie,O),J()}function B(){Ss(),ve(qt,g=null,g)}function N(de=!1){Zt({}),t(1,D=D||window.localStorage.getItem(Yu)||""),de?t(0,H=""):t(0,H=(""+H).trim()),t(2,M=!1)}async function V(){if(!s)return;t(2,M=!0);const de={screen:i==null?void 0:i.screen,left:i==null?void 0:i.left,top:i==null?void 0:i.top,replyTo:i==null?void 0:i.id,message:(""+H).trim()};o?de.user=c.id:c.email?de.guestEmail=c.email:de.guestEmail=D;try{const W=await z.collection("comments").create(de,{expand:"user"});N(!0),await St(),Ss(),bi(W,!0),L("create",W)}catch(W){if(W.isAbort)return;de.guestEmail&&K.isEmpty(W.response.data)&&(W.response.data={guestEmail:{code:"invalid_guestEmail",message:"The guest email is invalid or it matches with one of project owners."}}),z.error(W),t(2,M=!1)}}async function ee(de=!0){if(!(M&&!i)){t(2,M=!0);try{const W=await z.collection("comments").update(i.id,{resolved:de},{expand:"user"});t(2,M=!1),await St(),de&&(S==null||S.forceHide()),bi(W),L("resolved",W)}catch(W){W.isAbort||(z.error(W),t(2,M=!1))}}}async function J(){if(!o)return;const de=A.map(Ue=>Ue.id),W=h.filter(Ue=>de.includes(Ue.comment)),ie=[];for(let Ue of W)Js(Ue),ie.push(z.collection("notifications").update(Ue.id,{read:!0}));return Promise.allSettled(ie)}function R(){var ie,Ue,kt;t(8,Y=[]);const de=[],W=(((ie=m==null?void 0:m.expand)==null?void 0:ie.users)||[]).slice();for(const ze of d)(Ue=ze.expand)!=null&&Ue.user?K.pushOrReplaceObject(W,(kt=ze.expand)==null?void 0:kt.user):ze.guestEmail&&K.pushUnique(de,ze.guestEmail);for(const ze of W){if(ze.id==(c==null?void 0:c.id))continue;const ct=ze.name||ze.email;Y.push({label:ze.username+(ct?` (${ct})`:""),value:ze.username})}for(const ze of de)ze==D||ze==(c==null?void 0:c.email)||Y.push({label:ze,value:ze})}const ce=de=>{ee(de.target.checked)};function oe(){D=this.value,t(1,D)}function pe(de){le[de?"unshift":"push"](()=>{j=de,t(6,j)})}function Ee(){H=this.value,t(0,H)}const tt=de=>{de.ctrlKey&&de.code==="Enter"&&(de.preventDefault(),V())},se=de=>{t(0,H+=de)},ge=async()=>{await St(),S==null||S.refreshPosition()},Fe=async()=>{await St(),S==null||S.refreshPosition()};function ne(de){le[de?"unshift":"push"](()=>{S=de,t(5,S)})}return n.$$set=de=>{e=Me(Me({},e),Bt(de)),t(15,f=at(e,u)),"viewport"in de&&t(16,O=de.viewport)},n.$$.update=()=>{var de,W;n.$$.dirty[0]&9437184&&t(4,i=C.find(ie=>ie.id&&ie.id==(g==null?void 0:g.replyTo))||g),n.$$.dirty[0]&8388624&&t(17,l=i!=null&&i.id?C.filter(ie=>ie.replyTo===i.id):[]),n.$$.dirty[0]&131088&&t(7,A=i!=null&&i.id?[i].concat(l):[]),n.$$.dirty[0]&5&&(s=!M&&H!=""),n.$$.dirty[0]&4194308&&t(10,r=!M&&!_),n.$$.dirty[0]&3145728&&b&&G(g),n.$$.dirty[0]&786432&&t(3,o=(c==null?void 0:c.id)&&((W=(de=m==null?void 0:m.expand)==null?void 0:de.users)==null?void 0:W.find(ie=>ie.id==c.id))),n.$$.dirty[0]&262152&&t(9,a=!o&&!(c!=null&&c.email)),n.$$.dirty[0]&2&&D&&window.localStorage.setItem(Yu,D)},[H,D,M,o,i,S,j,A,Y,a,r,T,B,V,ee,f,O,l,c,m,g,b,_,C,ce,oe,pe,Ee,tt,se,ge,Fe,ne]}class Id extends Te{constructor(e){super(),Se(this,e,W2,U2,_e,{viewport:16},null,[-1,-1])}}function V2(n){let e,t,i,l,s,r;return t=new Yt({props:{src:z.files.getUrl(n[0],n[0].file,{thumb:"100x100t"}),alt:n[0].title}}),{c(){e=w("div"),U(t.$$.fragment),p(e,"class","thumb thumb-handle")},m(o,a){k(o,e,a),F(t,e,null),l=!0,s||(r=we(i=Oe.call(null,e,n[0].title)),s=!0)},p(o,[a]){const u={};a&1&&(u.src=z.files.getUrl(o[0],o[0].file,{thumb:"100x100t"})),a&1&&(u.alt=o[0].title),t.$set(u),i&&et(i.update)&&a&1&&i.update.call(null,o[0].title)},i(o){l||(E(t.$$.fragment,o),l=!0)},o(o){P(t.$$.fragment,o),l=!1},d(o){o&&y(e),q(t),s=!1,r()}}}function z2(n,e,t){let{item:i={}}=e;return n.$$set=l=>{"item"in l&&t(0,i=l.item)},[i]}class B2 extends Te{constructor(e){super(),Se(this,e,z2,V2,_e,{item:0})}}function Z2(n){let e,t,i,l,s=n[0].title+"",r,o;return t=new Yt({props:{src:z.files.getUrl(n[0],n[0].file,{thumb:"100x100t"}),alt:n[0].title}}),{c(){e=w("div"),U(t.$$.fragment),i=I(),l=w("span"),r=x(s),p(e,"class","thumb thumb-xs"),p(l,"class","txt title m-l-5")},m(a,u){k(a,e,u),F(t,e,null),k(a,i,u),k(a,l,u),v(l,r),o=!0},p(a,[u]){const f={};u&1&&(f.src=z.files.getUrl(a[0],a[0].file,{thumb:"100x100t"})),u&1&&(f.alt=a[0].title),t.$set(f),(!o||u&1)&&s!==(s=a[0].title+"")&&ke(r,s)},i(a){o||(E(t.$$.fragment,a),o=!0)},o(a){P(t.$$.fragment,a),o=!1},d(a){a&&(y(e),y(i),y(l)),q(t)}}}function Y2(n,e,t){let{item:i={}}=e;return n.$$set=l=>{"item"in l&&t(0,i=l.item)},[i]}class K2 extends Te{constructor(e){super(),Se(this,e,Y2,Z2,_e,{item:0})}}function G2(n){let e,t,i,l,s,r,o;const a=[{id:n[6]},{searchable:!0},{class:"screens-select"},{items:n[3]},{noOptionsText:"No screens found"},{selectPlaceholder:"- Select screen -"},{labelComponent:K2},{optionComponent:B2},{selectionKey:"id"},n[4]];function u(c){n[5](c)}let f={};for(let c=0;c<a.length;c+=1)f=Me(f,a[c]);return n[0]!==void 0&&(f.keyOfSelected=n[0]),s=new dn({props:f}),le.push(()=>De(s,"keyOfSelected",u)),{c(){e=w("label"),t=x(n[1]),l=I(),U(s.$$.fragment),p(e,"for",i=n[6])},m(c,d){k(c,e,d),v(e,t),k(c,l,d),F(s,c,d),o=!0},p(c,d){(!o||d&2)&&ke(t,c[1]),(!o||d&64&&i!==(i=c[6]))&&p(e,"for",i);const m=d&88?_t(a,[d&64&&{id:c[6]},a[1],a[2],d&8&&{items:c[3]},a[4],a[5],a[6],a[7],a[8],d&16&&Lt(c[4])]):{};!r&&d&1&&(r=!0,m.keyOfSelected=c[0],Ae(()=>r=!1)),s.$set(m)},i(c){o||(E(s.$$.fragment,c),o=!0)},o(c){P(s.$$.fragment,c),o=!1},d(c){c&&(y(e),y(l)),q(s,c)}}}function J2(n){let e,t;return e=new Le({props:{class:"form-field required "+n[2],name:"settings.screen",$$slots:{default:[G2,({uniqueId:i})=>({6:i}),({uniqueId:i})=>i?64:0]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,[l]){const s={};l&4&&(s.class="form-field required "+i[2]),l&219&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function X2(n,e,t){const i=["value","label","class"];let l=at(e,i),s;Q(n,pt,f=>t(3,s=f));let{value:r}=e,{label:o="Screen"}=e,{class:a=""}=e;function u(f){r=f,t(0,r),t(3,s)}return n.$$set=f=>{e=Me(Me({},e),Bt(f)),t(4,l=at(e,i)),"value"in f&&t(0,r=f.value),"label"in f&&t(1,o=f.label),"class"in f&&t(2,a=f.class)},n.$$.update=()=>{n.$$.dirty&9&&!r&&s.length&&t(0,r=s[0].id)},[r,o,a,s,l,u]}class Pd extends Te{constructor(e){super(),Se(this,e,X2,J2,_e,{value:0,label:1,class:2})}}function Q2(n){let e,t,i,l,s,r,o;function a(f){n[4](f)}let u={class:"duo-columns-dropdown",id:n[5],items:n[3]};return n[0]!==void 0&&(u.keyOfSelected=n[0]),s=new dn({props:u}),le.push(()=>De(s,"keyOfSelected",a)),{c(){e=w("label"),t=x(n[1]),l=I(),U(s.$$.fragment),p(e,"for",i=n[5])},m(f,c){k(f,e,c),v(e,t),k(f,l,c),F(s,f,c),o=!0},p(f,c){(!o||c&2)&&ke(t,f[1]),(!o||c&32&&i!==(i=f[5]))&&p(e,"for",i);const d={};c&32&&(d.id=f[5]),!r&&c&1&&(r=!0,d.keyOfSelected=f[0],Ae(()=>r=!1)),s.$set(d)},i(f){o||(E(s.$$.fragment,f),o=!0)},o(f){P(s.$$.fragment,f),o=!1},d(f){f&&(y(e),y(l)),q(s,f)}}}function x2(n){let e,t;return e=new Le({props:{class:"form-field "+n[2],name:"settings.transition",$$slots:{default:[Q2,({uniqueId:i})=>({5:i}),({uniqueId:i})=>i?32:0]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,[l]){const s={};l&4&&(s.class="form-field "+i[2]),l&99&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function ew(n,e,t){const i=[{value:"",label:"None",icon:"iconoir-position-align"},{value:"fade",label:"Fade",icon:"iconoir-center-align"},{value:"slide-left",label:"Slide left",icon:"iconoir-align-left-box"},{value:"slide-right",label:"Slide right",icon:"iconoir-align-right-box"},{value:"slide-top",label:"Slide up",icon:"iconoir-align-top-box"},{value:"slide-bottom",label:"Slide down",icon:"iconoir-align-bottom-box"}];let{value:l=""}=e,{label:s="Transitions"}=e,{class:r=""}=e;function o(a){l=a,t(0,l)}return n.$$set=a=>{"value"in a&&t(0,l=a.value),"label"in a&&t(1,s=a.label),"class"in a&&t(2,r=a.class)},n.$$.update=()=>{n.$$.dirty&1&&(typeof l>"u"||l===null)&&t(0,l="")},[l,s,r,i,o]}class el extends Te{constructor(e){super(),Se(this,e,ew,x2,_e,{value:0,label:1,class:2})}}function tw(n){let e,t,i,l,s,r,o;function a(f){n[4](f)}let u={class:"duo-columns-dropdown",id:n[5],items:n[3]};return n[0]!==void 0&&(u.keyOfSelected=n[0]),s=new dn({props:u}),le.push(()=>De(s,"keyOfSelected",a)),{c(){e=w("label"),t=x(n[1]),l=I(),U(s.$$.fragment),p(e,"for",i=n[5])},m(f,c){k(f,e,c),v(e,t),k(f,l,c),F(s,f,c),o=!0},p(f,c){(!o||c&2)&&ke(t,f[1]),(!o||c&32&&i!==(i=f[5]))&&p(e,"for",i);const d={};c&32&&(d.id=f[5]),!r&&c&1&&(r=!0,d.keyOfSelected=f[0],Ae(()=>r=!1)),s.$set(d)},i(f){o||(E(s.$$.fragment,f),o=!0)},o(f){P(s.$$.fragment,f),o=!1},d(f){f&&(y(e),y(l)),q(s,f)}}}function nw(n){let e,t;return e=new Le({props:{class:"form-field required "+n[2],name:"settings.overlayPosition",$$slots:{default:[tw,({uniqueId:i})=>({5:i}),({uniqueId:i})=>i?32:0]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,[l]){const s={};l&4&&(s.class="form-field required "+i[2]),l&99&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function iw(n,e,t){const i=[{value:"top-left",label:"Top Left",icon:"iconoir-border-tl"},{value:"top-right",label:"Top Right",icon:"iconoir-border-tr"},{value:"bottom-left",label:"Bottom Left",icon:"iconoir-border-bl"},{value:"bottom-right",label:"Bottom Right",icon:"iconoir-border-br"},{value:"top-center",label:"Top Center",icon:"iconoir-border-top"},{value:"bottom-center",label:"Bottom Center",icon:"iconoir-border-bottom"},{value:"centered",label:"Centered",icon:"iconoir-border-inner"}];let{value:l}=e,{label:s="Position"}=e,{class:r=void 0}=e;function o(a){l=a,t(0,l)}return n.$$set=a=>{"value"in a&&t(0,l=a.value),"label"in a&&t(1,s=a.label),"class"in a&&t(2,r=a.class)},n.$$.update=()=>{n.$$.dirty&1&&(l||t(0,l="centered"))},[l,s,r,i,o]}class lw extends Te{constructor(e){super(),Se(this,e,iw,nw,_e,{value:0,label:1,class:2})}}function Ku(n){var ee;let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g,b,_,C,L,T,O,S=n[4].id?"Save":"Create",j,H,D,A,M;i=new Le({props:{class:"form-field hotspot-type-select",name:"type",$$slots:{default:[sw,({uniqueId:J})=>({54:J}),({uniqueId:J})=>[0,J?8388608:0]]},$$scope:{ctx:n}}});const Y=[pw,dw,cw,fw,uw,aw,ow,rw],G=[];function B(J,R){return J[4].type==xe.note?0:J[4].type==xe.screen?1:J[4].type==xe.overlay?2:J[4].type==xe.back?3:J[4].type==xe.next?4:J[4].type==xe.prev?5:J[4].type==xe.url?6:J[4].type==xe.scroll?7:-1}~(s=B(n))&&(r=G[s]=Y[s](n)),u=new Le({props:{class:"form-field form-field-toggle",name:"template",$$slots:{default:[yw,({uniqueId:J})=>({54:J}),({uniqueId:J})=>[0,J?8388608:0]]},$$scope:{ctx:n}}});let N=n[4].hotspotTemplate&&Gu(n),V=((ee=n[4])==null?void 0:ee.id)&&Xu(n);return{c(){e=w("form"),t=w("div"),U(i.$$.fragment),l=I(),r&&r.c(),o=I(),a=w("div"),U(u.$$.fragment),f=I(),N&&N.c(),c=I(),d=w("hr"),m=I(),h=w("footer"),g=w("button"),b=w("span"),b.textContent="Cancel",C=I(),V&&V.c(),L=I(),T=w("button"),O=w("span"),j=x(S),p(a,"class","col-12"),p(t,"class","grid grid-sm"),p(b,"class","txt"),p(g,"type","button"),p(g,"class","btn btn-sm btn-transparent"),g.disabled=_=n[0]||n[1],p(O,"class","txt"),p(T,"type","submit"),p(T,"class","btn btn-sm btn-primary btn-expanded-sm m-l-auto"),T.disabled=H=n[0]||n[1],Z(T,"btn-loading",n[0]),p(h,"class","flex flex-gap-10")},m(J,R){k(J,e,R),v(e,t),F(i,t,null),v(t,l),~s&&G[s].m(t,null),v(t,o),v(t,a),F(u,a,null),v(a,f),N&&N.m(a,null),v(e,c),v(e,d),v(e,m),v(e,h),v(h,g),v(g,b),v(h,C),V&&V.m(h,null),v(h,L),v(h,T),v(T,O),v(O,j),D=!0,A||(M=[$(g,"click",Ke(n[43])),$(e,"submit",be(n[12]))],A=!0)},p(J,R){var Ee;const ce={};R[0]&144|R[1]&25165824&&(ce.$$scope={dirty:R,ctx:J}),i.$set(ce);let oe=s;s=B(J),s===oe?~s&&G[s].p(J,R):(r&&(ae(),P(G[oe],1,1,()=>{G[oe]=null}),ue()),~s?(r=G[s],r?r.p(J,R):(r=G[s]=Y[s](J),r.c()),E(r,1),r.m(t,o)):r=null);const pe={};R[0]&280|R[1]&25165824&&(pe.$$scope={dirty:R,ctx:J}),u.$set(pe),J[4].hotspotTemplate?N?(N.p(J,R),R[0]&16&&E(N,1)):(N=Gu(J),N.c(),E(N,1),N.m(a,null)):N&&(ae(),P(N,1,1,()=>{N=null}),ue()),(!D||R[0]&3&&_!==(_=J[0]||J[1]))&&(g.disabled=_),(Ee=J[4])!=null&&Ee.id?V?V.p(J,R):(V=Xu(J),V.c(),V.m(h,L)):V&&(V.d(1),V=null),(!D||R[0]&16)&&S!==(S=J[4].id?"Save":"Create")&&ke(j,S),(!D||R[0]&3&&H!==(H=J[0]||J[1]))&&(T.disabled=H),(!D||R[0]&1)&&Z(T,"btn-loading",J[0])},i(J){D||(E(i.$$.fragment,J),E(r),E(u.$$.fragment,J),E(N),D=!0)},o(J){P(i.$$.fragment,J),P(r),P(u.$$.fragment,J),P(N),D=!1},d(J){J&&y(e),q(i),~s&&G[s].d(),q(u),N&&N.d(),V&&V.d(),A=!1,me(M)}}}function sw(n){let e,t,i;function l(r){n[20](r)}let s={id:n[54],items:n[7]};return n[4].type!==void 0&&(s.keyOfSelected=n[4].type),e=new dn({props:s}),le.push(()=>De(e,"keyOfSelected",l)),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};o[1]&8388608&&(a.id=r[54]),o[0]&128&&(a.items=r[7]),!t&&o[0]&16&&(t=!0,a.keyOfSelected=r[4].type,Ae(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function rw(n){let e,t,i,l,s,r;return t=new Le({props:{class:"form-field required",name:"settings.scrollTop",$$slots:{default:[mw,({uniqueId:o})=>({54:o}),({uniqueId:o})=>[0,o?8388608:0]]},$$scope:{ctx:n}}}),s=new Le({props:{class:"form-field required",name:"settings.scrollLeft",$$slots:{default:[hw,({uniqueId:o})=>({54:o}),({uniqueId:o})=>[0,o?8388608:0]]},$$scope:{ctx:n}}}),{c(){e=w("div"),U(t.$$.fragment),i=I(),l=w("div"),U(s.$$.fragment),p(e,"class","col-6"),p(l,"class","col-6")},m(o,a){k(o,e,a),F(t,e,null),k(o,i,a),k(o,l,a),F(s,l,null),r=!0},p(o,a){const u={};a[0]&16|a[1]&25165824&&(u.$$scope={dirty:a,ctx:o}),t.$set(u);const f={};a[0]&16|a[1]&25165824&&(f.$$scope={dirty:a,ctx:o}),s.$set(f)},i(o){r||(E(t.$$.fragment,o),E(s.$$.fragment,o),r=!0)},o(o){P(t.$$.fragment,o),P(s.$$.fragment,o),r=!1},d(o){o&&(y(e),y(i),y(l)),q(t),q(s)}}}function ow(n){let e,t;return e=new Le({props:{class:"form-field required",name:"settings.url",$$slots:{default:[_w,({uniqueId:i})=>({54:i}),({uniqueId:i})=>[0,i?8388608:0]]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,l){const s={};l[0]&16|l[1]&25165824&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function aw(n){let e,t,i;function l(r){n[35](r)}let s={};return n[4].settings.transition!==void 0&&(s.value=n[4].settings.transition),e=new el({props:s}),le.push(()=>De(e,"value",l)),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};!t&&o[0]&16&&(t=!0,a.value=r[4].settings.transition,Ae(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function uw(n){let e,t,i;function l(r){n[34](r)}let s={};return n[4].settings.transition!==void 0&&(s.value=n[4].settings.transition),e=new el({props:s}),le.push(()=>De(e,"value",l)),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};!t&&o[0]&16&&(t=!0,a.value=r[4].settings.transition,Ae(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function fw(n){let e,t,i;function l(r){n[33](r)}let s={};return n[4].settings.transition!==void 0&&(s.value=n[4].settings.transition),e=new el({props:s}),le.push(()=>De(e,"value",l)),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};!t&&o[0]&16&&(t=!0,a.value=r[4].settings.transition,Ae(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function cw(n){let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g;function b(S){n[24](S)}let _={};n[4].settings.screen!==void 0&&(_.value=n[4].settings.screen),e=new Pd({props:_}),le.push(()=>De(e,"value",b));function C(S){n[25](S)}let L={};n[4].settings.overlayPosition!==void 0&&(L.value=n[4].settings.overlayPosition),l=new lw({props:L}),le.push(()=>De(l,"value",C)),o=new Le({props:{class:"form-field",$$slots:{default:[gw,({uniqueId:S})=>({54:S}),({uniqueId:S})=>[0,S?8388608:0]]},$$scope:{ctx:n}}});function T(S){n[30](S)}let O={};return n[4].settings.transition!==void 0&&(O.value=n[4].settings.transition),u=new el({props:O}),le.push(()=>De(u,"value",T)),d=new Le({props:{class:"form-field form-field-toggle",name:"settings.fixOverlay",$$slots:{default:[bw,({uniqueId:S})=>({54:S}),({uniqueId:S})=>[0,S?8388608:0]]},$$scope:{ctx:n}}}),h=new Le({props:{class:"form-field form-field-toggle",name:"settings.outsideClose",$$slots:{default:[ww,({uniqueId:S})=>({54:S}),({uniqueId:S})=>[0,S?8388608:0]]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment),i=I(),U(l.$$.fragment),r=I(),U(o.$$.fragment),a=I(),U(u.$$.fragment),c=I(),U(d.$$.fragment),m=I(),U(h.$$.fragment)},m(S,j){F(e,S,j),k(S,i,j),F(l,S,j),k(S,r,j),F(o,S,j),k(S,a,j),F(u,S,j),k(S,c,j),F(d,S,j),k(S,m,j),F(h,S,j),g=!0},p(S,j){const H={};!t&&j[0]&16&&(t=!0,H.value=S[4].settings.screen,Ae(()=>t=!1)),e.$set(H);const D={};!s&&j[0]&16&&(s=!0,D.value=S[4].settings.overlayPosition,Ae(()=>s=!1)),l.$set(D);const A={};j[0]&16|j[1]&25165824&&(A.$$scope={dirty:j,ctx:S}),o.$set(A);const M={};!f&&j[0]&16&&(f=!0,M.value=S[4].settings.transition,Ae(()=>f=!1)),u.$set(M);const Y={};j[0]&16|j[1]&25165824&&(Y.$$scope={dirty:j,ctx:S}),d.$set(Y);const G={};j[0]&16|j[1]&25165824&&(G.$$scope={dirty:j,ctx:S}),h.$set(G)},i(S){g||(E(e.$$.fragment,S),E(l.$$.fragment,S),E(o.$$.fragment,S),E(u.$$.fragment,S),E(d.$$.fragment,S),E(h.$$.fragment,S),g=!0)},o(S){P(e.$$.fragment,S),P(l.$$.fragment,S),P(o.$$.fragment,S),P(u.$$.fragment,S),P(d.$$.fragment,S),P(h.$$.fragment,S),g=!1},d(S){S&&(y(i),y(r),y(a),y(c),y(m)),q(e,S),q(l,S),q(o,S),q(u,S),q(d,S),q(h,S)}}}function dw(n){let e,t,i,l,s,r;function o(c){n[22](c)}let a={};n[4].settings.screen!==void 0&&(a.value=n[4].settings.screen),e=new Pd({props:a}),le.push(()=>De(e,"value",o));function u(c){n[23](c)}let f={};return n[4].settings.transition!==void 0&&(f.value=n[4].settings.transition),l=new el({props:f}),le.push(()=>De(l,"value",u)),{c(){U(e.$$.fragment),i=I(),U(l.$$.fragment)},m(c,d){F(e,c,d),k(c,i,d),F(l,c,d),r=!0},p(c,d){const m={};!t&&d[0]&16&&(t=!0,m.value=c[4].settings.screen,Ae(()=>t=!1)),e.$set(m);const h={};!s&&d[0]&16&&(s=!0,h.value=c[4].settings.transition,Ae(()=>s=!1)),l.$set(h)},i(c){r||(E(e.$$.fragment,c),E(l.$$.fragment,c),r=!0)},o(c){P(e.$$.fragment,c),P(l.$$.fragment,c),r=!1},d(c){c&&y(i),q(e,c),q(l,c)}}}function pw(n){let e,t;return e=new Le({props:{class:"form-field required",name:"settings.note",$$slots:{default:[vw,({uniqueId:i})=>({54:i}),({uniqueId:i})=>[0,i?8388608:0]]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,l){const s={};l[0]&16|l[1]&25165824&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function mw(n){let e,t,i,l,s,r,o,a,u,f,c,d,m;return{c(){e=w("label"),t=x("Vertical position"),l=I(),s=w("div"),r=w("input"),a=I(),u=w("label"),f=x("px"),p(e,"for",i=n[54]),p(r,"type","number"),p(r,"id",o=n[54]),p(r,"min","0"),r.required=!0,p(u,"for",c=n[54]),p(u,"class","addon"),p(s,"class","field-group")},m(h,g){k(h,e,g),v(e,t),k(h,l,g),k(h,s,g),v(s,r),ye(r,n[4].settings.scrollTop),v(s,a),v(s,u),v(u,f),d||(m=$(r,"input",n[37]),d=!0)},p(h,g){g[1]&8388608&&i!==(i=h[54])&&p(e,"for",i),g[1]&8388608&&o!==(o=h[54])&&p(r,"id",o),g[0]&16&&wt(r.value)!==h[4].settings.scrollTop&&ye(r,h[4].settings.scrollTop),g[1]&8388608&&c!==(c=h[54])&&p(u,"for",c)},d(h){h&&(y(e),y(l),y(s)),d=!1,m()}}}function hw(n){let e,t,i,l,s,r,o,a,u,f,c,d,m;return{c(){e=w("label"),t=x("Horizontal position"),l=I(),s=w("div"),r=w("input"),a=I(),u=w("label"),f=x("px"),p(e,"for",i=n[54]),p(r,"type","number"),p(r,"id",o=n[54]),p(r,"min","0"),r.required=!0,p(u,"for",c=n[54]),p(u,"class","addon"),p(s,"class","field-group")},m(h,g){k(h,e,g),v(e,t),k(h,l,g),k(h,s,g),v(s,r),ye(r,n[4].settings.scrollLeft),v(s,a),v(s,u),v(u,f),d||(m=$(r,"input",n[38]),d=!0)},p(h,g){g[1]&8388608&&i!==(i=h[54])&&p(e,"for",i),g[1]&8388608&&o!==(o=h[54])&&p(r,"id",o),g[0]&16&&wt(r.value)!==h[4].settings.scrollLeft&&ye(r,h[4].settings.scrollLeft),g[1]&8388608&&c!==(c=h[54])&&p(u,"for",c)},d(h){h&&(y(e),y(l),y(s)),d=!1,m()}}}function _w(n){let e,t,i,l,s,r,o,a,u;return{c(){e=w("label"),t=x("URL"),l=I(),s=w("div"),r=w("input"),p(e,"for",i=n[54]),p(r,"type","text"),p(r,"id",o=n[54]),r.required=!0,p(r,"placeholder","eg. https://google.com"),p(s,"class","field-group")},m(f,c){k(f,e,c),v(e,t),k(f,l,c),k(f,s,c),v(s,r),ye(r,n[4].settings.url),a||(u=$(r,"input",n[36]),a=!0)},p(f,c){c[1]&8388608&&i!==(i=f[54])&&p(e,"for",i),c[1]&8388608&&o!==(o=f[54])&&p(r,"id",o),c[0]&16&&r.value!==f[4].settings.url&&ye(r,f[4].settings.url)},d(f){f&&(y(e),y(l),y(s)),a=!1,u()}}}function gw(n){let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g,b,_,C,L,T,O,S,j,H,D,A,M,Y,G,B,N,V,ee,J,R;return{c(){e=w("label"),t=x("Offset "),i=w("span"),i.textContent="(px)",s=I(),r=w("div"),o=w("label"),a=x("T"),f=I(),c=w("input"),m=I(),h=w("label"),g=x("B"),_=I(),C=w("input"),T=I(),O=w("label"),S=x("L"),H=I(),D=w("input"),M=I(),Y=w("label"),G=x("R"),N=I(),V=w("input"),p(i,"class","txt-hint"),p(e,"for",l=n[54]),p(o,"for",u=n[54]+"_t"),p(o,"class","addon"),p(o,"title","Top offset"),p(c,"type","number"),p(c,"id",d=n[54]+"_t"),p(h,"for",b=n[54]+"_b"),p(h,"class","addon"),p(h,"title","Bottom offset"),p(C,"type","number"),p(C,"id",L=n[54]+"_b"),p(O,"for",j=n[54]+"_l"),p(O,"class","addon"),p(O,"title","Left offset"),p(D,"type","number"),p(D,"id",A=n[54]+"_l"),p(Y,"for",B=n[54]+"_r"),p(Y,"class","addon"),p(Y,"title","Right offset"),p(V,"type","number"),p(V,"id",ee=n[54]+"_r"),p(r,"class","field-group")},m(ce,oe){k(ce,e,oe),v(e,t),v(e,i),k(ce,s,oe),k(ce,r,oe),v(r,o),v(o,a),v(r,f),v(r,c),ye(c,n[4].settings.offsetTop),v(r,m),v(r,h),v(h,g),v(r,_),v(r,C),ye(C,n[4].settings.offsetBottom),v(r,T),v(r,O),v(O,S),v(r,H),v(r,D),ye(D,n[4].settings.offsetLeft),v(r,M),v(r,Y),v(Y,G),v(r,N),v(r,V),ye(V,n[4].settings.offsetRight),J||(R=[$(c,"input",n[26]),$(C,"input",n[27]),$(D,"input",n[28]),$(V,"input",n[29])],J=!0)},p(ce,oe){oe[1]&8388608&&l!==(l=ce[54])&&p(e,"for",l),oe[1]&8388608&&u!==(u=ce[54]+"_t")&&p(o,"for",u),oe[1]&8388608&&d!==(d=ce[54]+"_t")&&p(c,"id",d),oe[0]&16&&wt(c.value)!==ce[4].settings.offsetTop&&ye(c,ce[4].settings.offsetTop),oe[1]&8388608&&b!==(b=ce[54]+"_b")&&p(h,"for",b),oe[1]&8388608&&L!==(L=ce[54]+"_b")&&p(C,"id",L),oe[0]&16&&wt(C.value)!==ce[4].settings.offsetBottom&&ye(C,ce[4].settings.offsetBottom),oe[1]&8388608&&j!==(j=ce[54]+"_l")&&p(O,"for",j),oe[1]&8388608&&A!==(A=ce[54]+"_l")&&p(D,"id",A),oe[0]&16&&wt(D.value)!==ce[4].settings.offsetLeft&&ye(D,ce[4].settings.offsetLeft),oe[1]&8388608&&B!==(B=ce[54]+"_r")&&p(Y,"for",B),oe[1]&8388608&&ee!==(ee=ce[54]+"_r")&&p(V,"id",ee),oe[0]&16&&wt(V.value)!==ce[4].settings.offsetRight&&ye(V,ce[4].settings.offsetRight)},d(ce){ce&&(y(e),y(s),y(r)),J=!1,me(R)}}}function bw(n){let e,t,i,l,s,r,o,a;return{c(){e=w("input"),i=I(),l=w("label"),s=x("Fix position of overlay"),p(e,"type","checkbox"),p(e,"id",t=n[54]),p(l,"for",r=n[54])},m(u,f){k(u,e,f),e.checked=n[4].settings.fixOverlay,k(u,i,f),k(u,l,f),v(l,s),o||(a=$(e,"change",n[31]),o=!0)},p(u,f){f[1]&8388608&&t!==(t=u[54])&&p(e,"id",t),f[0]&16&&(e.checked=u[4].settings.fixOverlay),f[1]&8388608&&r!==(r=u[54])&&p(l,"for",r)},d(u){u&&(y(e),y(i),y(l)),o=!1,a()}}}function ww(n){let e,t,i,l,s,r,o,a;return{c(){e=w("input"),i=I(),l=w("label"),s=x("Close on outside click"),p(e,"type","checkbox"),p(e,"id",t=n[54]),p(l,"for",r=n[54])},m(u,f){k(u,e,f),e.checked=n[4].settings.outsideClose,k(u,i,f),k(u,l,f),v(l,s),o||(a=$(e,"change",n[32]),o=!0)},p(u,f){f[1]&8388608&&t!==(t=u[54])&&p(e,"id",t),f[0]&16&&(e.checked=u[4].settings.outsideClose),f[1]&8388608&&r!==(r=u[54])&&p(l,"for",r)},d(u){u&&(y(e),y(i),y(l)),o=!1,a()}}}function vw(n){let e,t,i,l,s,r;return{c(){e=w("textarea"),i=I(),l=w("div"),l.textContent="The note will be visible in Preview mode on hover.",p(e,"id",t=n[54]),e.required=!0,p(l,"class","help-block")},m(o,a){k(o,e,a),ye(e,n[4].settings.note),k(o,i,a),k(o,l,a),s||(r=$(e,"input",n[21]),s=!0)},p(o,a){a[1]&8388608&&t!==(t=o[54])&&p(e,"id",t),a[0]&16&&ye(e,o[4].settings.note)},d(o){o&&(y(e),y(i),y(l)),s=!1,r()}}}function yw(n){let e,t,i,l,s,r,o,a,u,f,c;return{c(){e=w("input"),l=I(),s=w("label"),r=w("span"),r.textContent="Include in template",o=I(),a=w("i"),p(e,"type","checkbox"),p(e,"id",t=n[54]),e.checked=i=!!n[4].hotspotTemplate,p(r,"class","txt"),p(a,"class","iconoir-info-circle link-hint"),p(s,"for",u=n[54])},m(d,m){k(d,e,m),k(d,l,m),k(d,s,m),v(s,r),v(s,o),v(s,a),f||(c=[$(e,"change",n[39]),we(Oe.call(null,a,"Reuse the hotspot in other screens"))],f=!0)},p(d,m){m[1]&8388608&&t!==(t=d[54])&&p(e,"id",t),m[0]&16&&i!==(i=!!d[4].hotspotTemplate)&&(e.checked=i),m[1]&8388608&&u!==(u=d[54])&&p(s,"for",u)},d(d){d&&(y(e),y(l),y(s)),f=!1,me(c)}}}function Gu(n){let e,t,i,l,s,r;i=new Le({props:{class:"form-field form-field-sm",$$slots:{default:[kw,({uniqueId:a})=>({54:a}),({uniqueId:a})=>[0,a?8388608:0]]},$$scope:{ctx:n}}});let o=n[4].hotspotTemplate==Il&&Ju(n);return{c(){e=w("div"),t=w("div"),U(i.$$.fragment),l=I(),o&&o.c(),p(t,"class","template-form svelte-1gupuaj"),p(e,"class","block p-t-xs")},m(a,u){k(a,e,u),v(e,t),F(i,t,null),v(t,l),o&&o.m(t,null),r=!0},p(a,u){const f={};u[0]&272|u[1]&25165824&&(f.$$scope={dirty:u,ctx:a}),i.$set(f),a[4].hotspotTemplate==Il?o?(o.p(a,u),u[0]&16&&E(o,1)):(o=Ju(a),o.c(),E(o,1),o.m(t,null)):o&&(ae(),P(o,1,1,()=>{o=null}),ue())},i(a){r||(E(i.$$.fragment,a),E(o),a&&vt(()=>{r&&(s||(s=ut(e,Ct,{duration:150},!0)),s.run(1))}),r=!0)},o(a){P(i.$$.fragment,a),P(o),a&&(s||(s=ut(e,Ct,{duration:150},!1)),s.run(0)),r=!1},d(a){a&&y(e),q(i),o&&o.d(),a&&s&&s.end()}}}function kw(n){let e,t,i;function l(r){n[40](r)}let s={id:n[54],items:n[8],upside:!0};return n[4].hotspotTemplate!==void 0&&(s.keyOfSelected=n[4].hotspotTemplate),e=new dn({props:s}),le.push(()=>De(e,"keyOfSelected",l)),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};o[1]&8388608&&(a.id=r[54]),o[0]&256&&(a.items=r[8]),!t&&o[0]&16&&(t=!0,a.keyOfSelected=r[4].hotspotTemplate,Ae(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function Ju(n){let e,t,i,l;return t=new Le({props:{class:"form-field form-field-sm m-t-10",name:"title",$$slots:{default:[Sw,({uniqueId:s})=>({54:s}),({uniqueId:s})=>[0,s?8388608:0]]},$$scope:{ctx:n}}}),{c(){e=w("div"),U(t.$$.fragment)},m(s,r){k(s,e,r),F(t,e,null),l=!0},p(s,r){const o={};r[0]&68|r[1]&25165824&&(o.$$scope={dirty:r,ctx:s}),t.$set(o)},i(s){l||(E(t.$$.fragment,s),s&&vt(()=>{l&&(i||(i=ut(e,Ct,{duration:150},!0)),i.run(1))}),l=!0)},o(s){P(t.$$.fragment,s),s&&(i||(i=ut(e,Ct,{duration:150},!1)),i.run(0)),l=!1},d(s){s&&y(e),q(t),s&&i&&i.end()}}}function Sw(n){let e,t,i,l;return{c(){e=w("input"),p(e,"type","text"),p(e,"id",t=n[54]),p(e,"placeholder","Template name *")},m(s,r){k(s,e,r),n[41](e),ye(e,n[6]),i||(l=$(e,"input",n[42]),i=!0)},p(s,r){r[1]&8388608&&t!==(t=s[54])&&p(e,"id",t),r[0]&64&&e.value!==s[6]&&ye(e,s[6])},d(s){s&&y(e),n[41](null),i=!1,l()}}}function Xu(n){let e,t,i,l,s;return{c(){e=w("button"),t=w("i"),p(t,"class","iconoir-trash txt-sm"),p(e,"type","button"),p(e,"class","btn btn-sm btn-circle btn-transparent btn-danger fade"),e.disabled=i=n[0]||n[1]},m(r,o){k(r,e,o),v(e,t),l||(s=[we(Oe.call(null,e,"Delete hotspot")),$(e,"click",Ke(n[13]))],l=!0)},p(r,o){o[0]&3&&i!==(i=r[0]||r[1])&&(e.disabled=i)},d(r){r&&y(e),l=!1,me(s)}}}function Tw(n){let e,t,i=n[4]&&Ku(n);return{c(){i&&i.c(),e=Ne()},m(l,s){i&&i.m(l,s),k(l,e,s),t=!0},p(l,s){l[4]?i?(i.p(l,s),s[0]&16&&E(i,1)):(i=Ku(l),i.c(),E(i,1),i.m(e.parentNode,e)):i&&(ae(),P(i,1,1,()=>{i=null}),ue())},i(l){t||(E(i),t=!0)},o(l){P(i),t=!1},d(l){l&&y(e),i&&i.d(l)}}}function Cw(n){let e,t;const i=[{class:"hotspots-popover "+(n[10]?"resizing":"")},{disableHide:!n[9]},{vPadding:0},{hPadding:5},{closableToggle:!1},n[14]];let l={$$slots:{default:[Tw]},$$scope:{ctx:n}};for(let s=0;s<i.length;s+=1)l=Me(l,i[s]);return e=new Ld({props:l}),n[44](e),e.$on("hide",n[11]),{c(){U(e.$$.fragment)},m(s,r){F(e,s,r),t=!0},p(s,r){const o=r[0]&17920?_t(i,[r[0]&1024&&{class:"hotspots-popover "+(s[10]?"resizing":"")},r[0]&512&&{disableHide:!s[9]},i[2],i[3],i[4],r[0]&16384&&Lt(s[14])]):{};r[0]&511|r[1]&16777216&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){P(e.$$.fragment,s),t=!1},d(s){n[44](null),q(e,s)}}}const Il="@newTemplate";function Ow(n,e,t){let i,l;const s=["viewport"];let r=at(e,s),o,a,u,f,c,d;Q(n,Be,re=>t(4,o=re)),Q(n,Je,re=>t(17,a=re)),Q(n,Tt,re=>t(45,u=re)),Q(n,un,re=>t(18,f=re)),Q(n,mn,re=>t(10,c=re)),Q(n,_i,re=>t(19,d=re));const m=ft(),h=[{value:xe.note,label:"Link to: Note"},{value:xe.screen,label:"Link to: Screen"},{value:xe.overlay,label:"Link to: Screen as overlay"},{value:xe.back,label:"Link to: Back (last visited screen)"},{value:xe.prev,label:"Link to: Prev screen in series"},{value:xe.next,label:"Link to: Next screen in series"},{value:xe.scroll,label:"Link to: Position (scroll to)"}],g=h.concat({value:xe.url,label:"Link to: URL"});let{viewport:b=null}=e,_,C=!1,L=!1,T="",O,S=null,j=h,H="";async function D(){if(!o||c){_==null||_.forceHide();return}const re=document.querySelector(`[data-hotspot="${o.id}"]`);if(!re){_==null||_.forceHide();return}re.scrollIntoView({block:"nearest",inline:"nearest"}),A(),await St(),_==null||_.show(re,b)}function A(){Zt({}),t(6,T=""),t(0,C=!1),t(1,L=!1),t(16,H=""),o&&(!o.screen&&(a!=null&&a.id)&&ve(Be,o.screen=a.id,o),ve(Be,o.settings=o.settings||{},o),t(3,S=M()),Y())}function M(){if(!o)return null;const re=Object.assign({},o);return re.settings=structuredClone(o.settings||{}),re}function Y(){if(!o)return null;t(16,H=o.type),!o.id&&o.type==xe.overlay&&(ve(Be,o.settings=o.settings||{},o),ve(Be,o.settings.fixOverlay=!0,o),ve(Be,o.settings.outsideClose=!0,o))}function G(){o!=null&&o.id&&S&&Cn(S),t(3,S=null),ve(Be,o=null,o),Ts()}async function B(){var re;if(!(C||!o)){t(0,C=!0);try{const He=M();if(He.hotspotTemplate){He.screen=null;let Xe=f.find(gt=>gt.id==He.hotspotTemplate);Xe?(re=Xe.screens)!=null&&re.includes(a.id)||(Xe=await z.collection("hotspotTemplates").update(Xe.id,{"screens+":a.id})):(Xe=await z.collection("hotspotTemplates").create({title:T,prototype:u.id,screens:[a.id]}),He.hotspotTemplate=Xe.id),Ri(Xe)}else He.screen=a.id;let nt;o!=null&&o.id?nt=await z.collection("hotspots").update(o.id,He):nt=await z.collection("hotspots").create(He),t(3,S=nt),Cn(nt),Ts(),_==null||_.forceHide(),m("save",nt),t(0,C=!1)}catch(He){He.isAbort||(z.error(He),t(0,C=!1))}}}function N(){if(L||!(o!=null&&o.id))return;let re="Do you really want to delete the selected hotspot?";t(1,L=!0),Et(re,V,()=>{setTimeout(()=>{t(1,L=!1)},0)})}async function V(){if(o!=null&&o.id){t(1,L=!0);try{await z.collection("hotspots").delete(o.id),m("delete",S),ve(Be,o=null,o),t(1,L=!1)}catch(re){re.isAbort||(z.error(re),t(1,L=!1))}}}function ee(re){n.$$.not_equal(o.type,re)&&(o.type=re,Be.set(o))}function J(){o.settings.note=this.value,Be.set(o)}function R(re){n.$$.not_equal(o.settings.screen,re)&&(o.settings.screen=re,Be.set(o))}function ce(re){n.$$.not_equal(o.settings.transition,re)&&(o.settings.transition=re,Be.set(o))}function oe(re){n.$$.not_equal(o.settings.screen,re)&&(o.settings.screen=re,Be.set(o))}function pe(re){n.$$.not_equal(o.settings.overlayPosition,re)&&(o.settings.overlayPosition=re,Be.set(o))}function Ee(){o.settings.offsetTop=wt(this.value),Be.set(o)}function tt(){o.settings.offsetBottom=wt(this.value),Be.set(o)}function se(){o.settings.offsetLeft=wt(this.value),Be.set(o)}function ge(){o.settings.offsetRight=wt(this.value),Be.set(o)}function Fe(re){n.$$.not_equal(o.settings.transition,re)&&(o.settings.transition=re,Be.set(o))}function ne(){o.settings.fixOverlay=this.checked,Be.set(o)}function de(){o.settings.outsideClose=this.checked,Be.set(o)}function W(re){n.$$.not_equal(o.settings.transition,re)&&(o.settings.transition=re,Be.set(o))}function ie(re){n.$$.not_equal(o.settings.transition,re)&&(o.settings.transition=re,Be.set(o))}function Ue(re){n.$$.not_equal(o.settings.transition,re)&&(o.settings.transition=re,Be.set(o))}function kt(){o.settings.url=this.value,Be.set(o)}function ze(){o.settings.scrollTop=wt(this.value),Be.set(o)}function ct(){o.settings.scrollLeft=wt(this.value),Be.set(o)}const Dt=re=>{var He;re.target.checked?o.hotspotTemplate||ve(Be,o.hotspotTemplate=(S==null?void 0:S.hotspotTemplate)||((He=l==null?void 0:l[0])==null?void 0:He.value),o):ve(Be,o.hotspotTemplate="",o)};function Mt(re){n.$$.not_equal(o.hotspotTemplate,re)&&(o.hotspotTemplate=re,Be.set(o))}function te(re){le[re?"unshift":"push"](()=>{O=re,t(2,O)})}function Ze(){T=this.value,t(6,T)}const fe=()=>{_==null||_.hide()};function Pe(re){le[re?"unshift":"push"](()=>{_=re,t(5,_)})}return n.$$set=re=>{e=Me(Me({},e),Bt(re)),t(14,r=at(e,s)),"viewport"in re&&t(15,b=re.viewport)},n.$$.update=()=>{n.$$.dirty[0]&524288&&(d!=null&&d.allowHotspotsUrl?t(7,j=g):t(7,j=h)),n.$$.dirty[0]&131096&&a&&(S==null?void 0:S.id)!=(o==null?void 0:o.id)&&D(),n.$$.dirty[0]&3&&t(9,i=!C&&!L),n.$$.dirty[0]&262144&&t(8,l=f.map(re=>({value:re.id,label:re.title})).concat([{value:Il,label:"+ New template"}])),n.$$.dirty[0]&20&&(o==null?void 0:o.hotspotTemplate)===Il&&setTimeout(()=>{O==null||O.focus()},50),n.$$.dirty[0]&65552&&o&&H!=o.type&&Y()},[C,L,O,S,o,_,T,j,l,i,c,G,B,N,r,b,H,a,f,d,ee,J,R,ce,oe,pe,Ee,tt,se,ge,Fe,ne,de,W,ie,Ue,kt,ze,ct,Dt,Mt,te,Ze,fe,Pe]}class Ew extends Te{constructor(e){super(),Se(this,e,Ow,Cw,_e,{viewport:15},null,[-1,-1])}}function Lw(n){var er,tr;let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g,b=((er=n[1])==null?void 0:er.title)+"",_,C,L,T=Ol(n[1])+"",O,S,j=n[0].length+"",H,D,A,M,Y,G,B,N,V,ee,J,R,ce,oe,pe,Ee,tt,se,ge,Fe,ne,de,W,ie,Ue,kt,ze,ct,Dt,Mt,te,Ze,fe;o=new Cd({});let Pe=n[12]===Ce.comments&&Qu(n),re=n[17].length&&xu(n),He=n[12]==Ce.hotspots&&!n[14]&&ef(),nt=n[12]==Ce.comments&&!n[16]&&tf(n),Xe=n[12]==Ce.preview&&nf(),gt=((tr=n[3])==null?void 0:tr.scale)!=0&&lf(n);return ct=new r2({}),Mt=new Td({props:{active:n[5]}}),{c(){var je;e=w("div"),t=w("div"),i=w("div"),i.innerHTML='<i class="iconoir-nav-arrow-left"></i>',l=I(),s=w("div"),s.innerHTML='<i class="iconoir-nav-arrow-right"></i>',r=I(),U(o.$$.fragment),a=I(),Pe&&Pe.c(),u=I(),f=w("nav"),c=w("div"),d=w("button"),d.innerHTML='<i class="iconoir-xmark"></i>',m=I(),h=w("button"),g=w("span"),_=x(b),L=x(`
                    (`),O=x(T),S=x(" of "),H=x(j),D=x(`)
                    `),A=w("i"),G=I(),B=w("div"),N=w("button"),V=w("i"),J=I(),R=w("button"),ce=w("i"),pe=I(),Ee=w("button"),tt=w("i"),se=I(),re&&re.c(),Fe=I(),ne=w("button"),ne.innerHTML='<i class="iconoir-more-vert"></i>',de=I(),W=w("div"),He&&He.c(),ie=I(),nt&&nt.c(),Ue=I(),Xe&&Xe.c(),kt=I(),gt&&gt.c(),ze=I(),U(ct.$$.fragment),Dt=I(),U(Mt.$$.fragment),p(i,"class","screen-preview-nav-ctrl left"),Z(i,"disabled",n[10]),p(s,"class","screen-preview-nav-ctrl right"),Z(s,"disabled",n[9]),p(t,"class","screen-preview-nav-wrapper"),p(e,"class","screen-preview-container entrance-fade"),p(d,"type","button"),p(d,"class","btn btn-circle btn-transparent btn-hint txt-hint"),p(g,"class","screen-title-trim"),p(g,"title",C=(je=n[1])==null?void 0:je.title),p(A,"class",M="iconoir-nav-arrow-"+(n[5]?"up":"down")),p(h,"type","button"),p(h,"class",Y="btn btn-sm btn-hint txt-hint "+(n[5]?"btn-semitransparent":"btn-transparent")),p(c,"class","controls-group group-left"),p(V,"class","iconoir-play"),p(N,"class",ee="btn btn-circle "+(n[12]==Ce.preview?"btn-primary btn-transparent":"btn-hint btn-transparent txt-hint")),p(ce,"class","iconoir-square-3d-corner-to-corner"),p(R,"class",oe="btn btn-circle "+(n[12]==Ce.hotspots?"btn-success btn-transparent":"btn-hint btn-transparent txt-hint")),Z(R,"btn-loading",n[14]||n[15]),p(tt,"class","iconoir-message-text"),p(Ee,"class",ge="btn btn-circle "+(n[12]==Ce.comments?"btn-danger btn-transparent":"btn-hint btn-transparent txt-hint")),Z(Ee,"btn-loading",n[16]),p(ne,"type","button"),p(ne,"class","btn btn-circle btn-hint txt-hint btn-transparent responsive-show"),Z(ne,"active",n[6]),p(B,"class","controls-group group-center"),p(W,"class","controls-group group-right responsive-hide"),p(f,"class","controls-bar"),Z(f,"show-responsive-controls",n[6])},m(je,Qe){k(je,e,Qe),v(e,t),v(t,i),v(t,l),v(t,s),v(t,r),F(o,t,null),n[32](t),v(e,a),Pe&&Pe.m(e,null),k(je,u,Qe),k(je,f,Qe),v(f,c),v(c,d),v(c,m),v(c,h),v(h,g),v(g,_),v(h,L),v(h,O),v(h,S),v(h,H),v(h,D),v(h,A),v(f,G),v(f,B),v(B,N),v(N,V),v(B,J),v(B,R),v(R,ce),v(B,pe),v(B,Ee),v(Ee,tt),v(Ee,se),re&&re.m(Ee,null),v(B,Fe),v(B,ne),v(f,de),v(f,W),He&&He.m(W,null),v(W,ie),nt&&nt.m(W,null),v(W,Ue),Xe&&Xe.m(W,null),v(W,kt),gt&&gt.m(W,null),v(W,ze),F(ct,W,null),k(je,Dt,Qe),F(Mt,je,Qe),te=!0,Ze||(fe=[$(i,"click",be(n[30])),$(s,"click",be(n[31])),$(t,"drop",be(n[33])),$(t,"dragover",Ke(be(n[29]))),$(d,"click",n[20]),we(Oe.call(null,d,{position:"top",text:"Back to listing"})),$(h,"click",be(n[21])),we(Oe.call(null,N,{position:"top",text:"Preview mode",sub:"P"})),$(N,"click",be(n[35])),we(Oe.call(null,R,{position:"top",text:"Hotspots mode",sub:"H"})),$(R,"click",be(n[36])),we(Oe.call(null,Ee,{position:"top",text:"Comments mode",sub:"C"})),$(Ee,"click",be(n[37])),we(Oe.call(null,ne,{position:"top",text:"More options"})),$(ne,"click",n[38]),$(f,"click",be(n[40]))],Ze=!0)},p(je,Qe){var ir,lr,sr;(!te||Qe[0]&1024)&&Z(i,"disabled",je[10]),(!te||Qe[0]&512)&&Z(s,"disabled",je[9]),je[12]===Ce.comments?Pe?(Pe.p(je,Qe),Qe[0]&4096&&E(Pe,1)):(Pe=Qu(je),Pe.c(),E(Pe,1),Pe.m(e,null)):Pe&&(ae(),P(Pe,1,1,()=>{Pe=null}),ue()),(!te||Qe[0]&2)&&b!==(b=((ir=je[1])==null?void 0:ir.title)+"")&&ke(_,b),(!te||Qe[0]&2&&C!==(C=(lr=je[1])==null?void 0:lr.title))&&p(g,"title",C),(!te||Qe[0]&2)&&T!==(T=Ol(je[1])+"")&&ke(O,T),(!te||Qe[0]&1)&&j!==(j=je[0].length+"")&&ke(H,j),(!te||Qe[0]&32&&M!==(M="iconoir-nav-arrow-"+(je[5]?"up":"down")))&&p(A,"class",M),(!te||Qe[0]&32&&Y!==(Y="btn btn-sm btn-hint txt-hint "+(je[5]?"btn-semitransparent":"btn-transparent")))&&p(h,"class",Y),(!te||Qe[0]&4096&&ee!==(ee="btn btn-circle "+(je[12]==Ce.preview?"btn-primary btn-transparent":"btn-hint btn-transparent txt-hint")))&&p(N,"class",ee),(!te||Qe[0]&4096&&oe!==(oe="btn btn-circle "+(je[12]==Ce.hotspots?"btn-success btn-transparent":"btn-hint btn-transparent txt-hint")))&&p(R,"class",oe),(!te||Qe[0]&53248)&&Z(R,"btn-loading",je[14]||je[15]),je[17].length?re?re.p(je,Qe):(re=xu(je),re.c(),re.m(Ee,null)):re&&(re.d(1),re=null),(!te||Qe[0]&4096&&ge!==(ge="btn btn-circle "+(je[12]==Ce.comments?"btn-danger btn-transparent":"btn-hint btn-transparent txt-hint")))&&p(Ee,"class",ge),(!te||Qe[0]&69632)&&Z(Ee,"btn-loading",je[16]),(!te||Qe[0]&64)&&Z(ne,"active",je[6]),je[12]==Ce.hotspots&&!je[14]?He?Qe[0]&20480&&E(He,1):(He=ef(),He.c(),E(He,1),He.m(W,ie)):He&&(ae(),P(He,1,1,()=>{He=null}),ue()),je[12]==Ce.comments&&!je[16]?nt?nt.p(je,Qe):(nt=tf(je),nt.c(),nt.m(W,Ue)):nt&&(nt.d(1),nt=null),je[12]==Ce.preview?Xe?Qe[0]&4096&&E(Xe,1):(Xe=nf(),Xe.c(),E(Xe,1),Xe.m(W,kt)):Xe&&(ae(),P(Xe,1,1,()=>{Xe=null}),ue()),((sr=je[3])==null?void 0:sr.scale)!=0?gt?gt.p(je,Qe):(gt=lf(je),gt.c(),gt.m(W,ze)):gt&&(gt.d(1),gt=null),(!te||Qe[0]&64)&&Z(f,"show-responsive-controls",je[6]);const nr={};Qe[0]&32&&(nr.active=je[5]),Mt.$set(nr)},i(je){te||(E(o.$$.fragment,je),E(Pe),E(He),E(Xe),E(ct.$$.fragment,je),E(Mt.$$.fragment,je),te=!0)},o(je){P(o.$$.fragment,je),P(Pe),P(He),P(Xe),P(ct.$$.fragment,je),P(Mt.$$.fragment,je),te=!1},d(je){je&&(y(e),y(u),y(f),y(Dt)),q(o),n[32](null),Pe&&Pe.d(),re&&re.d(),He&&He.d(),nt&&nt.d(),Xe&&Xe.d(),gt&&gt.d(),q(ct),q(Mt,je),Ze=!1,me(fe)}}}function Iw(n){let e;return{c(){e=w("span"),p(e,"class","loader loader-lg m-t-auto m-b-auto")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function Qu(n){let e,t,i={};return e=new Ed({props:i}),n[34](e),{c(){U(e.$$.fragment)},m(l,s){F(e,l,s),t=!0},p(l,s){const r={};e.$set(r)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){n[34](null),q(e,l)}}}function xu(n){let e,t=n[17].length+"",i,l;return{c(){e=w("sub"),i=x(t),p(e,"class",l="sub "+(n[18].length?"sub-warning":n[12]==Ce.comments?"sub-danger":"sub-secondary-alt")),p(e,"title","Unresolved comments")},m(s,r){k(s,e,r),v(e,i)},p(s,r){r[0]&131072&&t!==(t=s[17].length+"")&&ke(i,t),r[0]&266240&&l!==(l="sub "+(s[18].length?"sub-warning":s[12]==Ce.comments?"sub-danger":"sub-secondary-alt"))&&p(e,"class",l)},d(s){s&&y(e)}}}function ef(n){let e,t;return e=new d2({}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function tf(n){let e,t,i;return{c(){e=w("button"),e.innerHTML='<span class="txt">Comments panel</span>',p(e,"type","button"),p(e,"class","btn btn-sm btn-transparent btn-danger entrance-right")},m(l,s){k(l,e,s),t||(i=$(e,"click",be(n[39])),t=!0)},p:X,d(l){l&&y(e),t=!1,i()}}}function nf(n){let e,t;return e=new Od({}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function lf(n){let e,t,i,l,s;return{c(){e=w("button"),t=w("i"),p(t,"class","iconoir-scale-frame-reduce"),p(e,"class",i="btn btn-circle btn-hint btn-transparent "+(n[19]?"txt-warning":"txt-hint"))},m(r,o){k(r,e,o),v(e,t),l||(s=[we(Oe.call(null,e,{position:"top",text:"Toggle fit to screen"})),$(e,"click",be(Kc))],l=!0)},p(r,o){o[0]&524288&&i!==(i="btn btn-circle btn-hint btn-transparent "+(r[19]?"txt-warning":"txt-hint"))&&p(e,"class",i)},d(r){r&&y(e),l=!1,me(s)}}}function Pw(n){let e,t,i,l;const s=[Iw,Lw],r=[];function o(a,u){return a[11]?1:0}return e=o(n),t=r[e]=s[e](n),{c(){t.c(),i=Ne()},m(a,u){r[e].m(a,u),k(a,i,u),l=!0},p(a,u){let f=e;e=o(a),e===f?r[e].p(a,u):(ae(),P(r[f],1,1,()=>{r[f]=null}),ue(),t=r[e],t?t.p(a,u):(t=r[e]=s[e](a),t.c()),E(t,1),t.m(i.parentNode,i))},i(a){l||(E(t),l=!0)},o(a){P(t),l=!1},d(a){a&&y(i),r[e].d(a)}}}function jw(n){let e,t,i,l,s,r,o,a;return e=new Oi({props:{fullpage:!0,class:"screen-preview-layout screen-preview-mode-"+n[12]+" "+(n[12]==Ce.comments&&n[2]?"screen-preview-comment-popover-active":"")+" "+(n[12]==Ce.hotspots&&n[13]?"screen-preview-hotspot-popover-active":""),header:!1,footer:!1,title:n[4],$$slots:{default:[Pw]},$$scope:{ctx:n}}}),i=new Id({props:{viewport:n[8]}}),s=new Ew({props:{viewport:n[8]}}),{c(){U(e.$$.fragment),t=I(),U(i.$$.fragment),l=I(),U(s.$$.fragment)},m(u,f){F(e,u,f),k(u,t,f),F(i,u,f),k(u,l,f),F(s,u,f),r=!0,o||(a=$(window,"keydown",n[22]),o=!0)},p(u,f){const c={};f[0]&12292&&(c.class="screen-preview-layout screen-preview-mode-"+u[12]+" "+(u[12]==Ce.comments&&u[2]?"screen-preview-comment-popover-active":"")+" "+(u[12]==Ce.hotspots&&u[13]?"screen-preview-hotspot-popover-active":"")),f[0]&16&&(c.title=u[4]),f[0]&1040363|f[1]&4096&&(c.$$scope={dirty:f,ctx:u}),e.$set(c);const d={};f[0]&256&&(d.viewport=u[8]),i.$set(d);const m={};f[0]&256&&(m.viewport=u[8]),s.$set(m)},i(u){r||(E(e.$$.fragment,u),E(i.$$.fragment,u),E(s.$$.fragment,u),r=!0)},o(u){P(e.$$.fragment,u),P(i.$$.fragment,u),P(s.$$.fragment,u),r=!1},d(u){u&&(y(t),y(l)),q(e,u),q(i,u),q(s,u),o=!1,a()}}}const Nw=".toggler-container > .active";function Aw(n,e,t){let i,l,s,r,o,a,u,f,c,d,m,h,g,b,_,C,L,T;Q(n,pt,W=>t(0,o=W)),Q(n,Je,W=>t(1,a=W)),Q(n,qt,W=>t(2,u=W)),Q(n,Tt,W=>t(3,f=W)),Q(n,an,W=>t(27,c=W)),Q(n,Hf,W=>t(28,d=W)),Q(n,Ti,W=>t(12,m=W)),Q(n,Be,W=>t(13,h=W)),Q(n,$i,W=>t(14,g=W)),Q(n,Fi,W=>t(15,b=W)),Q(n,pi,W=>t(16,_=W)),Q(n,pd,W=>t(17,C=W)),Q(n,Jc,W=>t(18,L=W)),Q(n,Ci,W=>t(19,T=W));const O=K.getHashQueryParams();let{params:S}=e,j="",H=!1,D=!1,A=!1,M,Y,G=S.screenId;Ks(),Gc(),B(S.prototypeId,S.screenId);async function B(W,ie){if(!(!W||!ie)){Ul(),Bs(),Ys(),t(24,H=!0);try{md(W),kd(W),gd(W),Zc(W),bd(W),Sd(W);const Ue=await z.collection("prototypes").getOne(W,{expand:"project.users,screens_via_prototype"});zi(Ue,!0),Yn(Ue.expand.project,!0),ve(Je,a=ie,a),ve(pt,o=K.sortItemsByIds(Ue.expand.screens_via_prototype,Ue.screensOrder),o),hd(W,O.commentId),t(24,H=!1)}catch(Ue){Ue.isAbort||(t(24,H=!1),z.error(Ue))}}}function N(){mi(`/projects/${S==null?void 0:S.projectId}/prototypes/${S.prototypeId}`)}function V(){t(5,D=!D)}function ee(W){if(!(W.altKey||W.ctrlKey||K.isInput(W.target)||document.querySelector(Nw))){if(W.code==="Escape"&&D){W.preventDefault(),t(5,D=!1);return}if(W.code==="ArrowLeft"){W.preventDefault(),Sn(-1);return}if(W.code==="ArrowRight"){W.preventDefault(),Sn(1);return}if(W.code==="KeyP"){W.preventDefault(),Wt(Ce.preview);return}if(W.code==="KeyH"){W.preventDefault(),Wt(Ce.hotspots);return}if(W.code==="KeyC"){W.preventDefault(),Wt(Ce.comments);return}}}fn(()=>{ln==null||ln(),sn==null||sn(),on==null||on(),rn==null||rn()});function J(W){We.call(this,n,W)}const R=()=>Sn(-1),ce=()=>Sn(1);function oe(W){le[W?"unshift":"push"](()=>{Y=W,t(8,Y)})}const pe=W=>{W.dataTransfer.files.length&&Gs(a,W.dataTransfer.files[0])};function Ee(W){le[W?"unshift":"push"](()=>{M=W,t(7,M)})}const tt=()=>Wt(Ce.preview),se=()=>Wt(Ce.hotspots),ge=()=>Wt(Ce.comments),Fe=()=>t(6,A=!A),ne=()=>M==null?void 0:M.toggle(),de=()=>{document.activeElement.blur()};return n.$$set=W=>{"params"in W&&t(23,S=W.params)},n.$$.update=()=>{n.$$.dirty[0]&41943042&&a&&G==a.id&&S.screenId!=G&&(t(25,G=S.screenId),ve(Je,a=S.screenId,a)),n.$$.dirty[0]&134217738&&t(4,j=[a==null?void 0:a.title,f==null?void 0:f.title,c==null?void 0:c.title].filter(Boolean).join(" - ")),n.$$.dirty[0]&301989898&&a&&a.id!=G&&(t(25,G=a.id),mi(`/projects/${f.project}/prototypes/${f.id}/screens/${a.id}?${d}`)),n.$$.dirty[0]&150994954&&t(11,i=!H&&!!(c!=null&&c.id)&&!!(f!=null&&f.id)&&!!(a!=null&&a.id)),n.$$.dirty[0]&3&&t(26,l=o.findIndex(W=>W.id==(a==null?void 0:a.id))),n.$$.dirty[0]&67108864&&t(10,s=l===0),n.$$.dirty[0]&67108865&&t(9,r=o.length-1===l),n.$$.dirty[0]&4&&K.replaceHashQueryParams({commentId:(u==null?void 0:u.id)||null})},[o,a,u,f,j,D,A,M,Y,r,s,i,m,h,g,b,_,C,L,T,N,V,ee,S,H,G,l,c,d,J,R,ce,oe,pe,Ee,tt,se,ge,Fe,ne,de]}class Dw extends Te{constructor(e){super(),Se(this,e,Aw,jw,_e,{params:23},null,[-1,-1])}}function Mw(n){let e,t,i;const l=[{searchable:!0},{class:"prototypes-select"},{dropdownClass:"dropdown-right"},{noOptionsText:"No prototypes found"},{selectPlaceholder:"- Select prototype -"},{items:n[1]},n[2]];function s(o){n[4](o)}let r={};for(let o=0;o<l.length;o+=1)r=Me(r,l[o]);return n[0]!==void 0&&(r.keyOfSelected=n[0]),e=new dn({props:r}),le.push(()=>De(e,"keyOfSelected",s)),{c(){U(e.$$.fragment)},m(o,a){F(e,o,a),i=!0},p(o,[a]){const u=a&6?_t(l,[l[0],l[1],l[2],l[3],l[4],a&2&&{items:o[1]},a&4&&Lt(o[2])]):{};!t&&a&1&&(t=!0,u.keyOfSelected=o[0],Ae(()=>t=!1)),e.$set(u)},i(o){i||(E(e.$$.fragment,o),i=!0)},o(o){P(e.$$.fragment,o),i=!1},d(o){q(e,o)}}}function Hw(n,e,t){let i;const l=["value"];let s=at(e,l),r;Q(n,Ft,u=>t(3,r=u));let{value:o}=e;function a(u){o=u,t(0,o)}return n.$$set=u=>{e=Me(Me({},e),Bt(u)),t(2,s=at(e,l)),"value"in u&&t(0,o=u.value)},n.$$.update=()=>{n.$$.dirty&8&&t(1,i=r.map(u=>({value:u.id,label:u.title,icon:K.getPrototypeIcon(u)})))},[o,i,s,r,a]}class $w extends Te{constructor(e){super(),Se(this,e,Hw,Mw,_e,{value:0})}}function Rw(n){let e,t,i,l,s,r,o,a;return{c(){e=w("label"),t=x("Additional details"),l=I(),s=w("textarea"),p(e,"for",i=n[16]),p(s,"id",r=n[16]),p(s,"rows","3")},m(u,f){k(u,e,f),v(e,t),k(u,l,f),k(u,s,f),ye(s,n[3]),o||(a=$(s,"input",n[9]),o=!0)},p(u,f){f&65536&&i!==(i=u[16])&&p(e,"for",i),f&65536&&r!==(r=u[16])&&p(s,"id",r),f&8&&ye(s,u[3])},d(u){u&&(y(e),y(l),y(s)),o=!1,a()}}}function Fw(n){let e,t,i,l,s;return t=new Le({props:{class:"form-field m-0",name:"message",$$slots:{default:[Rw,({uniqueId:r})=>({16:r}),({uniqueId:r})=>r?65536:0]},$$scope:{ctx:n}}}),{c(){e=w("form"),U(t.$$.fragment),p(e,"id",n[5])},m(r,o){k(r,e,o),F(t,e,null),i=!0,l||(s=$(e,"submit",be(n[6])),l=!0)},p(r,o){const a={};o&196616&&(a.$$scope={dirty:o,ctx:r}),t.$set(a)},i(r){i||(E(t.$$.fragment,r),i=!0)},o(r){P(t.$$.fragment,r),i=!1},d(r){r&&y(e),q(t),l=!1,s()}}}function qw(n){let e;return{c(){e=w("h5"),e.textContent="Report this design for spam or abusive content",p(e,"class","block txt-center")},m(t,i){k(t,e,i)},p:X,d(t){t&&y(e)}}}function Uw(n){let e,t,i,l,s,r,o;return{c(){e=w("button"),t=w("span"),t.textContent="Close",i=I(),l=w("button"),s=w("span"),s.textContent="Report",p(t,"class","txt"),p(e,"type","button"),p(e,"class","btn btn-transparent m-r-auto"),e.disabled=n[4],p(s,"class","txt"),p(l,"form",n[5]),p(l,"type","submit"),p(l,"class","btn btn-expanded-sm btn-primary"),l.disabled=n[4],Z(l,"btn-loading",n[4])},m(a,u){k(a,e,u),v(e,t),k(a,i,u),k(a,l,u),v(l,s),r||(o=$(e,"click",n[8]),r=!0)},p(a,u){u&16&&(e.disabled=a[4]),u&16&&(l.disabled=a[4]),u&16&&Z(l,"btn-loading",a[4])},d(a){a&&(y(e),y(i),y(l)),r=!1,o()}}}function Ww(n){let e,t,i;function l(r){n[11](r)}let s={popup:!0,$$slots:{footer:[Uw],header:[qw],default:[Fw]},$$scope:{ctx:n}};return n[0]!==void 0&&(s.active=n[0]),e=new pn({props:s}),n[10](e),le.push(()=>De(e,"active",l)),e.$on("show",n[12]),e.$on("hide",n[13]),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,[o]){const a={};o&131096&&(a.$$scope={dirty:o,ctx:r}),!t&&o&1&&(t=!0,a.active=r[0],Ae(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){P(e.$$.fragment,r),i=!1},d(r){n[10](null),q(e,r)}}}function Vw(n,e,t){const i=ft(),l="report_"+K.randomString(5);let{active:s=!1}=e,r,o="",a=!1;function u(){return c(),r==null?void 0:r.show()}function f(){return r==null?void 0:r.hide()}function c(){Zt({}),t(3,o="")}async function d(){if(!a){t(4,a=!0);try{await z.send("/api/pr/report",{method:"POST",body:{message:o}}),i("submit"),ht("Thank you, we will investigate and remove the project if found inappropriate.",5e3),cn("/")}catch(L){L.isAbort||z.error(L)}t(4,a=!1)}}fn(()=>{f()});const m=()=>f();function h(){o=this.value,t(3,o)}function g(L){le[L?"unshift":"push"](()=>{r=L,t(2,r)})}function b(L){s=L,t(0,s)}function _(L){We.call(this,n,L)}function C(L){We.call(this,n,L)}return n.$$set=L=>{"active"in L&&t(0,s=L.active)},[s,f,r,o,a,l,d,u,m,h,g,b,_,C]}class zw extends Te{constructor(e){super(),Se(this,e,Vw,Ww,_e,{active:0,show:7,hide:1})}get show(){return this.$$.ctx[7]}get hide(){return this.$$.ctx[1]}}function Bw(n){let e,t,i=n[3].title+"",l,s,r,o,a,u,f,c,d;return{c(){e=w("div"),t=w("p"),l=x(i),s=I(),r=w("button"),r.innerHTML='<i class="iconoir-warning-triangle-solid"></i> <span class="txt">Report design</span>',o=I(),a=w("hr"),u=I(),f=w("p"),f.innerHTML=`Presented with
                <a href="https://presentator.io" target="_blank" rel="noopener noreferrer">Presentator</a>`,p(t,"class","txt-bold"),p(r,"type","button"),p(r,"class","btn btn-xs btn-transparent btn-danger m-t-xs"),p(a,"class","m-t-xs m-b-xs"),p(f,"class","txt-xs txt-hint"),p(e,"class","content")},m(m,h){k(m,e,h),v(e,t),v(t,l),v(e,s),v(e,r),v(e,o),v(e,a),v(e,u),v(e,f),c||(d=$(r,"click",Ke(n[7])),c=!0)},p(m,h){h&8&&i!==(i=m[3].title+"")&&ke(l,i)},d(m){m&&y(e),c=!1,d()}}}function Zw(n){let e,t,i,l,s,r,o,a,u,f,c;function d(g){n[9](g)}let m={class:"dropdown dropdown-right dropdown-upside project-info-dropdown",$$slots:{default:[Bw]},$$scope:{ctx:n}};n[2]!==void 0&&(m.active=n[2]),l=new Nt({props:m}),n[8](l),le.push(()=>De(l,"active",d));let h={};return a=new zw({props:h}),n[10](a),{c(){e=w("div"),t=w("i"),i=I(),U(l.$$.fragment),o=I(),U(a.$$.fragment),p(t,"class","iconoir-info-circle"),p(e,"tabindex","0"),p(e,"class","btn btn-circle btn-hint txt-hint btn-transparent project-info-btn")},m(g,b){k(g,e,b),v(e,t),v(e,i),F(l,e,null),k(g,o,b),F(a,g,b),u=!0,f||(c=[we(r=Oe.call(null,e,n[2]?void 0:{position:"top-right",text:"Project info"})),$(e,"click",Ke(n[6]))],f=!0)},p(g,[b]){const _={};b&2058&&(_.$$scope={dirty:b,ctx:g}),!s&&b&4&&(s=!0,_.active=g[2],Ae(()=>s=!1)),l.$set(_),r&&et(r.update)&&b&4&&r.update.call(null,g[2]?void 0:{position:"top-right",text:"Project info"});const C={};a.$set(C)},i(g){u||(E(l.$$.fragment,g),E(a.$$.fragment,g),u=!0)},o(g){P(l.$$.fragment,g),P(a.$$.fragment,g),u=!1},d(g){g&&(y(e),y(o)),n[8](null),q(l),n[10](null),q(a,g),f=!1,me(c)}}}function Yw(n,e,t){let i;Q(n,an,h=>t(3,i=h));let l,s,r=!1;function o(){l==null||l.show()}function a(){l==null||l.hide()}function u(h){We.call(this,n,h)}const f=()=>s==null?void 0:s.show();function c(h){le[h?"unshift":"push"](()=>{l=h,t(0,l)})}function d(h){r=h,t(2,r)}function m(h){le[h?"unshift":"push"](()=>{s=h,t(1,s)})}return[l,s,r,i,o,a,u,f,c,d,m]}class Kw extends Te{constructor(e){super(),Se(this,e,Yw,Zw,_e,{show:4,hide:5})}get show(){return this.$$.ctx[4]}get hide(){return this.$$.ctx[5]}}function Gw(n){let e,t,i,l,s,r,o,a,u,f,c;o=new Cd({});let d=n[4]===Ce.comments&&sf(n);return{c(){e=w("div"),t=w("div"),i=w("div"),i.innerHTML='<i class="iconoir-nav-arrow-left"></i>',l=I(),s=w("div"),s.innerHTML='<i class="iconoir-nav-arrow-right"></i>',r=I(),U(o.$$.fragment),a=I(),d&&d.c(),p(i,"class","screen-preview-nav-ctrl left"),Z(i,"disabled",n[11]),p(s,"class","screen-preview-nav-ctrl right"),Z(s,"disabled",n[10]),p(t,"class","screen-preview-nav-wrapper"),Z(t,"discreet",!n[6]),p(e,"class","screen-preview-container entrance-fade")},m(m,h){k(m,e,h),v(e,t),v(t,i),v(t,l),v(t,s),v(t,r),F(o,t,null),n[31](t),v(e,a),d&&d.m(e,null),u=!0,f||(c=[$(i,"click",be(n[29])),$(s,"click",be(n[30]))],f=!0)},p(m,h){(!u||h[0]&2048)&&Z(i,"disabled",m[11]),(!u||h[0]&1024)&&Z(s,"disabled",m[10]),(!u||h[0]&64)&&Z(t,"discreet",!m[6]),m[4]===Ce.comments?d?(d.p(m,h),h[0]&16&&E(d,1)):(d=sf(m),d.c(),E(d,1),d.m(e,null)):d&&(ae(),P(d,1,1,()=>{d=null}),ue())},i(m){u||(E(o.$$.fragment,m),E(d),u=!0)},o(m){P(o.$$.fragment,m),P(d),u=!1},d(m){m&&y(e),q(o),n[31](null),d&&d.d(),f=!1,me(c)}}}function Jw(n){let e;return{c(){e=w("div"),e.innerHTML='<div class="placeholder-block"><figure class="icon"><i class="iconoir-media-image-list"></i></figure> <h5 class="title txt-hint">The prototype doesn&#39;t have any screens yet.</h5></div>',p(e,"class","wrapper wrapper-sm m-t-auto m-b-auto")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function Xw(n){let e;return{c(){e=w("span"),p(e,"class","loader loader-lg m-t-auto m-b-auto")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function sf(n){let e,t,i={};return e=new Ed({props:i}),n[32](e),{c(){U(e.$$.fragment)},m(l,s){F(e,l,s),t=!0},p(l,s){const r={};e.$set(r)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){n[32](null),q(e,l)}}}function rf(n){var h,g;let e,t,i,l,s,r,o,a,u,f,c=((h=n[2])==null?void 0:h.id)&&of(n),d=((g=n[2])==null?void 0:g.id)&&ff(n),m=n[17].length>1&&mf(n);return r=new Kw({}),{c(){e=w("nav"),c&&c.c(),t=I(),i=w("div"),d&&d.c(),l=I(),m&&m.c(),s=I(),U(r.$$.fragment),p(i,"class","controls-group group-right responsive-hide"),p(e,"class","controls-bar"),Z(e,"show-responsive-controls",n[7])},m(b,_){k(b,e,_),c&&c.m(e,null),v(e,t),v(e,i),d&&d.m(i,null),v(i,l),m&&m.m(i,null),v(i,s),F(r,i,null),a=!0,u||(f=$(e,"click",be(n[38])),u=!0)},p(b,_){var C,L;(C=b[2])!=null&&C.id?c?c.p(b,_):(c=of(b),c.c(),c.m(e,t)):c&&(c.d(1),c=null),(L=b[2])!=null&&L.id?d?(d.p(b,_),_[0]&4&&E(d,1)):(d=ff(b),d.c(),E(d,1),d.m(i,l)):d&&(ae(),P(d,1,1,()=>{d=null}),ue()),b[17].length>1?m?(m.p(b,_),_[0]&131072&&E(m,1)):(m=mf(b),m.c(),E(m,1),m.m(i,s)):m&&(ae(),P(m,1,1,()=>{m=null}),ue()),(!a||_[0]&128)&&Z(e,"show-responsive-controls",b[7])},i(b){a||(E(d),E(m),E(r.$$.fragment,b),b&&vt(()=>{a&&(o||(o=ut(e,Ct,{duration:150},!0)),o.run(1))}),a=!0)},o(b){P(d),P(m),P(r.$$.fragment,b),b&&(o||(o=ut(e,Ct,{duration:150},!1)),o.run(0)),a=!1},d(b){b&&y(e),c&&c.d(),d&&d.d(),m&&m.d(),q(r),b&&o&&o.end(),u=!1,f()}}}function of(n){var Y,G;let e,t,i,l=((Y=n[2])==null?void 0:Y.title)+"",s,r,o,a=Ol(n[2])+"",u,f,c=n[3].length+"",d,m,h,g,b,_,C,L,T,O,S,j,H,D,A,M=((G=n[0])==null?void 0:G.allowComments)&&af(n);return{c(){var B;e=w("div"),t=w("button"),i=w("span"),s=x(l),o=x(`
                        (`),u=x(a),f=x(" of "),d=x(c),m=x(`)
                        `),h=w("i"),_=I(),C=w("div"),L=w("button"),T=w("i"),S=I(),M&&M.c(),j=I(),H=w("button"),H.innerHTML='<i class="iconoir-more-vert"></i>',p(i,"class","screen-title-trim"),p(i,"title",r=(B=n[2])==null?void 0:B.title),p(h,"class",g="iconoir-nav-arrow-"+(n[5]?"up":"down")),p(t,"type","button"),p(t,"class",b="btn btn-sm btn-hint txt-hint "+(n[5]?"btn-semitransparent":"btn-transparent")),p(e,"class","controls-group group-left"),p(T,"class","iconoir-play"),p(L,"class",O="btn btn-circle "+(n[4]==Ce.preview?"btn-primary btn-transparent":"btn-hint btn-transparent txt-hint")),p(H,"type","button"),p(H,"class","btn btn-circle btn-hint txt-hint btn-transparent responsive-show"),Z(H,"active",n[7]),p(C,"class","controls-group group-center")},m(B,N){k(B,e,N),v(e,t),v(t,i),v(i,s),v(t,o),v(t,u),v(t,f),v(t,d),v(t,m),v(t,h),k(B,_,N),k(B,C,N),v(C,L),v(L,T),v(C,S),M&&M.m(C,null),v(C,j),v(C,H),D||(A=[$(t,"click",be(n[19])),we(Oe.call(null,L,{position:"top",text:"Preview mode",sub:"P"})),$(L,"click",be(n[33])),we(Oe.call(null,H,{position:"top",text:"More options"})),$(H,"click",n[35])],D=!0)},p(B,N){var V,ee,J;N[0]&4&&l!==(l=((V=B[2])==null?void 0:V.title)+"")&&ke(s,l),N[0]&4&&r!==(r=(ee=B[2])==null?void 0:ee.title)&&p(i,"title",r),N[0]&4&&a!==(a=Ol(B[2])+"")&&ke(u,a),N[0]&8&&c!==(c=B[3].length+"")&&ke(d,c),N[0]&32&&g!==(g="iconoir-nav-arrow-"+(B[5]?"up":"down"))&&p(h,"class",g),N[0]&32&&b!==(b="btn btn-sm btn-hint txt-hint "+(B[5]?"btn-semitransparent":"btn-transparent"))&&p(t,"class",b),N[0]&16&&O!==(O="btn btn-circle "+(B[4]==Ce.preview?"btn-primary btn-transparent":"btn-hint btn-transparent txt-hint"))&&p(L,"class",O),(J=B[0])!=null&&J.allowComments?M?M.p(B,N):(M=af(B),M.c(),M.m(C,j)):M&&(M.d(1),M=null),N[0]&128&&Z(H,"active",B[7])},d(B){B&&(y(e),y(_),y(C)),M&&M.d(),D=!1,me(A)}}}function af(n){let e,t,i,l,s,r,o=n[14].length&&uf(n);return{c(){e=w("button"),t=w("i"),i=I(),o&&o.c(),p(t,"class","iconoir-message-text"),p(e,"class",l="btn btn-circle "+(n[4]==Ce.comments?"btn-danger btn-transparent":"btn-hint btn-transparent txt-hint")),Z(e,"btn-loading",n[13])},m(a,u){k(a,e,u),v(e,t),v(e,i),o&&o.m(e,null),s||(r=[we(Oe.call(null,e,{position:"top",text:"Comments mode",sub:"C"})),$(e,"click",be(n[34]))],s=!0)},p(a,u){a[14].length?o?o.p(a,u):(o=uf(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null),u[0]&16&&l!==(l="btn btn-circle "+(a[4]==Ce.comments?"btn-danger btn-transparent":"btn-hint btn-transparent txt-hint"))&&p(e,"class",l),u[0]&8208&&Z(e,"btn-loading",a[13])},d(a){a&&y(e),o&&o.d(),s=!1,me(r)}}}function uf(n){let e,t=n[14].length+"",i,l;return{c(){e=w("sub"),i=x(t),p(e,"class",l="sub "+(n[15].length?"sub-warning":n[4]==Ce.comments?"sub-danger":"sub-secondary-alt")),p(e,"title","Unread comments")},m(s,r){k(s,e,r),v(e,i)},p(s,r){r[0]&16384&&t!==(t=s[14].length+"")&&ke(i,t),r[0]&32784&&l!==(l="sub "+(s[15].length?"sub-warning":s[4]==Ce.comments?"sub-danger":"sub-secondary-alt"))&&p(e,"class",l)},d(s){s&&y(e)}}}function ff(n){var a;let e,t,i,l,s=((a=n[0])==null?void 0:a.allowComments)&&n[4]==Ce.comments&&!n[13]&&cf(n),r=n[4]==Ce.preview&&df(),o=n[1].scale!=0&&pf(n);return{c(){s&&s.c(),e=I(),r&&r.c(),t=I(),o&&o.c(),i=Ne()},m(u,f){s&&s.m(u,f),k(u,e,f),r&&r.m(u,f),k(u,t,f),o&&o.m(u,f),k(u,i,f),l=!0},p(u,f){var c;(c=u[0])!=null&&c.allowComments&&u[4]==Ce.comments&&!u[13]?s?s.p(u,f):(s=cf(u),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),u[4]==Ce.preview?r?f[0]&16&&E(r,1):(r=df(),r.c(),E(r,1),r.m(t.parentNode,t)):r&&(ae(),P(r,1,1,()=>{r=null}),ue()),u[1].scale!=0?o?o.p(u,f):(o=pf(u),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},i(u){l||(E(r),l=!0)},o(u){P(r),l=!1},d(u){u&&(y(e),y(t),y(i)),s&&s.d(u),r&&r.d(u),o&&o.d(u)}}}function cf(n){let e,t,i;return{c(){e=w("button"),e.innerHTML='<span class="txt">Comments panel</span>',p(e,"type","button"),p(e,"class","btn btn-sm btn-transparent btn-danger entrance-right")},m(l,s){k(l,e,s),t||(i=$(e,"click",be(n[36])),t=!0)},p:X,d(l){l&&y(e),t=!1,i()}}}function df(n){let e,t;return e=new Od({}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function pf(n){let e,t,i,l,s;return{c(){e=w("button"),t=w("i"),p(t,"class","iconoir-scale-frame-reduce"),p(e,"class",i="btn btn-circle btn-hint btn-transparent "+(n[16]?"txt-warning":"txt-hint"))},m(r,o){k(r,e,o),v(e,t),l||(s=[we(Oe.call(null,e,{position:"top",text:"Toggle fit to screen"})),$(e,"click",be(Kc))],l=!0)},p(r,o){o[0]&65536&&i!==(i="btn btn-circle btn-hint btn-transparent "+(r[16]?"txt-warning":"txt-hint"))&&p(e,"class",i)},d(r){r&&y(e),l=!1,me(s)}}}function mf(n){let e,t,i,l;function s(o){n[37](o)}let r={upside:!0,searchable:!1};return n[18]!==void 0&&(r.value=n[18]),t=new $w({props:r}),le.push(()=>De(t,"value",s)),{c(){e=w("div"),U(t.$$.fragment),p(e,"class","form-field form-field-sm")},m(o,a){k(o,e,a),F(t,e,null),l=!0},p(o,a){const u={};!i&&a[0]&262144&&(i=!0,u.value=o[18],Ae(()=>i=!1)),t.$set(u)},i(o){l||(E(t.$$.fragment,o),l=!0)},o(o){P(t.$$.fragment,o),l=!1},d(o){o&&y(e),q(t)}}}function Qw(n){let e,t,i,l,s,r=n[6]?"Hide":"Show",o,a,u,f,c,d,m,h,g;const b=[Xw,Jw,Gw],_=[];function C(T,O){var S;return T[12]?(S=T[2])!=null&&S.id?2:1:0}e=C(n),t=_[e]=b[e](n);let L=n[6]&&rf(n);return f=new Td({props:{active:n[5]}}),d=new Id({props:{viewport:n[9]}}),{c(){t.c(),i=I(),l=w("div"),s=w("div"),o=x(r),a=I(),L&&L.c(),u=I(),U(f.$$.fragment),c=I(),U(d.$$.fragment),p(s,"class","controls-bar-toggle"),Z(s,"active",n[6]),p(l,"class","controls-bar-wrapper")},m(T,O){_[e].m(T,O),k(T,i,O),k(T,l,O),v(l,s),v(s,o),v(l,a),L&&L.m(l,null),k(T,u,O),F(f,T,O),k(T,c,O),F(d,T,O),m=!0,h||(g=[$(window,"keydown",n[21]),$(s,"click",be(n[20]))],h=!0)},p(T,O){let S=e;e=C(T),e===S?_[e].p(T,O):(ae(),P(_[S],1,1,()=>{_[S]=null}),ue(),t=_[e],t?t.p(T,O):(t=_[e]=b[e](T),t.c()),E(t,1),t.m(i.parentNode,i)),(!m||O[0]&64)&&r!==(r=T[6]?"Hide":"Show")&&ke(o,r),(!m||O[0]&64)&&Z(s,"active",T[6]),T[6]?L?(L.p(T,O),O[0]&64&&E(L,1)):(L=rf(T),L.c(),E(L,1),L.m(l,null)):L&&(ae(),P(L,1,1,()=>{L=null}),ue());const j={};O[0]&32&&(j.active=T[5]),f.$set(j);const H={};O[0]&512&&(H.viewport=T[9]),d.$set(H)},i(T){m||(E(t),E(L),E(f.$$.fragment,T),E(d.$$.fragment,T),m=!0)},o(T){P(t),P(L),P(f.$$.fragment,T),P(d.$$.fragment,T),m=!1},d(T){T&&(y(i),y(l),y(u),y(c)),_[e].d(T),L&&L.d(),q(f,T),q(d,T),h=!1,me(g)}}}const xw=".toggler-container > .active";function ev(n,e,t){let i,l,s,r,o,a,u,f,c,d,m,h,g,b,_,C;Q(n,Hf,ne=>t(27,o=ne)),Q(n,Tt,ne=>t(1,a=ne)),Q(n,Je,ne=>t(2,u=ne)),Q(n,pt,ne=>t(3,f=ne)),Q(n,qt,ne=>t(28,c=ne)),Q(n,Ti,ne=>t(4,d=ne)),Q(n,pi,ne=>t(13,m=ne)),Q(n,pd,ne=>t(14,h=ne)),Q(n,Jc,ne=>t(15,g=ne)),Q(n,Ci,ne=>t(16,b=ne)),Q(n,Ft,ne=>t(17,_=ne)),Q(n,Bn,ne=>t(18,C=ne));const L=K.getHashQueryParams();let{link:T}=e,{params:O}=e,S=!1,j=!1,H=!0,D=!1,A,M,Y="",G="";Ks(),Gc();async function B(){t(23,S=!0),await St(),Ys();try{const ne=a.id;kd(ne),gd(ne),Zc(ne),T!=null&&T.allowComments&&md(ne),bd(ne),Sd(ne);const de=await z.collection("screens").getFullList({filter:`prototype="${ne}"`});ve(Je,u=O.screenId,u),ve(pt,f=K.sortItemsByIds(de,a.screensOrder),f),T!=null&&T.allowComments&&hd(ne,L.commentId),u!=null&&u.id||cn(`/${T.username}/prototypes/${a.id}?${o}`),t(23,S=!1)}catch(ne){ne.isAbort||(t(23,S=!1),z.error(ne))}}function N(){t(5,j=!j)}function V(){t(6,H=!H),H||(t(5,j=!1),A==null||A.hide())}function ee(ne){if(!(ne.altKey||ne.ctrlKey||K.isInput(ne.target)||document.querySelector(xw))){if(ne.code==="Escape"&&j){ne.preventDefault(),t(5,j=!1);return}if(ne.code==="ArrowLeft"){ne.preventDefault(),Sn(-1);return}if(ne.code==="ArrowRight"){ne.preventDefault(),Sn(1);return}if(ne.code==="KeyP"){ne.preventDefault(),Wt(Ce.preview);return}if(ne.code==="KeyC"&&(T!=null&&T.allowComments)){ne.preventDefault(),Wt(Ce.comments);return}}}fn(()=>{sn==null||sn(),ln==null||ln(),on==null||on(),rn==null||rn()});const J=()=>Sn(-1),R=()=>Sn(1);function ce(ne){le[ne?"unshift":"push"](()=>{M=ne,t(9,M)})}function oe(ne){le[ne?"unshift":"push"](()=>{A=ne,t(8,A)})}const pe=()=>Wt(Ce.preview),Ee=()=>Wt(Ce.comments),tt=()=>t(7,D=!D),se=()=>A==null?void 0:A.toggle();function ge(ne){C=ne,Bn.set(C)}const Fe=()=>{document.activeElement.blur()};return n.$$set=ne=>{"link"in ne&&t(0,T=ne.link),"params"in ne&&t(22,O=ne.params)},n.$$.update=()=>{n.$$.dirty[0]&17&&!(T!=null&&T.allowComments)&&d==Ce.comments&&Wt(Ce.preview),n.$$.dirty[0]&33554434&&a&&G!=(a==null?void 0:a.id)&&(t(25,G=a.id),B()),n.$$.dirty[0]&20971524&&u&&Y==u.id&&O.screenId!=Y&&(t(24,Y=O.screenId),ve(Je,u=O.screenId,u)),n.$$.dirty[0]&150994951&&u&&u.id!=Y&&(t(24,Y=u.id),mi(`/${T.username}/prototypes/${a.id}/screens/${u.id}?${o}`)),n.$$.dirty[0]&8388610&&t(12,i=!S&&!!(a!=null&&a.id)),n.$$.dirty[0]&12&&t(26,l=f.findIndex(ne=>ne.id==(u==null?void 0:u.id))),n.$$.dirty[0]&67108864&&t(11,s=l===0),n.$$.dirty[0]&67108872&&t(10,r=f.length-1===l),n.$$.dirty[0]&268435456&&K.replaceHashQueryParams({commentId:(c==null?void 0:c.id)||null})},[T,a,u,f,d,j,H,D,A,M,r,s,i,m,h,g,b,_,C,N,V,ee,O,S,Y,G,l,o,c,J,R,ce,oe,pe,Ee,tt,se,ge,Fe]}class tv extends Te{constructor(e){super(),Se(this,e,ev,Qw,_e,{link:0,params:22},null,[-1,-1])}}function nv(n){let e,t;return e=new tv({props:{link:n[1],params:n[0].groups}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,l){const s={};l&2&&(s.link=i[1]),l&1&&(s.params=i[0].groups),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function iv(n){let e;return{c(){e=w("div"),e.innerHTML='<div class="placeholder-block"><figure class="icon"><i class="iconoir-pen-tablet"></i></figure> <h5 class="title txt-hint">The project doesn&#39;t have any prototypes yet.</h5></div>',p(e,"class","wrapper wrapper-sm m-t-auto m-b-auto")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function lv(n){let e;return{c(){e=w("span"),p(e,"class","loader m-t-auto m-b-auto")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&y(e)}}}function sv(n){let e,t,i,l,s,r,o,a,u,f,c,d,m,h,g;return a=new Le({props:{class:"form-field form-field-lg",name:"password",$$slots:{default:[rv,({uniqueId:b})=>({15:b}),({uniqueId:b})=>b?32768:0]},$$scope:{ctx:n}}}),{c(){e=w("div"),t=I(),i=w("div"),l=w("div"),s=w("h4"),s.textContent="The project link is password protected",r=I(),o=w("form"),U(a.$$.fragment),u=I(),f=w("button"),f.innerHTML='<span class="txt">View project</span> <i class="iconoir-arrow-right"></i>',c=I(),d=w("div"),p(e,"class","flex-fill"),p(s,"class","m-b-base"),p(f,"type","submit"),p(f,"class","btn btn-block btn-lg btn-primary btn-next"),Z(f,"btn-disabled",n[4]),Z(f,"btn-loading",n[4]),p(o,"class","panel-content"),p(l,"class","panel"),p(i,"class","wrapper wrapper-sm m-b-base entrance-top"),p(d,"class","flex-fill")},m(b,_){k(b,e,_),k(b,t,_),k(b,i,_),v(i,l),v(l,s),v(l,r),v(l,o),F(a,o,null),v(o,u),v(o,f),k(b,c,_),k(b,d,_),m=!0,h||(g=$(o,"submit",be(n[14])),h=!0)},p(b,_){const C={};_&98308&&(C.$$scope={dirty:_,ctx:b}),a.$set(C),(!m||_&16)&&Z(f,"btn-disabled",b[4]),(!m||_&16)&&Z(f,"btn-loading",b[4])},i(b){m||(E(a.$$.fragment,b),m=!0)},o(b){P(a.$$.fragment,b),m=!1},d(b){b&&(y(e),y(t),y(i),y(c),y(d)),q(a),h=!1,g()}}}function rv(n){let e,t,i,l,s,r,o,a,u;return{c(){e=w("div"),t=w("label"),i=w("i"),s=I(),r=w("input"),p(i,"class","iconoir-lock"),p(t,"for",l=n[15]),p(t,"class","addon prefix"),r.required=!0,r.autofocus=!0,p(r,"type","password"),p(r,"id",o=n[15]),p(r,"placeholder","Password"),p(e,"class","field-group m-b-10")},m(f,c){k(f,e,c),v(e,t),v(t,i),v(e,s),v(e,r),ye(r,n[2]),r.focus(),a||(u=[we(Oe.call(null,t,{position:"left",text:"Password"})),$(r,"input",n[13])],a=!0)},p(f,c){c&32768&&l!==(l=f[15])&&p(t,"for",l),c&32768&&o!==(o=f[15])&&p(r,"id",o),c&4&&r.value!==f[2]&&ye(r,f[2])},d(f){f&&y(e),a=!1,me(u)}}}function ov(n){let e,t,i,l;const s=[sv,lv,iv,nv],r=[];function o(a,u){return a[3]?0:a[4]?1:a[6].length?3:2}return e=o(n),t=r[e]=s[e](n),{c(){t.c(),i=Ne()},m(a,u){r[e].m(a,u),k(a,i,u),l=!0},p(a,u){let f=e;e=o(a),e===f?r[e].p(a,u):(ae(),P(r[f],1,1,()=>{r[f]=null}),ue(),t=r[e],t?t.p(a,u):(t=r[e]=s[e](a),t.c()),E(t,1),t.m(i.parentNode,i))},i(a){l||(E(t),l=!0)},o(a){P(t),l=!1},d(a){a&&y(i),r[e].d(a)}}}function av(n){let e,t;return e=new Oi({props:{fullpage:!0,class:"screen-preview-layout screen-preview-mode-"+n[7]+" "+(n[7]==Ce.comments&&n[8]?"screen-preview-comment-popover-active":""),header:!1,footer:!1,title:n[5],$$slots:{default:[ov]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,[l]){const s={};l&384&&(s.class="screen-preview-layout screen-preview-mode-"+i[7]+" "+(i[7]==Ce.comments&&i[8]?"screen-preview-comment-popover-active":"")),l&32&&(s.title=i[5]),l&65631&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function uv(n,e,t){let i,l,s,r,o,a,u;Q(n,Ft,C=>t(6,l=C)),Q(n,Tt,C=>t(10,s=C)),Q(n,an,C=>t(11,r=C)),Q(n,Je,C=>t(12,o=C)),Q(n,Ti,C=>t(7,a=C)),Q(n,qt,C=>t(8,u=C));let{params:f}=e,c,d=" ",m=!1,h=!0;g();async function g(){var L,T,O,S,j,H,D,A,M,Y,G;t(4,h=!0),Ul(),Bs();const C=Th(f.groups.linkSlug);try{const B={expand:"project.users,project.prototypes_via_project"};if(C.authStore.isValid&&((L=C.authStore.model)==null?void 0:L.collectionName)=="links"&&((T=C.authStore.model)==null?void 0:T.username)==f.groups.linkSlug)try{const N=await C.collection("links").authRefresh(B);t(1,c=N.record)}catch{C.authStore.clear();const V=await C.collection("links").authWithPassword(f.groups.linkSlug,d,B);t(1,c=V.record)}else{const N=await C.collection("links").authWithPassword(f.groups.linkSlug,d,B);t(1,c=N.record)}(!z.authStore.isValid||!((H=(S=(O=c.expand)==null?void 0:O.project)==null?void 0:S.users)!=null&&H.includes((j=z.authStore.model)==null?void 0:j.id)))&&z.initStore(f.groups.linkSlug),Yn((D=c.expand)==null?void 0:D.project),ve(Ft,l=((Y=(M=(A=c.expand)==null?void 0:A.project)==null?void 0:M.expand)==null?void 0:Y.prototypes_via_project)||[],l),l.find(N=>N.id==f.groups.prototypeId)?ve(Tt,s=f.groups.prototypeId,s):ve(Tt,s=(G=l[l.length-1])==null?void 0:G.id,s),t(3,m=!1),t(4,h=!1)}catch(B){if(B.isAbort)return;t(2,d=""),t(4,h=!1),m?qs("Invalid password."):t(3,m=!0)}}function b(){d=this.value,t(2,d)}const _=()=>g();return n.$$set=C=>{"params"in C&&t(0,f=C.params)},n.$$.update=()=>{n.$$.dirty&7168&&t(5,i=[o?"Preview "+o.title:null,s==null?void 0:s.title,r==null?void 0:r.title].filter(Boolean).join(" - "))},[f,c,d,m,h,i,l,a,u,g,s,r,o,b,_]}class fv extends Te{constructor(e){super(),Se(this,e,uv,av,_e,{params:0})}}const Kt=new Map;Kt.set("/login",en({component:c_,conditions:[n=>!z.authStore.isValid]}));Kt.set("/register",en({component:k_,conditions:[n=>!z.authStore.isValid]}));Kt.set("/confirm-verification/:token",en({asyncComponent:()=>Al(()=>import("./PageConfirmVerification-BFREK-pl.js"),[],import.meta.url)}));Kt.set("/forgotten-password",en({asyncComponent:()=>Al(()=>import("./PageRequestPasswordReset-0ggmVNe8.js"),[],import.meta.url),conditions:[n=>!z.authStore.isValid]}));Kt.set("/confirm-password-reset/:token",en({asyncComponent:()=>Al(()=>import("./PageConfirmPasswordReset-xZLhQM_S.js"),[],import.meta.url)}));Kt.set("/confirm-email-change/:token",en({asyncComponent:()=>Al(()=>import("./PageConfirmEmailChange-BHKIADfY.js"),[],import.meta.url)}));Kt.set("/projects",en({component:Tg,conditions:[n=>z.authStore.isValid]}));Kt.set("/projects/:projectId/prototypes/:prototypeId?",en({component:g0,conditions:[n=>z.authStore.isValid]}));Kt.set("/projects/:projectId/prototypes/:prototypeId/screens/:screenId?",en({component:Dw,conditions:[n=>z.authStore.isValid]}));Kt.set(/^\/(?<linkSlug>[\w\.\-]+)(\/?|(\/prototypes\/(?<prototypeId>\w+)(\/screens\/(?<screenId>\w+))?))$/,en({component:fv}));Kt.set("*",en({component:Oh}));function hf(n,e,t){const i=n.slice();return i[2]=e[t],i}function cv(n){let e;return{c(){e=w("i"),p(e,"class","iconoir-warning-triangle")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function dv(n){let e;return{c(){e=w("i"),p(e,"class","iconoir-warning-circle")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function pv(n){let e;return{c(){e=w("i"),p(e,"class","iconoir-check-circle")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function mv(n){let e;return{c(){e=w("i"),p(e,"class","iconoir-info-circle")},m(t,i){k(t,e,i)},d(t){t&&y(e)}}}function _f(n,e){let t,i,l,s,r=e[2].message+"",o,a,u,f,c,d,m,h=X,g,b,_;function C(S,j){return S[2].type==="info"?mv:S[2].type==="success"?pv:S[2].type==="warning"?dv:cv}let L=C(e),T=L(e);function O(){return e[1](e[2])}return{key:n,first:null,c(){t=w("div"),i=w("div"),T.c(),l=I(),s=w("div"),o=x(r),a=I(),u=w("button"),u.innerHTML='<i class="iconoir-xmark"></i>',f=I(),p(i,"class","icon"),p(s,"class","content"),p(u,"type","button"),p(u,"class","close"),p(t,"class","alert txt-break"),Z(t,"alert-info",e[2].type=="info"),Z(t,"alert-success",e[2].type=="success"),Z(t,"alert-danger",e[2].type=="error"),Z(t,"alert-warning",e[2].type=="warning"),this.first=t},m(S,j){k(S,t,j),v(t,i),T.m(i,null),v(t,l),v(t,s),v(s,o),v(t,a),v(t,u),v(t,f),g=!0,b||(_=$(u,"click",be(O)),b=!0)},p(S,j){e=S,L!==(L=C(e))&&(T.d(1),T=L(e),T&&(T.c(),T.m(i,null))),(!g||j&1)&&r!==(r=e[2].message+"")&&ke(o,r),(!g||j&1)&&Z(t,"alert-info",e[2].type=="info"),(!g||j&1)&&Z(t,"alert-success",e[2].type=="success"),(!g||j&1)&&Z(t,"alert-danger",e[2].type=="error"),(!g||j&1)&&Z(t,"alert-warning",e[2].type=="warning")},r(){m=t.getBoundingClientRect()},f(){Of(t),h(),Ef(t,m)},a(){h(),h=Cf(t,m,ad,{duration:150})},i(S){g||(S&&vt(()=>{g&&(d&&d.end(1),c=jf(t,Ct,{duration:150}),c.start())}),g=!0)},o(S){c&&c.invalidate(),S&&(d=Nf(t,vs,{duration:150})),g=!1},d(S){S&&y(t),T.d(),S&&d&&d.end(),b=!1,_()}}}function hv(n){let e,t=[],i=new Map,l,s=Ie(n[0]);const r=o=>o[2].message;for(let o=0;o<s.length;o+=1){let a=hf(n,s,o),u=r(a);i.set(u,t[o]=_f(u,a))}return{c(){e=w("div");for(let o=0;o<t.length;o+=1)t[o].c();p(e,"class","toasts-wrapper")},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);l=!0},p(o,[a]){if(a&1){s=Ie(o[0]),ae();for(let u=0;u<t.length;u+=1)t[u].r();t=yt(t,a,r,1,o,s,i,e,Df,_f,null,hf);for(let u=0;u<t.length;u+=1)t[u].a();ue()}},i(o){if(!l){for(let a=0;a<s.length;a+=1)E(t[a]);l=!0}},o(o){for(let a=0;a<t.length;a+=1)P(t[a]);l=!1},d(o){o&&y(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function _v(n,e,t){let i;return Q(n,Fl,s=>t(0,i=s)),[i,s=>Uc(s)]}class gv extends Te{constructor(e){super(),Se(this,e,_v,hv,_e,{})}}function bv(n){var l;let e,t=((l=n[1])==null?void 0:l.text)+"",i;return{c(){e=w("h4"),i=x(t),p(e,"class","block center txt-break"),p(e,"slot","header")},m(s,r){k(s,e,r),v(e,i)},p(s,r){var o;r&2&&t!==(t=((o=s[1])==null?void 0:o.text)+"")&&ke(i,t)},d(s){s&&y(e)}}}function wv(n){let e,t,i,l,s,r,o,a,u,f;return{c(){e=w("div"),t=w("div"),i=w("button"),l=w("span"),l.textContent="No",s=I(),r=w("div"),o=w("button"),a=w("span"),a.textContent="Yes",p(l,"class","txt"),i.autofocus=!0,p(i,"type","button"),p(i,"class","btn btn-semitransparent btn-block"),i.disabled=n[2],p(t,"class","col-6"),p(a,"class","txt"),p(o,"type","button"),p(o,"class","btn btn-warning btn-block"),o.disabled=n[2],Z(o,"btn-loading",n[2]),p(r,"class","col-6"),p(e,"class","grid")},m(c,d){k(c,e,d),v(e,t),v(t,i),v(i,l),v(e,s),v(e,r),v(r,o),v(o,a),i.focus(),u||(f=[$(i,"click",n[4]),$(o,"click",n[5])],u=!0)},p(c,d){d&4&&(i.disabled=c[2]),d&4&&(o.disabled=c[2]),d&4&&Z(o,"btn-loading",c[2])},d(c){c&&y(e),u=!1,me(f)}}}function vv(n){let e,t,i={class:"confirm-popup hide-content overlay-panel-sm",overlayClose:!n[2],escHide:!n[2],btnClose:!1,popup:!0,$$slots:{footer:[wv],header:[bv]},$$scope:{ctx:n}};return e=new pn({props:i}),n[6](e),e.$on("hide",n[7]),{c(){U(e.$$.fragment)},m(l,s){F(e,l,s),t=!0},p(l,[s]){const r={};s&4&&(r.overlayClose=!l[2]),s&4&&(r.escHide=!l[2]),s&271&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){n[6](null),q(e,l)}}}function yv(n,e,t){let i;Q(n,Zs,c=>t(1,i=c));let l,s=!1,r=!1;const o=()=>{t(3,r=!1),l==null||l.hide()},a=async()=>{i!=null&&i.yesCallback&&(t(2,s=!0),await Promise.resolve(i.yesCallback()),t(2,s=!1)),t(3,r=!0),l==null||l.hide()};function u(c){le[c?"unshift":"push"](()=>{l=c,t(0,l)})}const f=async()=>{!r&&(i!=null&&i.noCallback)&&i.noCallback(),await St(),t(3,r=!1),zc()};return n.$$.update=()=>{n.$$.dirty&3&&i!=null&&i.text&&(t(3,r=!1),l==null||l.show())},[l,i,s,r,o,a,u,f]}class kv extends Te{constructor(e){super(),Se(this,e,yv,vv,_e,{})}}function Sv(n){let e,t,i,l,s,r;return e=new ip({props:{routes:Kt}}),e.$on("routeLoading",n[0]),e.$on("conditionsFailed",n[1]),i=new gv({}),s=new kv({}),{c(){U(e.$$.fragment),t=I(),U(i.$$.fragment),l=I(),U(s.$$.fragment)},m(o,a){F(e,o,a),k(o,t,a),F(i,o,a),k(o,l,a),F(s,o,a),r=!0},p:X,i(o){r||(E(e.$$.fragment,o),E(i.$$.fragment,o),E(s.$$.fragment,o),r=!0)},o(o){P(e.$$.fragment,o),P(i.$$.fragment,o),P(s.$$.fragment,o),r=!1},d(o){o&&(y(t),y(l)),q(e,o),q(i,o),q(s,o)}}}function Tv(n,e,t){let i;Q(n,_i,a=>t(3,i=a));let l;function s(a){a.detail.location!==l&&(l=a.detail.location,Zt({}),zc())}function r(){z.authStore.isValid||z.rememberPath(),cn("/")}async function o(){try{ve(_i,i=await z.send("/api/pr/options"),i)}catch(a){console.log("failed to load options:",a)}}return o(),_n(()=>{z.authStore.onChange(a=>{a?Vh():Rn==null||Rn()})}),[s,r]}class Cv extends Te{constructor(e){super(),Se(this,e,Tv,Sv,_e,{})}}new Cv({target:document.getElementById("app")});export{x as A,ke as B,X as C,ye as D,Oe as E,Le as F,fi as G,Oi as L,Te as S,P as a,ht as b,U as c,q as d,cn as e,Vs as f,w as g,I as h,Se as i,p as j,k,v as l,F as m,y as n,$ as o,z as p,be as q,Wc as r,_e as s,E as t,we as u,wi as v,ae as w,ue as x,me as y,Z as z};
