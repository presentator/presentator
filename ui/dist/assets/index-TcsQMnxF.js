var Xd=Object.defineProperty;var Qd=(n,e,t)=>e in n?Xd(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ks=(n,e,t)=>Qd(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function X(){}const Qi=n=>n;function Ue(n,e){for(const t in e)n[t]=e[t];return n}function Rf(n){return n()}function Sr(){return Object.create(null)}function pe(n){n.forEach(Rf)}function tt(n){return typeof n=="function"}function ge(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let os;function Zn(n,e){return n===e?!0:(os||(os=document.createElement("a")),os.href=e,n===os.href)}function xd(n){return Object.keys(n).length===0}function Fl(n,...e){if(n==null){for(const i of e)i(void 0);return X}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Yn(n){let e;return Fl(n,t=>e=t)(),e}function Q(n,e,t){n.$$.on_destroy.push(Fl(e,t))}function lt(n,e,t,i){if(n){const s=Hf(n,e,t,i);return n[0](s)}}function Hf(n,e,t,i){return n[1]&&i?Ue(t.ctx.slice(),n[1](i(e))):t.ctx}function rt(n,e,t,i){if(n[2]&&i){const s=n[2](i(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const l=[],r=Math.max(e.dirty.length,s.length);for(let o=0;o<r;o+=1)l[o]=e.dirty[o]|s[o];return l}return e.dirty|s}return e.dirty}function ot(n,e,t,i,s,l){if(s){const r=Hf(e,t,i,l);n.p(r,s)}}function at(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function Kt(n){const e={};for(const t in n)t[0]!=="$"&&(e[t]=n[t]);return e}function ft(n,e){const t={};e=new Set(e);for(const i in n)!e.has(i)&&i[0]!=="$"&&(t[i]=n[i]);return t}function Tr(n){return n??""}function Te(n,e,t){return n.set(t),e}function we(n){return n&&tt(n.destroy)?n.destroy:X}function Or(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}const ep=["",!0,1,"true","contenteditable"],Uf=typeof window<"u";let Ds=Uf?()=>window.performance.now():()=>Date.now(),ql=Uf?n=>requestAnimationFrame(n):X;const pi=new Set;function Ff(n){pi.forEach(e=>{e.c(n)||(pi.delete(e),e.f())}),pi.size!==0&&ql(Ff)}function Rs(n){let e;return pi.size===0&&ql(Ff),{promise:new Promise(t=>{pi.add(e={c:n,f:t})}),abort(){pi.delete(e)}}}function y(n,e){n.appendChild(e)}function qf(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function tp(n){const e=b("style");return e.textContent="/* empty */",np(qf(n),e),e.sheet}function np(n,e){return y(n.head||n,e),e.sheet}function k(n,e,t){n.insertBefore(e,t||null)}function v(n){n.parentNode&&n.parentNode.removeChild(n)}function sn(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function b(n){return document.createElement(n)}function x(n){return document.createTextNode(n)}function I(){return x(" ")}function De(){return x("")}function H(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function ye(n){return function(e){return e.preventDefault(),n.call(this,e)}}function Ye(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function p(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}const ip=["width","height"];function Kn(n,e){const t=Object.getOwnPropertyDescriptors(n.__proto__);for(const i in e)e[i]==null?n.removeAttribute(i):i==="style"?n.style.cssText=e[i]:i==="__value"?n.value=n[i]=e[i]:t[i]&&t[i].set&&ip.indexOf(i)===-1?n[i]=e[i]:p(n,i,e[i])}function sp(n,e){Object.keys(e).forEach(t=>{lp(n,t,e[t])})}function lp(n,e,t){const i=e.toLowerCase();i in n?n[i]=typeof n[i]=="boolean"&&t===""?!0:t:e in n?n[e]=typeof n[e]=="boolean"&&t===""?!0:t:p(n,e,t)}function vs(n){return/-/.test(n)?sp:Kn}function $f(n){let e;return{p(...t){e=t,e.forEach(i=>n.push(i))},r(){e.forEach(t=>n.splice(n.indexOf(t),1))}}}function kt(n){return n===""?null:+n}function rp(n){return Array.from(n.childNodes)}function ve(n,e){e=""+e,n.data!==e&&(n.data=e)}function Wf(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function op(n,e,t){~ep.indexOf(t)?Wf(n,e):ve(n,e)}function be(n,e){n.value=e??""}function Fe(n,e,t,i){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function Z(n,e,t){n.classList.toggle(e,!!t)}function Vf(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}function Pn(n,e){return new n(e)}const ks=new Map;let Ss=0;function ap(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function up(n,e){const t={stylesheet:tp(e),rules:{}};return ks.set(n,t),t}function Zi(n,e,t,i,s,l,r,o=0){const a=16.666/i;let u=`{
`;for(let w=0;w<=1;w+=a){const _=e+(t-e)*l(w);u+=w*100+`%{${r(_,1-_)}}
`}const f=u+`100% {${r(t,1-t)}}
}`,c=`__svelte_${ap(f)}_${o}`,d=qf(n),{stylesheet:m,rules:h}=ks.get(d)||up(d,n);h[c]||(h[c]=!0,m.insertRule(`@keyframes ${c} ${f}`,m.cssRules.length));const g=n.style.animation||"";return n.style.animation=`${g?`${g}, `:""}${c} ${i}ms linear ${s}ms 1 both`,Ss+=1,c}function Yi(n,e){const t=(n.style.animation||"").split(", "),i=t.filter(e?l=>l.indexOf(e)<0:l=>l.indexOf("__svelte")===-1),s=t.length-i.length;s&&(n.style.animation=i.join(", "),Ss-=s,Ss||fp())}function fp(){ql(()=>{Ss||(ks.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&v(e)}),ks.clear())})}function zf(n,e,t,i){if(!e)return X;const s=n.getBoundingClientRect();if(e.left===s.left&&e.right===s.right&&e.top===s.top&&e.bottom===s.bottom)return X;const{delay:l=0,duration:r=300,easing:o=Qi,start:a=Ds()+l,end:u=a+r,tick:f=X,css:c}=t(n,{from:e,to:s},i);let d=!0,m=!1,h;function g(){c&&(h=Zi(n,0,1,r,l,o,c)),l||(m=!0)}function w(){c&&Yi(n,h),d=!1}return Rs(_=>{if(!m&&_>=a&&(m=!0),m&&_>=u&&(f(1,0),w()),!d)return!1;if(m){const T=_-a,L=0+1*o(T/r);f(L,1-L)}return!0}),g(),f(0,1),w}function Bf(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:i}=e,s=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=i,Zf(n,s)}}function Zf(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const i=getComputedStyle(n),s=i.transform==="none"?"":i.transform;n.style.transform=`${s} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}let Ki;function qi(n){Ki=n}function Hs(){if(!Ki)throw new Error("Function called outside component initialization");return Ki}function bn(n){Hs().$$.on_mount.push(n)}function cp(n){Hs().$$.after_update.push(n)}function Gt(n){Hs().$$.on_destroy.push(n)}function it(){const n=Hs();return(e,t,{cancelable:i=!1}={})=>{const s=n.$$.callbacks[e];if(s){const l=Vf(e,t,{cancelable:i});return s.slice().forEach(r=>{r.call(n,l)}),!l.defaultPrevented}return!0}}function qe(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const oi=[],se=[];let mi=[];const ml=[],Yf=Promise.resolve();let hl=!1;function Kf(){hl||(hl=!0,Yf.then(Gf))}function Ct(){return Kf(),Yf}function St(n){mi.push(n)}function Ne(n){ml.push(n)}const Gs=new Set;let ti=0;function Gf(){if(ti!==0)return;const n=Ki;do{try{for(;ti<oi.length;){const e=oi[ti];ti++,qi(e),dp(e.$$)}}catch(e){throw oi.length=0,ti=0,e}for(qi(null),oi.length=0,ti=0;se.length;)se.pop()();for(let e=0;e<mi.length;e+=1){const t=mi[e];Gs.has(t)||(Gs.add(t),t())}mi.length=0}while(oi.length);for(;ml.length;)ml.pop()();hl=!1,Gs.clear(),qi(n)}function dp(n){if(n.fragment!==null){n.update(),pe(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(St)}}function pp(n){const e=[],t=[];mi.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),mi=e}let Mi;function $l(){return Mi||(Mi=Promise.resolve(),Mi.then(()=>{Mi=null})),Mi}function zn(n,e,t){n.dispatchEvent(Vf(`${e?"intro":"outro"}${t}`))}const gs=new Set;let on;function oe(){on={r:0,c:[],p:on}}function ae(){on.r||pe(on.c),on=on.p}function E(n,e){n&&n.i&&(gs.delete(n),n.i(e))}function j(n,e,t,i){if(n&&n.o){if(gs.has(n))return;gs.add(n),on.c.push(()=>{gs.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}const Wl={duration:0};function Jf(n,e,t){const i={direction:"in"};let s=e(n,t,i),l=!1,r,o,a=0;function u(){r&&Yi(n,r)}function f(){const{delay:d=0,duration:m=300,easing:h=Qi,tick:g=X,css:w}=s||Wl;w&&(r=Zi(n,0,1,m,d,h,w,a++)),g(0,1);const _=Ds()+d,T=_+m;o&&o.abort(),l=!0,St(()=>zn(n,!0,"start")),o=Rs(L=>{if(l){if(L>=T)return g(1,0),zn(n,!0,"end"),u(),l=!1;if(L>=_){const O=h((L-_)/m);g(O,1-O)}}return l})}let c=!1;return{start(){c||(c=!0,Yi(n),tt(s)?(s=s(i),$l().then(f)):f())},invalidate(){c=!1},end(){l&&(u(),l=!1)}}}function Xf(n,e,t){const i={direction:"out"};let s=e(n,t,i),l=!0,r;const o=on;o.r+=1;let a;function u(){const{delay:f=0,duration:c=300,easing:d=Qi,tick:m=X,css:h}=s||Wl;h&&(r=Zi(n,1,0,c,f,d,h));const g=Ds()+f,w=g+c;St(()=>zn(n,!1,"start")),"inert"in n&&(a=n.inert,n.inert=!0),Rs(_=>{if(l){if(_>=w)return m(0,1),zn(n,!1,"end"),--o.r||pe(o.c),!1;if(_>=g){const T=d((_-g)/c);m(1-T,T)}}return l})}return tt(s)?$l().then(()=>{s=s(i),u()}):u(),{end(f){f&&"inert"in n&&(n.inert=a),f&&s.tick&&s.tick(1,0),l&&(r&&Yi(n,r),l=!1)}}}function ct(n,e,t,i){let l=e(n,t,{direction:"both"}),r=i?0:1,o=null,a=null,u=null,f;function c(){u&&Yi(n,u)}function d(h,g){const w=h.b-r;return g*=Math.abs(w),{a:r,b:h.b,d:w,duration:g,start:h.start,end:h.start+g,group:h.group}}function m(h){const{delay:g=0,duration:w=300,easing:_=Qi,tick:T=X,css:L}=l||Wl,O={start:Ds()+g,b:h};h||(O.group=on,on.r+=1),"inert"in n&&(h?f!==void 0&&(n.inert=f):(f=n.inert,n.inert=!0)),o||a?a=O:(L&&(c(),u=Zi(n,r,h,w,g,_,L)),h&&T(0,1),o=d(O,w),St(()=>zn(n,h,"start")),Rs(C=>{if(a&&C>a.start&&(o=d(a,w),a=null,zn(n,o.b,"start"),L&&(c(),u=Zi(n,r,o.b,o.duration,0,_,l.css))),o){if(C>=o.end)T(r=o.b,1-r),zn(n,o.b,"end"),a||(o.b?c():--o.group.r||pe(o.group.c)),o=null;else if(C>=o.start){const S=C-o.start;r=o.a+o.d*_(S/o.duration),T(r,1-r)}}return!!(o||a)}))}return{run(h){tt(l)?$l().then(()=>{l=l({direction:h?"in":"out"}),m(h)}):m(h)},end(){c(),o=a=null}}}function Ie(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Qf(n,e){n.d(1),e.delete(n.key)}function At(n,e){j(n,1,1,()=>{e.delete(n.key)})}function xf(n,e){n.f(),At(n,e)}function Tt(n,e,t,i,s,l,r,o,a,u,f,c){let d=n.length,m=l.length,h=d;const g={};for(;h--;)g[n[h].key]=h;const w=[],_=new Map,T=new Map,L=[];for(h=m;h--;){const P=c(s,l,h),R=t(P);let A=r.get(R);A?L.push(()=>A.p(P,e)):(A=u(R,P),A.c()),_.set(R,w[h]=A),R in g&&T.set(R,Math.abs(h-g[R]))}const O=new Set,C=new Set;function S(P){E(P,1),P.m(o,f),r.set(P.key,P),f=P.first,m--}for(;d&&m;){const P=w[m-1],R=n[d-1],A=P.key,M=R.key;P===R?(f=P.first,d--,m--):_.has(M)?!r.has(A)||O.has(A)?S(P):C.has(M)?d--:T.get(A)>T.get(M)?(C.add(A),S(P)):(O.add(M),d--):(a(R,r),d--)}for(;d--;){const P=n[d];_.has(P.key)||a(P,r)}for(;m;)S(w[m-1]);return pe(L),w}function bt(n,e){const t={},i={},s={$$scope:1};let l=n.length;for(;l--;){const r=n[l],o=e[l];if(o){for(const a in r)a in o||(i[a]=1);for(const a in o)s[a]||(t[a]=o[a],s[a]=1);n[l]=o}else for(const a in r)s[a]=1}for(const r in i)r in t||(t[r]=void 0);return t}function Nt(n){return typeof n=="object"&&n!==null?n:{}}function Ae(n,e,t){const i=n.$$.props[e];i!==void 0&&(n.$$.bound[i]=t,t(n.$$.ctx[i]))}function $(n){n&&n.c()}function F(n,e,t){const{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),St(()=>{const l=n.$$.on_mount.map(Rf).filter(tt);n.$$.on_destroy?n.$$.on_destroy.push(...l):pe(l),n.$$.on_mount=[]}),s.forEach(St)}function q(n,e){const t=n.$$;t.fragment!==null&&(pp(t.after_update),pe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function mp(n,e){n.$$.dirty[0]===-1&&(oi.push(n),Kf(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function ke(n,e,t,i,s,l,r=null,o=[-1]){const a=Ki;qi(n);const u=n.$$={fragment:null,ctx:[],props:l,update:X,not_equal:s,bound:Sr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Sr(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};r&&r(u.root);let f=!1;if(u.ctx=t?t(n,e.props||{},(c,d,...m)=>{const h=m.length?m[0]:d;return u.ctx&&s(u.ctx[c],u.ctx[c]=h)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](h),f&&mp(n,c)),d}):[],u.update(),f=!0,pe(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const c=rp(e.target);u.fragment&&u.fragment.l(c),c.forEach(v)}else u.fragment&&u.fragment.c();e.intro&&E(n.$$.fragment),F(n,e.target,e.anchor),Gf()}qi(a)}class Se{constructor(){Ks(this,"$$");Ks(this,"$$set")}$destroy(){q(this,1),this.$destroy=X}$on(e,t){if(!tt(t))return X;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!xd(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const hp="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(hp);const ni=[];function ec(n,e){return{subscribe:We(n,e).subscribe}}function We(n,e=X){let t;const i=new Set;function s(o){if(ge(n,o)&&(n=o,t)){const a=!ni.length;for(const u of i)u[1](),ni.push(u,n);if(a){for(let u=0;u<ni.length;u+=2)ni[u][0](ni[u+1]);ni.length=0}}}function l(o){s(o(n))}function r(o,a=X){const u=[o,a];return i.add(u),i.size===1&&(t=e(s,l)||X),o(n),()=>{i.delete(u),i.size===0&&t&&(t(),t=null)}}return{set:s,update:l,subscribe:r}}function Dt(n,e,t){const i=!Array.isArray(n),s=i?[n]:n;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=e.length<2;return ec(t,(r,o)=>{let a=!1;const u=[];let f=0,c=X;const d=()=>{if(f)return;c();const h=e(i?u[0]:u,r,o);l?r(h):c=tt(h)?h:X},m=s.map((h,g)=>Fl(h,w=>{u[g]=w,f&=~(1<<g),a&&d()},()=>{f|=1<<g}));return a=!0,d(),function(){pe(m),c(),a=!1}})}function _p(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,i,s,l,r=[],o="",a=n.split("/");for(a[0]||a.shift();s=a.shift();)t=s[0],t==="*"?(r.push("wild"),o+="/(.*)"):t===":"?(i=s.indexOf("?",1),l=s.indexOf(".",1),r.push(s.substring(1,~i?i:~l?l:s.length)),o+=~i&&!~l?"(?:/([^/]+?))?":"/([^/]+?)",~l&&(o+=(~i?"?":"")+"\\"+s.substring(l))):o+="/"+s;return{keys:r,pattern:new RegExp("^"+o+"/?$","i")}}function gp(n){let e,t,i;const s=[n[2]];var l=n[0];function r(o,a){let u={};for(let f=0;f<s.length;f+=1)u=Ue(u,s[f]);return a!==void 0&&a&4&&(u=Ue(u,bt(s,[Nt(o[2])]))),{props:u}}return l&&(e=Pn(l,r(n)),e.$on("routeEvent",n[7])),{c(){e&&$(e.$$.fragment),t=De()},m(o,a){e&&F(e,o,a),k(o,t,a),i=!0},p(o,a){if(a&1&&l!==(l=o[0])){if(e){oe();const u=e;j(u.$$.fragment,1,0,()=>{q(u,1)}),ae()}l?(e=Pn(l,r(o,a)),e.$on("routeEvent",o[7]),$(e.$$.fragment),E(e.$$.fragment,1),F(e,t.parentNode,t)):e=null}else if(l){const u=a&4?bt(s,[Nt(o[2])]):{};e.$set(u)}},i(o){i||(e&&E(e.$$.fragment,o),i=!0)},o(o){e&&j(e.$$.fragment,o),i=!1},d(o){o&&v(t),e&&q(e,o)}}}function bp(n){let e,t,i;const s=[{params:n[1]},n[2]];var l=n[0];function r(o,a){let u={};for(let f=0;f<s.length;f+=1)u=Ue(u,s[f]);return a!==void 0&&a&6&&(u=Ue(u,bt(s,[a&2&&{params:o[1]},a&4&&Nt(o[2])]))),{props:u}}return l&&(e=Pn(l,r(n)),e.$on("routeEvent",n[6])),{c(){e&&$(e.$$.fragment),t=De()},m(o,a){e&&F(e,o,a),k(o,t,a),i=!0},p(o,a){if(a&1&&l!==(l=o[0])){if(e){oe();const u=e;j(u.$$.fragment,1,0,()=>{q(u,1)}),ae()}l?(e=Pn(l,r(o,a)),e.$on("routeEvent",o[6]),$(e.$$.fragment),E(e.$$.fragment,1),F(e,t.parentNode,t)):e=null}else if(l){const u=a&6?bt(s,[a&2&&{params:o[1]},a&4&&Nt(o[2])]):{};e.$set(u)}},i(o){i||(e&&E(e.$$.fragment,o),i=!0)},o(o){e&&j(e.$$.fragment,o),i=!1},d(o){o&&v(t),e&&q(e,o)}}}function wp(n){let e,t,i,s;const l=[bp,gp],r=[];function o(a,u){return a[1]?0:1}return e=o(n),t=r[e]=l[e](n),{c(){t.c(),i=De()},m(a,u){r[e].m(a,u),k(a,i,u),s=!0},p(a,[u]){let f=e;e=o(a),e===f?r[e].p(a,u):(oe(),j(r[f],1,1,()=>{r[f]=null}),ae(),t=r[e],t?t.p(a,u):(t=r[e]=l[e](a),t.c()),E(t,1),t.m(i.parentNode,i))},i(a){s||(E(t),s=!0)},o(a){j(t),s=!1},d(a){a&&v(i),r[e].d(a)}}}function Cr(){const n=window.location.href.indexOf("#/");let e=n>-1?window.location.href.substr(n+1):"/";const t=e.indexOf("?");let i="";return t>-1&&(i=e.substr(t+1),e=e.substr(0,t)),{location:e,querystring:i}}const Vl=ec(null,function(e){e(Cr());const t=()=>{e(Cr())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}});Dt(Vl,n=>n.location);const tc=Dt(Vl,n=>n.querystring),Er=We(void 0);async function wi(n){if(!n||n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await Ct(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(n.charAt(0)=="#"?"":"#")+n}async function Yt(n){if(!n||n.length<1||n.charAt(0)!="/"&&n.indexOf("#/")!==0)throw Error("Invalid parameter location");await Ct();const e=(n.charAt(0)=="#"?"":"#")+n;try{const t={...history.state};delete t.__svelte_spa_router_scrollX,delete t.__svelte_spa_router_scrollY,window.history.replaceState(t,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function Ti(n,e){if(e=Ir(e),!n||!n.tagName||n.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return Lr(n,e),{update(t){t=Ir(t),Lr(n,t)}}}function yp(n){n?window.scrollTo(n.__svelte_spa_router_scrollX,n.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Lr(n,e){let t=e.href||n.getAttribute("href");if(t&&t.charAt(0)=="/")t="#"+t;else if(!t||t.length<2||t.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+t);n.setAttribute("href",t),n.addEventListener("click",i=>{i.preventDefault(),e.disabled||vp(i.currentTarget.getAttribute("href"))})}function Ir(n){return n&&typeof n=="string"?{href:n}:n||{}}function vp(n){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=n}function kp(n,e,t){let{routes:i={}}=e,{prefix:s=""}=e,{restoreScrollState:l=!1}=e;class r{constructor(C,S){if(!S||typeof S!="function"&&(typeof S!="object"||S._sveltesparouter!==!0))throw Error("Invalid component object");if(!C||typeof C=="string"&&(C.length<1||C.charAt(0)!="/"&&C.charAt(0)!="*")||typeof C=="object"&&!(C instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:P,keys:R}=_p(C);this.path=C,typeof S=="object"&&S._sveltesparouter===!0?(this.component=S.component,this.conditions=S.conditions||[],this.userData=S.userData,this.props=S.props||{}):(this.component=()=>Promise.resolve(S),this.conditions=[],this.props={}),this._pattern=P,this._keys=R}match(C){if(s){if(typeof s=="string")if(C.startsWith(s))C=C.substr(s.length)||"/";else return null;else if(s instanceof RegExp){const A=C.match(s);if(A&&A[0])C=C.substr(A[0].length)||"/";else return null}}const S=this._pattern.exec(C);if(S===null)return null;if(this._keys===!1)return S;const P={};let R=0;for(;R<this._keys.length;){try{P[this._keys[R]]=decodeURIComponent(S[R+1]||"")||null}catch{P[this._keys[R]]=null}R++}return P}async checkConditions(C){for(let S=0;S<this.conditions.length;S++)if(!await this.conditions[S](C))return!1;return!0}}const o=[];i instanceof Map?i.forEach((O,C)=>{o.push(new r(C,O))}):Object.keys(i).forEach(O=>{o.push(new r(O,i[O]))});let a=null,u=null,f={};const c=it();async function d(O,C){await Ct(),c(O,C)}let m=null,h=null;l&&(h=O=>{O.state&&(O.state.__svelte_spa_router_scrollY||O.state.__svelte_spa_router_scrollX)?m=O.state:m=null},window.addEventListener("popstate",h),cp(()=>{yp(m)}));let g=null,w=null;const _=Vl.subscribe(async O=>{g=O;let C=0;for(;C<o.length;){const S=o[C].match(O.location);if(!S){C++;continue}const P={route:o[C].path,location:O.location,querystring:O.querystring,userData:o[C].userData,params:S&&typeof S=="object"&&Object.keys(S).length?S:null};if(!await o[C].checkConditions(P)){t(0,a=null),w=null,d("conditionsFailed",P);return}d("routeLoading",Object.assign({},P));const R=o[C].component;if(w!=R){R.loading?(t(0,a=R.loading),w=R,t(1,u=R.loadingParams),t(2,f={}),d("routeLoaded",Object.assign({},P,{component:a,name:a.name,params:u}))):(t(0,a=null),w=null);const A=await R();if(O!=g)return;t(0,a=A&&A.default||A),w=R}S&&typeof S=="object"&&Object.keys(S).length?t(1,u=S):t(1,u=null),t(2,f=o[C].props),d("routeLoaded",Object.assign({},P,{component:a,name:a.name,params:u})).then(()=>{Er.set(u)});return}t(0,a=null),w=null,Er.set(void 0)});Gt(()=>{_(),h&&window.removeEventListener("popstate",h)});function T(O){qe.call(this,n,O)}function L(O){qe.call(this,n,O)}return n.$$set=O=>{"routes"in O&&t(3,i=O.routes),"prefix"in O&&t(4,s=O.prefix),"restoreScrollState"in O&&t(5,l=O.restoreScrollState)},n.$$.update=()=>{n.$$.dirty&32&&(history.scrollRestoration=l?"manual":"auto")},[a,u,f,i,s,l,T,L]}class Sp extends Se{constructor(e){super(),ke(this,e,kp,wp,ge,{routes:3,prefix:4,restoreScrollState:5})}}const Tp="modulepreload",Op=function(n,e){return new URL(n,e).href},jr={},Us=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){const r=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(u=>{if(u=Op(u,i),u in jr)return;jr[u]=!0;const f=u.endsWith(".css"),c=f?'[rel="stylesheet"]':"";if(!!i)for(let h=r.length-1;h>=0;h--){const g=r[h];if(g.href===u&&(!f||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${c}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":Tp,f||(m.as="script"),m.crossOrigin="",m.href=u,a&&m.setAttribute("nonce",a),document.head.appendChild(m),f)return new Promise((h,g)=>{m.addEventListener("load",h),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function l(r){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r}return s.then(r=>{for(const o of r||[])o.status==="rejected"&&l(o.reason);return e().catch(l)})};function ln(n){if(!n)throw Error("Parameter args is required");if(!n.component==!n.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(n.component&&(n.asyncComponent=()=>Promise.resolve(n.component)),typeof n.asyncComponent!="function")throw Error("Parameter asyncComponent must be a function");if(n.conditions){Array.isArray(n.conditions)||(n.conditions=[n.conditions]);for(let t=0;t<n.conditions.length;t++)if(!n.conditions[t]||typeof n.conditions[t]!="function")throw Error("Invalid parameter conditions["+t+"]")}return n.loadingComponent&&(n.asyncComponent.loading=n.loadingComponent,n.asyncComponent.loadingParams=n.loadingParams||void 0),{component:n.asyncComponent,userData:n.userData,conditions:n.conditions&&n.conditions.length?n.conditions:void 0,props:n.props&&Object.keys(n.props).length?n.props:{},_sveltesparouter:!0}}class Ft extends Error{constructor(e){var t,i,s,l;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,Ft.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof Ft||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(e.name=="AbortError"||e.code==20)&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(l=(s=(i=this.originalError)==null?void 0:i.cause)==null?void 0:s.message)!=null&&l.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong."),this.cause=this.originalError}get data(){return this.response}toJSON(){return{...this}}}const as=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Cp(n,e){const t={};if(typeof n!="string")return t;const i=Object.assign({},{}).decode||Ep;let s=0;for(;s<n.length;){const l=n.indexOf("=",s);if(l===-1)break;let r=n.indexOf(";",s);if(r===-1)r=n.length;else if(r<l){s=n.lastIndexOf(";",l-1)+1;continue}const o=n.slice(s,l).trim();if(t[o]===void 0){let a=n.slice(l+1,r).trim();a.charCodeAt(0)===34&&(a=a.slice(1,-1));try{t[o]=i(a)}catch{t[o]=a}}s=r+1}return t}function Pr(n,e,t){const i=Object.assign({},t||{}),s=i.encode||Lp;if(!as.test(n))throw new TypeError("argument name is invalid");const l=s(e);if(l&&!as.test(l))throw new TypeError("argument val is invalid");let r=n+"="+l;if(i.maxAge!=null){const o=i.maxAge-0;if(isNaN(o)||!isFinite(o))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(o)}if(i.domain){if(!as.test(i.domain))throw new TypeError("option domain is invalid");r+="; Domain="+i.domain}if(i.path){if(!as.test(i.path))throw new TypeError("option path is invalid");r+="; Path="+i.path}if(i.expires){if(!function(a){return Object.prototype.toString.call(a)==="[object Date]"||a instanceof Date}(i.expires)||isNaN(i.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(r+="; HttpOnly"),i.secure&&(r+="; Secure"),i.priority)switch(typeof i.priority=="string"?i.priority.toLowerCase():i.priority){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r}function Ep(n){return n.indexOf("%")!==-1?decodeURIComponent(n):n}function Lp(n){return encodeURIComponent(n)}const Ip=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal;let nc;function hi(n){if(n)try{const e=decodeURIComponent(nc(n.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function ic(n,e=0){let t=hi(n);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}nc=typeof atob!="function"||Ip?n=>{let e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,i,s=0,l=0,r="";i=e.charAt(l++);~i&&(t=s%4?64*t+i:i,s++%4)?r+=String.fromCharCode(255&t>>(-2*s&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return r}:atob;const Nr="pb_auth";class zl{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!ic(this.token)}get isSuperuser(){var t,i;let e=hi(this.token);return e.type=="auth"&&(((t=this.record)==null?void 0:t.collectionName)=="_superusers"||!((i=this.record)!=null&&i.collectionName)&&e.collectionId=="pbc_3142635823")}get isAdmin(){return console.warn("Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),this.isSuperuser}get isAuthRecord(){return console.warn("Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),hi(this.token).type=="auth"&&!this.isSuperuser}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=Nr){const i=Cp(e||"")[t]||"";let s={};try{s=JSON.parse(i),(typeof s===null||typeof s!="object"||Array.isArray(s))&&(s={})}catch{}this.save(s.token||"",s.record||s.model||null)}exportToCookie(e,t=Nr){var a,u;const i={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},s=hi(this.token);i.expires=s!=null&&s.exp?new Date(1e3*s.exp):new Date("1970-01-01"),e=Object.assign({},i,e);const l={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null};let r=Pr(t,JSON.stringify(l),e);const o=typeof Blob<"u"?new Blob([r]).size:r.length;if(l.record&&o>4096){l.record={id:(a=l.record)==null?void 0:a.id,email:(u=l.record)==null?void 0:u.email};const f=["collectionId","collectionName","verified"];for(const c in this.record)f.includes(c)&&(l.record[c]=this.record[c]);r=Pr(t,JSON.stringify(l),e)}return r}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.record),()=>{for(let i=this._onChangeCallbacks.length-1;i>=0;i--)if(this._onChangeCallbacks[i]==e)return delete this._onChangeCallbacks[i],void this._onChangeCallbacks.splice(i,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.record)}}class sc extends zl{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get record(){const e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,t){this._storageSet(this.storageKey,{token:e,record:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let i=t;typeof t!="string"&&(i=JSON.stringify(t)),window.localStorage.setItem(e,i)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.record||t.model||null)})}}class wn{constructor(e){this.client=e}}class jp extends wn{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}async testEmail(e,t,i,s){return s=Object.assign({method:"POST",body:{email:t,template:i,collection:e}},s),this.client.send("/api/settings/test/email",s).then(()=>!0)}async generateAppleClientSecret(e,t,i,s,l,r){return r=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:i,privateKey:s,duration:l}},r),this.client.send("/api/settings/apple/generate-client-secret",r)}}const Pp=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function Bl(n){if(n){n.query=n.query||{};for(let e in n)Pp.includes(e)||(n.query[e]=n[e],delete n[e])}}function lc(n){const e=[];for(const t in n){const i=encodeURIComponent(t),s=Array.isArray(n[t])?n[t]:[n[t]];for(let l of s)l=Np(l),l!==null&&e.push(i+"="+l)}return e.join("&")}function Np(n){return n==null?null:n instanceof Date?encodeURIComponent(n.toISOString().replace("T"," ")):encodeURIComponent(typeof n=="object"?JSON.stringify(n):n)}class rc extends wn{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,i){var r;if(!e)throw new Error("topic must be set.");let s=e;if(i){Bl(i=Object.assign({},i));const o="options="+encodeURIComponent(JSON.stringify({query:i.query,headers:i.headers}));s+=(s.includes("?")?"&":"?")+o}const l=function(o){const a=o;let u;try{u=JSON.parse(a==null?void 0:a.data)}catch{}t(u||{})};return this.subscriptions[s]||(this.subscriptions[s]=[]),this.subscriptions[s].push(l),this.isConnected?this.subscriptions[s].length===1?await this.submitSubscriptions():(r=this.eventSource)==null||r.addEventListener(s,l):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,l)}async unsubscribe(e){var i;let t=!1;if(e){const s=this.getSubscriptionsByTopic(e);for(let l in s)if(this.hasSubscriptionListeners(l)){for(let r of this.subscriptions[l])(i=this.eventSource)==null||i.removeEventListener(l,r);delete this.subscriptions[l],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){var i;let t=!1;for(let s in this.subscriptions)if((s+"?").startsWith(e)){t=!0;for(let l of this.subscriptions[s])(i=this.eventSource)==null||i.removeEventListener(s,l);delete this.subscriptions[s]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var l;let i=!1;const s=this.getSubscriptionsByTopic(e);for(let r in s){if(!Array.isArray(this.subscriptions[r])||!this.subscriptions[r].length)continue;let o=!1;for(let a=this.subscriptions[r].length-1;a>=0;a--)this.subscriptions[r][a]===t&&(o=!0,delete this.subscriptions[r][a],this.subscriptions[r].splice(a,1),(l=this.eventSource)==null||l.removeEventListener(r,t));o&&(this.subscriptions[r].length||delete this.subscriptions[r],i||this.hasSubscriptionListeners(r)||(i=!0))}this.hasSubscriptionListeners()?i&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){var t,i;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let s in this.subscriptions)if((i=this.subscriptions[s])!=null&&i.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let i in this.subscriptions)(i+"?").startsWith(e)&&(t[i]=this.subscriptions[i]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let i=3;for(;this.hasUnsentSubscriptions()&&i>0;)i--,await this.submitSubscriptions()}).then(()=>{for(let s of this.pendingConnects)s.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const i=this.getSubscriptionsByTopic("PB_CONNECT");for(let s in i)for(let l of i[s])l(e)}).catch(i=>{this.clientId="",this.connectErrorHandler(i)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let i of this.pendingConnects)i.reject(new Ft(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let i of this.pendingConnects)i.resolve();this.pendingConnects=[]}}}class oc extends wn{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let i=500;return(t=Object.assign({},e,t)).batch&&(i=t.batch,delete t.batch),this._getFullList(i,t)}async getList(e=1,t=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:e,perPage:t},i.query),this.client.send(this.baseCrudPath,i).then(s=>{var l;return s.items=((l=s.items)==null?void 0:l.map(r=>this.decode(r)))||[],s})}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(i=>{var s;if(!((s=i==null?void 0:i.items)!=null&&s.length))throw new Ft({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return i.items[0]})}async getOne(e,t){if(!e)throw new Ft({url:this.client.buildURL(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(i=>this.decode(i))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(i=>this.decode(i))}async update(e,t,i){return i=Object.assign({method:"PATCH",body:t},i),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),i).then(s=>this.decode(s))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let i=[],s=async l=>this.getList(l,e||500,t).then(r=>{const o=r.items;return i=i.concat(o),o.length==r.perPage?s(l+1):i});return s(1)}}function Sn(n,e,t,i){const s=i!==void 0;return s||t!==void 0?s?(console.warn(n),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,i),e):Object.assign(e,t):e}function Js(n){var e;(e=n._resetAutoRefresh)==null||e.call(n)}class Ap extends oc{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return this.collectionIdOrName=="_superusers"||this.collectionIdOrName=="_pbc_2773867675"}async subscribe(e,t,i){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,i)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const i=Object.assign({},e,t);return super.getFullList(i)}async getList(e=1,t=30,i){return super.getList(e,t,i)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,i){return super.update(e,t,i).then(s=>{var l,r,o;if(((l=this.client.authStore.record)==null?void 0:l.id)===(s==null?void 0:s.id)&&(((r=this.client.authStore.record)==null?void 0:r.collectionId)===this.collectionIdOrName||((o=this.client.authStore.record)==null?void 0:o.collectionName)===this.collectionIdOrName)){let a=Object.assign({},this.client.authStore.record.expand),u=Object.assign({},this.client.authStore.record,s);a&&(u.expand=Object.assign(a,s.expand)),this.client.authStore.save(this.client.authStore.token,u)}return s})}async delete(e,t){return super.delete(e,t).then(i=>{var s,l,r;return!i||((s=this.client.authStore.record)==null?void 0:s.id)!==e||((l=this.client.authStore.record)==null?void 0:l.collectionId)!==this.collectionIdOrName&&((r=this.client.authStore.record)==null?void 0:r.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),i})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET",fields:"mfa,otp,password,oauth2"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e)}async authWithPassword(e,t,i){let s;i=Object.assign({method:"POST",body:{identity:e,password:t}},i),this.isSuperusers&&(s=i.autoRefreshThreshold,delete i.autoRefreshThreshold,i.autoRefresh||Js(this.client));let l=await this.client.send(this.baseCollectionPath+"/auth-with-password",i);return l=this.authResponse(l),s&&this.isSuperusers&&function(o,a,u,f){Js(o);const c=o.beforeSend,d=o.authStore.record,m=o.authStore.onChange((h,g)=>{(!h||(g==null?void 0:g.id)!=(d==null?void 0:d.id)||(g!=null&&g.collectionId||d!=null&&d.collectionId)&&(g==null?void 0:g.collectionId)!=(d==null?void 0:d.collectionId))&&Js(o)});o._resetAutoRefresh=function(){m(),o.beforeSend=c,delete o._resetAutoRefresh},o.beforeSend=async(h,g)=>{var L;const w=o.authStore.token;if((L=g.query)!=null&&L.autoRefresh)return c?c(h,g):{url:h,sendOptions:g};let _=o.authStore.isValid;if(_&&ic(o.authStore.token,a))try{await u()}catch{_=!1}_||await f();const T=g.headers||{};for(let O in T)if(O.toLowerCase()=="authorization"&&w==T[O]&&o.authStore.token){T[O]=o.authStore.token;break}return g.headers=T,c?c(h,g):{url:h,sendOptions:g}}}(this.client,s,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},i))),l}async authWithOAuth2Code(e,t,i,s,l,r,o){let a={method:"POST",body:{provider:e,code:t,codeVerifier:i,redirectURL:s,createData:l}};return a=Sn("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).",a,r,o),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",a).then(u=>this.authResponse(u))}authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{};let i=null;t.urlCallback||(i=Ar(void 0));const s=new rc(this.client);function l(){i==null||i.close(),s.unsubscribe()}const r={},o=t.requestKey;return o&&(r.requestKey=o),this.listAuthMethods(r).then(a=>{var d;const u=a.oauth2.providers.find(m=>m.name===t.provider);if(!u)throw new Ft(new Error(`Missing or invalid provider "${t.provider}".`));const f=this.client.buildURL("/api/oauth2-redirect"),c=o?(d=this.client.cancelControllers)==null?void 0:d[o]:void 0;return c&&(c.signal.onabort=()=>{l()}),new Promise(async(m,h)=>{var g;try{await s.subscribe("@oauth2",async L=>{var C;const O=s.clientId;try{if(!L.state||O!==L.state)throw new Error("State parameters don't match.");if(L.error||!L.code)throw new Error("OAuth2 redirect error or missing code: "+L.error);const S=Object.assign({},t);delete S.provider,delete S.scopes,delete S.createData,delete S.urlCallback,(C=c==null?void 0:c.signal)!=null&&C.onabort&&(c.signal.onabort=null);const P=await this.authWithOAuth2Code(u.name,L.code,u.codeVerifier,f,t.createData,S);m(P)}catch(S){h(new Ft(S))}l()});const w={state:s.clientId};(g=t.scopes)!=null&&g.length&&(w.scope=t.scopes.join(" "));const _=this._replaceQueryParams(u.authURL+f,w);await(t.urlCallback||function(L){i?i.location.href=L:i=Ar(L)})(_)}catch(w){l(),h(new Ft(w))}})}).catch(a=>{throw l(),a})}async authRefresh(e,t){let i={method:"POST"};return i=Sn("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",i,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",i).then(s=>this.authResponse(s))}async requestPasswordReset(e,t,i){let s={method:"POST",body:{email:e}};return s=Sn("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,t,i),this.client.send(this.baseCollectionPath+"/request-password-reset",s).then(()=>!0)}async confirmPasswordReset(e,t,i,s,l){let r={method:"POST",body:{token:e,password:t,passwordConfirm:i}};return r=Sn("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",r,s,l),this.client.send(this.baseCollectionPath+"/confirm-password-reset",r).then(()=>!0)}async requestVerification(e,t,i){let s={method:"POST",body:{email:e}};return s=Sn("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",s,t,i),this.client.send(this.baseCollectionPath+"/request-verification",s).then(()=>!0)}async confirmVerification(e,t,i){let s={method:"POST",body:{token:e}};return s=Sn("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",s,t,i),this.client.send(this.baseCollectionPath+"/confirm-verification",s).then(()=>{const l=hi(e),r=this.client.authStore.record;return r&&!r.verified&&r.id===l.id&&r.collectionId===l.collectionId&&(r.verified=!0,this.client.authStore.save(this.client.authStore.token,r)),!0})}async requestEmailChange(e,t,i){let s={method:"POST",body:{newEmail:e}};return s=Sn("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",s,t,i),this.client.send(this.baseCollectionPath+"/request-email-change",s).then(()=>!0)}async confirmEmailChange(e,t,i,s){let l={method:"POST",body:{token:e,password:t}};return l=Sn("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",l,i,s),this.client.send(this.baseCollectionPath+"/confirm-email-change",l).then(()=>{const r=hi(e),o=this.client.authStore.record;return o&&o.id===r.id&&o.collectionId===r.collectionId&&this.client.authStore.clear(),!0})}async listExternalAuths(e,t){return this.client.collection("_externalAuths").getFullList(Object.assign({},t,{filter:this.client.filter("recordRef = {:id}",{id:e})}))}async unlinkExternalAuth(e,t,i){const s=await this.client.collection("_externalAuths").getFirstListItem(this.client.filter("recordRef = {:recordId} && provider = {:provider}",{recordId:e,provider:t}));return this.client.collection("_externalAuths").delete(s.id,i).then(()=>!0)}async requestOTP(e,t){return t=Object.assign({method:"POST",body:{email:e}},t),this.client.send(this.baseCollectionPath+"/request-otp",t)}async authWithOTP(e,t,i){return i=Object.assign({method:"POST",body:{otpId:e,password:t}},i),this.client.send(this.baseCollectionPath+"/auth-with-otp",i).then(s=>this.authResponse(s))}async impersonate(e,t,i){(i=Object.assign({method:"POST",body:{duration:t}},i)).headers=i.headers||{},i.headers.Authorization||(i.headers.Authorization=this.client.authStore.token);const s=new yn(this.client.baseURL,new zl,this.client.lang),l=await s.send(this.baseCollectionPath+"/impersonate/"+encodeURIComponent(e),i);return s.authStore.save(l==null?void 0:l.token,this.decode((l==null?void 0:l.record)||{})),s}_replaceQueryParams(e,t={}){let i=e,s="";e.indexOf("?")>=0&&(i=e.substring(0,e.indexOf("?")),s=e.substring(e.indexOf("?")+1));const l={},r=s.split("&");for(const o of r){if(o=="")continue;const a=o.split("=");l[decodeURIComponent(a[0].replace(/\+/g," "))]=decodeURIComponent((a[1]||"").replace(/\+/g," "))}for(let o in t)t.hasOwnProperty(o)&&(t[o]==null?delete l[o]:l[o]=t[o]);s="";for(let o in l)l.hasOwnProperty(o)&&(s!=""&&(s+="&"),s+=encodeURIComponent(o.replace(/%20/g,"+"))+"="+encodeURIComponent(l[o].replace(/%20/g,"+")));return s!=""?i+"?"+s:i}}function Ar(n){if(typeof window>"u"||!(window!=null&&window.open))throw new Ft(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,i=window.innerWidth,s=window.innerHeight;e=e>i?i:e,t=t>s?s:t;let l=i/2-e/2,r=s/2-t/2;return window.open(n,"popup_window","width="+e+",height="+t+",top="+r+",left="+l+",resizable,menubar=no")}class Mp extends oc{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,i){return i=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},i),this.client.send(this.baseCrudPath+"/import",i).then(()=>!0)}async getScaffolds(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/meta/scaffolds",e)}async truncate(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/truncate",t).then(()=>!0)}}class Dp extends wn{async getList(e=1,t=30,i){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:e,perPage:t},i.query),this.client.send("/api/logs",i)}async getOne(e,t){if(!e)throw new Ft({url:this.client.buildURL("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class Rp extends wn{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class Hp extends wn{getUrl(e,t,i={}){return console.warn("Please replace pb.files.getUrl() with pb.files.getURL()"),this.getURL(e,t,i)}getURL(e,t,i={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const s=[];s.push("api"),s.push("files"),s.push(encodeURIComponent(e.collectionId||e.collectionName)),s.push(encodeURIComponent(e.id)),s.push(encodeURIComponent(t));let l=this.client.buildURL(s.join("/"));if(Object.keys(i).length){i.download===!1&&delete i.download;const r=new URLSearchParams(i);l+=(l.includes("?")?"&":"?")+r}return l}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class Up extends wn{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return console.warn("Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()"),this.getDownloadURL(e,t)}getDownloadURL(e,t){return this.client.buildURL(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class Fp extends wn{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/crons",e)}async run(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/crons/${encodeURIComponent(e)}`,t).then(()=>!0)}}function _l(n){return typeof Blob<"u"&&n instanceof Blob||typeof File<"u"&&n instanceof File||n!==null&&typeof n=="object"&&n.uri&&(typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal)}function gl(n){var e;return n&&(((e=n.constructor)==null?void 0:e.name)==="FormData"||typeof FormData<"u"&&n instanceof FormData)}function Mr(n){for(const e in n){const t=Array.isArray(n[e])?n[e]:[n[e]];for(const i of t)if(_l(i))return!0}return!1}const qp=/^[\-\.\d]+$/;function Dr(n){if(typeof n!="string")return n;if(n=="true")return!0;if(n=="false")return!1;if((n[0]==="-"||n[0]>="0"&&n[0]<="9")&&qp.test(n)){let e=+n;if(""+e===n)return e}return n}class $p extends wn{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new Wp(this.requests,e)),this.subs[e]}async send(e){const t=new FormData,i=[];for(let s=0;s<this.requests.length;s++){const l=this.requests[s];if(i.push({method:l.method,url:l.url,headers:l.headers,body:l.json}),l.files)for(let r in l.files){const o=l.files[r]||[];for(let a of o)t.append("requests."+s+"."+r,a)}}return t.append("@jsonPayload",JSON.stringify({requests:i})),e=Object.assign({method:"POST",body:t},e),this.client.send("/api/batch",e)}}class Wp{constructor(e,t){this.requests=[],this.requests=e,this.collectionIdOrName=t}upsert(e,t){t=Object.assign({body:e||{}},t);const i={method:"PUT",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(i,t),this.requests.push(i)}create(e,t){t=Object.assign({body:e||{}},t);const i={method:"POST",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(i,t),this.requests.push(i)}update(e,t,i){i=Object.assign({body:t||{}},i);const s={method:"PATCH",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(s,i),this.requests.push(s)}delete(e,t){t=Object.assign({},t);const i={method:"DELETE",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(i,t),this.requests.push(i)}prepareRequest(e,t){if(Bl(t),e.headers=t.headers,e.json={},e.files={},t.query!==void 0){const s=lc(t.query);s&&(e.url+=(e.url.includes("?")?"&":"?")+s)}let i=t.body;gl(i)&&(i=function(l){let r={};return l.forEach((o,a)=>{if(a==="@jsonPayload"&&typeof o=="string")try{let u=JSON.parse(o);Object.assign(r,u)}catch(u){console.warn("@jsonPayload error:",u)}else r[a]!==void 0?(Array.isArray(r[a])||(r[a]=[r[a]]),r[a].push(Dr(o))):r[a]=Dr(o)}),r}(i));for(const s in i){const l=i[s];if(_l(l))e.files[s]=e.files[s]||[],e.files[s].push(l);else if(Array.isArray(l)){const r=[],o=[];for(const a of l)_l(a)?r.push(a):o.push(a);if(r.length>0&&r.length==l.length){e.files[s]=e.files[s]||[];for(let a of r)e.files[s].push(a)}else if(e.json[s]=o,r.length>0){let a=s;s.startsWith("+")||s.endsWith("+")||(a+="+"),e.files[a]=e.files[a]||[];for(let u of r)e.files[a].push(u)}}else e.json[s]=l}}}class yn{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e="/",t,i="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=i,t?this.authStore=t:typeof window<"u"&&window.Deno?this.authStore=new zl:this.authStore=new sc,this.collections=new Mp(this),this.files=new Hp(this),this.logs=new Dp(this),this.settings=new jp(this),this.realtime=new rc(this),this.health=new Rp(this),this.backups=new Up(this),this.crons=new Fp(this)}get admins(){return this.collection("_superusers")}createBatch(){return new $p(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new Ap(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let i in t){let s=t[i];switch(typeof s){case"boolean":case"number":s=""+s;break;case"string":s="'"+s.replace(/'/g,"\\'")+"'";break;default:s=s===null?"null":s instanceof Date?"'"+s.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(s).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+i+"}",s)}return e}getFileUrl(e,t,i={}){return console.warn("Please replace pb.getFileUrl() with pb.files.getURL()"),this.files.getURL(e,t,i)}buildUrl(e){return console.warn("Please replace pb.buildUrl() with pb.buildURL()"),this.buildURL(e)}buildURL(e){var i;let t=this.baseURL;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(i=window.location.origin)!=null&&i.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseURL.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseURL),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let i=this.buildURL(e);if(this.beforeSend){const s=Object.assign({},await this.beforeSend(i,t));s.url!==void 0||s.options!==void 0?(i=s.url||i,t=s.options||t):Object.keys(s).length&&(t=s,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const s=lc(t.query);s&&(i+=(i.includes("?")?"&":"?")+s),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(i,t).then(async s=>{var r;let l={};try{l=await s.json()}catch(o){if((r=t.signal)!=null&&r.aborted||typeof DOMException<"u"&&o instanceof DOMException&&(o.name=="AbortError"||o.code==20))throw o}if(this.afterSend&&(l=await this.afterSend(s,l,t)),s.status>=400)throw new Ft({url:s.url,status:s.status,data:l});return l}).catch(s=>{throw new Ft(s)})}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=function(s){if(typeof FormData>"u"||s===void 0||typeof s!="object"||s===null||gl(s)||!Mr(s))return s;const l=new FormData;for(const r in s){const o=s[r];if(o!==void 0)if(typeof o!="object"||Mr({data:o})){const a=Array.isArray(o)?o:[o];for(let u of a)l.append(r,u)}else{let a={};a[r]=o,l.append("@jsonPayload",JSON.stringify(a))}}return l}(t.body),Bl(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||gl(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const i=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(i);const s=new AbortController;this.cancelControllers[i]=s,t.signal=s.signal}return t}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let i in e)if(i.toLowerCase()==t)return e[i];return null}}class xn extends Error{}class Vp extends xn{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class zp extends xn{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class Bp extends xn{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class ai extends xn{}class ac extends xn{constructor(e){super(`Invalid unit ${e}`)}}class It extends xn{}class Tn extends xn{constructor(){super("Zone is an abstract class")}}const _e="numeric",nn="short",qt="long",Ts={year:_e,month:_e,day:_e},uc={year:_e,month:nn,day:_e},Zp={year:_e,month:nn,day:_e,weekday:nn},fc={year:_e,month:qt,day:_e},cc={year:_e,month:qt,day:_e,weekday:qt},dc={hour:_e,minute:_e},pc={hour:_e,minute:_e,second:_e},mc={hour:_e,minute:_e,second:_e,timeZoneName:nn},hc={hour:_e,minute:_e,second:_e,timeZoneName:qt},_c={hour:_e,minute:_e,hourCycle:"h23"},gc={hour:_e,minute:_e,second:_e,hourCycle:"h23"},bc={hour:_e,minute:_e,second:_e,hourCycle:"h23",timeZoneName:nn},wc={hour:_e,minute:_e,second:_e,hourCycle:"h23",timeZoneName:qt},yc={year:_e,month:_e,day:_e,hour:_e,minute:_e},vc={year:_e,month:_e,day:_e,hour:_e,minute:_e,second:_e},kc={year:_e,month:nn,day:_e,hour:_e,minute:_e},Sc={year:_e,month:nn,day:_e,hour:_e,minute:_e,second:_e},Yp={year:_e,month:nn,day:_e,weekday:nn,hour:_e,minute:_e},Tc={year:_e,month:qt,day:_e,hour:_e,minute:_e,timeZoneName:nn},Oc={year:_e,month:qt,day:_e,hour:_e,minute:_e,second:_e,timeZoneName:nn},Cc={year:_e,month:qt,day:_e,weekday:qt,hour:_e,minute:_e,timeZoneName:qt},Ec={year:_e,month:qt,day:_e,weekday:qt,hour:_e,minute:_e,second:_e,timeZoneName:qt};class xi{get type(){throw new Tn}get name(){throw new Tn}get ianaName(){return this.name}get isUniversal(){throw new Tn}offsetName(e,t){throw new Tn}formatOffset(e,t){throw new Tn}offset(e){throw new Tn}equals(e){throw new Tn}get isValid(){throw new Tn}}let Xs=null;class Fs extends xi{static get instance(){return Xs===null&&(Xs=new Fs),Xs}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return Uc(e,t,i)}formatOffset(e,t){return $i(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const bl=new Map;function Kp(n){let e=bl.get(n);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),bl.set(n,e)),e}const Gp={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Jp(n,e){const t=n.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,s,l,r,o,a,u,f]=i;return[r,s,l,o,a,u,f]}function Xp(n,e){const t=n.formatToParts(e),i=[];for(let s=0;s<t.length;s++){const{type:l,value:r}=t[s],o=Gp[l];l==="era"?i[o]=r:He(o)||(i[o]=parseInt(r,10))}return i}const Qs=new Map;class gn extends xi{static create(e){let t=Qs.get(e);return t===void 0&&Qs.set(e,t=new gn(e)),t}static resetCache(){Qs.clear(),bl.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=gn.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return Uc(e,t,i,this.name)}formatOffset(e,t){return $i(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const i=Kp(this.name);let[s,l,r,o,a,u,f]=i.formatToParts?Xp(i,t):Jp(i,t);o==="BC"&&(s=-Math.abs(s)+1);const d=$s({year:s,month:l,day:r,hour:a===24?0:a,minute:u,second:f,millisecond:0});let m=+t;const h=m%1e3;return m-=h>=0?h:1e3+h,(d-m)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Rr={};function Qp(n,e={}){const t=JSON.stringify([n,e]);let i=Rr[t];return i||(i=new Intl.ListFormat(n,e),Rr[t]=i),i}const wl=new Map;function yl(n,e={}){const t=JSON.stringify([n,e]);let i=wl.get(t);return i===void 0&&(i=new Intl.DateTimeFormat(n,e),wl.set(t,i)),i}const vl=new Map;function xp(n,e={}){const t=JSON.stringify([n,e]);let i=vl.get(t);return i===void 0&&(i=new Intl.NumberFormat(n,e),vl.set(t,i)),i}const kl=new Map;function em(n,e={}){const{base:t,...i}=e,s=JSON.stringify([n,i]);let l=kl.get(s);return l===void 0&&(l=new Intl.RelativeTimeFormat(n,e),kl.set(s,l)),l}let Ri=null;function tm(){return Ri||(Ri=new Intl.DateTimeFormat().resolvedOptions().locale,Ri)}const Sl=new Map;function Lc(n){let e=Sl.get(n);return e===void 0&&(e=new Intl.DateTimeFormat(n).resolvedOptions(),Sl.set(n,e)),e}const Tl=new Map;function nm(n){let e=Tl.get(n);if(!e){const t=new Intl.Locale(n);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,"minimalDays"in e||(e={...Ic,...e}),Tl.set(n,e)}return e}function im(n){const e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));const t=n.indexOf("-u-");if(t===-1)return[n];{let i,s;try{i=yl(n).resolvedOptions(),s=n}catch{const a=n.substring(0,t);i=yl(a).resolvedOptions(),s=a}const{numberingSystem:l,calendar:r}=i;return[s,l,r]}}function sm(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function lm(n){const e=[];for(let t=1;t<=12;t++){const i=Re.utc(2009,t,1);e.push(n(i))}return e}function rm(n){const e=[];for(let t=1;t<=7;t++){const i=Re.utc(2016,11,13+t);e.push(n(i))}return e}function us(n,e,t,i){const s=n.listingMode();return s==="error"?null:s==="en"?t(e):i(e)}function om(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||Lc(n.locale).numberingSystem==="latn"}class am{constructor(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:s,floor:l,...r}=i;if(!t||Object.keys(r).length>0){const o={useGrouping:!1,...i};i.padTo>0&&(o.minimumIntegerDigits=i.padTo),this.inf=xp(e,o)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):Jl(e,3);return vt(t,this.padTo)}}}class um{constructor(e,t,i){this.opts=i,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const r=-1*(e.offset/60),o=r>=0?`Etc/GMT+${r}`:`Etc/GMT${r}`;e.offset!==0&&gn.create(o).valid?(s=o,this.dt=e):(s="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const l={...this.opts};l.timeZone=l.timeZone||s,this.dtf=yl(t,l)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:i}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class fm{constructor(e,t,i){this.opts={style:"long",...i},!t&&Rc()&&(this.rtf=em(e,i))}format(e,t){return this.rtf?this.rtf.format(e,t):Nm(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const Ic={firstDay:1,minimalDays:4,weekend:[6,7]};class Qe{static fromOpts(e){return Qe.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,i,s,l=!1){const r=e||_t.defaultLocale,o=r||(l?"en-US":tm()),a=t||_t.defaultNumberingSystem,u=i||_t.defaultOutputCalendar,f=Cl(s)||_t.defaultWeekSettings;return new Qe(o,a,u,f,r)}static resetCache(){Ri=null,wl.clear(),vl.clear(),kl.clear(),Sl.clear(),Tl.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:i,weekSettings:s}={}){return Qe.create(e,t,i,s)}constructor(e,t,i,s,l){const[r,o,a]=im(e);this.locale=r,this.numberingSystem=t||o||null,this.outputCalendar=i||a||null,this.weekSettings=s,this.intl=sm(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=l,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=om(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Qe.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Cl(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return us(this,e,$c,()=>{const i=this.intl==="ja"||this.intl.startsWith("ja-");t&=!i;const s=t?{month:e,day:"numeric"}:{month:e},l=t?"format":"standalone";if(!this.monthsCache[l][e]){const r=i?o=>this.dtFormatter(o,s).format():o=>this.extract(o,s,"month");this.monthsCache[l][e]=lm(r)}return this.monthsCache[l][e]})}weekdays(e,t=!1){return us(this,e,zc,()=>{const i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=t?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=rm(l=>this.extract(l,i,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return us(this,void 0,()=>Bc,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Re.utc(2016,11,13,9),Re.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return us(this,e,Zc,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Re.utc(-40,1,1),Re.utc(2017,1,1)].map(i=>this.extract(i,t,"era"))),this.eraCache[e]})}extract(e,t,i){const s=this.dtFormatter(e,t),l=s.formatToParts(),r=l.find(o=>o.type.toLowerCase()===i);return r?r.value:null}numberFormatter(e={}){return new am(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new um(e,this.intl,t)}relFormatter(e={}){return new fm(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Qp(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Lc(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Hc()?nm(this.locale):Ic}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let xs=null;class Mt extends xi{static get utcInstance(){return xs===null&&(xs=new Mt(0)),xs}static instance(e){return e===0?Mt.utcInstance:new Mt(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Mt(Ws(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${$i(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${$i(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return $i(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class cm extends xi{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Cn(n,e){if(He(n)||n===null)return e;if(n instanceof xi)return n;if(gm(n)){const t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?Fs.instance:t==="utc"||t==="gmt"?Mt.utcInstance:Mt.parseSpecifier(t)||gn.create(n)}else return Ln(n)?Mt.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new cm(n)}const Zl={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},Hr={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},dm=Zl.hanidec.replace(/[\[|\]]/g,"").split("");function pm(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);if(n[t].search(Zl.hanidec)!==-1)e+=dm.indexOf(n[t]);else for(const s in Hr){const[l,r]=Hr[s];i>=l&&i<=r&&(e+=i-l)}}return parseInt(e,10)}else return e}const Ol=new Map;function mm(){Ol.clear()}function xt({numberingSystem:n},e=""){const t=n||"latn";let i=Ol.get(t);i===void 0&&(i=new Map,Ol.set(t,i));let s=i.get(e);return s===void 0&&(s=new RegExp(`${Zl[t]}${e}`),i.set(e,s)),s}let Ur=()=>Date.now(),Fr="system",qr=null,$r=null,Wr=null,Vr=60,zr,Br=null;class _t{static get now(){return Ur}static set now(e){Ur=e}static set defaultZone(e){Fr=e}static get defaultZone(){return Cn(Fr,Fs.instance)}static get defaultLocale(){return qr}static set defaultLocale(e){qr=e}static get defaultNumberingSystem(){return $r}static set defaultNumberingSystem(e){$r=e}static get defaultOutputCalendar(){return Wr}static set defaultOutputCalendar(e){Wr=e}static get defaultWeekSettings(){return Br}static set defaultWeekSettings(e){Br=Cl(e)}static get twoDigitCutoffYear(){return Vr}static set twoDigitCutoffYear(e){Vr=e%100}static get throwOnInvalid(){return zr}static set throwOnInvalid(e){zr=e}static resetCaches(){Qe.resetCache(),gn.resetCache(),Re.resetCache(),mm()}}class tn{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const jc=[0,31,59,90,120,151,181,212,243,273,304,334],Pc=[0,31,60,91,121,152,182,213,244,274,305,335];function Bt(n,e){return new tn("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function Yl(n,e,t){const i=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const s=i.getUTCDay();return s===0?7:s}function Nc(n,e,t){return t+(es(n)?Pc:jc)[e-1]}function Ac(n,e){const t=es(n)?Pc:jc,i=t.findIndex(l=>l<e),s=e-t[i];return{month:i+1,day:s}}function Kl(n,e){return(n-e+7)%7+1}function Os(n,e=4,t=1){const{year:i,month:s,day:l}=n,r=Nc(i,s,l),o=Kl(Yl(i,s,l),t);let a=Math.floor((r-o+14-e)/7),u;return a<1?(u=i-1,a=Gi(u,e,t)):a>Gi(i,e,t)?(u=i+1,a=1):u=i,{weekYear:u,weekNumber:a,weekday:o,...Vs(n)}}function Zr(n,e=4,t=1){const{weekYear:i,weekNumber:s,weekday:l}=n,r=Kl(Yl(i,1,e),t),o=_i(i);let a=s*7+l-r-7+e,u;a<1?(u=i-1,a+=_i(u)):a>o?(u=i+1,a-=_i(i)):u=i;const{month:f,day:c}=Ac(u,a);return{year:u,month:f,day:c,...Vs(n)}}function el(n){const{year:e,month:t,day:i}=n,s=Nc(e,t,i);return{year:e,ordinal:s,...Vs(n)}}function Yr(n){const{year:e,ordinal:t}=n,{month:i,day:s}=Ac(e,t);return{year:e,month:i,day:s,...Vs(n)}}function Kr(n,e){if(!He(n.localWeekday)||!He(n.localWeekNumber)||!He(n.localWeekYear)){if(!He(n.weekday)||!He(n.weekNumber)||!He(n.weekYear))throw new ai("Cannot mix locale-based week fields with ISO-based week fields");return He(n.localWeekday)||(n.weekday=n.localWeekday),He(n.localWeekNumber)||(n.weekNumber=n.localWeekNumber),He(n.localWeekYear)||(n.weekYear=n.localWeekYear),delete n.localWeekday,delete n.localWeekNumber,delete n.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function hm(n,e=4,t=1){const i=qs(n.weekYear),s=Zt(n.weekNumber,1,Gi(n.weekYear,e,t)),l=Zt(n.weekday,1,7);return i?s?l?!1:Bt("weekday",n.weekday):Bt("week",n.weekNumber):Bt("weekYear",n.weekYear)}function _m(n){const e=qs(n.year),t=Zt(n.ordinal,1,_i(n.year));return e?t?!1:Bt("ordinal",n.ordinal):Bt("year",n.year)}function Mc(n){const e=qs(n.year),t=Zt(n.month,1,12),i=Zt(n.day,1,Cs(n.year,n.month));return e?t?i?!1:Bt("day",n.day):Bt("month",n.month):Bt("year",n.year)}function Dc(n){const{hour:e,minute:t,second:i,millisecond:s}=n,l=Zt(e,0,23)||e===24&&t===0&&i===0&&s===0,r=Zt(t,0,59),o=Zt(i,0,59),a=Zt(s,0,999);return l?r?o?a?!1:Bt("millisecond",s):Bt("second",i):Bt("minute",t):Bt("hour",e)}function He(n){return typeof n>"u"}function Ln(n){return typeof n=="number"}function qs(n){return typeof n=="number"&&n%1===0}function gm(n){return typeof n=="string"}function bm(n){return Object.prototype.toString.call(n)==="[object Date]"}function Rc(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Hc(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function wm(n){return Array.isArray(n)?n:[n]}function Gr(n,e,t){if(n.length!==0)return n.reduce((i,s)=>{const l=[e(s),s];return i&&t(i[0],l[0])===i[0]?i:l},null)[1]}function ym(n,e){return e.reduce((t,i)=>(t[i]=n[i],t),{})}function yi(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Cl(n){if(n==null)return null;if(typeof n!="object")throw new It("Week settings must be an object");if(!Zt(n.firstDay,1,7)||!Zt(n.minimalDays,1,7)||!Array.isArray(n.weekend)||n.weekend.some(e=>!Zt(e,1,7)))throw new It("Invalid week settings");return{firstDay:n.firstDay,minimalDays:n.minimalDays,weekend:Array.from(n.weekend)}}function Zt(n,e,t){return qs(n)&&n>=e&&n<=t}function vm(n,e){return n-e*Math.floor(n/e)}function vt(n,e=2){const t=n<0;let i;return t?i="-"+(""+-n).padStart(e,"0"):i=(""+n).padStart(e,"0"),i}function On(n){if(!(He(n)||n===null||n===""))return parseInt(n,10)}function Dn(n){if(!(He(n)||n===null||n===""))return parseFloat(n)}function Gl(n){if(!(He(n)||n===null||n==="")){const e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function Jl(n,e,t="round"){const i=10**e;switch(t){case"expand":return n>0?Math.ceil(n*i)/i:Math.floor(n*i)/i;case"trunc":return Math.trunc(n*i)/i;case"round":return Math.round(n*i)/i;case"floor":return Math.floor(n*i)/i;case"ceil":return Math.ceil(n*i)/i;default:throw new RangeError(`Value rounding ${t} is out of range`)}}function es(n){return n%4===0&&(n%100!==0||n%400===0)}function _i(n){return es(n)?366:365}function Cs(n,e){const t=vm(e-1,12)+1,i=n+(e-t)/12;return t===2?es(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function $s(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function Jr(n,e,t){return-Kl(Yl(n,1,e),t)+e-1}function Gi(n,e=4,t=1){const i=Jr(n,e,t),s=Jr(n+1,e,t);return(_i(n)-i+s)/7}function El(n){return n>99?n:n>_t.twoDigitCutoffYear?1900+n:2e3+n}function Uc(n,e,t,i=null){const s=new Date(n),l={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(l.timeZone=i);const r={timeZoneName:e,...l},o=new Intl.DateTimeFormat(t,r).formatToParts(s).find(a=>a.type.toLowerCase()==="timezonename");return o?o.value:null}function Ws(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);const i=parseInt(e,10)||0,s=t<0||Object.is(t,-0)?-i:i;return t*60+s}function Fc(n){const e=Number(n);if(typeof n=="boolean"||n===""||!Number.isFinite(e))throw new It(`Invalid unit value ${n}`);return e}function Es(n,e){const t={};for(const i in n)if(yi(n,i)){const s=n[i];if(s==null)continue;t[e(i)]=Fc(s)}return t}function $i(n,e){const t=Math.trunc(Math.abs(n/60)),i=Math.trunc(Math.abs(n%60)),s=n>=0?"+":"-";switch(e){case"short":return`${s}${vt(t,2)}:${vt(i,2)}`;case"narrow":return`${s}${t}${i>0?`:${i}`:""}`;case"techie":return`${s}${vt(t,2)}${vt(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Vs(n){return ym(n,["hour","minute","second","millisecond"])}const km=["January","February","March","April","May","June","July","August","September","October","November","December"],qc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Sm=["J","F","M","A","M","J","J","A","S","O","N","D"];function $c(n){switch(n){case"narrow":return[...Sm];case"short":return[...qc];case"long":return[...km];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Wc=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Vc=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Tm=["M","T","W","T","F","S","S"];function zc(n){switch(n){case"narrow":return[...Tm];case"short":return[...Vc];case"long":return[...Wc];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Bc=["AM","PM"],Om=["Before Christ","Anno Domini"],Cm=["BC","AD"],Em=["B","A"];function Zc(n){switch(n){case"narrow":return[...Em];case"short":return[...Cm];case"long":return[...Om];default:return null}}function Lm(n){return Bc[n.hour<12?0:1]}function Im(n,e){return zc(e)[n.weekday-1]}function jm(n,e){return $c(e)[n.month-1]}function Pm(n,e){return Zc(e)[n.year<0?0:1]}function Nm(n,e,t="always",i=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},l=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&l){const c=n==="days";switch(e){case 1:return c?"tomorrow":`next ${s[n][0]}`;case-1:return c?"yesterday":`last ${s[n][0]}`;case 0:return c?"today":`this ${s[n][0]}`}}const r=Object.is(e,-0)||e<0,o=Math.abs(e),a=o===1,u=s[n],f=i?a?u[1]:u[2]||u[1]:a?s[n][0]:n;return r?`${o} ${f} ago`:`in ${o} ${f}`}function Xr(n,e){let t="";for(const i of n)i.literal?t+=i.val:t+=e(i.val);return t}const Am={D:Ts,DD:uc,DDD:fc,DDDD:cc,t:dc,tt:pc,ttt:mc,tttt:hc,T:_c,TT:gc,TTT:bc,TTTT:wc,f:yc,ff:kc,fff:Tc,ffff:Cc,F:vc,FF:Sc,FFF:Oc,FFFF:Ec};class jt{static create(e,t={}){return new jt(e,t)}static parseFormat(e){let t=null,i="",s=!1;const l=[];for(let r=0;r<e.length;r++){const o=e.charAt(r);o==="'"?((i.length>0||s)&&l.push({literal:s||/^\s+$/.test(i),val:i===""?"'":i}),t=null,i="",s=!s):s||o===t?i+=o:(i.length>0&&l.push({literal:/^\s+$/.test(i),val:i}),i=o,t=o)}return i.length>0&&l.push({literal:s||/^\s+$/.test(i),val:i}),l}static macroTokenToFormatOpts(e){return Am[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0,i=void 0){if(this.opts.forceSimple)return vt(e,t);const s={...this.opts};return t>0&&(s.padTo=t),i&&(s.signDisplay=i),this.loc.numberFormatter(s).format(e)}formatDateTimeFromString(e,t){const i=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",l=(m,h)=>this.loc.extract(e,m,h),r=m=>e.isOffsetFixed&&e.offset===0&&m.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,m.format):"",o=()=>i?Lm(e):l({hour:"numeric",hourCycle:"h12"},"dayperiod"),a=(m,h)=>i?jm(e,m):l(h?{month:m}:{month:m,day:"numeric"},"month"),u=(m,h)=>i?Im(e,m):l(h?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),f=m=>{const h=jt.macroTokenToFormatOpts(m);return h?this.formatWithSystemDefault(e,h):m},c=m=>i?Pm(e,m):l({era:m},"era"),d=m=>{switch(m){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return r({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return r({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return r({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return o();case"d":return s?l({day:"numeric"},"day"):this.num(e.day);case"dd":return s?l({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return s?l({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?l({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return a("short",!0);case"LLLL":return a("long",!0);case"LLLLL":return a("narrow",!0);case"M":return s?l({month:"numeric"},"month"):this.num(e.month);case"MM":return s?l({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return a("short",!1);case"MMMM":return a("long",!1);case"MMMMM":return a("narrow",!1);case"y":return s?l({year:"numeric"},"year"):this.num(e.year);case"yy":return s?l({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?l({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?l({year:"numeric"},"year"):this.num(e.year,6);case"G":return c("short");case"GG":return c("long");case"GGGGG":return c("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return f(m)}};return Xr(jt.parseFormat(t),d)}formatDurationFromString(e,t){const i=this.opts.signMode==="negativeLargestOnly"?-1:1,s=f=>{switch(f[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},l=(f,c)=>d=>{const m=s(d);if(m){const h=c.isNegativeDuration&&m!==c.largestUnit?i:1;let g;return this.opts.signMode==="negativeLargestOnly"&&m!==c.largestUnit?g="never":this.opts.signMode==="all"?g="always":g="auto",this.num(f.get(m)*h,d.length,g)}else return d},r=jt.parseFormat(t),o=r.reduce((f,{literal:c,val:d})=>c?f:f.concat(d),[]),a=e.shiftTo(...o.map(s).filter(f=>f)),u={isNegativeDuration:a<0,largestUnit:Object.keys(a.values)[0]};return Xr(r,l(a,u))}}const Yc=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Oi(...n){const e=n.reduce((t,i)=>t+i.source,"");return RegExp(`^${e}$`)}function Ci(...n){return e=>n.reduce(([t,i,s],l)=>{const[r,o,a]=l(e,s);return[{...t,...r},o||i,a]},[{},null,1]).slice(0,2)}function Ei(n,...e){if(n==null)return[null,null];for(const[t,i]of e){const s=t.exec(n);if(s)return i(s)}return[null,null]}function Kc(...n){return(e,t)=>{const i={};let s;for(s=0;s<n.length;s++)i[n[s]]=On(e[t+s]);return[i,null,t+s]}}const Gc=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,Mm=`(?:${Gc.source}?(?:\\[(${Yc.source})\\])?)?`,Xl=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Jc=RegExp(`${Xl.source}${Mm}`),Ql=RegExp(`(?:[Tt]${Jc.source})?`),Dm=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Rm=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Hm=/(\d{4})-?(\d{3})/,Um=Kc("weekYear","weekNumber","weekDay"),Fm=Kc("year","ordinal"),qm=/(\d{4})-(\d\d)-(\d\d)/,Xc=RegExp(`${Xl.source} ?(?:${Gc.source}|(${Yc.source}))?`),$m=RegExp(`(?: ${Xc.source})?`);function gi(n,e,t){const i=n[e];return He(i)?t:On(i)}function Wm(n,e){return[{year:gi(n,e),month:gi(n,e+1,1),day:gi(n,e+2,1)},null,e+3]}function Li(n,e){return[{hours:gi(n,e,0),minutes:gi(n,e+1,0),seconds:gi(n,e+2,0),milliseconds:Gl(n[e+3])},null,e+4]}function ts(n,e){const t=!n[e]&&!n[e+1],i=Ws(n[e+1],n[e+2]),s=t?null:Mt.instance(i);return[{},s,e+3]}function ns(n,e){const t=n[e]?gn.create(n[e]):null;return[{},t,e+1]}const Vm=RegExp(`^T?${Xl.source}$`),zm=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Bm(n){const[e,t,i,s,l,r,o,a,u]=n,f=e[0]==="-",c=a&&a[0]==="-",d=(m,h=!1)=>m!==void 0&&(h||m&&f)?-m:m;return[{years:d(Dn(t)),months:d(Dn(i)),weeks:d(Dn(s)),days:d(Dn(l)),hours:d(Dn(r)),minutes:d(Dn(o)),seconds:d(Dn(a),a==="-0"),milliseconds:d(Gl(u),c)}]}const Zm={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function xl(n,e,t,i,s,l,r){const o={year:e.length===2?El(On(e)):On(e),month:qc.indexOf(t)+1,day:On(i),hour:On(s),minute:On(l)};return r&&(o.second=On(r)),n&&(o.weekday=n.length>3?Wc.indexOf(n)+1:Vc.indexOf(n)+1),o}const Ym=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Km(n){const[,e,t,i,s,l,r,o,a,u,f,c]=n,d=xl(e,s,i,t,l,r,o);let m;return a?m=Zm[a]:u?m=0:m=Ws(f,c),[d,new Mt(m)]}function Gm(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Jm=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Xm=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Qm=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Qr(n){const[,e,t,i,s,l,r,o]=n;return[xl(e,s,i,t,l,r,o),Mt.utcInstance]}function xm(n){const[,e,t,i,s,l,r,o]=n;return[xl(e,o,t,i,s,l,r),Mt.utcInstance]}const eh=Oi(Dm,Ql),th=Oi(Rm,Ql),nh=Oi(Hm,Ql),ih=Oi(Jc),Qc=Ci(Wm,Li,ts,ns),sh=Ci(Um,Li,ts,ns),lh=Ci(Fm,Li,ts,ns),rh=Ci(Li,ts,ns);function oh(n){return Ei(n,[eh,Qc],[th,sh],[nh,lh],[ih,rh])}function ah(n){return Ei(Gm(n),[Ym,Km])}function uh(n){return Ei(n,[Jm,Qr],[Xm,Qr],[Qm,xm])}function fh(n){return Ei(n,[zm,Bm])}const ch=Ci(Li);function dh(n){return Ei(n,[Vm,ch])}const ph=Oi(qm,$m),mh=Oi(Xc),hh=Ci(Li,ts,ns);function _h(n){return Ei(n,[ph,Qc],[mh,hh])}const xr="Invalid Duration",xc={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},gh={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...xc},Vt=146097/400,ii=146097/4800,bh={years:{quarters:4,months:12,weeks:Vt/7,days:Vt,hours:Vt*24,minutes:Vt*24*60,seconds:Vt*24*60*60,milliseconds:Vt*24*60*60*1e3},quarters:{months:3,weeks:Vt/28,days:Vt/4,hours:Vt*24/4,minutes:Vt*24*60/4,seconds:Vt*24*60*60/4,milliseconds:Vt*24*60*60*1e3/4},months:{weeks:ii/7,days:ii,hours:ii*24,minutes:ii*24*60,seconds:ii*24*60*60,milliseconds:ii*24*60*60*1e3},...xc},$n=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],wh=$n.slice(0).reverse();function hn(n,e,t=!1){const i={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new Ze(i)}function ed(n,e){let t=e.milliseconds??0;for(const i of wh.slice(1))e[i]&&(t+=e[i]*n[i].milliseconds);return t}function eo(n,e){const t=ed(n,e)<0?-1:1;$n.reduceRight((i,s)=>{if(He(e[s]))return i;if(i){const l=e[i]*t,r=n[s][i],o=Math.floor(l/r);e[s]+=o*t,e[i]-=o*r*t}return s},null),$n.reduce((i,s)=>{if(He(e[s]))return i;if(i){const l=e[i]%1;e[i]-=l,e[s]+=l*n[i][s]}return s},null)}function to(n){const e={};for(const[t,i]of Object.entries(n))i!==0&&(e[t]=i);return e}class Ze{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let i=t?bh:gh;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||Qe.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,t){return Ze.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new It(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Ze({values:Es(e,Ze.normalizeUnit),loc:Qe.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Ln(e))return Ze.fromMillis(e);if(Ze.isDuration(e))return e;if(typeof e=="object")return Ze.fromObject(e);throw new It(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[i]=fh(e);return i?Ze.fromObject(i,t):Ze.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[i]=dh(e);return i?Ze.fromObject(i,t):Ze.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new It("need to specify a reason the Duration is invalid");const i=e instanceof tn?e:new tn(e,t);if(_t.throwOnInvalid)throw new Bp(i);return new Ze({invalid:i})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new ac(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const i={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?jt.create(this.loc,i).formatDurationFromString(this,e):xr}toHuman(e={}){if(!this.isValid)return xr;const t=e.showZeros!==!1,i=$n.map(s=>{const l=this.values[s];return He(l)||l===0&&!t?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:s.slice(0,-1)}).format(l)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Jl(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Re.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?ed(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=Ze.fromDurationLike(e),i={};for(const s of $n)(yi(t.values,s)||yi(this.values,s))&&(i[s]=t.get(s)+this.get(s));return hn(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const t=Ze.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=Fc(e(this.values[i],i));return hn(this,{values:t},!0)}get(e){return this[Ze.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...Es(e,Ze.normalizeUnit)};return hn(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:i,matrix:s}={}){const r={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:s,conversionAccuracy:i};return hn(this,r)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return eo(this.matrix,e),hn(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=to(this.normalize().shiftToAll().toObject());return hn(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(r=>Ze.normalizeUnit(r));const t={},i={},s=this.toObject();let l;for(const r of $n)if(e.indexOf(r)>=0){l=r;let o=0;for(const u in i)o+=this.matrix[u][r]*i[u],i[u]=0;Ln(s[r])&&(o+=s[r]);const a=Math.trunc(o);t[r]=a,i[r]=(o*1e3-a*1e3)/1e3}else Ln(s[r])&&(i[r]=s[r]);for(const r in i)i[r]!==0&&(t[l]+=r===l?i[r]:i[r]/this.matrix[l][r]);return eo(this.matrix,t),hn(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return hn(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=to(this.values);return hn(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(i,s){return i===void 0||i===0?s===void 0||s===0:i===s}for(const i of $n)if(!t(this.values[i],e.values[i]))return!1;return!0}}const si="Invalid Interval";function yh(n,e){return!n||!n.isValid?ht.invalid("missing or invalid start"):!e||!e.isValid?ht.invalid("missing or invalid end"):e<n?ht.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}class ht{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new It("need to specify a reason the Interval is invalid");const i=e instanceof tn?e:new tn(e,t);if(_t.throwOnInvalid)throw new zp(i);return new ht({invalid:i})}static fromDateTimes(e,t){const i=Di(e),s=Di(t),l=yh(i,s);return l??new ht({start:i,end:s})}static after(e,t){const i=Ze.fromDurationLike(t),s=Di(e);return ht.fromDateTimes(s,s.plus(i))}static before(e,t){const i=Ze.fromDurationLike(t),s=Di(e);return ht.fromDateTimes(s.minus(i),s)}static fromISO(e,t){const[i,s]=(e||"").split("/",2);if(i&&s){let l,r;try{l=Re.fromISO(i,t),r=l.isValid}catch{r=!1}let o,a;try{o=Re.fromISO(s,t),a=o.isValid}catch{a=!1}if(r&&a)return ht.fromDateTimes(l,o);if(r){const u=Ze.fromISO(s,t);if(u.isValid)return ht.after(l,u)}else if(a){const u=Ze.fromISO(i,t);if(u.isValid)return ht.before(o,u)}}return ht.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const i=this.start.startOf(e,t);let s;return t!=null&&t.useLocaleWeeks?s=this.end.reconfigure({locale:i.locale}):s=this.end,s=s.startOf(e,t),Math.floor(s.diff(i,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?ht.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Di).filter(r=>this.contains(r)).sort((r,o)=>r.toMillis()-o.toMillis()),i=[];let{s}=this,l=0;for(;s<this.e;){const r=t[l]||this.e,o=+r>+this.e?this.e:r;i.push(ht.fromDateTimes(s,o)),s=o,l+=1}return i}splitBy(e){const t=Ze.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:i}=this,s=1,l;const r=[];for(;i<this.e;){const o=this.start.plus(t.mapUnits(a=>a*s));l=+o>+this.e?this.e:o,r.push(ht.fromDateTimes(i,l)),i=l,s+=1}return r}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return t>=i?null:ht.fromDateTimes(t,i)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return ht.fromDateTimes(t,i)}static merge(e){const[t,i]=e.sort((s,l)=>s.s-l.s).reduce(([s,l],r)=>l?l.overlaps(r)||l.abutsStart(r)?[s,l.union(r)]:[s.concat([l]),r]:[s,r],[[],null]);return i&&t.push(i),t}static xor(e){let t=null,i=0;const s=[],l=e.map(a=>[{time:a.s,type:"s"},{time:a.e,type:"e"}]),r=Array.prototype.concat(...l),o=r.sort((a,u)=>a.time-u.time);for(const a of o)i+=a.type==="s"?1:-1,i===1?t=a.time:(t&&+t!=+a.time&&s.push(ht.fromDateTimes(t,a.time)),t=null);return ht.merge(s)}difference(...e){return ht.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:si}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Ts,t={}){return this.isValid?jt.create(this.s.loc.clone(t),e).formatInterval(this):si}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:si}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:si}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:si}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:si}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Ze.invalid(this.invalidReason)}mapEndpoints(e){return ht.fromDateTimes(e(this.s),e(this.e))}}class fs{static hasDST(e=_t.defaultZone){const t=Re.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return gn.isValidZone(e)}static normalizeZone(e){return Cn(e,_t.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||Qe.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||Qe.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||Qe.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null,outputCalendar:l="gregory"}={}){return(s||Qe.create(t,i,l)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null,outputCalendar:l="gregory"}={}){return(s||Qe.create(t,i,l)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Qe.create(t,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:s=null}={}){return(s||Qe.create(t,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Qe.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Qe.create(t,null,"gregory").eras(e)}static features(){return{relative:Rc(),localeWeek:Hc()}}}function no(n,e){const t=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=t(e)-t(n);return Math.floor(Ze.fromMillis(i).as("days"))}function vh(n,e,t){const i=[["years",(a,u)=>u.year-a.year],["quarters",(a,u)=>u.quarter-a.quarter+(u.year-a.year)*4],["months",(a,u)=>u.month-a.month+(u.year-a.year)*12],["weeks",(a,u)=>{const f=no(a,u);return(f-f%7)/7}],["days",no]],s={},l=n;let r,o;for(const[a,u]of i)t.indexOf(a)>=0&&(r=a,s[a]=u(n,e),o=l.plus(s),o>e?(s[a]--,n=l.plus(s),n>e&&(o=n,s[a]--,n=l.plus(s))):n=o);return[n,s,o,r]}function kh(n,e,t,i){let[s,l,r,o]=vh(n,e,t);const a=e-s,u=t.filter(c=>["hours","minutes","seconds","milliseconds"].indexOf(c)>=0);u.length===0&&(r<e&&(r=s.plus({[o]:1})),r!==s&&(l[o]=(l[o]||0)+a/(r-s)));const f=Ze.fromObject(l,i);return u.length>0?Ze.fromMillis(a,i).shiftTo(...u).plus(f):f}const Sh="missing Intl.DateTimeFormat.formatToParts support";function Ke(n,e=t=>t){return{regex:n,deser:([t])=>e(pm(t))}}const Th="",td=`[ ${Th}]`,nd=new RegExp(td,"g");function Oh(n){return n.replace(/\./g,"\\.?").replace(nd,td)}function io(n){return n.replace(/\./g,"").replace(nd," ").toLowerCase()}function en(n,e){return n===null?null:{regex:RegExp(n.map(Oh).join("|")),deser:([t])=>n.findIndex(i=>io(t)===io(i))+e}}function so(n,e){return{regex:n,deser:([,t,i])=>Ws(t,i),groups:e}}function cs(n){return{regex:n,deser:([e])=>e}}function Ch(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Eh(n,e){const t=xt(e),i=xt(e,"{2}"),s=xt(e,"{3}"),l=xt(e,"{4}"),r=xt(e,"{6}"),o=xt(e,"{1,2}"),a=xt(e,"{1,3}"),u=xt(e,"{1,6}"),f=xt(e,"{1,9}"),c=xt(e,"{2,4}"),d=xt(e,"{4,6}"),m=w=>({regex:RegExp(Ch(w.val)),deser:([_])=>_,literal:!0}),g=(w=>{if(n.literal)return m(w);switch(w.val){case"G":return en(e.eras("short"),0);case"GG":return en(e.eras("long"),0);case"y":return Ke(u);case"yy":return Ke(c,El);case"yyyy":return Ke(l);case"yyyyy":return Ke(d);case"yyyyyy":return Ke(r);case"M":return Ke(o);case"MM":return Ke(i);case"MMM":return en(e.months("short",!0),1);case"MMMM":return en(e.months("long",!0),1);case"L":return Ke(o);case"LL":return Ke(i);case"LLL":return en(e.months("short",!1),1);case"LLLL":return en(e.months("long",!1),1);case"d":return Ke(o);case"dd":return Ke(i);case"o":return Ke(a);case"ooo":return Ke(s);case"HH":return Ke(i);case"H":return Ke(o);case"hh":return Ke(i);case"h":return Ke(o);case"mm":return Ke(i);case"m":return Ke(o);case"q":return Ke(o);case"qq":return Ke(i);case"s":return Ke(o);case"ss":return Ke(i);case"S":return Ke(a);case"SSS":return Ke(s);case"u":return cs(f);case"uu":return cs(o);case"uuu":return Ke(t);case"a":return en(e.meridiems(),0);case"kkkk":return Ke(l);case"kk":return Ke(c,El);case"W":return Ke(o);case"WW":return Ke(i);case"E":case"c":return Ke(t);case"EEE":return en(e.weekdays("short",!1),1);case"EEEE":return en(e.weekdays("long",!1),1);case"ccc":return en(e.weekdays("short",!0),1);case"cccc":return en(e.weekdays("long",!0),1);case"Z":case"ZZ":return so(new RegExp(`([+-]${o.source})(?::(${i.source}))?`),2);case"ZZZ":return so(new RegExp(`([+-]${o.source})(${i.source})?`),2);case"z":return cs(/[a-z_+-/]{1,256}?/i);case" ":return cs(/[^\S\n\r]/);default:return m(w)}})(n)||{invalidReason:Sh};return g.token=n,g}const Lh={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Ih(n,e,t){const{type:i,value:s}=n;if(i==="literal"){const a=/^\s+$/.test(s);return{literal:!a,val:a?" ":s}}const l=e[i];let r=i;i==="hour"&&(e.hour12!=null?r=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?r="hour12":r="hour24":r=t.hour12?"hour12":"hour24");let o=Lh[r];if(typeof o=="object"&&(o=o[l]),o)return{literal:!1,val:o}}function jh(n){return[`^${n.map(t=>t.regex).reduce((t,i)=>`${t}(${i.source})`,"")}$`,n]}function Ph(n,e,t){const i=n.match(e);if(i){const s={};let l=1;for(const r in t)if(yi(t,r)){const o=t[r],a=o.groups?o.groups+1:1;!o.literal&&o.token&&(s[o.token.val[0]]=o.deser(i.slice(l,l+a))),l+=a}return[i,s]}else return[i,{}]}function Nh(n){const e=l=>{switch(l){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,i;return He(n.z)||(t=gn.create(n.z)),He(n.Z)||(t||(t=new Mt(n.Z)),i=n.Z),He(n.q)||(n.M=(n.q-1)*3+1),He(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),He(n.u)||(n.S=Gl(n.u)),[Object.keys(n).reduce((l,r)=>{const o=e(r);return o&&(l[o]=n[r]),l},{}),t,i]}let tl=null;function Ah(){return tl||(tl=Re.fromMillis(1555555555555)),tl}function Mh(n,e){if(n.literal)return n;const t=jt.macroTokenToFormatOpts(n.val),i=rd(t,e);return i==null||i.includes(void 0)?n:i}function id(n,e){return Array.prototype.concat(...n.map(t=>Mh(t,e)))}class sd{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=id(jt.parseFormat(t),e),this.units=this.tokens.map(i=>Eh(i,e)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,s]=jh(this.units);this.regex=RegExp(i,"i"),this.handlers=s}}explainFromTokens(e){if(this.isValid){const[t,i]=Ph(e,this.regex,this.handlers),[s,l,r]=i?Nh(i):[null,null,void 0];if(yi(i,"a")&&yi(i,"H"))throw new ai("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:i,result:s,zone:l,specificOffset:r}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function ld(n,e,t){return new sd(n,t).explainFromTokens(e)}function Dh(n,e,t){const{result:i,zone:s,specificOffset:l,invalidReason:r}=ld(n,e,t);return[i,s,l,r]}function rd(n,e){if(!n)return null;const i=jt.create(e,n).dtFormatter(Ah()),s=i.formatToParts(),l=i.resolvedOptions();return s.map(r=>Ih(r,n,l))}const nl="Invalid DateTime",lo=864e13;function Hi(n){return new tn("unsupported zone",`the zone "${n.name}" is not supported`)}function il(n){return n.weekData===null&&(n.weekData=Os(n.c)),n.weekData}function sl(n){return n.localWeekData===null&&(n.localWeekData=Os(n.c,n.loc.getMinDaysInFirstWeek(),n.loc.getStartOfWeek())),n.localWeekData}function Rn(n,e){const t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new Re({...t,...e,old:t})}function od(n,e,t){let i=n-e*60*1e3;const s=t.offset(i);if(e===s)return[i,e];i-=(s-e)*60*1e3;const l=t.offset(i);return s===l?[i,s]:[n-Math.min(s,l)*60*1e3,Math.max(s,l)]}function ds(n,e){n+=e*60*1e3;const t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function bs(n,e,t){return od($s(n),e,t)}function ro(n,e){const t=n.o,i=n.c.year+Math.trunc(e.years),s=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,l={...n.c,year:i,month:s,day:Math.min(n.c.day,Cs(i,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},r=Ze.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),o=$s(l);let[a,u]=od(o,t,n.zone);return r!==0&&(a+=r,u=n.zone.offset(a)),{ts:a,o:u}}function li(n,e,t,i,s,l){const{setZone:r,zone:o}=t;if(n&&Object.keys(n).length!==0||e){const a=e||o,u=Re.fromObject(n,{...t,zone:a,specificOffset:l});return r?u:u.setZone(o)}else return Re.invalid(new tn("unparsable",`the input "${s}" can't be parsed as ${i}`))}function ps(n,e,t=!0){return n.isValid?jt.create(Qe.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function ll(n,e,t){const i=n.c.year>9999||n.c.year<0;let s="";if(i&&n.c.year>=0&&(s+="+"),s+=vt(n.c.year,i?6:4),t==="year")return s;if(e){if(s+="-",s+=vt(n.c.month),t==="month")return s;s+="-"}else if(s+=vt(n.c.month),t==="month")return s;return s+=vt(n.c.day),s}function oo(n,e,t,i,s,l,r){let o=!t||n.c.millisecond!==0||n.c.second!==0,a="";switch(r){case"day":case"month":case"year":break;default:if(a+=vt(n.c.hour),r==="hour")break;if(e){if(a+=":",a+=vt(n.c.minute),r==="minute")break;o&&(a+=":",a+=vt(n.c.second))}else{if(a+=vt(n.c.minute),r==="minute")break;o&&(a+=vt(n.c.second))}if(r==="second")break;o&&(!i||n.c.millisecond!==0)&&(a+=".",a+=vt(n.c.millisecond,3))}return s&&(n.isOffsetFixed&&n.offset===0&&!l?a+="Z":n.o<0?(a+="-",a+=vt(Math.trunc(-n.o/60)),a+=":",a+=vt(Math.trunc(-n.o%60))):(a+="+",a+=vt(Math.trunc(n.o/60)),a+=":",a+=vt(Math.trunc(n.o%60)))),l&&(a+="["+n.zone.ianaName+"]"),a}const ad={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Rh={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Hh={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ws=["year","month","day","hour","minute","second","millisecond"],Uh=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Fh=["year","ordinal","hour","minute","second","millisecond"];function ys(n){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new ac(n);return e}function ao(n){switch(n.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return ys(n)}}function qh(n){if(Ui===void 0&&(Ui=_t.now()),n.type!=="iana")return n.offset(Ui);const e=n.name;let t=Ll.get(e);return t===void 0&&(t=n.offset(Ui),Ll.set(e,t)),t}function uo(n,e){const t=Cn(e.zone,_t.defaultZone);if(!t.isValid)return Re.invalid(Hi(t));const i=Qe.fromObject(e);let s,l;if(He(n.year))s=_t.now();else{for(const a of ws)He(n[a])&&(n[a]=ad[a]);const r=Mc(n)||Dc(n);if(r)return Re.invalid(r);const o=qh(t);[s,l]=bs(n,o,t)}return new Re({ts:s,zone:t,loc:i,o:l})}function fo(n,e,t){const i=He(t.round)?!0:t.round,s=He(t.rounding)?"trunc":t.rounding,l=(o,a)=>(o=Jl(o,i||t.calendary?0:2,t.calendary?"round":s),e.loc.clone(t).relFormatter(t).format(o,a)),r=o=>t.calendary?e.hasSame(n,o)?0:e.startOf(o).diff(n.startOf(o),o).get(o):e.diff(n,o).get(o);if(t.unit)return l(r(t.unit),t.unit);for(const o of t.units){const a=r(o);if(Math.abs(a)>=1)return l(a,o)}return l(n>e?-0:0,t.units[t.units.length-1])}function co(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}let Ui;const Ll=new Map;class Re{constructor(e){const t=e.zone||_t.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new tn("invalid input"):null)||(t.isValid?null:Hi(t));this.ts=He(e.ts)?_t.now():e.ts;let s=null,l=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[s,l]=[e.old.c,e.old.o];else{const o=Ln(e.o)&&!e.old?e.o:t.offset(this.ts);s=ds(this.ts,o),i=Number.isNaN(s.year)?new tn("invalid input"):null,s=i?null:s,l=i?null:o}this._zone=t,this.loc=e.loc||Qe.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=s,this.o=l,this.isLuxonDateTime=!0}static now(){return new Re({})}static local(){const[e,t]=co(arguments),[i,s,l,r,o,a,u]=t;return uo({year:i,month:s,day:l,hour:r,minute:o,second:a,millisecond:u},e)}static utc(){const[e,t]=co(arguments),[i,s,l,r,o,a,u]=t;return e.zone=Mt.utcInstance,uo({year:i,month:s,day:l,hour:r,minute:o,second:a,millisecond:u},e)}static fromJSDate(e,t={}){const i=bm(e)?e.valueOf():NaN;if(Number.isNaN(i))return Re.invalid("invalid input");const s=Cn(t.zone,_t.defaultZone);return s.isValid?new Re({ts:i,zone:s,loc:Qe.fromObject(t)}):Re.invalid(Hi(s))}static fromMillis(e,t={}){if(Ln(e))return e<-lo||e>lo?Re.invalid("Timestamp out of range"):new Re({ts:e,zone:Cn(t.zone,_t.defaultZone),loc:Qe.fromObject(t)});throw new It(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Ln(e))return new Re({ts:e*1e3,zone:Cn(t.zone,_t.defaultZone),loc:Qe.fromObject(t)});throw new It("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const i=Cn(t.zone,_t.defaultZone);if(!i.isValid)return Re.invalid(Hi(i));const s=Qe.fromObject(t),l=Es(e,ao),{minDaysInFirstWeek:r,startOfWeek:o}=Kr(l,s),a=_t.now(),u=He(t.specificOffset)?i.offset(a):t.specificOffset,f=!He(l.ordinal),c=!He(l.year),d=!He(l.month)||!He(l.day),m=c||d,h=l.weekYear||l.weekNumber;if((m||f)&&h)throw new ai("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&f)throw new ai("Can't mix ordinal dates with month/day");const g=h||l.weekday&&!m;let w,_,T=ds(a,u);g?(w=Uh,_=Rh,T=Os(T,r,o)):f?(w=Fh,_=Hh,T=el(T)):(w=ws,_=ad);let L=!1;for(const M of w){const D=l[M];He(D)?L?l[M]=_[M]:l[M]=T[M]:L=!0}const O=g?hm(l,r,o):f?_m(l):Mc(l),C=O||Dc(l);if(C)return Re.invalid(C);const S=g?Zr(l,r,o):f?Yr(l):l,[P,R]=bs(S,u,i),A=new Re({ts:P,zone:i,o:R,loc:s});return l.weekday&&m&&e.weekday!==A.weekday?Re.invalid("mismatched weekday",`you can't specify both a weekday of ${l.weekday} and a date of ${A.toISO()}`):A.isValid?A:Re.invalid(A.invalid)}static fromISO(e,t={}){const[i,s]=oh(e);return li(i,s,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[i,s]=ah(e);return li(i,s,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[i,s]=uh(e);return li(i,s,t,"HTTP",t)}static fromFormat(e,t,i={}){if(He(e)||He(t))throw new It("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:l=null}=i,r=Qe.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0}),[o,a,u,f]=Dh(r,e,t);return f?Re.invalid(f):li(o,a,i,`format ${t}`,e,u)}static fromString(e,t,i={}){return Re.fromFormat(e,t,i)}static fromSQL(e,t={}){const[i,s]=_h(e);return li(i,s,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new It("need to specify a reason the DateTime is invalid");const i=e instanceof tn?e:new tn(e,t);if(_t.throwOnInvalid)throw new Vp(i);return new Re({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const i=rd(e,Qe.fromObject(t));return i?i.map(s=>s?s.val:null).join(""):null}static expandFormat(e,t={}){return id(jt.parseFormat(e),Qe.fromObject(t)).map(s=>s.val).join("")}static resetCache(){Ui=void 0,Ll.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?il(this).weekYear:NaN}get weekNumber(){return this.isValid?il(this).weekNumber:NaN}get weekday(){return this.isValid?il(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?sl(this).weekday:NaN}get localWeekNumber(){return this.isValid?sl(this).weekNumber:NaN}get localWeekYear(){return this.isValid?sl(this).weekYear:NaN}get ordinal(){return this.isValid?el(this.c).ordinal:NaN}get monthShort(){return this.isValid?fs.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?fs.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?fs.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?fs.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,i=$s(this.c),s=this.zone.offset(i-e),l=this.zone.offset(i+e),r=this.zone.offset(i-s*t),o=this.zone.offset(i-l*t);if(r===o)return[this];const a=i-r*t,u=i-o*t,f=ds(a,r),c=ds(u,o);return f.hour===c.hour&&f.minute===c.minute&&f.second===c.second&&f.millisecond===c.millisecond?[Rn(this,{ts:a}),Rn(this,{ts:u})]:[this]}get isInLeapYear(){return es(this.year)}get daysInMonth(){return Cs(this.year,this.month)}get daysInYear(){return this.isValid?_i(this.year):NaN}get weeksInWeekYear(){return this.isValid?Gi(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Gi(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:i,calendar:s}=jt.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:s}}toUTC(e=0,t={}){return this.setZone(Mt.instance(e),t)}toLocal(){return this.setZone(_t.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if(e=Cn(e,_t.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(t||i){const l=e.offset(this.ts),r=this.toObject();[s]=bs(r,l,e)}return Rn(this,{ts:s,zone:e})}else return Re.invalid(Hi(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:i}={}){const s=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:i});return Rn(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=Es(e,ao),{minDaysInFirstWeek:i,startOfWeek:s}=Kr(t,this.loc),l=!He(t.weekYear)||!He(t.weekNumber)||!He(t.weekday),r=!He(t.ordinal),o=!He(t.year),a=!He(t.month)||!He(t.day),u=o||a,f=t.weekYear||t.weekNumber;if((u||r)&&f)throw new ai("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&r)throw new ai("Can't mix ordinal dates with month/day");let c;l?c=Zr({...Os(this.c,i,s),...t},i,s):He(t.ordinal)?(c={...this.toObject(),...t},He(t.day)&&(c.day=Math.min(Cs(c.year,c.month),c.day))):c=Yr({...el(this.c),...t});const[d,m]=bs(c,this.o,this.zone);return Rn(this,{ts:d,o:m})}plus(e){if(!this.isValid)return this;const t=Ze.fromDurationLike(e);return Rn(this,ro(this,t))}minus(e){if(!this.isValid)return this;const t=Ze.fromDurationLike(e).negate();return Rn(this,ro(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const i={},s=Ze.normalizeUnit(e);switch(s){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(s==="weeks")if(t){const l=this.loc.getStartOfWeek(),{weekday:r}=this;r<l&&(i.weekNumber=this.weekNumber-1),i.weekday=l}else i.weekday=1;if(s==="quarters"){const l=Math.ceil(this.month/3);i.month=(l-1)*3+1}return this.set(i)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?jt.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):nl}toLocaleString(e=Ts,t={}){return this.isValid?jt.create(this.loc.clone(t),e).formatDateTime(this):nl}toLocaleParts(e={}){return this.isValid?jt.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:s=!0,extendedZone:l=!1,precision:r="milliseconds"}={}){if(!this.isValid)return null;r=ys(r);const o=e==="extended";let a=ll(this,o,r);return ws.indexOf(r)>=3&&(a+="T"),a+=oo(this,o,t,i,s,l,r),a}toISODate({format:e="extended",precision:t="day"}={}){return this.isValid?ll(this,e==="extended",ys(t)):null}toISOWeekDate(){return ps(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:s=!1,extendedZone:l=!1,format:r="extended",precision:o="milliseconds"}={}){return this.isValid?(o=ys(o),(s&&ws.indexOf(o)>=3?"T":"")+oo(this,r==="extended",t,e,i,l,o)):null}toRFC2822(){return ps(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ps(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?ll(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let s="HH:mm:ss.SSS";return(t||e)&&(i&&(s+=" "),t?s+="z":e&&(s+="ZZ")),ps(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():nl}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",i={}){if(!this.isValid||!e.isValid)return Ze.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...i},l=wm(t).map(Ze.normalizeUnit),r=e.valueOf()>this.valueOf(),o=r?this:e,a=r?e:this,u=kh(o,a,l,s);return r?u.negate():u}diffNow(e="milliseconds",t={}){return this.diff(Re.now(),e,t)}until(e){return this.isValid?ht.fromDateTimes(this,e):this}hasSame(e,t,i){if(!this.isValid)return!1;const s=e.valueOf(),l=this.setZone(e.zone,{keepLocalTime:!0});return l.startOf(t,i)<=s&&s<=l.endOf(t,i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||Re.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],l=e.unit;return Array.isArray(e.unit)&&(s=e.unit,l=void 0),fo(t,this.plus(i),{...e,numeric:"always",units:s,unit:l})}toRelativeCalendar(e={}){return this.isValid?fo(e.base||Re.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Re.isDateTime))throw new It("min requires all arguments be DateTimes");return Gr(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(Re.isDateTime))throw new It("max requires all arguments be DateTimes");return Gr(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,i={}){const{locale:s=null,numberingSystem:l=null}=i,r=Qe.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0});return ld(r,e,t)}static fromStringExplain(e,t,i={}){return Re.fromFormatExplain(e,t,i)}static buildFormatParser(e,t={}){const{locale:i=null,numberingSystem:s=null}=t,l=Qe.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return new sd(l,e)}static fromFormatParser(e,t,i={}){if(He(e)||He(t))throw new It("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:l=null}=i,r=Qe.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0});if(!r.equals(t.locale))throw new It(`fromFormatParser called with a locale of ${r}, but the format parser was created for ${t.locale}`);const{result:o,zone:a,specificOffset:u,invalidReason:f}=t.explainFromTokens(e);return f?Re.invalid(f):li(o,a,i,`format ${t.format}`,e,u)}static get DATE_SHORT(){return Ts}static get DATE_MED(){return uc}static get DATE_MED_WITH_WEEKDAY(){return Zp}static get DATE_FULL(){return fc}static get DATE_HUGE(){return cc}static get TIME_SIMPLE(){return dc}static get TIME_WITH_SECONDS(){return pc}static get TIME_WITH_SHORT_OFFSET(){return mc}static get TIME_WITH_LONG_OFFSET(){return hc}static get TIME_24_SIMPLE(){return _c}static get TIME_24_WITH_SECONDS(){return gc}static get TIME_24_WITH_SHORT_OFFSET(){return bc}static get TIME_24_WITH_LONG_OFFSET(){return wc}static get DATETIME_SHORT(){return yc}static get DATETIME_SHORT_WITH_SECONDS(){return vc}static get DATETIME_MED(){return kc}static get DATETIME_MED_WITH_SECONDS(){return Sc}static get DATETIME_MED_WITH_WEEKDAY(){return Yp}static get DATETIME_FULL(){return Tc}static get DATETIME_FULL_WITH_SECONDS(){return Oc}static get DATETIME_HUGE(){return Cc}static get DATETIME_HUGE_WITH_SECONDS(){return Ec}}function Di(n){if(Re.isDateTime(n))return n;if(n&&n.valueOf&&Ln(n.valueOf()))return Re.fromJSDate(n);if(n&&typeof n=="object")return Re.fromObject(n);throw new It(`Unknown datetime argument: ${n}, of type ${typeof n}`)}const ms=[],$h="abcdefghijklmnopqrstuvwxyz0123456789";class G{static isObject(e){return e!==null&&typeof e=="object"&&e.constructor===Object}static isEmpty(e){return typeof e>"u"||e===null||e===""||e==="00000000-0000-0000-0000-000000000000"||e==="0001-01-01 00:00:00.000Z"||e==="0001-01-01"||Array.isArray(e)&&e.length===0||G.isObject(e)&&Object.keys(e).length===0}static isInput(e){let t=e&&e.tagName?e.tagName.toLowerCase():"";return t==="input"||t==="select"||t==="textarea"||e.isContentEditable}static isFocusable(e){let t=e&&e.tagName?e.tagName.toLowerCase():"";return G.isInput(e)||t==="button"||t==="a"||t==="details"||e.tabIndex>=0}static toArray(e,t=!1){return Array.isArray(e)?e.slice():(t||!G.isEmpty(e))&&typeof e<"u"?[e]:[]}static inArray(e,t){e=Array.isArray(e)?e:[];for(let i=e.length-1;i>=0;i--)if(e[i]==t)return!0;return!1}static removeByValue(e,t){e=Array.isArray(e)?e:[];for(let i=e.length-1;i>=0;i--)if(e[i]==t){e.splice(i,1);break}}static pushUnique(e,t){G.inArray(e,t)||e.push(t)}static findByKey(e,t,i){e=Array.isArray(e)?e:[];for(let s in e)if(e[s][t]==i)return e[s];return null}static removeByKey(e,t,i){for(let s in e)e[s][t]==i&&e.splice(s,1)}static pushOrReplaceObject(e,t,i="id"){for(let s=e.length-1;s>=0;s--)if(e[s][i]==t[i]){e[s]=t;return}e.push(t)}static filterDuplicatesByKey(e,t="id"){e=Array.isArray(e)?e:[];const i={};for(const s of e)i[s[t]]=s;return Object.values(i)}static getNestedVal(e,t,i=null,s="."){let l=e||{},r=(t||"").split(s);for(const o of r){if(!G.isObject(l)&&!Array.isArray(l)||typeof l[o]>"u")return i;l=l[o]}return l}static setByPath(e,t,i,s="."){if(e===null||typeof e!="object"){console.warn("setByPath: data not an object or array.");return}let l=e,r=t.split(s),o=r.pop();for(const a of r)(!G.isObject(l)&&!Array.isArray(l)||!G.isObject(l[a])&&!Array.isArray(l[a]))&&(l[a]={}),l=l[a];l[o]=i}static deleteByPath(e,t,i="."){let s=e||{},l=(t||"").split(i),r=l.pop();for(const o of l)(!G.isObject(s)&&!Array.isArray(s)||!G.isObject(s[o])&&!Array.isArray(s[o]))&&(s[o]={}),s=s[o];Array.isArray(s)?s.splice(r,1):G.isObject(s)&&delete s[r],l.length>0&&(Array.isArray(s)&&!s.length||G.isObject(s)&&!Object.keys(s).length)&&(Array.isArray(e)&&e.length>0||G.isObject(e)&&Object.keys(e).length>0)&&G.deleteByPath(e,l.join(i),i)}static randomString(e=8,t=$h){let i="";for(let s=0;s<e;s++)i+=t.charAt(Math.floor(Math.random()*t.length));return i}static sentenize(e,t=!0){if(typeof e!="string")return"";if(e=e.trim().split("_").join(" "),e==="")return e;if(e=e[0].toUpperCase()+e.substring(1),t){let i=e[e.length-1];i!=="."&&i!=="?"&&i!=="!"&&(e+=".")}return e}static splitNonEmpty(e,t=","){const i=(e||"").split(t),s=[];for(let l of i)l=l.trim(),G.isEmpty(l)||s.push(l);return s}static joinNonEmpty(e,t=", "){const i=[];for(let s of e)s=typeof s=="string"?s.trim():"",G.isEmpty(s)||i.push(s);return i.join(t)}static getInitials(e){if(e=(e||"").split("@")[0].trim(),e.length<=2)return e.toUpperCase();const t=e.split(/[\.\_\-\ ]/);return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e[0].toUpperCase()}static getWordInfoAt(e,t){let i=e.replace(/(\r\n|\n|\r)/gm," ").split(" "),s=0,l=0,r=0;for(let o=0;o<i.length;o++){if(l=s+o,r=l+i[o].length-1,t>=l&&t<=r)return{start:l,end:r,word:i[o]};s+=i[o].length}return{}}static formattedFileSize(e){const t=e?Math.floor(Math.log(e)/Math.log(1024)):0;return(e/Math.pow(1024,t)).toFixed(2)*1+" "+["B","KB","MB","GB","TB"][t]}static getDateTime(e){if(typeof e=="string"){const t={19:"yyyy-MM-dd HH:mm:ss",23:"yyyy-MM-dd HH:mm:ss.SSS",20:"yyyy-MM-dd HH:mm:ss'Z'",24:"yyyy-MM-dd HH:mm:ss.SSS'Z'"},i=t[e.length]||t[19];return Re.fromFormat(e,i,{zone:"UTC"})}return Re.fromJSDate(e)}static formatToUTCDate(e,t="yyyy-MM-dd HH:mm:ss"){return G.getDateTime(e).toUTC().toFormat(t)}static formatToLocalDate(e,t="yyyy-MM-dd HH:mm:ss"){return G.getDateTime(e).toLocal().toFormat(t)}static relativeDate(e){return G.getDateTime(e).toRelative()}static async copyToClipboard(e){var t;if(e=""+e,!(!e.length||!((t=window==null?void 0:window.navigator)!=null&&t.clipboard)))return window.navigator.clipboard.writeText(e).catch(i=>{console.warn("Failed to copy.",i)})}static yieldToMain(){return new Promise(e=>{setTimeout(e,0)})}static isDesktopPrototype(e){return e.size==""}static getPrototypeIcon(e){return G.isDesktopPrototype(e)?"iconoir-modern-tv":"iconoir-smartphone-device"}static getUserDisplayName(e){return(e==null?void 0:e.name)||(e==null?void 0:e.email)||(e!=null&&e.username?"@"+(e==null?void 0:e.username):e==null?void 0:e.id)||""}static getCommentAuthor(e){var t;return G.getUserDisplayName((t=e==null?void 0:e.expand)==null?void 0:t.user)||(e==null?void 0:e.guestEmail)||""}static sortItemsByIds(e,t){e=e||[],t=t||[];const i=[];for(const s of t){const l=e.findIndex(r=>r.id==s);l<0||(i.push(e[l]),e.splice(l,1))}for(let s of e)i.push(s);return i}static triggerEvent(e,t=void 0){let i;t?i=new CustomEvent(e,{detail:t}):i=new Event(e),window.dispatchEvent(i)}static getHashQueryParams(){let e="";const t=window.location.hash.indexOf("?");return t>-1&&(e=window.location.hash.substring(t+1)),Object.fromEntries(new URLSearchParams(e))}static replaceHashQueryParams(e){e=e||{};let t="",i=window.location.hash;const s=i.indexOf("?");s>-1&&(t=i.substring(s+1),i=i.substring(0,s));const l=new URLSearchParams(t);for(let a in e){const u=e[a];u===null?l.delete(a):l.set(a,u)}t=l.toString(),t!=""&&(i+="?"+t);let r=window.location.href;const o=r.indexOf("#");o>-1&&(r=r.substring(0,o)),window.location.replace(r+i)}static getProjectLinkURL(e){let t=window.location.pathname.replace(/\/$/,"");const i=t.split("/");return i[i.length-1]=="_"&&(t=i.slice(0,i.length-1).join("/")),window.location.origin+t+"/#/"+((e==null?void 0:e.username)||"")}static generateThumb(e,t=100,i=100){return new Promise(s=>{let l=new FileReader;l.onload=function(r){let o=new Image;o.onload=function(){let a=document.createElement("canvas"),u=a.getContext("2d"),f=o.width,c=o.height;return a.width=t,a.height=i,u.drawImage(o,f>c?(f-c)/2:0,0,f>c?c:f,f>c?c:f,0,0,t,i),s(a.toDataURL(e.type))},o.src=r.target.result},l.readAsDataURL(e)})}static loadImage(e){return new Promise((t,i)=>{if(ms[e])return t({success:!0,url:e,width:ms[e].width,height:ms[e].height});let s=new Image;s.onload=()=>(ms[e]={width:s.naturalWidth,height:s.naturalHeight},t({success:!0,url:e,width:s.naturalWidth,height:s.naturalHeight})),s.onerror=()=>t({success:!1,url:e,width:0,height:0}),s.crossOrigin="Anonymous",s.src=e})}static closestFeatureEdge(e,t={},i=5){t.x=(t.x||0)<<0,t.y=(t.y||0)<<0,t.w=(t.w||e.naturalWidth)<<0,t.h=(t.h||e.naturalHeight)<<0;let s=document.createElement("canvas");s.width=t.w,s.height=t.h;let l=s.getContext("2d");l.fillStyle="white",l.fillRect(0,0,t.w,t.h),l.drawImage(e,t.x,t.y,t.w,t.h,0,0,t.w,t.h);let r=l.getImageData(0,0,t.w,t.h);for(let c=0;c<r.height;c++)for(let d=0;d<r.width;d++){let m=(d+c*r.width)*4,h=(r.data[m]+r.data[m+1]+r.data[m+2])/3;r.data[m]=h,r.data[m+1]=h,r.data[m+2]=h}let o=t.w,a=0,u=t.h,f=0;for(let c=0;c<r.height;c++)for(let d=0;d<r.width;d++){let m=(d+c*r.width)*4,h=r.data[m],g=r.data[m-4],w=r.data[m],_=r.data[m-t.w*4],T=r.data[m+t.w*4];(h>g+i||h<g-i||h>w+i||h<w-i||h>_+i||h<_-i||h>T+i||h<T-i)&&(d<o&&(o=d),d>a&&(a=d),c<u&&(u=c),c>f&&(f=c))}return o=o<t.w?o:0,u=u<t.h?u:0,a=a||t.w,f=f||t.h,{x:o,y:u,w:a-o,h:f-u}}static normalizePointerEvent(e){var t,i,s,l,r,o,a,u;typeof e.clientX>"u"&&typeof((i=(t=e.touches)==null?void 0:t[0])==null?void 0:i.clientX)<"u"&&(e.clientX=e.touches[0].clientX),typeof e.clientY>"u"&&typeof((l=(s=e.touches)==null?void 0:s[0])==null?void 0:l.clientY)<"u"&&(e.clientY=e.touches[0].clientY),typeof e.offsetX>"u"&&typeof((o=(r=e.touches)==null?void 0:r[0])==null?void 0:o.pageX)<"u"&&e.target&&(e.offsetX=e.touches[0].pageX-e.target.getBoundingClientRect().left),typeof e.offsetY>"u"&&typeof((u=(a=e.touches)==null?void 0:a[0])==null?void 0:u.pageY)<"u"&&e.target&&(e.offsetY=e.touches[0].pageY-e.target.getBoundingClientRect().top||0)}}const zs=We([]);function gt(n,e=3e3){return nr(n,"success",e)}function er(n,e=4e3){return nr(n,"error",e)}function tr(n,e=4500){return nr(n,"warning",e)}function nr(n,e,t){t=t||4e3;const i={message:n,type:e,duration:t,timeout:setTimeout(()=>{ud(i)},t)};zs.update(s=>(ir(s,i.message),G.pushOrReplaceObject(s,i,"message"),s))}function ud(n){zs.update(e=>(ir(e,n),e))}function Ji(){zs.update(n=>{for(let e of n)ir(n,e);return[]})}function ir(n,e){let t;typeof e=="string"?t=G.findByKey(n,"message",e):t=e,t&&(clearTimeout(t.timeout),G.removeByKey(n,"message",t.message))}const Bs=We({});function Jt(n){Bs.set(n||{})}function Wh(n){Bs.update(e=>(G.deleteByPath(e,n),e))}const ei=We({});function po(n){ei.set(n||{})}const Gn=Vh();function Vh(n="appOptions"){let e={};const t=window.localStorage.getItem(n);if(t)try{e=JSON.parse(t)||{},e.appURL=e.appURL||e.appUrl||"",e.termsURL=e.termsURL||e.termsUrl||"",e.allowHotspotsURL=e.allowHotspotsURL||e.allowHotspotsUrl||"",delete e.appUrl,delete e.termsUrl,delete e.allowHotspotsUrl}catch{}const i=[],s=o=>(i.push(o),o(e),()=>{const a=i.findIndex(u=>u===o);a>=0&&i.splice(a,1)}),l=o=>{e=o||{},window.localStorage.setItem(n,JSON.stringify(e)),i.forEach(a=>a(e))};return{subscribe:s,set:l,update:o=>l(o(e))}}const Il="pr_redirect";yn.prototype.rememberPath=function(){window.localStorage.setItem(Il,window.location.hash.slice(1))};yn.prototype.replaceWithRemembered=function(n="/"){const e=window.localStorage.getItem(Il);e&&window.localStorage.removeItem(Il),Yt(e||n)};yn.prototype.logout=function(n=!0){this.authStore.clear(),n&&Yt("/login")};yn.prototype.error=function(n,e=!0,t=""){if(!n||!(n instanceof Error)||n.isAbort)return;const i=(n==null?void 0:n.status)<<0,s=(n==null?void 0:n.response)||{};let l=e&&(s.message||n.message||t);if(l&&er(l),i==0&&console.log(n),G.isEmpty(s.data)||Jt(s.data),i===401)return this.rememberPath(),this.cancelAllRequests(),this.logout();if(i===403)return this.rememberPath(),this.cancelAllRequests(),Yt("/login")};yn.prototype.initStore=function(n=""){const e="pr_user_auth"+n;this.authStore.storageKey!=e&&(this.authStore=new zh(e))};class zh extends sc{constructor(e="pr_user_auth"){super(e),this.save(this.token,this.record)}save(e,t){super.save(e,t),t&&t.collectionName=="users"&&po(t)}clear(){var e;((e=this.record)==null?void 0:e.collectionName)=="users"&&po(null),super.clear()}}const z=new yn("");z.initStore();if(z.authStore.isValid){const n=new yn(z.baseURL,z.authStore);n.collection(n.authStore.record.collectionName).authRefresh().catch(e=>{console.warn("Failed to refresh the authenticated record",e);const t=(e==null?void 0:e.status)<<0;(t==401||t==403)&&(n.rememberPath(),n.authStore.clear(),Yt("/login"))})}function Bh(n){const e=new yn(z.baseURL);return e.initStore(n),e}function Zh(n){e();function e(){z.authStore.isValid?Yt("/projects"):z.logout()}return[]}class Yh extends Se{constructor(e){super(),ke(this,e,Zh,null,ge,{})}}function mo(n){let e;return{c(){e=b("span"),e.textContent="Presentator",p(e,"class","txt")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function Kh(n){let e,t,i,s,l,r,o,a=n[0]&&mo();return{c(){e=b("a"),t=b("img"),s=I(),a&&a.c(),Zn(t.src,i="./images/logo.svg")||p(t,"src",i),p(t,"width","30"),p(t,"height","37"),p(t,"alt","Presentator logo"),p(e,"href","/"),p(e,"class",l="app-logo "+n[1]),p(e,"draggable","false")},m(u,f){k(u,e,f),y(e,t),y(e,s),a&&a.m(e,null),r||(o=we(Ti.call(null,e)),r=!0)},p(u,[f]){u[0]?a||(a=mo(),a.c(),a.m(e,null)):a&&(a.d(1),a=null),f&2&&l!==(l="app-logo "+u[1])&&p(e,"class",l)},i:X,o:X,d(u){u&&v(e),a&&a.d(),r=!1,o()}}}function Gh(n,e,t){let{withText:i=!0}=e,{class:s=""}=e;return n.$$set=l=>{"withText"in l&&t(0,i=l.withText),"class"in l&&t(1,s=l.class)},[i,s]}class sr extends Se{constructor(e){super(),ke(this,e,Gh,Kh,ge,{withText:0,class:1})}}function lr(n){const e=n-1;return e*e*e+1}function jl(n,{delay:e=0,duration:t=400,easing:i=Qi}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:l=>`opacity: ${l*s}`}}function Nn(n,{delay:e=0,duration:t=400,easing:i=lr,x:s=0,y:l=0,opacity:r=0}={}){const o=getComputedStyle(n),a=+o.opacity,u=o.transform==="none"?"":o.transform,f=a*(1-r),[c,d]=Or(s),[m,h]=Or(l);return{delay:e,duration:t,easing:i,css:(g,w)=>`
			transform: ${u} translate(${(1-g)*c}${d}, ${(1-g)*m}${h});
			opacity: ${a-f*w}`}}function Lt(n,{delay:e=0,duration:t=400,easing:i=lr,axis:s="y"}={}){const l=getComputedStyle(n),r=+l.opacity,o=s==="y"?"height":"width",a=parseFloat(l[o]),u=s==="y"?["top","bottom"]:["left","right"],f=u.map(_=>`${_[0].toUpperCase()}${_.slice(1)}`),c=parseFloat(l[`padding${f[0]}`]),d=parseFloat(l[`padding${f[1]}`]),m=parseFloat(l[`margin${f[0]}`]),h=parseFloat(l[`margin${f[1]}`]),g=parseFloat(l[`border${f[0]}Width`]),w=parseFloat(l[`border${f[1]}Width`]);return{delay:e,duration:t,easing:i,css:_=>`overflow: hidden;opacity: ${Math.min(_*20,1)*r};${o}: ${_*a}px;padding-${u[0]}: ${_*c}px;padding-${u[1]}: ${_*d}px;margin-${u[0]}: ${_*m}px;margin-${u[1]}: ${_*h}px;border-${u[0]}-width: ${_*g}px;border-${u[1]}-width: ${_*w}px;`}}function ho(n){let e,t,i;const s=n[21].default,l=lt(s,n,n[20],null);return{c(){e=b("div"),l&&l.c(),p(e,"class",n[1]),Z(e,"active",n[0])},m(r,o){k(r,e,o),l&&l.m(e,null),n[22](e),i=!0},p(r,o){l&&l.p&&(!i||o[0]&1048576)&&ot(l,s,r,r[20],i?rt(s,r[20],o,null):at(r[20]),null),(!i||o[0]&2)&&p(e,"class",r[1]),(!i||o[0]&3)&&Z(e,"active",r[0])},i(r){i||(E(l,r),r&&St(()=>{i&&(t||(t=ct(e,Nn,{duration:150,y:3},!0)),t.run(1))}),i=!0)},o(r){j(l,r),r&&(t||(t=ct(e,Nn,{duration:150,y:3},!1)),t.run(0)),i=!1},d(r){r&&v(e),l&&l.d(r),n[22](null),r&&t&&t.end()}}}function Jh(n){let e,t,i,s,l=n[0]&&ho(n);return{c(){e=b("div"),l&&l.c(),p(e,"class","toggler-container"),p(e,"tabindex","-1")},m(r,o){k(r,e,o),l&&l.m(e,null),n[23](e),t=!0,i||(s=[H(window,"mousedown",n[5]),H(window,"click",n[6]),H(window,"keydown",n[4]),H(window,"focusin",n[7])],i=!0)},p(r,o){r[0]?l?(l.p(r,o),o[0]&1&&E(l,1)):(l=ho(r),l.c(),E(l,1),l.m(e,null)):l&&(oe(),j(l,1,1,()=>{l=null}),ae())},i(r){t||(E(l),t=!0)},o(r){j(l),t=!1},d(r){r&&v(e),l&&l.d(),n[23](null),i=!1,pe(s)}}}function Xh(n,e,t){let{$$slots:i={},$$scope:s}=e,{trigger:l=void 0}=e,{active:r=!1}=e,{escHide:o=!0}=e,{focusHide:a=!0}=e,{autoScroll:u=!0}=e,{disableHide:f=!1}=e,{closableClass:c="closable"}=e,{closableToggle:d=!0}=e,{class:m=""}=e,h,g,w,_,T=!1;const L=it();function O(){f||C()}function C(){t(0,r=!1),T=!1,clearTimeout(_)}function S(){t(0,r=!0),clearTimeout(_),_=setTimeout(()=>{u&&(g!=null&&g.scrollIntoViewIfNeeded?g==null||g.scrollIntoViewIfNeeded():g!=null&&g.scrollIntoView&&(g==null||g.scrollIntoView({behavior:"smooth",block:"nearest"})))},180)}function P(){r?O():S()}function R(U){return!h||U.classList.contains(c)||(w==null?void 0:w.contains(U))&&!h.contains(U)||h.contains(U)&&U.closest&&U.closest("."+c)}function A(U){(!r||d&&R(U.target))&&(U.stopPropagation(),P())}function M(U){(U.code==="Enter"||U.code==="Space")&&(!r||R(U.target))&&P()}function D(U){r&&o&&U.code==="Escape"&&!G.isInput(U.target)&&(U.preventDefault(),O())}function Y(U){r&&!(h!=null&&h.contains(U.target))?T=!0:T&&(T=!1)}function K(U){r&&T&&!(h!=null&&h.contains(U.target))&&!(w!=null&&w.contains(U.target))&&O()}function B(U){a&&(Y(U),K(U))}function N(U){V(),h==null||h.addEventListener("click",A),t(19,w=U||(h==null?void 0:h.parentNode)),w==null||w.addEventListener("click",A),w==null||w.addEventListener("keydown",M)}function V(){var U;clearTimeout(_),h==null||h.removeEventListener("click",A),(U=w==null?void 0:w.classList)==null||U.remove("active"),w==null||w.removeEventListener("click",A),w==null||w.removeEventListener("keydown",M)}bn(()=>(N(),()=>V()));function ee(U){se[U?"unshift":"push"](()=>{g=U,t(3,g)})}function J(U){se[U?"unshift":"push"](()=>{h=U,t(2,h)})}return n.$$set=U=>{"trigger"in U&&t(8,l=U.trigger),"active"in U&&t(0,r=U.active),"escHide"in U&&t(9,o=U.escHide),"focusHide"in U&&t(10,a=U.focusHide),"autoScroll"in U&&t(11,u=U.autoScroll),"disableHide"in U&&t(12,f=U.disableHide),"closableClass"in U&&t(13,c=U.closableClass),"closableToggle"in U&&t(14,d=U.closableToggle),"class"in U&&t(1,m=U.class),"$$scope"in U&&t(20,s=U.$$scope)},n.$$.update=()=>{var U,ce;n.$$.dirty[0]&260&&h&&N(l),n.$$.dirty[0]&524289&&(r?((U=w==null?void 0:w.classList)==null||U.add("active"),L("show")):((ce=w==null?void 0:w.classList)==null||ce.remove("active"),L("hide")))},[r,m,h,g,D,Y,K,B,l,o,a,u,f,c,d,O,C,S,P,w,s,i,ee,J]}class Rt extends Se{constructor(e){super(),ke(this,e,Xh,Jh,ge,{trigger:8,active:0,escHide:9,focusHide:10,autoScroll:11,disableHide:12,closableClass:13,closableToggle:14,class:1,hide:15,forceHide:16,show:17,toggle:18},null,[-1,-1])}get hide(){return this.$$.ctx[15]}get forceHide(){return this.$$.ctx[16]}get show(){return this.$$.ctx[17]}get toggle(){return this.$$.ctx[18]}}const Qh=n=>({}),_o=n=>({});function xh(n){let e;const t=n[6].placeholder,i=lt(t,n,n[5],_o),s=i||i1(n);return{c(){s&&s.c()},m(l,r){s&&s.m(l,r),e=!0},p(l,r){i?i.p&&(!e||r&32)&&ot(i,t,l,l[5],e?rt(t,l[5],r,Qh):at(l[5]),_o):s&&s.p&&(!e||r&1)&&s.p(l,e?r:-1)},i(l){e||(E(s,l),e=!0)},o(l){j(s,l),e=!1},d(l){s&&s.d(l)}}}function e1(n){let e,t,i;return{c(){var s,l;e=b("img"),Zn(e.src,t=n[2])||p(e,"src",t),p(e,"draggable","false"),p(e,"alt",i=(((s=n[0])==null?void 0:s.name)||((l=n[0])==null?void 0:l.username))+" avatar")},m(s,l){k(s,e,l)},p(s,l){var r,o;l&4&&!Zn(e.src,t=s[2])&&p(e,"src",t),l&1&&i!==(i=(((r=s[0])==null?void 0:r.name)||((o=s[0])==null?void 0:o.username))+" avatar")&&p(e,"alt",i)},i:X,o:X,d(s){s&&v(e)}}}function t1(n){let e;return{c(){e=b("i"),p(e,"class","iconoir-user")},m(t,i){k(t,e,i)},p:X,d(t){t&&v(e)}}}function n1(n){let e,t=G.getInitials(n[0].name||n[0].email)+"",i;return{c(){e=b("span"),i=x(t),p(e,"class","txt")},m(s,l){k(s,e,l),y(e,i)},p(s,l){l&1&&t!==(t=G.getInitials(s[0].name||s[0].email)+"")&&ve(i,t)},d(s){s&&v(e)}}}function i1(n){let e;function t(l,r){var o,a;return(o=l[0])!=null&&o.name||(a=l[0])!=null&&a.email?n1:t1}let i=t(n),s=i(n);return{c(){s.c(),e=De()},m(l,r){s.m(l,r),k(l,e,r)},p(l,r){i===(i=t(l))&&s?s.p(l,r):(s.d(1),s=i(l),s&&(s.c(),s.m(e.parentNode,e)))},d(l){l&&v(e),s.d(l)}}}function s1(n){let e,t,i,s,l,r;const o=[e1,xh],a=[];function u(h,g){return h[2]?0:1}t=u(n),i=a[t]=o[t](n);const f=n[6].default,c=lt(f,n,n[5],null);let d=[{class:l="thumb thumb-circle "+n[1]},n[3]],m={};for(let h=0;h<d.length;h+=1)m=Ue(m,d[h]);return{c(){e=b("figure"),i.c(),s=I(),c&&c.c(),Kn(e,m)},m(h,g){k(h,e,g),a[t].m(e,null),y(e,s),c&&c.m(e,null),r=!0},p(h,[g]){let w=t;t=u(h),t===w?a[t].p(h,g):(oe(),j(a[w],1,1,()=>{a[w]=null}),ae(),i=a[t],i?i.p(h,g):(i=a[t]=o[t](h),i.c()),E(i,1),i.m(e,s)),c&&c.p&&(!r||g&32)&&ot(c,f,h,h[5],r?rt(f,h[5],g,null):at(h[5]),null),Kn(e,m=bt(d,[(!r||g&2&&l!==(l="thumb thumb-circle "+h[1]))&&{class:l},g&8&&h[3]]))},i(h){r||(E(i),E(c,h),r=!0)},o(h){j(i),j(c,h),r=!1},d(h){h&&v(e),a[t].d(),c&&c.d(h)}}}function l1(n,e,t){const i=["user","file","class"];let s=ft(e,i),{$$slots:l={},$$scope:r}=e,{user:o}=e,{file:a=null}=e,{class:u=""}=e,f="";async function c(){a?t(2,f=await G.generateThumb(a)):o!=null&&o.avatar?t(2,f=z.files.getURL(o,o.avatar,{thumb:"100x100"})):t(2,f="")}return n.$$set=d=>{e=Ue(Ue({},e),Kt(d)),t(3,s=ft(e,i)),"user"in d&&t(0,o=d.user),"file"in d&&t(4,a=d.file),"class"in d&&t(1,u=d.class),"$$scope"in d&&t(5,r=d.$$scope)},n.$$.update=()=>{n.$$.dirty&17&&(a||o)&&c()},[o,u,f,s,a,r,l]}class is extends Se{constructor(e){super(),ke(this,e,l1,s1,ge,{user:0,file:4,class:1})}}const Pl="app-tooltip";let Nl,Hn;function go(n){return typeof n=="string"?{text:n,position:"bottom",hideOnClick:null}:n||{}}function In(){return Hn=Hn||document.querySelector("."+Pl),Hn||(Hn=document.createElement("div"),Hn.classList.add(Pl),document.body.appendChild(Hn)),Hn}function fd(n,e,t=null){let i=In();if(!i.classList.contains("active")||!(e!=null&&e.text)){Al();return}i.textContent=e.text,e.sub?i.dataset.sub=e.sub:delete i.dataset.sub,i.className=Pl+" active",e.class&&i.classList.add(e.class),e.position&&i.classList.add(e.position),i.style.top="0px",i.style.left="0px";let s=i.offsetHeight,l=i.offsetWidth,r=n.getBoundingClientRect(),o=0,a=0,u=5;e.position=="follow"&&t?(o=t.clientY+u,a=t.clientX+u):e.position=="left"?(o=r.top+r.height/2-s/2,a=r.left-l-u):e.position=="right"?(o=r.top+r.height/2-s/2,a=r.right+u):e.position=="top"?(o=r.top-s-u,a=r.left+r.width/2-l/2):e.position=="top-left"?(o=r.top-s-u,a=r.left):e.position=="top-right"?(o=r.top-s-u,a=r.right-l):e.position=="bottom-left"?(o=r.top+r.height+u,a=r.left):e.position=="bottom-right"?(o=r.top+r.height+u,a=r.right-l):(o=r.top+r.height+u,a=r.left+r.width/2-l/2),a+l>document.documentElement.clientWidth&&(a=document.documentElement.clientWidth-l),a=a>=0?a:0,o+s>document.documentElement.clientHeight&&(o=document.documentElement.clientHeight-s),o=o>=0?o:0,i.style.top=o+"px",i.style.left=a+"px"}function Al(){clearTimeout(Nl),In().classList.remove("active"),In().activeNode=void 0}function r1(n,e,t){In().activeNode=n,clearTimeout(Nl);function i(){In().classList.add("active"),fd(n,e,t)}e.delay?Nl=setTimeout(i,e.delay):i()}function Ce(n,e){let t=go(e);function i(l){r1(n,t,l)}function s(l){Al()}return!t.noAria&&t.text&&n.setAttribute("aria-description",t.text),t.position=="follow"&&n.addEventListener("mousemove",i),n.addEventListener("mouseenter",i),n.addEventListener("mouseleave",s),n.addEventListener("focusin",i),n.addEventListener("blur",s),(t.hideOnClick===!0||t.hideOnClick===null&&G.isFocusable(n))&&n.addEventListener("click",s),In(),{update(l){var r,o;t=go(l),!t.noAria&&t.text?n.setAttribute("aria-description",t.text):n.removeAttribute("aria-description"),t.position=="follow"?n.addEventListener("mousemove",i):n.removeEventListener("mousemove",i),(o=(r=In())==null?void 0:r.activeNode)!=null&&o.contains(n)&&fd(n,t)},destroy(){var l,r;(r=(l=In())==null?void 0:l.activeNode)!=null&&r.contains(n)&&Al(),n.removeEventListener("mousemove",i),n.removeEventListener("mouseenter",i),n.removeEventListener("focusin",i),n.removeEventListener("mouseleave",s),n.removeEventListener("blur",s),n.removeEventListener("click",s)}}}const $t=We([]),Jn=We(""),ui=We(!1);function rr(){$t.set([]),Jn.set(""),ui.set(!1)}const Et=Dt([$t,Jn],([n,e])=>n.length?e&&n.find(t=>t.id==e)||n[n.length-1]:null);Et.set=n=>{G.isObject(n)?vi(n,!0):Jn.set(n)};function vi(n,e=!1){n&&($t.update(t=>(G.pushOrReplaceObject(t,n),t)),e&&Jn.set(n.id))}function cd(n){n&&($t.update(e=>(G.removeByKey(e,"id",n.id),e)),Jn.update(e=>e==n.id?"":e))}let Wn;async function o1(n){return Wn==null||Wn(),z.collection("prototypes").subscribe("*",e=>{e.action==="delete"?cd(e.record):vi(e.record)},{filter:`project="${n}"`}).then(e=>(Wn=e,e)).catch(e=>{console.warn("failed to init prototypes subscription:",e)})}const or=We({});function Pt(n,e,t){return new Promise(i=>{or.set({text:n,yesCallback:async()=>{e&&await e(),i()},noCallback:async()=>{t&&await t(),i()}})})}function dd(){or.set({})}const Oe={preview:"preview",hotspots:"hotspots",comments:"comments"};Object.freeze(Oe);const Xn=We(""),Xi=We(""),Ls=We(""),pt=We([]),fi=We(""),ki=We(null),Fi=We(!1),Ii=We(Oe.preview),ji=We(!1),Bn=We(1),Is=We(!1),js=We(!0);function ar(){fr(),pt.set([]),Xi.set(""),Xn.set(""),Ls.set(""),fi.set(""),ki.set(null),Fi.set(!1),Bn.set(1),Is.set(!1),js.set(!0)}const Ge=Dt([pt,Xn],([n,e])=>n.length?e&&n.find(t=>t.id==e)||n[0]:null);Ge.set=n=>{Xi.set(Yn(Xn)||null),ki.set(null),G.isObject(n)?An(n,!0):Xn.set(n)};const pd=Dt([pt,Xi],([n,e])=>!n.length||!e?null:n.find(t=>t.id==e));pd.set=n=>{G.isObject(n)?(An(n),Xi.set(n.id)):Xi.set(n)};const ci=Dt([pt,Ls],([n,e])=>!n.length||!e?null:n.find(t=>t.id==e));ci.set=n=>{G.isObject(n)?(An(n),Ls.set(n.id)):Ls.set(n)};function Ml(n=1){const e=Yn(pt)||[];if(!e.length)return null;const t=Yn(Xn)||null;let i=e.findIndex(s=>s.id==t)+n;return i<0?i=0:i>=e.length&&(i=e.length-1),e[i]}function En(n=1){const e=Ml(n);if(!(e!=null&&e.id))return;const t=Yn(Xn)||null;(t==null?void 0:t.id)!=e.id&&Ge.set(e.id)}function An(n,e=!1){n&&(pt.update(t=>(G.pushOrReplaceObject(t,n),t)),e&&Ge.set(n.id))}function Dl(n){n&&pt.update(e=>(G.removeByKey(e,"id",n.id),$t.update(t=>{var s;const i=t.find(l=>l.id==n.prototype);return(s=i==null?void 0:i.screensOrder)!=null&&s.length&&G.removeByValue(i.screensOrder,i.id),t}),Xn.update(t=>t==n.id?"":t),e))}let Ut;async function ur(n){return Ut==null||Ut(),z.collection("screens").subscribe("*",e=>{e.action==="delete"?Dl(e.record):An(e.record)},{filter:`prototype="${n}"`}).then(e=>(Ut=e,e)).catch(e=>{console.warn("failed to init screens subscription:",e)})}function Ps(n){var t,i;if(!(n!=null&&n.id))return 0;let e=(i=(t=Yn(Et))==null?void 0:t.screensOrder)==null?void 0:i.indexOf(n.id);return e<0&&(e=Yn(pt).findIndex(s=>s.id==n.id)),e+1}const md="fitToScreen";function hd(){ji.update(n=>(n=!n,window.localStorage.setItem(md,n?1:0),G.replaceHashQueryParams({fit:n?1:0}),n))}function _d(){const n=G.getHashQueryParams();let e=typeof n.fit<"u"?n.fit:window.localStorage.getItem(md);e=!!(e<<0),ji.set(e),G.replaceHashQueryParams({fit:e?1:0})}function fr(){const n=G.getHashQueryParams();zt(n.mode)}function zt(n){(!n||!Oe[n])&&(n=Oe.preview),Ii.set(n),G.replaceHashQueryParams({mode:n})}async function cr(n,e){return Pt("Screen replacement could result in hotspots and comments misplacement if the new screen image has different dimensions from the original. Do you still want to proceed?",async()=>a1(n,e))}async function a1(n,e){if(!e||!(n!=null&&n.id)||n.isReplacing)return;n.isReplacing=!0;const t=new FormData;t.append("file",e),t.append("title",e.name.split(".").slice(0,-1).join(".")||e.name);try{const i=await z.collection("screens").update(n.id,t,{requestKey:"replace"+n.id});n.isReplacing=!1,An(i)}catch(i){i.isAbort||(n.isReplacing=!1,z.error(i))}}const vn=We([]),dr=Dt([Ge,vn],([n,e])=>n!=null&&n.id?e.filter(t=>{var i,s;return((s=(i=t.expand)==null?void 0:i.comment)==null?void 0:s.screen)==n.id}):[]);function pr(n){vn.update(e=>(G.removeByKey(e,"id",(n==null?void 0:n.id)||n),e))}function u1(n){n.read||vn.update(e=>(G.pushOrReplaceObject(e,n),e))}const gd="comment.screen.prototype.project,comment.user";async function f1(){try{const n=await z.collection("notifications").getFullList({filter:"read=false",expand:gd});return vn.set(n),c1()}catch(n){n.isAbort||console.warn("loadNotifications:",n)}}let Vn;async function c1(){return Vn==null||Vn(),z.collection("notifications").subscribe("*",async n=>{n.action=="delete"||n.record.read?pr(n.record):u1(n.record)},{expand:gd}).then(n=>(Vn=n,n)).catch(n=>{n.isAbort||console.log("notifications subscription failed:",n)})}const d1=n=>({}),bo=n=>({});function wo(n,e,t){const i=n.slice();return i[51]=e[t],i}const p1=n=>({}),yo=n=>({});function vo(n,e,t){const i=n.slice();return i[51]=e[t],i[55]=t,i}function ko(n){let e,t,i;return{c(){e=b("div"),t=x(n[2]),i=I(),p(e,"class","block txt-placeholder"),Z(e,"link-hint",!n[5]&&!n[6])},m(s,l){k(s,e,l),y(e,t),y(e,i)},p(s,l){l[0]&4&&ve(t,s[2]),l[0]&96&&Z(e,"link-hint",!s[5]&&!s[6])},d(s){s&&v(e)}}}function m1(n){let e,t=n[51]+"",i;return{c(){e=b("span"),i=x(t),p(e,"class","txt")},m(s,l){k(s,e,l),y(e,i)},p(s,l){l[0]&1&&t!==(t=s[51]+"")&&ve(i,t)},i:X,o:X,d(s){s&&v(e)}}}function h1(n){let e,t,i;const s=[{item:n[51]},n[12]];var l=n[11];function r(o,a){let u={};for(let f=0;f<s.length;f+=1)u=Ue(u,s[f]);return a!==void 0&&a[0]&4097&&(u=Ue(u,bt(s,[a[0]&1&&{item:o[51]},a[0]&4096&&Nt(o[12])]))),{props:u}}return l&&(e=Pn(l,r(n))),{c(){e&&$(e.$$.fragment),t=De()},m(o,a){e&&F(e,o,a),k(o,t,a),i=!0},p(o,a){if(a[0]&2048&&l!==(l=o[11])){if(e){oe();const u=e;j(u.$$.fragment,1,0,()=>{q(u,1)}),ae()}l?(e=Pn(l,r(o,a)),$(e.$$.fragment),E(e.$$.fragment,1),F(e,t.parentNode,t)):e=null}else if(l){const u=a[0]&4097?bt(s,[a[0]&1&&{item:o[51]},a[0]&4096&&Nt(o[12])]):{};e.$set(u)}},i(o){i||(e&&E(e.$$.fragment,o),i=!0)},o(o){e&&j(e.$$.fragment,o),i=!1},d(o){o&&v(t),e&&q(e,o)}}}function So(n){let e,t,i;function s(){return n[38](n[51])}return{c(){e=b("span"),e.innerHTML='<i class="iconoir-xmark"></i>',p(e,"class","clear")},m(l,r){k(l,e,r),t||(i=[we(Ce.call(null,e,"Clear")),H(e,"click",Ye(ye(s)))],t=!0)},p(l,r){n=l},d(l){l&&v(e),t=!1,pe(i)}}}function To(n){let e,t,i,s,l,r;const o=[h1,m1],a=[];function u(c,d){return c[11]?0:1}t=u(n),i=a[t]=o[t](n);let f=(n[4]||n[9])&&So(n);return{c(){e=b("div"),i.c(),s=I(),f&&f.c(),l=I(),p(e,"class","option")},m(c,d){k(c,e,d),a[t].m(e,null),y(e,s),f&&f.m(e,null),y(e,l),r=!0},p(c,d){let m=t;t=u(c),t===m?a[t].p(c,d):(oe(),j(a[m],1,1,()=>{a[m]=null}),ae(),i=a[t],i?i.p(c,d):(i=a[t]=o[t](c),i.c()),E(i,1),i.m(e,s)),c[4]||c[9]?f?f.p(c,d):(f=So(c),f.c(),f.m(e,l)):f&&(f.d(1),f=null)},i(c){r||(E(i),r=!0)},o(c){j(i),r=!1},d(c){c&&v(e),a[t].d(),f&&f.d()}}}function Oo(n){let e,t,i;function s(r){n[44](r)}let l={class:"dropdown dropdown-block options-dropdown "+n[8]+" "+(n[7]?"dropdown-upside":""),trigger:n[21],$$slots:{default:[b1]},$$scope:{ctx:n}};return n[22]!==void 0&&(l.active=n[22]),e=new Rt({props:l}),n[43](e),se.push(()=>Ae(e,"active",s)),e.$on("show",n[28]),e.$on("hide",n[45]),{c(){$(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};o[0]&384&&(a.class="dropdown dropdown-block options-dropdown "+r[8]+" "+(r[7]?"dropdown-upside":"")),o[0]&2097152&&(a.trigger=r[21]),o[0]&25486346|o[1]&65536&&(a.$$scope={dirty:o,ctx:r}),!t&&o[0]&4194304&&(t=!0,a.active=r[22],Ne(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){j(e.$$.fragment,r),i=!1},d(r){n[43](null),q(e,r)}}}function Co(n){let e,t,i,s,l,r,o,a,u=n[18].length&&Eo(n);return{c(){e=b("div"),t=b("label"),i=b("div"),i.innerHTML='<i class="iconoir-search"></i>',s=I(),l=b("input"),r=I(),u&&u.c(),p(i,"class","addon"),l.autofocus=!0,p(l,"type","text"),p(l,"placeholder",n[3]),p(t,"class","field-group"),p(e,"class","form-field form-field-sm options-search")},m(f,c){k(f,e,c),y(e,t),y(t,i),y(t,s),y(t,l),be(l,n[18]),y(t,r),u&&u.m(t,null),l.focus(),o||(a=H(l,"input",n[40]),o=!0)},p(f,c){c[0]&8&&p(l,"placeholder",f[3]),c[0]&262144&&l.value!==f[18]&&be(l,f[18]),f[18].length?u?u.p(f,c):(u=Eo(f),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},d(f){f&&v(e),u&&u.d(),o=!1,a()}}}function Eo(n){let e,t,i,s;return{c(){e=b("div"),t=b("button"),t.innerHTML='<i class="iconoir-xmark"></i>',p(t,"type","button"),p(t,"class","btn btn-xs btn-circle btn-hint btn-transparent clear"),p(e,"class","addon suffix")},m(l,r){k(l,e,r),y(e,t),i||(s=H(t,"click",Ye(ye(n[25]))),i=!0)},p:X,d(l){l&&v(e),i=!1,s()}}}function Lo(n){let e,t=n[1]&&Io(n);return{c(){t&&t.c(),e=De()},m(i,s){t&&t.m(i,s),k(i,e,s)},p(i,s){i[1]?t?t.p(i,s):(t=Io(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&v(e),t&&t.d(i)}}}function Io(n){let e,t;return{c(){e=b("div"),t=x(n[1]),p(e,"class","txt-missing")},m(i,s){k(i,e,s),y(e,t)},p(i,s){s[0]&2&&ve(t,i[1])},d(i){i&&v(e)}}}function _1(n){let e=n[51]+"",t;return{c(){t=x(e)},m(i,s){k(i,t,s)},p(i,s){s[0]&16777216&&e!==(e=i[51]+"")&&ve(t,e)},i:X,o:X,d(i){i&&v(t)}}}function g1(n){let e,t,i;const s=[{item:n[51]},n[14]];var l=n[13];function r(o,a){let u={};for(let f=0;f<s.length;f+=1)u=Ue(u,s[f]);return a!==void 0&&a[0]&16793600&&(u=Ue(u,bt(s,[a[0]&16777216&&{item:o[51]},a[0]&16384&&Nt(o[14])]))),{props:u}}return l&&(e=Pn(l,r(n))),{c(){e&&$(e.$$.fragment),t=De()},m(o,a){e&&F(e,o,a),k(o,t,a),i=!0},p(o,a){if(a[0]&8192&&l!==(l=o[13])){if(e){oe();const u=e;j(u.$$.fragment,1,0,()=>{q(u,1)}),ae()}l?(e=Pn(l,r(o,a)),$(e.$$.fragment),E(e.$$.fragment,1),F(e,t.parentNode,t)):e=null}else if(l){const u=a[0]&16793600?bt(s,[a[0]&16777216&&{item:o[51]},a[0]&16384&&Nt(o[14])]):{};e.$set(u)}},i(o){i||(e&&E(e.$$.fragment,o),i=!0)},o(o){e&&j(e.$$.fragment,o),i=!1},d(o){o&&v(t),e&&q(e,o)}}}function jo(n){let e,t,i,s,l,r,o;const a=[g1,_1],u=[];function f(m,h){return m[13]?0:1}t=f(n),i=u[t]=a[t](n);function c(...m){return n[41](n[51],...m)}function d(...m){return n[42](n[51],...m)}return{c(){e=b("div"),i.c(),s=I(),p(e,"tabindex","0"),p(e,"class","dropdown-item option"),Z(e,"closable",n[10]),Z(e,"selected",n[23](n[51]))},m(m,h){k(m,e,h),u[t].m(e,null),y(e,s),l=!0,r||(o=[H(e,"click",c),H(e,"keydown",d)],r=!0)},p(m,h){n=m;let g=t;t=f(n),t===g?u[t].p(n,h):(oe(),j(u[g],1,1,()=>{u[g]=null}),ae(),i=u[t],i?i.p(n,h):(i=u[t]=a[t](n),i.c()),E(i,1),i.m(e,s)),(!l||h[0]&1024)&&Z(e,"closable",n[10]),(!l||h[0]&25165824)&&Z(e,"selected",n[23](n[51]))},i(m){l||(E(i),l=!0)},o(m){j(i),l=!1},d(m){m&&v(e),u[t].d(),r=!1,pe(o)}}}function b1(n){let e,t,i,s,l,r=n[15]&&Co(n);const o=n[37].beforeOptions,a=lt(o,n,n[47],yo);let u=Ie(n[24]),f=[];for(let g=0;g<u.length;g+=1)f[g]=jo(wo(n,u,g));const c=g=>j(f[g],1,1,()=>{f[g]=null});let d=null;u.length||(d=Lo(n));const m=n[37].afterOptions,h=lt(m,n,n[47],bo);return{c(){r&&r.c(),e=I(),a&&a.c(),t=I(),i=b("div");for(let g=0;g<f.length;g+=1)f[g].c();d&&d.c(),s=I(),h&&h.c(),p(i,"class","options-list")},m(g,w){r&&r.m(g,w),k(g,e,w),a&&a.m(g,w),k(g,t,w),k(g,i,w);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(i,null);d&&d.m(i,null),k(g,s,w),h&&h.m(g,w),l=!0},p(g,w){if(g[15]?r?r.p(g,w):(r=Co(g),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a&&a.p&&(!l||w[1]&65536)&&ot(a,o,g,g[47],l?rt(o,g[47],w,p1):at(g[47]),yo),w[0]&226518018){u=Ie(g[24]);let _;for(_=0;_<u.length;_+=1){const T=wo(g,u,_);f[_]?(f[_].p(T,w),E(f[_],1)):(f[_]=jo(T),f[_].c(),E(f[_],1),f[_].m(i,null))}for(oe(),_=u.length;_<f.length;_+=1)c(_);ae(),!u.length&&d?d.p(g,w):u.length?d&&(d.d(1),d=null):(d=Lo(g),d.c(),d.m(i,null))}h&&h.p&&(!l||w[1]&65536)&&ot(h,m,g,g[47],l?rt(m,g[47],w,d1):at(g[47]),bo)},i(g){if(!l){E(a,g);for(let w=0;w<u.length;w+=1)E(f[w]);E(h,g),l=!0}},o(g){j(a,g),f=f.filter(Boolean);for(let w=0;w<f.length;w+=1)j(f[w]);j(h,g),l=!1},d(g){g&&(v(e),v(t),v(i),v(s)),r&&r.d(g),a&&a.d(g),sn(f,g),d&&d.d(),h&&h.d(g)}}}function w1(n){let e,t,i,s,l,r,o=Ie(G.toArray(n[0])),a=[];for(let d=0;d<o.length;d+=1)a[d]=To(vo(n,o,d));const u=d=>j(a[d],1,1,()=>{a[d]=null});let f=null;o.length||(f=ko(n));let c=!n[5]&&!n[6]&&Oo(n);return{c(){e=b("div"),t=b("div");for(let d=0;d<a.length;d+=1)a[d].c();f&&f.c(),s=I(),c&&c.c(),p(t,"tabindex",i=n[5]||n[6]?"-1":"0"),p(t,"class","selected-container"),Z(t,"disabled",n[5]),Z(t,"readonly",n[6]),p(e,"class",l="select "+n[16]),Z(e,"active",n[22]),Z(e,"upside",n[7]),Z(e,"multiple",n[4]),Z(e,"disabled",n[5]),Z(e,"readonly",n[6])},m(d,m){k(d,e,m),y(e,t);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(t,null);f&&f.m(t,null),n[39](t),y(e,s),c&&c.m(e,null),n[46](e),r=!0},p(d,m){if(m[0]&137845){o=Ie(G.toArray(d[0]));let h;for(h=0;h<o.length;h+=1){const g=vo(d,o,h);a[h]?(a[h].p(g,m),E(a[h],1)):(a[h]=To(g),a[h].c(),E(a[h],1),a[h].m(t,null))}for(oe(),h=o.length;h<a.length;h+=1)u(h);ae(),!o.length&&f?f.p(d,m):o.length?f&&(f.d(1),f=null):(f=ko(d),f.c(),f.m(t,null))}(!r||m[0]&96&&i!==(i=d[5]||d[6]?"-1":"0"))&&p(t,"tabindex",i),(!r||m[0]&32)&&Z(t,"disabled",d[5]),(!r||m[0]&64)&&Z(t,"readonly",d[6]),!d[5]&&!d[6]?c?(c.p(d,m),m[0]&96&&E(c,1)):(c=Oo(d),c.c(),E(c,1),c.m(e,null)):c&&(oe(),j(c,1,1,()=>{c=null}),ae()),(!r||m[0]&65536&&l!==(l="select "+d[16]))&&p(e,"class",l),(!r||m[0]&4259840)&&Z(e,"active",d[22]),(!r||m[0]&65664)&&Z(e,"upside",d[7]),(!r||m[0]&65552)&&Z(e,"multiple",d[4]),(!r||m[0]&65568)&&Z(e,"disabled",d[5]),(!r||m[0]&65600)&&Z(e,"readonly",d[6])},i(d){if(!r){for(let m=0;m<o.length;m+=1)E(a[m]);E(c),r=!0}},o(d){a=a.filter(Boolean);for(let m=0;m<a.length;m+=1)j(a[m]);j(c),r=!1},d(d){d&&v(e),sn(a,d),f&&f.d(),n[39](null),c&&c.d(),n[46](null)}}}function y1(n,e){let t=(""+e).replace(/\s+/g,"").toLowerCase(),i=n;try{typeof n=="object"&&n!==null&&(i=JSON.stringify(n))}catch{}return(""+i).replace(/\s+/g,"").toLowerCase().includes(t)}function v1(n,e,t){let i,s,{$$slots:l={},$$scope:r}=e,{id:o=""}=e,{noOptionsText:a="No options found"}=e,{selectPlaceholder:u="Select"}=e,{searchPlaceholder:f="Search..."}=e,{items:c=[]}=e,{multiple:d=!1}=e,{disabled:m=!1}=e,{readonly:h=!1}=e,{upside:g=!1}=e,{dropdownClass:w=""}=e,{selected:_=d?[]:void 0}=e,{toggle:T=d}=e,{closable:L=!0}=e,{labelComponent:O=void 0}=e,{labelComponentProps:C={}}=e,{optionComponent:S=void 0}=e,{optionComponentProps:P={}}=e,{searchable:R=!1}=e,{searchFunc:A=void 0}=e,{class:M=""}=e,D,Y="",K,B,N=!1;function V(ne){if(G.isEmpty(_))return;let $e=G.toArray(_);G.inArray($e,ne)&&(G.removeByValue($e,ne),t(0,_=$e)),K==null||K.dispatchEvent(new CustomEvent("change",{detail:_,bubbles:!0}))}function ee(ne){if(d){let $e=G.toArray(_);G.inArray($e,ne)||t(0,_=[...$e,ne])}else t(0,_=ne);K==null||K.dispatchEvent(new CustomEvent("change",{detail:_,bubbles:!0}))}function J(ne){return s(ne)?V(ne):ee(ne)}function U(){t(0,_=d?[]:void 0)}function ce(){D!=null&&D.show&&(D==null||D.show())}function re(){D!=null&&D.hide&&(D==null||D.hide())}function de(){if(G.isEmpty(_)||G.isEmpty(c))return;let ne=G.toArray(_),$e=[];for(const fe of ne)G.inArray(c,fe)||$e.push(fe);if($e.length){for(const fe of $e)G.removeByValue(ne,fe);t(0,_=d?ne:ne[0])}}function Le(){t(18,Y="")}function Je(ne,$e){ne=ne||[];const fe=A||y1;return ne.filter(Pe=>fe(Pe,$e))||[]}function ut(ne,$e){ne.preventDefault(),T&&d?J($e):ee($e)}function st(ne,$e){(ne.code==="Enter"||ne.code==="Space")&&(ut(ne,$e),L&&re())}function dt(){Le(),setTimeout(()=>{const ne=K==null?void 0:K.querySelector(".dropdown-item.option.selected");ne&&(ne.focus(),ne.scrollIntoView({block:"nearest"}))},0)}function le(ne){ne.stopPropagation(),!h&&!m&&(D==null||D.toggle())}bn(()=>{const ne=document.querySelectorAll(`label[for="${o}"]`);for(const $e of ne)$e.addEventListener("click",le);return()=>{for(const $e of ne)$e.removeEventListener("click",le)}});const me=ne=>V(ne);function W(ne){se[ne?"unshift":"push"](()=>{B=ne,t(21,B)})}function ie(){Y=this.value,t(18,Y)}const Me=(ne,$e)=>ut($e,ne),te=(ne,$e)=>st($e,ne);function he(ne){se[ne?"unshift":"push"](()=>{D=ne,t(19,D)})}function ze(ne){N=ne,t(22,N)}function wt(ne){qe.call(this,n,ne)}function mt(ne){se[ne?"unshift":"push"](()=>{K=ne,t(20,K)})}return n.$$set=ne=>{"id"in ne&&t(29,o=ne.id),"noOptionsText"in ne&&t(1,a=ne.noOptionsText),"selectPlaceholder"in ne&&t(2,u=ne.selectPlaceholder),"searchPlaceholder"in ne&&t(3,f=ne.searchPlaceholder),"items"in ne&&t(30,c=ne.items),"multiple"in ne&&t(4,d=ne.multiple),"disabled"in ne&&t(5,m=ne.disabled),"readonly"in ne&&t(6,h=ne.readonly),"upside"in ne&&t(7,g=ne.upside),"dropdownClass"in ne&&t(8,w=ne.dropdownClass),"selected"in ne&&t(0,_=ne.selected),"toggle"in ne&&t(9,T=ne.toggle),"closable"in ne&&t(10,L=ne.closable),"labelComponent"in ne&&t(11,O=ne.labelComponent),"labelComponentProps"in ne&&t(12,C=ne.labelComponentProps),"optionComponent"in ne&&t(13,S=ne.optionComponent),"optionComponentProps"in ne&&t(14,P=ne.optionComponentProps),"searchable"in ne&&t(15,R=ne.searchable),"searchFunc"in ne&&t(31,A=ne.searchFunc),"class"in ne&&t(16,M=ne.class),"$$scope"in ne&&t(47,r=ne.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&1073741824&&c&&(de(),Le()),n.$$.dirty[0]&1074003968&&t(24,i=Je(c,Y)),n.$$.dirty[0]&1&&t(23,s=function(ne){const $e=G.toArray(_);return G.inArray($e,ne)})},[_,a,u,f,d,m,h,g,w,T,L,O,C,S,P,R,M,V,Y,D,K,B,N,s,i,Le,ut,st,dt,o,c,A,ee,J,U,ce,re,l,me,W,ie,Me,te,he,ze,wt,mt,r]}class k1 extends Se{constructor(e){super(),ke(this,e,v1,w1,ge,{id:29,noOptionsText:1,selectPlaceholder:2,searchPlaceholder:3,items:30,multiple:4,disabled:5,readonly:6,upside:7,dropdownClass:8,selected:0,toggle:9,closable:10,labelComponent:11,labelComponentProps:12,optionComponent:13,optionComponentProps:14,searchable:15,searchFunc:31,class:16,deselectItem:17,selectItem:32,toggleItem:33,reset:34,showDropdown:35,hideDropdown:36},null,[-1,-1])}get deselectItem(){return this.$$.ctx[17]}get selectItem(){return this.$$.ctx[32]}get toggleItem(){return this.$$.ctx[33]}get reset(){return this.$$.ctx[34]}get showDropdown(){return this.$$.ctx[35]}get hideDropdown(){return this.$$.ctx[36]}}function Po(n){let e,t;return{c(){e=b("i"),p(e,"class",t="icon "+n[0].icon)},m(i,s){k(i,e,s)},p(i,s){s&1&&t!==(t="icon "+i[0].icon)&&p(e,"class",t)},d(i){i&&v(e)}}}function S1(n){let e,t,i=(n[0].label||n[0].name||n[0].title||n[0].id||n[0].value)+"",s,l=n[0].icon&&Po(n);return{c(){l&&l.c(),e=I(),t=b("span"),s=x(i),p(t,"class","txt")},m(r,o){l&&l.m(r,o),k(r,e,o),k(r,t,o),y(t,s)},p(r,[o]){r[0].icon?l?l.p(r,o):(l=Po(r),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),o&1&&i!==(i=(r[0].label||r[0].name||r[0].title||r[0].id||r[0].value)+"")&&ve(s,i)},i:X,o:X,d(r){r&&(v(e),v(t)),l&&l.d(r)}}}function T1(n,e,t){let{item:i={}}=e;return n.$$set=s=>{"item"in s&&t(0,i=s.item)},[i]}class No extends Se{constructor(e){super(),ke(this,e,T1,S1,ge,{item:0})}}const O1=n=>({}),Ao=n=>({});function C1(n){let e;const t=n[8].afterOptions,i=lt(t,n,n[12],Ao);return{c(){i&&i.c()},m(s,l){i&&i.m(s,l),e=!0},p(s,l){i&&i.p&&(!e||l&4096)&&ot(i,t,s,s[12],e?rt(t,s[12],l,O1):at(s[12]),Ao)},i(s){e||(E(i,s),e=!0)},o(s){j(i,s),e=!1},d(s){i&&i.d(s)}}}function E1(n){let e,t,i;const s=[{items:n[1]},{multiple:n[2]},{labelComponent:n[3]},{optionComponent:n[4]},n[5]];function l(o){n[9](o)}let r={$$slots:{afterOptions:[C1]},$$scope:{ctx:n}};for(let o=0;o<s.length;o+=1)r=Ue(r,s[o]);return n[0]!==void 0&&(r.selected=n[0]),e=new k1({props:r}),se.push(()=>Ae(e,"selected",l)),e.$on("show",n[10]),e.$on("hide",n[11]),{c(){$(e.$$.fragment)},m(o,a){F(e,o,a),i=!0},p(o,[a]){const u=a&62?bt(s,[a&2&&{items:o[1]},a&4&&{multiple:o[2]},a&8&&{labelComponent:o[3]},a&16&&{optionComponent:o[4]},a&32&&Nt(o[5])]):{};a&4096&&(u.$$scope={dirty:a,ctx:o}),!t&&a&1&&(t=!0,u.selected=o[0],Ne(()=>t=!1)),e.$set(u)},i(o){i||(E(e.$$.fragment,o),i=!0)},o(o){j(e.$$.fragment,o),i=!1},d(o){q(e,o)}}}function L1(n,e,t){const i=["items","multiple","selected","labelComponent","optionComponent","selectionKey","keyOfSelected"];let s=ft(e,i),{$$slots:l={},$$scope:r}=e,{items:o=[]}=e,{multiple:a=!1}=e,{selected:u=a?[]:void 0}=e,{labelComponent:f=No}=e,{optionComponent:c=No}=e,{selectionKey:d="value"}=e,{keyOfSelected:m=a?[]:void 0}=e;function h(L){L=G.toArray(L,!0);let O=[];for(let C of L){const S=G.findByKey(o,d,C);S&&O.push(S)}L.length&&!O.length||t(0,u=a?O:O[0])}async function g(L){let O=G.toArray(L,!0).map(C=>C[d]);o.length&&t(6,m=a?O:O[0])}function w(L){u=L,t(0,u)}function _(L){qe.call(this,n,L)}function T(L){qe.call(this,n,L)}return n.$$set=L=>{e=Ue(Ue({},e),Kt(L)),t(5,s=ft(e,i)),"items"in L&&t(1,o=L.items),"multiple"in L&&t(2,a=L.multiple),"selected"in L&&t(0,u=L.selected),"labelComponent"in L&&t(3,f=L.labelComponent),"optionComponent"in L&&t(4,c=L.optionComponent),"selectionKey"in L&&t(7,d=L.selectionKey),"keyOfSelected"in L&&t(6,m=L.keyOfSelected),"$$scope"in L&&t(12,r=L.$$scope)},n.$$.update=()=>{n.$$.dirty&66&&o&&h(m),n.$$.dirty&1&&g(u)},[u,o,a,f,c,s,m,d,l,w,_,T,r]}class pn extends Se{constructor(e){super(),ke(this,e,L1,E1,ge,{items:1,multiple:2,selected:0,labelComponent:3,optionComponent:4,selectionKey:7,keyOfSelected:6})}}function Mo(n,e,t){var l;const i=n.slice();i[19]=e[t];const s=((l=i[19].expand)==null?void 0:l.comment)||{};return i[20]=s,i}function Do(n){let e,t=n[1].length+"",i;return{c(){e=b("sub"),i=x(t),p(e,"class","sub sub-warning"),p(e,"title","Unread notifications")},m(s,l){k(s,e,l),y(e,i)},p(s,l){l&2&&t!==(t=s[1].length+"")&&ve(i,t)},d(s){s&&v(e)}}}function I1(n){let e;return{c(){e=b("div"),e.innerHTML='<figure class="icon"><i class="iconoir-bell"></i></figure> <p class="txt-hint">You don&#39;t have any unread notifications!</p>',p(e,"class","placeholder-block placeholder-block-sm p-base")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function j1(n){let e,t,i,s,l,r,o,a,u,f,c,d,m=[],h=new Map,g,w,_;function T(S){n[12](S)}let L={items:n[5]};n[0]!==void 0&&(L.keyOfSelected=n[0]),r=new pn({props:L}),se.push(()=>Ae(r,"keyOfSelected",T));let O=Ie(n[6]);const C=S=>S[19].id;for(let S=0;S<O.length;S+=1){let P=Mo(n,O,S),R=C(P);h.set(R,m[S]=Ho(R,P))}return{c(){e=b("div"),t=b("div"),t.innerHTML="<h6>Notifications</h6>",i=I(),s=b("div"),l=b("div"),$(r.$$.fragment),a=I(),u=b("div"),f=b("button"),f.innerHTML='<span class="txt">Mark all as read</span>',c=I(),d=b("div");for(let S=0;S<m.length;S+=1)m[S].c();p(t,"class","flex m-b-xs"),p(f,"type","button"),p(f,"class","txt-sm link-fade"),Z(f,"txt-disabled",n[4]),p(u,"class","addon"),p(l,"class","field-group"),p(s,"class","form-field form-field-sm m-b-0 m-l-auto"),p(e,"class","block p-t-xs p-b-sm p-l-sm p-r-sm"),p(d,"class","list notifications-list")},m(S,P){k(S,e,P),y(e,t),y(e,i),y(e,s),y(s,l),F(r,l,null),y(l,a),y(l,u),y(u,f),k(S,c,P),k(S,d,P);for(let R=0;R<m.length;R+=1)m[R]&&m[R].m(d,null);g=!0,w||(_=H(f,"click",ye(n[13])),w=!0)},p(S,P){const R={};P&32&&(R.items=S[5]),!o&&P&1&&(o=!0,R.keyOfSelected=S[0],Ne(()=>o=!1)),r.$set(R),(!g||P&16)&&Z(f,"txt-disabled",S[4]),P&832&&(O=Ie(S[6]),oe(),m=Tt(m,P,C,1,S,O,h,d,At,Ho,null,Mo),ae())},i(S){if(!g){E(r.$$.fragment,S);for(let P=0;P<O.length;P+=1)E(m[P]);g=!0}},o(S){j(r.$$.fragment,S);for(let P=0;P<m.length;P+=1)j(m[P]);g=!1},d(S){S&&(v(e),v(c),v(d)),q(r);for(let P=0;P<m.length;P+=1)m[P].d();w=!1,_()}}}function Ro(n){let e,t,i=n[20].expand.screen.title+"",s;return{c(){e=b("div"),t=b("small"),s=x(i),p(t,"class","screen-title"),p(e,"class","row txt-hint")},m(l,r){k(l,e,r),y(e,t),y(t,s)},p(l,r){r&64&&i!==(i=l[20].expand.screen.title+"")&&ve(s,i)},d(l){l&&v(e)}}}function Ho(n,e){var N,V,ee;let t,i,s,l,r,o,a,u=G.getCommentAuthor(e[20])+"",f,c,d,m=G.relativeDate(e[20].created)+"",h,g,w,_,T,L,O,C=e[20].message+"",S,P,R,A,M,D;i=new is({props:{user:(N=e[20].expand)==null?void 0:N.user,class:"avatar"}});function Y(){return e[14](e[19])}let K=((ee=(V=e[20].expand)==null?void 0:V.screen)==null?void 0:ee.title)&&Ro(e);function B(){return e[15](e[20])}return{key:n,first:null,c(){t=b("div"),$(i.$$.fragment),s=I(),l=b("div"),r=b("div"),o=b("div"),a=b("small"),f=x(u),c=I(),d=b("small"),h=x(m),g=I(),w=b("nav"),_=b("button"),_.innerHTML='<i class="iconoir-check"></i>',T=I(),L=b("div"),O=b("div"),S=x(C),P=I(),K&&K.c(),R=I(),p(a,"class","name"),p(d,"class","txt-xs txt-hint date"),p(o,"class","inline-flex flex-row-gap-0"),p(_,"type","button"),p(_,"class","btn btn-xs btn-circle btn-transparent btn-hint"),p(w,"class","ctrls"),p(r,"class","row"),p(O,"class","message"),p(L,"class","row"),p(l,"class","content"),p(t,"class","list-item handle"),this.first=t},m(J,U){k(J,t,U),F(i,t,null),y(t,s),y(t,l),y(l,r),y(r,o),y(o,a),y(a,f),y(o,c),y(o,d),y(d,h),y(r,g),y(r,w),y(w,_),y(l,T),y(l,L),y(L,O),y(O,S),y(l,P),K&&K.m(l,null),y(t,R),A=!0,M||(D=[we(Ce.call(null,_,"Mark as read")),H(_,"click",Ye(ye(Y))),H(t,"click",B)],M=!0)},p(J,U){var re,de,Le;e=J;const ce={};U&64&&(ce.user=(re=e[20].expand)==null?void 0:re.user),i.$set(ce),(!A||U&64)&&u!==(u=G.getCommentAuthor(e[20])+"")&&ve(f,u),(!A||U&64)&&m!==(m=G.relativeDate(e[20].created)+"")&&ve(h,m),(!A||U&64)&&C!==(C=e[20].message+"")&&ve(S,C),(Le=(de=e[20].expand)==null?void 0:de.screen)!=null&&Le.title?K?K.p(e,U):(K=Ro(e),K.c(),K.m(l,null)):K&&(K.d(1),K=null)},i(J){A||(E(i.$$.fragment,J),A=!0)},o(J){j(i.$$.fragment,J),A=!1},d(J){J&&v(t),q(i),K&&K.d(),M=!1,pe(D)}}}function P1(n){let e,t,i,s;const l=[j1,I1],r=[];function o(a,u){return a[1].length?0:1}return t=o(n),i=r[t]=l[t](n),{c(){e=b("div"),i.c(),p(e,"class","content")},m(a,u){k(a,e,u),r[t].m(e,null),s=!0},p(a,u){let f=t;t=o(a),t===f?r[t].p(a,u):(oe(),j(r[f],1,1,()=>{r[f]=null}),ae(),i=r[t],i?i.p(a,u):(i=r[t]=l[t](a),i.c()),E(i,1),i.m(e,null))},i(a){s||(E(i),s=!0)},o(a){j(i),s=!1},d(a){a&&v(e),r[t].d()}}}function N1(n){let e,t,i,s,l,r,o,a,u,f,c,d=n[1].length&&Do(n);function m(g){n[17](g)}let h={class:"dropdown notifications-dropdown",$$slots:{default:[P1]},$$scope:{ctx:n}};return n[3]!==void 0&&(h.active=n[3]),r=new Rt({props:h}),n[16](r),se.push(()=>Ae(r,"active",m)),r.$on("show",n[7]),{c(){e=b("div"),t=b("i"),s=I(),d&&d.c(),l=I(),$(r.$$.fragment),p(t,"class",i="iconoir-bell "+(n[1].length?"txt-warning":"txt-hint")),p(e,"tabindex","0"),p(e,"class","btn btn-hint btn-transparent btn-circle notifications-btn")},m(g,w){k(g,e,w),y(e,t),y(e,s),d&&d.m(e,null),y(e,l),F(r,e,null),u=!0,f||(c=we(a=Ce.call(null,e,n[3]?void 0:{position:"bottom",text:"Notifications"})),f=!0)},p(g,[w]){(!u||w&2&&i!==(i="iconoir-bell "+(g[1].length?"txt-warning":"txt-hint")))&&p(t,"class",i),g[1].length?d?d.p(g,w):(d=Do(g),d.c(),d.m(e,l)):d&&(d.d(1),d=null);const _={};w&8388723&&(_.$$scope={dirty:w,ctx:g}),!o&&w&8&&(o=!0,_.active=g[3],Ne(()=>o=!1)),r.$set(_),a&&tt(a.update)&&w&8&&a.update.call(null,g[3]?void 0:{position:"bottom",text:"Notifications"})},i(g){u||(E(r.$$.fragment,g),u=!0)},o(g){j(r.$$.fragment,g),u=!1},d(g){g&&v(e),d&&d.d(),n[16](null),q(r),f=!1,c()}}}function A1(n,e=[]){return n.length?n:e}function M1(n,e,t){let i;Q(n,vn,S=>t(1,i=S));let s,l=!1,r=!1,o="",a=[],u=[];function f(){s==null||s.show()}function c(){s==null||s.hide()}function d(){t(0,o=""),m()}function m(){var P,R,A,M,D,Y,K;const S={};for(let B of i){const N=(K=(Y=(D=(M=(A=(R=(P=B.expand)==null?void 0:P.comment)==null?void 0:R.expand)==null?void 0:A.screen)==null?void 0:M.expand)==null?void 0:D.prototype)==null?void 0:Y.expand)==null?void 0:K.project;N&&(S[N.id]={label:N.title,value:N.id})}t(5,a=Object.values(S)),a.length!=1?t(5,a=[{label:"All projects",value:""}].concat(a)):t(0,o=a[0].value)}async function h(S){t(4,r=!0),S=G.toArray(S),S.length||(S=i.map(P=>P.id));try{const P=[];for(let R of S)P.push(z.collection("notifications").update(R,{read:!0})),pr(R);await Promise.allSettled(P)}catch(P){P.isAbort||z.error(P)}t(4,r=!1)}function g(S){var D,Y,K,B,N,V;const P=(B=(K=(Y=(D=S.expand)==null?void 0:D.screen)==null?void 0:Y.expand)==null?void 0:K.prototype)==null?void 0:B.project,R=(V=(N=S.expand)==null?void 0:N.screen)==null?void 0:V.prototype,A=S.screen,M=S.id;wi(`/projects/${P}/prototypes/${R}/screens/${A}?mode=comments&commentId=${M}`)}bn(()=>{G.getHashQueryParams().notifications&&(G.replaceHashQueryParams({notifications:null}),f())});function w(S){o=S,t(0,o)}const _=()=>h(),T=S=>{h(S.id)},L=S=>g(S);function O(S){se[S?"unshift":"push"](()=>{s=S,t(2,s)})}function C(S){l=S,t(3,l)}return n.$$.update=()=>{n.$$.dirty&2&&i!=null&&i.length&&m(),n.$$.dirty&3&&t(6,u=o?A1(i.filter(S=>{var P,R,A,M,D,Y;return((Y=(D=(M=(A=(R=(P=S.expand)==null?void 0:P.comment)==null?void 0:R.expand)==null?void 0:A.screen)==null?void 0:M.expand)==null?void 0:D.prototype)==null?void 0:Y.project)==o}),i):i)},[o,i,s,l,r,a,u,d,h,g,f,c,w,_,T,L,O,C]}class D1 extends Se{constructor(e){super(),ke(this,e,M1,N1,ge,{show:10,hide:11})}get show(){return this.$$.ctx[10]}get hide(){return this.$$.ctx[11]}}const R1=n=>({}),Uo=n=>({}),H1=n=>({}),Fo=n=>({});function qo(n){let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g,w,_,T=n[4]&&$o(n);const L=n[20].header,O=lt(L,n,n[19],Fo),C=n[20].default,S=lt(C,n,n[19],null),P=n[20].footer,R=lt(P,n,n[19],Uo);return{c(){e=b("div"),t=b("div"),s=I(),l=b("div"),r=b("div"),T&&T.c(),o=I(),O&&O.c(),a=I(),u=b("div"),S&&S.c(),f=I(),c=b("div"),R&&R.c(),p(t,"class","overlay"),p(r,"class","overlay-panel-section panel-header"),p(u,"class","overlay-panel-section panel-content"),p(c,"class","overlay-panel-section panel-footer"),p(l,"class",d="overlay-panel "+n[1]+" "+n[8]),Z(l,"popup",n[2]),p(e,"class","overlay-panel-container"),Z(e,"padded",n[2]),Z(e,"active",n[0])},m(A,M){k(A,e,M),y(e,t),y(e,s),y(e,l),y(l,r),T&&T.m(r,null),y(r,o),O&&O.m(r,null),y(l,a),y(l,u),S&&S.m(u,null),n[22](u),y(l,f),y(l,c),R&&R.m(c,null),g=!0,w||(_=[H(t,"click",ye(n[21])),H(u,"scroll",n[23])],w=!0)},p(A,M){n=A,n[4]?T?T.p(n,M):(T=$o(n),T.c(),T.m(r,o)):T&&(T.d(1),T=null),O&&O.p&&(!g||M[0]&524288)&&ot(O,L,n,n[19],g?rt(L,n[19],M,H1):at(n[19]),Fo),S&&S.p&&(!g||M[0]&524288)&&ot(S,C,n,n[19],g?rt(C,n[19],M,null):at(n[19]),null),R&&R.p&&(!g||M[0]&524288)&&ot(R,P,n,n[19],g?rt(P,n[19],M,R1):at(n[19]),Uo),(!g||M[0]&258&&d!==(d="overlay-panel "+n[1]+" "+n[8]))&&p(l,"class",d),(!g||M[0]&262)&&Z(l,"popup",n[2]),(!g||M[0]&4)&&Z(e,"padded",n[2]),(!g||M[0]&1)&&Z(e,"active",n[0])},i(A){g||(A&&St(()=>{g&&(i||(i=ct(t,jl,{duration:ri,opacity:0},!0)),i.run(1))}),E(O,A),E(S,A),E(R,A),A&&St(()=>{g&&(h&&h.end(1),m=Jf(l,Nn,n[2]?{duration:ri,y:-10}:{duration:ri,x:50}),m.start())}),g=!0)},o(A){A&&(i||(i=ct(t,jl,{duration:ri,opacity:0},!1)),i.run(0)),j(O,A),j(S,A),j(R,A),m&&m.invalidate(),A&&(h=Xf(l,Nn,n[2]?{duration:ri,y:10}:{duration:ri,x:50})),g=!1},d(A){A&&v(e),A&&i&&i.end(),T&&T.d(),O&&O.d(A),S&&S.d(A),n[22](null),R&&R.d(A),A&&h&&h.end(),w=!1,pe(_)}}}function $o(n){let e;function t(l,r){return l[2]?F1:U1}let i=t(n),s=i(n);return{c(){s.c(),e=De()},m(l,r){s.m(l,r),k(l,e,r)},p(l,r){i===(i=t(l))&&s?s.p(l,r):(s.d(1),s=i(l),s&&(s.c(),s.m(e.parentNode,e)))},d(l){l&&v(e),s.d(l)}}}function U1(n){let e,t,i;return{c(){e=b("button"),e.innerHTML='<i class="iconoir-xmark"></i>',p(e,"tabindex","-1"),p(e,"type","button"),p(e,"class","overlay-close")},m(s,l){k(s,e,l),t||(i=H(e,"click",ye(n[5])),t=!0)},p:X,d(s){s&&v(e),t=!1,i()}}}function F1(n){let e,t,i;return{c(){e=b("button"),e.innerHTML='<i class="iconoir-xmark txt-lg"></i>',p(e,"tabindex","-1"),p(e,"type","button"),p(e,"class","btn btn-sm btn-circle btn-transparent btn-close m-l-auto")},m(s,l){k(s,e,l),t||(i=H(e,"click",ye(n[5])),t=!0)},p:X,d(s){s&&v(e),t=!1,i()}}}function q1(n){let e,t,i,s,l=n[0]&&qo(n);return{c(){e=b("div"),l&&l.c(),p(e,"id",n[9]),p(e,"class","overlay-panel-wrapper"),p(e,"tabindex","-1")},m(r,o){k(r,e,o),l&&l.m(e,null),n[24](e),t=!0,i||(s=[H(window,"resize",n[11]),H(window,"keydown",n[10])],i=!0)},p(r,o){r[0]?l?(l.p(r,o),o[0]&1&&E(l,1)):(l=qo(r),l.c(),E(l,1),l.m(e,null)):l&&(oe(),j(l,1,1,()=>{l=null}),ae())},i(r){t||(E(l),t=!0)},o(r){j(l),t=!1},d(r){r&&v(e),l&&l.d(),n[24](null),i=!1,pe(s)}}}let Un,rl=[];function bd(){return Un=Un||document.querySelector(".overlays"),Un||(Un=document.createElement("div"),Un.classList.add("overlays"),document.body.appendChild(Un)),Un}let ri=150;function Wo(){return 1e3+bd().querySelectorAll(".overlay-panel-container.active").length}function $1(n,e,t){let{$$slots:i={},$$scope:s}=e,{class:l=""}=e,{active:r=!1}=e,{popup:o=!1}=e,{overlayClose:a=!0}=e,{btnClose:u=!0}=e,{escHide:f=!0}=e,{beforeOpen:c=void 0}=e,{beforeHide:d=void 0}=e;const m=it(),h="op_"+G.randomString(5);let g,w,_,T,L="",O=r;function C(){typeof c=="function"&&c()===!1||t(0,r=!0)}function S(){typeof d=="function"&&d()===!1||t(0,r=!1)}function P(){return r}async function R(U){t(18,O=U),U?(_=document.activeElement,m("show"),g==null||g.focus()):(clearTimeout(T),m("hide"),_==null||_.focus(),setTimeout(()=>{_==null||_.blur()},0)),await Ct(),A()}function A(){g&&(r?t(6,g.style.zIndex=Wo(),g):t(6,g.style="",g))}function M(){G.pushUnique(rl,h),document.body.classList.add("overlay-active")}function D(){G.removeByValue(rl,h),rl.length||document.body.classList.remove("overlay-active")}function Y(U){r&&f&&U.code=="Escape"&&!G.isInput(U.target)&&g&&g.style.zIndex==Wo()&&(U.preventDefault(),S())}function K(U){r&&B(w)}function B(U,ce){ce&&t(8,L=""),U&&(T||(T=setTimeout(()=>{if(clearTimeout(T),T=null,!U)return;if(U.scrollHeight-U.offsetHeight>0)t(8,L="scrollable");else{t(8,L="");return}U.scrollTop==0?t(8,L+=" scroll-top-reached"):U.scrollTop+U.offsetHeight==U.scrollHeight&&t(8,L+=" scroll-bottom-reached")},100)))}bn(()=>(bd().appendChild(g),()=>{clearTimeout(T),D(),g==null||g.remove()}));const N=()=>a?S():!0;function V(U){se[U?"unshift":"push"](()=>{w=U,t(7,w)})}const ee=U=>B(U.target);function J(U){se[U?"unshift":"push"](()=>{g=U,t(6,g)})}return n.$$set=U=>{"class"in U&&t(1,l=U.class),"active"in U&&t(0,r=U.active),"popup"in U&&t(2,o=U.popup),"overlayClose"in U&&t(3,a=U.overlayClose),"btnClose"in U&&t(4,u=U.btnClose),"escHide"in U&&t(13,f=U.escHide),"beforeOpen"in U&&t(14,c=U.beforeOpen),"beforeHide"in U&&t(15,d=U.beforeHide),"$$scope"in U&&t(19,s=U.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&262145&&O!=r&&R(r),n.$$.dirty[0]&128&&B(w,!0),n.$$.dirty[0]&64&&g&&A(),n.$$.dirty[0]&1&&(r?M():D())},[r,l,o,a,u,S,g,w,L,h,Y,K,B,f,c,d,C,P,O,s,i,N,V,ee,J]}class mn extends Se{constructor(e){super(),ke(this,e,$1,q1,ge,{class:1,active:0,popup:2,overlayClose:3,btnClose:4,escHide:13,beforeOpen:14,beforeHide:15,show:16,hide:5,isActive:17},null,[-1,-1])}get show(){return this.$$.ctx[16]}get hide(){return this.$$.ctx[5]}get isActive(){return this.$$.ctx[17]}}function Vo(n,e,t){const i=n.slice();return i[12]=e[t],i}const W1=n=>({}),zo=n=>({uniqueId:n[4]});function Bo(n){let e,t,i=Ie(n[3]),s=[];for(let r=0;r<i.length;r+=1)s[r]=Zo(Vo(n,i,r));const l=r=>j(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=De()},m(r,o){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,o);k(r,e,o),t=!0},p(r,o){if(o&8){i=Ie(r[3]);let a;for(a=0;a<i.length;a+=1){const u=Vo(r,i,a);s[a]?(s[a].p(u,o),E(s[a],1)):(s[a]=Zo(u),s[a].c(),E(s[a],1),s[a].m(e.parentNode,e))}for(oe(),a=i.length;a<s.length;a+=1)l(a);ae()}},i(r){if(!t){for(let o=0;o<i.length;o+=1)E(s[o]);t=!0}},o(r){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)j(s[o]);t=!1},d(r){r&&v(e),sn(s,r)}}}function Zo(n){let e,t,i=Ns(n[12])+"",s,l,r,o;return{c(){e=b("div"),t=b("pre"),s=x(i),l=I(),p(e,"class","help-block help-block-error")},m(a,u){k(a,e,u),y(e,t),y(t,s),y(e,l),o=!0},p(a,u){(!o||u&8)&&i!==(i=Ns(a[12])+"")&&ve(s,i)},i(a){o||(a&&St(()=>{o&&(r||(r=ct(e,Lt,{duration:150},!0)),r.run(1))}),o=!0)},o(a){a&&(r||(r=ct(e,Lt,{duration:150},!1)),r.run(0)),o=!1},d(a){a&&v(e),a&&r&&r.end()}}}function V1(n){let e,t,i,s,l,r;const o=n[9].default,a=lt(o,n,n[8],zo);let u=!n[0]&&Bo(n);return{c(){e=b("div"),a&&a.c(),t=I(),u&&u.c(),p(e,"class",n[1]),Z(e,"error",n[3].length)},m(f,c){var d;k(f,e,c),a&&a.m(e,null),y(e,t),u&&u.m(e,null),n[11](e),s=!0,l||(r=[we(i=Ce.call(null,e,{text:n[0]?Ns((d=n[3])==null?void 0:d[0]):""})),H(e,"click",n[10])],l=!0)},p(f,[c]){var d;a&&a.p&&(!s||c&256)&&ot(a,o,f,f[8],s?rt(o,f[8],c,W1):at(f[8]),zo),f[0]?u&&(oe(),j(u,1,1,()=>{u=null}),ae()):u?(u.p(f,c),c&1&&E(u,1)):(u=Bo(f),u.c(),E(u,1),u.m(e,null)),(!s||c&2)&&p(e,"class",f[1]),i&&tt(i.update)&&c&9&&i.update.call(null,{text:f[0]?Ns((d=f[3])==null?void 0:d[0]):""}),(!s||c&10)&&Z(e,"error",f[3].length)},i(f){s||(E(a,f),E(u),s=!0)},o(f){j(a,f),j(u),s=!1},d(f){f&&v(e),a&&a.d(f),u&&u.d(),n[11](null),l=!1,pe(r)}}}const Yo="Invalid value";function Ns(n){return n?typeof n=="object"?(n==null?void 0:n.message)||(n==null?void 0:n.code)||Yo:n||Yo:""}function z1(n,e,t){let i;Q(n,Bs,g=>t(7,i=g));let{$$slots:s={},$$scope:l}=e;const r="field_"+G.randomString(7);let{name:o=""}=e,{inlineError:a=!1}=e,{class:u=void 0}=e,f,c=[];function d(){Wh(o)}bn(()=>(f.addEventListener("input",d),f.addEventListener("change",d),()=>{f.removeEventListener("input",d),f.removeEventListener("change",d)}));function m(g){qe.call(this,n,g)}function h(g){se[g?"unshift":"push"](()=>{f=g,t(2,f)})}return n.$$set=g=>{"name"in g&&t(5,o=g.name),"inlineError"in g&&t(0,a=g.inlineError),"class"in g&&t(1,u=g.class),"$$scope"in g&&t(8,l=g.$$scope)},n.$$.update=()=>{n.$$.dirty&160&&t(3,c=G.toArray(G.getNestedVal(i,o)))},[a,u,f,c,r,o,d,i,l,s,m,h]}class Ee extends Se{constructor(e){super(),ke(this,e,z1,V1,ge,{name:5,inlineError:0,class:1,changed:6})}get changed(){return this.$$.ctx[6]}}function B1(n){let e,t,i,s,l,r,o,a;return{c(){e=b("label"),t=x("New email"),s=I(),l=b("input"),p(e,"for",i=n[14]),p(l,"type","email"),p(l,"id",r=n[14]),l.autofocus=!0,l.required=!0},m(u,f){k(u,e,f),y(e,t),k(u,s,f),k(u,l,f),be(l,n[2]),l.focus(),o||(a=H(l,"input",n[7]),o=!0)},p(u,f){f&16384&&i!==(i=u[14])&&p(e,"for",i),f&16384&&r!==(r=u[14])&&p(l,"id",r),f&4&&l.value!==u[2]&&be(l,u[2])},d(u){u&&(v(e),v(s),v(l)),o=!1,a()}}}function Z1(n){let e,t,i,s,l;return t=new Ee({props:{class:"form-field required",name:"newEmail",$$slots:{default:[B1,({uniqueId:r})=>({14:r}),({uniqueId:r})=>r?16384:0]},$$scope:{ctx:n}}}),{c(){e=b("form"),$(t.$$.fragment),p(e,"id",n[4]),p(e,"class","grid grid-sm")},m(r,o){k(r,e,o),F(t,e,null),i=!0,s||(l=H(e,"submit",ye(n[5])),s=!0)},p(r,o){const a={};o&49156&&(a.$$scope={dirty:o,ctx:r}),t.$set(a)},i(r){i||(E(t.$$.fragment,r),i=!0)},o(r){j(t.$$.fragment,r),i=!1},d(r){r&&v(e),q(t),s=!1,l()}}}function Y1(n){let e;return{c(){e=b("h5"),e.textContent="Change email",p(e,"class","block txt-center")},m(t,i){k(t,e,i)},p:X,d(t){t&&v(e)}}}function K1(n){let e,t,i,s,l,r,o;return{c(){e=b("button"),t=b("span"),t.textContent="Cancel",i=I(),s=b("button"),l=b("span"),l.textContent="Send confirmation link",p(t,"class","txt"),p(e,"type","button"),p(e,"class","btn btn-transparent m-r-auto"),e.disabled=n[3],p(l,"class","txt"),p(s,"form",n[4]),p(s,"type","submit"),p(s,"class","btn btn-expanded-sm btn-primary"),s.disabled=n[3],Z(s,"btn-loading",n[3])},m(a,u){k(a,e,u),y(e,t),k(a,i,u),k(a,s,u),y(s,l),r||(o=H(e,"click",n[0]),r=!0)},p(a,u){u&8&&(e.disabled=a[3]),u&8&&(s.disabled=a[3]),u&8&&Z(s,"btn-loading",a[3])},d(a){a&&(v(e),v(i),v(s)),r=!1,o()}}}function G1(n){let e,t,i={beforeHide:n[8],popup:!0,class:"overlay-panel-sm",$$slots:{footer:[K1],header:[Y1],default:[Z1]},$$scope:{ctx:n}};return e=new mn({props:i}),n[9](e),e.$on("show",n[10]),e.$on("hide",n[11]),{c(){$(e.$$.fragment)},m(s,l){F(e,s,l),t=!0},p(s,[l]){const r={};l&8&&(r.beforeHide=s[8]),l&32780&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){n[9](null),q(e,s)}}}function J1(n,e,t){const i=it(),s="email_"+G.randomString(5);let l,r="",o=!1;function a(){return f(),l==null?void 0:l.show()}function u(){return l==null?void 0:l.hide()}function f(){Jt({}),t(2,r="")}async function c(){t(3,o=!0);try{await z.collection("users").requestEmailChange(r),t(3,o=!1),i("submit"),gt(`A confirmation link was sent to ${r}.`),u()}catch(_){_.isAbort||(t(3,o=!1),z.error(_))}}function d(){r=this.value,t(2,r)}const m=()=>!o;function h(_){se[_?"unshift":"push"](()=>{l=_,t(1,l)})}function g(_){qe.call(this,n,_)}function w(_){qe.call(this,n,_)}return[u,l,r,o,s,c,a,d,m,h,g,w]}class X1 extends Se{constructor(e){super(),ke(this,e,J1,G1,ge,{show:6,hide:0})}get show(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[0]}}function Ko(n){let e,t,i;return{c(){e=b("button"),e.innerHTML='<i class="iconoir-xmark txt-sm"></i>',p(e,"type","button"),p(e,"class","btn btn-xs btn-outline btn-circle btn-close svelte-60psra")},m(s,l){k(s,e,l),t||(i=[we(Ce.call(null,e,{position:"right",text:"Remove avatar"})),H(e,"click",Ye(ye(n[11])))],t=!0)},p:X,d(s){s&&v(e),t=!1,pe(i)}}}function Q1(n){let e,t=n[8]&&Ko(n);return{c(){t&&t.c(),e=De()},m(i,s){t&&t.m(i,s),k(i,e,s)},p(i,s){i[8]?t?t.p(i,s):(t=Ko(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&v(e),t&&t.d(i)}}}function x1(n){let e;return{c(){e=b("i"),p(e,"class","iconoir-media-image-plus")},m(t,i){k(t,e,i)},p:X,d(t){t&&v(e)}}}function ol(n){var f;let e,t,i,s,l,r,o;t=new is({props:{class:"thumb-xl "+(n[8]?"":"thumb-handle"),user:n[1],file:(f=n[2])==null?void 0:f[0],fallbackToOAuth2:!1,$$slots:{placeholder:[x1],default:[Q1]},$$scope:{ctx:n}}});let a=[{for:i=n[8]?null:n[32]},{class:"inline-flex"}],u={};for(let c=0;c<a.length;c+=1)u=Ue(u,a[c]);return{c(){e=b(n[8]?"div":"label"),$(t.$$.fragment),vs(n[8]?"div":"label")(e,u)},m(c,d){k(c,e,d),F(t,e,null),l=!0,r||(o=we(s=Ce.call(null,e,n[8]?null:"Upload avatar")),r=!0)},p(c,d){var h;const m={};d[0]&256&&(m.class="thumb-xl "+(c[8]?"":"thumb-handle")),d[0]&2&&(m.user=c[1]),d[0]&4&&(m.file=(h=c[2])==null?void 0:h[0]),d[0]&256|d[1]&4&&(m.$$scope={dirty:d,ctx:c}),t.$set(m),vs(c[8]?"div":"label")(e,u=bt(a,[(!l||d[0]&256|d[1]&2&&i!==(i=c[8]?null:c[32]))&&{for:i},{class:"inline-flex"}])),s&&tt(s.update)&&d[0]&256&&s.update.call(null,c[8]?null:"Upload avatar")},i(c){l||(E(t.$$.fragment,c),l=!0)},o(c){j(t.$$.fragment,c),l=!1},d(c){c&&v(e),q(t),r=!1,o()}}}function e_(n){let e,t,i,s=n[8]?"div":"label",l,r,o,a,u=(n[8]?"div":"label")&&ol(n);return{c(){e=b("input"),i=I(),u&&u.c(),l=De(),p(e,"type","file"),p(e,"class","hidden"),p(e,"id",t=n[32])},m(f,c){k(f,e,c),k(f,i,c),u&&u.m(f,c),k(f,l,c),o||(a=H(e,"change",n[19]),o=!0)},p(f,c){(!r||c[1]&2&&t!==(t=f[32]))&&p(e,"id",t),f[8],s?ge(s,f[8]?"div":"label")?(u.d(1),u=ol(f),s=f[8]?"div":"label",u.c(),u.m(l.parentNode,l)):u.p(f,c):(u=ol(f),s=f[8]?"div":"label",u.c(),u.m(l.parentNode,l))},i:X,o(f){j(u,f),r=!1},d(f){f&&(v(e),v(i),v(l)),u&&u.d(f),o=!1,a()}}}function t_(n){let e,t,i,s,l,r,o,a;return{c(){e=b("label"),t=x("Full name"),s=I(),l=b("input"),p(e,"for",i=n[32]),p(l,"type","text"),p(l,"id",r=n[32])},m(u,f){k(u,e,f),y(e,t),k(u,s,f),k(u,l,f),be(l,n[1].name),o||(a=H(l,"input",n[20]),o=!0)},p(u,f){f[1]&2&&i!==(i=u[32])&&p(e,"for",i),f[1]&2&&r!==(r=u[32])&&p(l,"id",r),f[0]&2&&l.value!==u[1].name&&be(l,u[1].name)},d(u){u&&(v(e),v(s),v(l)),o=!1,a()}}}function n_(n){let e,t,i,s,l,r,o,a;return{c(){e=b("label"),t=x("Username"),s=I(),l=b("input"),p(e,"for",i=n[32]),p(l,"type","text"),p(l,"id",r=n[32]),l.required=!0},m(u,f){k(u,e,f),y(e,t),k(u,s,f),k(u,l,f),be(l,n[1].username),o||(a=H(l,"input",n[21]),o=!0)},p(u,f){f[1]&2&&i!==(i=u[32])&&p(e,"for",i),f[1]&2&&r!==(r=u[32])&&p(l,"id",r),f[0]&2&&l.value!==u[1].username&&be(l,u[1].username)},d(u){u&&(v(e),v(s),v(l)),o=!1,a()}}}function Go(n){let e,t,i;function s(o,a){return o[1].email?s_:i_}let l=s(n),r=l(n);return{c(){e=b("button"),r.c(),p(e,"type","button"),p(e,"class","btn btn-xs btn-transparent")},m(o,a){k(o,e,a),r.m(e,null),t||(i=H(e,"click",Ye(function(){var u,f;tt((u=n[5])==null?void 0:u.show())&&((f=n[5])==null||f.show().apply(this,arguments))})),t=!0)},p(o,a){n=o,l!==(l=s(n))&&(r.d(1),r=l(n),r&&(r.c(),r.m(e,null)))},d(o){o&&v(e),r.d(),t=!1,i()}}}function i_(n){let e;return{c(){e=x("Set email")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function s_(n){let e;return{c(){e=x("Change email")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function l_(n){var c;let e,t,i,s,l,r,o,a,u,f=((c=n[9])==null?void 0:c.id)==n[1].id&&Go(n);return{c(){e=b("label"),t=x("Email"),s=I(),l=b("div"),r=b("input"),u=I(),f&&f.c(),p(e,"for",i=n[32]),p(r,"type","email"),p(r,"id",o=n[32]),r.value=a=n[1].email,r.readOnly=!0,p(l,"class","field-group")},m(d,m){k(d,e,m),y(e,t),k(d,s,m),k(d,l,m),y(l,r),y(l,u),f&&f.m(l,null)},p(d,m){var h;m[1]&2&&i!==(i=d[32])&&p(e,"for",i),m[1]&2&&o!==(o=d[32])&&p(r,"id",o),m[0]&2&&a!==(a=d[1].email)&&r.value!==a&&(r.value=a),((h=d[9])==null?void 0:h.id)==d[1].id?f?f.p(d,m):(f=Go(d),f.c(),f.m(l,null)):f&&(f.d(1),f=null)},d(d){d&&(v(e),v(s),v(l)),f&&f.d()}}}function r_(n){let e,t,i,s,l,r,o,a,u,f;return{c(){e=b("input"),i=I(),s=b("label"),l=b("span"),l.textContent="Public visible email",r=I(),o=b("i"),p(e,"type","checkbox"),p(e,"id",t=n[32]),p(l,"class","txt"),p(o,"class","iconoir-info-circle link-hint"),p(s,"for",a=n[32])},m(c,d){k(c,e,d),e.checked=n[1].emailVisibility,k(c,i,d),k(c,s,d),y(s,l),y(s,r),y(s,o),u||(f=[H(e,"change",n[22]),we(Ce.call(null,o,"By default other users can see only your avatar, name and username."))],u=!0)},p(c,d){d[1]&2&&t!==(t=c[32])&&p(e,"id",t),d[0]&2&&(e.checked=c[1].emailVisibility),d[1]&2&&a!==(a=c[32])&&p(s,"for",a)},d(c){c&&(v(e),v(i),v(s)),u=!1,pe(f)}}}function o_(n){let e,t,i,s,l,r,o,a;return{c(){e=b("input"),i=I(),s=b("label"),l=b("span"),l.textContent="Enable email notifications for watched projects",p(e,"type","checkbox"),p(e,"id",t=n[32]),p(l,"class","txt"),p(s,"for",r=n[32])},m(u,f){k(u,e,f),e.checked=n[1].allowEmailNotifications,k(u,i,f),k(u,s,f),y(s,l),o||(a=H(e,"change",n[23]),o=!0)},p(u,f){f[1]&2&&t!==(t=u[32])&&p(e,"id",t),f[0]&2&&(e.checked=u[1].allowEmailNotifications),f[1]&2&&r!==(r=u[32])&&p(s,"for",r)},d(u){u&&(v(e),v(i),v(s)),o=!1,a()}}}function a_(n){let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g;return t=new Ee({props:{class:"avatar-field block txt-center",name:"avatar",$$slots:{default:[e_,({uniqueId:w})=>({32:w}),({uniqueId:w})=>[0,w?2:0]]},$$scope:{ctx:n}}}),s=new Ee({props:{class:"form-field",name:"name",$$slots:{default:[t_,({uniqueId:w})=>({32:w}),({uniqueId:w})=>[0,w?2:0]]},$$scope:{ctx:n}}}),r=new Ee({props:{class:"form-field required",name:"username",$$slots:{default:[n_,({uniqueId:w})=>({32:w}),({uniqueId:w})=>[0,w?2:0]]},$$scope:{ctx:n}}}),a=new Ee({props:{class:"form-field",name:"email",$$slots:{default:[l_,({uniqueId:w})=>({32:w}),({uniqueId:w})=>[0,w?2:0]]},$$scope:{ctx:n}}}),f=new Ee({props:{class:"form-field form-field-toggle",name:"emailVisibility",$$slots:{default:[r_,({uniqueId:w})=>({32:w}),({uniqueId:w})=>[0,w?2:0]]},$$scope:{ctx:n}}}),d=new Ee({props:{class:"form-field form-field-toggle",name:"allowEmailNotifications",$$slots:{default:[o_,({uniqueId:w})=>({32:w}),({uniqueId:w})=>[0,w?2:0]]},$$scope:{ctx:n}}}),{c(){e=b("form"),$(t.$$.fragment),i=I(),$(s.$$.fragment),l=I(),$(r.$$.fragment),o=I(),$(a.$$.fragment),u=I(),$(f.$$.fragment),c=I(),$(d.$$.fragment),p(e,"id",n[10]),p(e,"class","grid grid-sm")},m(w,_){k(w,e,_),F(t,e,null),y(e,i),F(s,e,null),y(e,l),F(r,e,null),y(e,o),F(a,e,null),y(e,u),F(f,e,null),y(e,c),F(d,e,null),m=!0,h||(g=H(e,"submit",ye(n[12])),h=!0)},p(w,_){const T={};_[0]&262|_[1]&6&&(T.$$scope={dirty:_,ctx:w}),t.$set(T);const L={};_[0]&2|_[1]&6&&(L.$$scope={dirty:_,ctx:w}),s.$set(L);const O={};_[0]&2|_[1]&6&&(O.$$scope={dirty:_,ctx:w}),r.$set(O);const C={};_[0]&546|_[1]&6&&(C.$$scope={dirty:_,ctx:w}),a.$set(C);const S={};_[0]&2|_[1]&6&&(S.$$scope={dirty:_,ctx:w}),f.$set(S);const P={};_[0]&2|_[1]&6&&(P.$$scope={dirty:_,ctx:w}),d.$set(P)},i(w){m||(E(t.$$.fragment,w),E(s.$$.fragment,w),E(r.$$.fragment,w),E(a.$$.fragment,w),E(f.$$.fragment,w),E(d.$$.fragment,w),m=!0)},o(w){j(t.$$.fragment,w),j(s.$$.fragment,w),j(r.$$.fragment,w),j(a.$$.fragment,w),j(f.$$.fragment,w),j(d.$$.fragment,w),m=!1},d(w){w&&v(e),q(t),q(s),q(r),q(a),q(f),q(d),h=!1,g()}}}function u_(n){let e;return{c(){e=b("h5"),e.textContent="Account settings",p(e,"class","block txt-center")},m(t,i){k(t,e,i)},p:X,d(t){t&&v(e)}}}function f_(n){let e,t,i,s,l,r,o;return{c(){e=b("div"),e.innerHTML='<i class="iconoir-send"></i> <span class="txt">Password change request</span>',t=I(),i=b("hr"),s=I(),l=b("div"),l.innerHTML='<i class="iconoir-warning-triangle"></i> <span class="txt">Delete account</span>',p(e,"tabindex","0"),p(e,"class","dropdown-item closable"),p(l,"tabindex","0"),p(l,"class","dropdown-item closable link-danger")},m(a,u){k(a,e,u),k(a,t,u),k(a,i,u),k(a,s,u),k(a,l,u),r||(o=[H(e,"click",n[14]),H(l,"click",n[13])],r=!0)},p:X,d(a){a&&(v(e),v(t),v(i),v(s),v(l)),r=!1,pe(o)}}}function c_(n){let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g,w;return l=new Rt({props:{class:"dropdown dropdown-upside dropdown-nowrap dropdown-left dropdown-sm",$$slots:{default:[f_]},$$scope:{ctx:n}}}),{c(){e=b("div"),t=b("button"),i=b("i"),s=I(),$(l.$$.fragment),r=I(),o=b("button"),a=b("span"),a.textContent="Cancel",f=I(),c=b("button"),d=b("span"),d.textContent="Save changes",p(i,"class","iconoir-more-horiz txt-lg"),p(t,"type","button"),p(t,"class","btn btn-sm btn-circle btn-transparent"),t.disabled=n[3],p(t,"aria-label","More"),p(e,"class","inline-flex m-r-auto"),p(a,"class","txt"),p(o,"type","button"),p(o,"class","btn btn-transparent"),o.disabled=u=!n[6],p(d,"class","txt"),p(c,"form",n[10]),p(c,"type","submit"),p(c,"class","btn btn-expanded-sm btn-primary"),c.disabled=m=n[3]||!n[6]||!n[7],Z(c,"btn-loading",n[3])},m(_,T){k(_,e,T),y(e,t),y(t,i),y(t,s),F(l,t,null),k(_,r,T),k(_,o,T),y(o,a),k(_,f,T),k(_,c,T),y(c,d),h=!0,g||(w=H(o,"click",n[0]),g=!0)},p(_,T){const L={};T[1]&4&&(L.$$scope={dirty:T,ctx:_}),l.$set(L),(!h||T[0]&8)&&(t.disabled=_[3]),(!h||T[0]&64&&u!==(u=!_[6]))&&(o.disabled=u),(!h||T[0]&200&&m!==(m=_[3]||!_[6]||!_[7]))&&(c.disabled=m),(!h||T[0]&8)&&Z(c,"btn-loading",_[3])},i(_){h||(E(l.$$.fragment,_),h=!0)},o(_){j(l.$$.fragment,_),h=!1},d(_){_&&(v(e),v(r),v(o),v(f),v(c)),q(l),g=!1,w()}}}function d_(n){let e,t,i,s,l={beforeHide:n[24],popup:!0,$$slots:{footer:[c_],header:[u_],default:[a_]},$$scope:{ctx:n}};e=new mn({props:l}),n[25](e),e.$on("show",n[26]),e.$on("hide",n[27]);let r={};return i=new X1({props:r}),n[28](i),{c(){$(e.$$.fragment),t=I(),$(i.$$.fragment)},m(o,a){F(e,o,a),k(o,t,a),F(i,o,a),s=!0},p(o,a){const u={};a[0]&64&&(u.beforeHide=o[24]),a[0]&1006|a[1]&4&&(u.$$scope={dirty:a,ctx:o}),e.$set(u);const f={};i.$set(f)},i(o){s||(E(e.$$.fragment,o),E(i.$$.fragment,o),s=!0)},o(o){j(e.$$.fragment,o),j(i.$$.fragment,o),s=!1},d(o){o&&v(t),n[25](null),q(e,o),n[28](null),q(i,o)}}}function p_(n,e,t){let i,s,l,r;Q(n,ei,U=>t(9,r=U));const o=it(),a="settings_"+G.randomString(5);let u,f,c={},d=null,m=!1,h=!1,g=!1,w="";function _(U){return L(),t(1,c=structuredClone(U||{})),t(18,w=JSON.stringify(c)),u==null?void 0:u.show()}function T(){return u==null?void 0:u.hide()}function L(){Jt({}),t(2,d=null)}function O(){t(1,c.avatar=null,c),t(2,d=null)}async function C(){t(3,m=!0);try{const U={name:c.name,username:c.username,emailVisibility:c.emailVisibility,allowEmailNotifications:c.allowEmailNotifications,avatar:c.avatar};d!=null&&d.length&&(U.avatar=d[0]),t(1,c=await z.collection("users").update(c.id,U)),t(3,m=!1),o("save",c),gt("Successfully saved account settings."),await Ct(),T()}catch(U){U.isAbort||(t(3,m=!1),z.error(U))}}function S(){if(!(c!=null&&c.id))return;let U=`Do you really want to delete your Presentator account and all of its related resources?

Note that projects that have more than one owner will not be deleted.`;t(16,h=!0),Pt(U,async()=>P(),()=>{setTimeout(()=>{t(16,h=!1)},0)})}async function P(){if(c!=null&&c.id){t(16,h=!0);try{const U=c.id==(r==null?void 0:r.id);await z.collection("users").delete(c.id),t(16,h=!1),o("delete",c),gt(`Successfully deleted user ${c.username}.`),U&&z.logout()}catch(U){U.isAbort||(z.error(U),t(16,h=!1))}}}async function R(){if(c!=null&&c.email){t(17,g=!0);try{await z.collection("users").requestPasswordReset(c.email),gt(`Successfully sent password change email to ${c.email}.`),t(17,g=!1)}catch(U){U.isAbort||(z.error(U),t(17,g=!1))}}}function A(){d=this.files,t(2,d)}function M(){c.name=this.value,t(1,c)}function D(){c.username=this.value,t(1,c)}function Y(){c.emailVisibility=this.checked,t(1,c)}function K(){c.allowEmailNotifications=this.checked,t(1,c)}const B=()=>l;function N(U){se[U?"unshift":"push"](()=>{u=U,t(4,u)})}function V(U){qe.call(this,n,U)}function ee(U){qe.call(this,n,U)}function J(U){se[U?"unshift":"push"](()=>{f=U,t(5,f)})}return n.$$.update=()=>{n.$$.dirty[0]&6&&t(8,i=(c==null?void 0:c.avatar)||(d==null?void 0:d.length)),n.$$.dirty[0]&262150&&t(7,s=(d==null?void 0:d.length)||w!=JSON.stringify(c)),n.$$.dirty[0]&196616&&t(6,l=!m&&!h&&!g)},[T,c,d,m,u,f,l,s,i,r,a,O,C,S,R,_,h,g,w,A,M,D,Y,K,B,N,V,ee,J]}class m_ extends Se{constructor(e){super(),ke(this,e,p_,d_,ge,{show:15,hide:0},null,[-1,-1])}get show(){return this.$$.ctx[15]}get hide(){return this.$$.ctx[0]}}function Jo(n,e,t){const i=n.slice();return i[13]=e[t][0],i[14]=e[t][1],i}const h_=n=>({}),Xo=n=>({}),__=n=>({}),Qo=n=>({});function xo(n){let e,t,i,s,l,r,o,a,u,f;t=new sr({props:{class:"app-logo-sm",withText:!1}});const c=n[8]["header-left"],d=lt(c,n,n[12],Qo),m=n[8]["header-right"],h=lt(m,n,n[12],Xo);return o=new D1({}),u=new is({props:{tabindex:"0",class:"thumb thumb-dark thumb-circle thumb-handle",user:n[6],$$slots:{default:[b_]},$$scope:{ctx:n}}}),{c(){e=b("header"),$(t.$$.fragment),i=I(),d&&d.c(),s=I(),l=b("div"),h&&h.c(),r=I(),$(o.$$.fragment),a=I(),$(u.$$.fragment),p(l,"class","inline-flex flex-gap-sm m-l-auto"),p(e,"class","app-header")},m(g,w){k(g,e,w),F(t,e,null),y(e,i),d&&d.m(e,null),y(e,s),y(e,l),h&&h.m(l,null),y(l,r),F(o,l,null),y(l,a),F(u,l,null),f=!0},p(g,w){d&&d.p&&(!f||w&4096)&&ot(d,c,g,g[12],f?rt(c,g[12],w,__):at(g[12]),Qo),h&&h.p&&(!f||w&4096)&&ot(h,m,g,g[12],f?rt(m,g[12],w,h_):at(g[12]),Xo);const _={};w&64&&(_.user=g[6]),w&4192&&(_.$$scope={dirty:w,ctx:g}),u.$set(_)},i(g){f||(E(t.$$.fragment,g),E(d,g),E(h,g),E(o.$$.fragment,g),E(u.$$.fragment,g),f=!0)},o(g){j(t.$$.fragment,g),j(d,g),j(h,g),j(o.$$.fragment,g),j(u.$$.fragment,g),f=!1},d(g){g&&v(e),q(t),d&&d.d(g),h&&h.d(g),q(o),q(u)}}}function g_(n){let e,t,i,s,l,r,o;return{c(){e=b("button"),e.innerHTML='<i class="iconoir-settings"></i> <span class="txt">Settings</span>',t=I(),i=b("hr"),s=I(),l=b("button"),l.innerHTML='<i class="iconoir-log-out"></i> <span class="txt">Logout</span>',p(e,"type","button"),p(e,"class","dropdown-item closable"),p(l,"type","button"),p(l,"class","dropdown-item")},m(a,u){k(a,e,u),k(a,t,u),k(a,i,u),k(a,s,u),k(a,l,u),r||(o=[H(e,"click",Ye(n[9])),H(l,"click",n[10])],r=!0)},p:X,d(a){a&&(v(e),v(t),v(i),v(s),v(l)),r=!1,pe(o)}}}function b_(n){let e,t;return e=new Rt({props:{class:"dropdown",$$slots:{default:[g_]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,s){const l={};s&4192&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function ea(n){var a;let e,t,i,s,l,r,o=((a=n[7])==null?void 0:a.links)&&ta(n);return{c(){e=b("footer"),o&&o.c(),t=I(),i=b("a"),s=b("i"),l=I(),r=b("span"),r.textContent="Presentator v3.4.36",p(s,"class","iconoir-github"),p(r,"class","txt"),p(i,"href","https://github.com/presentator/presentator/releases"),p(i,"target","_blank"),p(i,"rel","noopener noreferrer"),p(e,"class","app-footer")},m(u,f){k(u,e,f),o&&o.m(e,null),y(e,t),y(e,i),y(i,s),y(i,l),y(i,r)},p(u,f){var c;(c=u[7])!=null&&c.links?o?o.p(u,f):(o=ta(u),o.c(),o.m(e,t)):o&&(o.d(1),o=null)},d(u){u&&v(e),o&&o.d()}}}function ta(n){var s;let e,t=Ie(Object.entries((s=n[7])==null?void 0:s.links)),i=[];for(let l=0;l<t.length;l+=1)i[l]=na(Jo(n,t,l));return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=De()},m(l,r){for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(l,r);k(l,e,r)},p(l,r){var o;if(r&128){t=Ie(Object.entries((o=l[7])==null?void 0:o.links));let a;for(a=0;a<t.length;a+=1){const u=Jo(l,t,a);i[a]?i[a].p(u,r):(i[a]=na(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(l){l&&v(e),sn(i,l)}}}function na(n){let e,t=n[13]+"",i,s,l,r;return{c(){e=b("a"),i=x(t),l=I(),r=b("span"),r.textContent="|",p(e,"href",s=n[14]),p(e,"target","_blank"),p(e,"rel","noopener noreferrer"),p(r,"class","delimiter")},m(o,a){k(o,e,a),y(e,i),k(o,l,a),k(o,r,a)},p(o,a){a&128&&t!==(t=o[13]+"")&&ve(i,t),a&128&&s!==(s=o[14])&&p(e,"href",s)},d(o){o&&(v(e),v(l),v(r))}}}function w_(n){let e,t,i,s,l,r,o,a,u,f,c;document.title=e=G.joinNonEmpty([n[1],"Presentator"]," - ");let d=n[2]&&xo(n);const m=n[8].default,h=lt(m,n,n[12],null);let g=n[3]&&ea(n),w={};return f=new m_({props:w}),n[11](f),{c(){t=I(),i=b("div"),d&&d.c(),s=I(),l=b("main"),r=b("div"),h&&h.c(),o=I(),g&&g.c(),u=I(),$(f.$$.fragment),p(r,"class","app-content"),p(l,"class","app-body"),p(i,"class",a="app-layout "+n[0]),Z(i,"fullpage",n[4])},m(_,T){k(_,t,T),k(_,i,T),d&&d.m(i,null),y(i,s),y(i,l),y(l,r),h&&h.m(r,null),y(l,o),g&&g.m(l,null),k(_,u,T),F(f,_,T),c=!0},p(_,[T]){(!c||T&2)&&e!==(e=G.joinNonEmpty([_[1],"Presentator"]," - "))&&(document.title=e),_[2]?d?(d.p(_,T),T&4&&E(d,1)):(d=xo(_),d.c(),E(d,1),d.m(i,s)):d&&(oe(),j(d,1,1,()=>{d=null}),ae()),h&&h.p&&(!c||T&4096)&&ot(h,m,_,_[12],c?rt(m,_[12],T,null):at(_[12]),null),_[3]?g?g.p(_,T):(g=ea(_),g.c(),g.m(l,null)):g&&(g.d(1),g=null),(!c||T&1&&a!==(a="app-layout "+_[0]))&&p(i,"class",a),(!c||T&17)&&Z(i,"fullpage",_[4]);const L={};f.$set(L)},i(_){c||(E(d),E(h,_),E(f.$$.fragment,_),c=!0)},o(_){j(d),j(h,_),j(f.$$.fragment,_),c=!1},d(_){_&&(v(t),v(i),v(u)),d&&d.d(),h&&h.d(_),g&&g.d(),n[11](null),q(f,_)}}}function y_(n,e,t){let i,s;Q(n,ei,w=>t(6,i=w)),Q(n,Gn,w=>t(7,s=w));let{$$slots:l={},$$scope:r}=e,{class:o=""}=e,{title:a=""}=e,{header:u=!0}=e,{footer:f=!0}=e,{fullpage:c=!1}=e,d;const m=()=>d==null?void 0:d.show(i),h=()=>z.logout();function g(w){se[w?"unshift":"push"](()=>{d=w,t(5,d)})}return n.$$set=w=>{"class"in w&&t(0,o=w.class),"title"in w&&t(1,a=w.title),"header"in w&&t(2,u=w.header),"footer"in w&&t(3,f=w.footer),"fullpage"in w&&t(4,c=w.fullpage),"$$scope"in w&&t(12,r=w.$$scope)},[o,a,u,f,c,d,i,s,l,m,h,g,r]}class Pi extends Se{constructor(e){super(),ke(this,e,y_,w_,ge,{class:0,title:1,header:2,footer:3,fullpage:4})}}function ia(n,e,t){const i=n.slice();return i[8]=e[t],i}function v_(n){let e,t,i,s,l;function r(){return n[4](n[8])}function o(){return n[5](n[8])}return{c(){e=b("img"),Zn(e.src,t=z.baseURL+"/_/images/oauth2/"+n[8].name+".svg")||p(e,"src",t),p(e,"alt",i=n[8].displayName+" logo"),p(e,"class","svelte-l24196")},m(a,u){k(a,e,u),s||(l=[H(e,"error",r),H(e,"load",o)],s=!0)},p(a,u){n=a,u&1&&!Zn(e.src,t=z.baseURL+"/_/images/oauth2/"+n[8].name+".svg")&&p(e,"src",t),u&1&&i!==(i=n[8].displayName+" logo")&&p(e,"alt",i)},d(a){a&&v(e),s=!1,pe(l)}}}function k_(n){let e;return{c(){e=b("i"),p(e,"class","iconoir-fingerprint")},m(t,i){k(t,e,i)},p:X,d(t){t&&v(e)}}}function sa(n){let e,t,i,s,l;function r(f,c){return f[1][f[8].name]?k_:v_}let o=r(n),a=o(n);function u(){return n[6](n[8])}return{c(){e=b("button"),a.c(),t=I(),p(e,"type","button"),p(e,"class","auth-provider svelte-l24196")},m(f,c){k(f,e,c),a.m(e,null),y(e,t),s||(l=[we(i=Ce.call(null,e,n[8].displayName)),H(e,"click",u)],s=!0)},p(f,c){n=f,o===(o=r(n))&&a?a.p(n,c):(a.d(1),a=o(n),a&&(a.c(),a.m(e,t))),i&&tt(i.update)&&c&1&&i.update.call(null,n[8].displayName)},d(f){f&&v(e),a.d(),s=!1,pe(l)}}}function S_(n){let e,t=Ie(n[0]),i=[];for(let s=0;s<t.length;s+=1)i[s]=sa(ia(n,t,s));return{c(){e=b("nav");for(let s=0;s<i.length;s+=1)i[s].c();p(e,"class","auth-providers-list svelte-l24196")},m(s,l){k(s,e,l);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(s,[l]){if(l&7){t=Ie(s[0]);let r;for(r=0;r<t.length;r+=1){const o=ia(s,t,r);i[r]?i[r].p(o,l):(i[r]=sa(o),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},i:X,o:X,d(s){s&&v(e),sn(i,s)}}}function T_(n,e,t){const i=it();let{mfaId:s=null}=e,{providers:l=[]}=e,r={};function o(c){z.collection("users").authWithOAuth2({provider:c,mfaId:s,createData:{allowEmailNotifications:!0}}).then(()=>{i("submit",{})}).catch(d=>{var m;d.isAbort||((m=d.response)!=null&&m.mfaId?(t(3,s=d.response.mfaId),addWarningToast("Second authentication factor is required."),i("submit",{mfaId:s})):z.error(d))})}const a=c=>{t(1,r[c.name]=!0,r)},u=c=>{delete r[c.name]},f=c=>o(c.name);return n.$$set=c=>{"mfaId"in c&&t(3,s=c.mfaId),"providers"in c&&t(0,l=c.providers)},[l,r,o,s,a,u,f]}class wd extends Se{constructor(e){super(),ke(this,e,T_,S_,ge,{mfaId:3,providers:0})}}function O_(n){let e,t;return e=new Ee({props:{class:"form-field form-field-lg",name:"email",$$slots:{default:[E_,({uniqueId:i})=>({11:i}),({uniqueId:i})=>i?2048:0]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,s){const l={};s&6145&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function C_(n){let e,t,i,s;return i=new Ee({props:{class:"form-field form-field-lg",name:"password",$$slots:{default:[L_,({uniqueId:l})=>({11:l}),({uniqueId:l})=>l?2048:0]},$$scope:{ctx:n}}}),{c(){e=b("p"),e.textContent="Check your email and enter below the received OTP:",t=I(),$(i.$$.fragment),p(e,"class","m-b-sm")},m(l,r){k(l,e,r),k(l,t,r),F(i,l,r),s=!0},p(l,r){const o={};r&6148&&(o.$$scope={dirty:r,ctx:l}),i.$set(o)},i(l){s||(E(i.$$.fragment,l),s=!0)},o(l){j(i.$$.fragment,l),s=!1},d(l){l&&(v(e),v(t)),q(i,l)}}}function E_(n){let e,t,i,s,l,r,o,a,u;return{c(){e=b("div"),t=b("label"),i=b("i"),l=I(),r=b("input"),p(i,"class","iconoir-mail-open"),p(t,"for",s=n[11]),p(t,"class","addon prefix"),r.autofocus=!0,r.required=!0,p(r,"type","email"),p(r,"id",o=n[11]),p(r,"placeholder","Email"),p(e,"class","field-group")},m(f,c){k(f,e,c),y(e,t),y(t,i),y(e,l),y(e,r),be(r,n[0]),r.focus(),a||(u=[we(Ce.call(null,t,{position:"left",text:"Email"})),H(r,"input",n[7])],a=!0)},p(f,c){c&2048&&s!==(s=f[11])&&p(t,"for",s),c&2048&&o!==(o=f[11])&&p(r,"id",o),c&1&&r.value!==f[0]&&be(r,f[0])},d(f){f&&v(e),a=!1,pe(u)}}}function L_(n){let e,t,i,s,l,r,o,a,u;return{c(){e=b("div"),t=b("label"),i=b("i"),l=I(),r=b("input"),p(i,"class","iconoir-lock"),p(t,"for",s=n[11]),p(t,"class","addon prefix"),r.autofocus=!0,r.required=!0,p(r,"type","password"),p(r,"id",o=n[11]),p(r,"placeholder","OTP"),p(e,"class","field-group")},m(f,c){k(f,e,c),y(e,t),y(t,i),y(e,l),y(e,r),be(r,n[2]),r.focus(),a||(u=[we(Ce.call(null,t,{position:"left",text:"Email"})),H(r,"input",n[6])],a=!0)},p(f,c){c&2048&&s!==(s=f[11])&&p(t,"for",s),c&2048&&o!==(o=f[11])&&p(r,"id",o),c&4&&r.value!==f[2]&&be(r,f[2])},d(f){f&&v(e),a=!1,pe(u)}}}function I_(n){let e,t,i;return{c(){e=b("span"),e.textContent="Login",t=I(),i=b("i"),p(e,"class","txt"),p(i,"class","iconoir-arrow-right")},m(s,l){k(s,e,l),k(s,t,l),k(s,i,l)},d(s){s&&(v(e),v(t),v(i))}}}function j_(n){let e,t,i;return{c(){e=b("i"),t=I(),i=b("span"),i.textContent="Send OTP",p(e,"class","iconoir-send-mail"),p(i,"class","txt")},m(s,l){k(s,e,l),k(s,t,l),k(s,i,l)},d(s){s&&(v(e),v(t),v(i))}}}function P_(n){let e,t,i,s,l,r,o,a;const u=[C_,O_],f=[];function c(g,w){return g[1]?0:1}t=c(n),i=f[t]=u[t](n);function d(g,w){return g[1]?I_:j_}let m=d(n),h=m(n);return{c(){e=b("form"),i.c(),s=I(),l=b("button"),h.c(),p(l,"type","submit"),p(l,"class","btn btn-block btn-lg btn-primary btn-next"),Z(l,"btn-disabled",n[3]),Z(l,"btn-loading",n[3])},m(g,w){k(g,e,w),f[t].m(e,null),y(e,s),y(e,l),h.m(l,null),r=!0,o||(a=H(e,"submit",ye(n[4])),o=!0)},p(g,[w]){let _=t;t=c(g),t===_?f[t].p(g,w):(oe(),j(f[_],1,1,()=>{f[_]=null}),ae(),i=f[t],i?i.p(g,w):(i=f[t]=u[t](g),i.c()),E(i,1),i.m(e,s)),m!==(m=d(g))&&(h.d(1),h=m(g),h&&(h.c(),h.m(l,null))),(!r||w&8)&&Z(l,"btn-disabled",g[3]),(!r||w&8)&&Z(l,"btn-loading",g[3])},i(g){r||(E(i),r=!0)},o(g){j(i),r=!1},d(g){g&&v(e),f[t].d(),h.d(),o=!1,a()}}}function N_(n,e,t){const i=it();let{mfaId:s=null}=e,{email:l=""}=e,r="",o="",a=!1;async function u(){a||(t(3,a=!0),r?await c():await f(),t(3,a=!1))}async function f(){t(1,r="");try{const h=await z.collection("users").requestOTP(l);t(1,r=h.otpId),Ji()}catch(h){z.error(h)}}async function c(){var h;try{await z.collection("users").authWithOTP(r,o,{mfaId:s}),i("submit",{})}catch(g){(h=g==null?void 0:g.response)!=null&&h.mfaId?(t(5,s=g.response.mfaId),tr("Second authentication factor is required."),i("submit",{mfaId:s})):z.error(g)}}function d(){o=this.value,t(2,o)}function m(){l=this.value,t(0,l)}return n.$$set=h=>{"mfaId"in h&&t(5,s=h.mfaId),"email"in h&&t(0,l=h.email)},[l,r,o,a,u,s,d,m]}class A_ extends Se{constructor(e){super(),ke(this,e,N_,P_,ge,{mfaId:5,email:0})}}function M_(n){let e,t,i,s,l,r,o,a,u,f;return{c(){e=b("div"),t=b("label"),i=b("i"),r=I(),o=b("input"),p(i,"class","iconoir-user"),p(t,"for",s=n[10]),p(t,"class","addon prefix"),o.autofocus=!0,o.required=!0,p(o,"type","text"),p(o,"id",a=n[10]),p(o,"placeholder",n[2]),p(e,"class","field-group")},m(c,d){k(c,e,d),y(e,t),y(t,i),y(e,r),y(e,o),be(o,n[0]),o.focus(),u||(f=[we(l=Ce.call(null,t,{position:"left",text:n[2]})),H(o,"input",n[7])],u=!0)},p(c,d){d&1024&&s!==(s=c[10])&&p(t,"for",s),l&&tt(l.update)&&d&4&&l.update.call(null,{position:"left",text:c[2]}),d&1024&&a!==(a=c[10])&&p(o,"id",a),d&4&&p(o,"placeholder",c[2]),d&1&&o.value!==c[0]&&be(o,c[0])},d(c){c&&v(e),u=!1,pe(f)}}}function D_(n){let e,t,i,s,l,r,o,a,u,f,c;return{c(){e=b("div"),t=b("label"),i=b("i"),l=I(),r=b("input"),a=I(),u=b("a"),u.textContent="Forgotten password?",p(i,"class","iconoir-lock"),p(t,"for",s=n[10]),p(t,"class","addon prefix"),r.required=!0,p(r,"type","password"),p(r,"id",o=n[10]),p(r,"placeholder","Password"),p(e,"class","field-group m-b-10"),p(u,"href","/forgotten-password"),p(u,"class","link-primary txt-sm")},m(d,m){k(d,e,m),y(e,t),y(t,i),y(e,l),y(e,r),be(r,n[1]),k(d,a,m),k(d,u,m),f||(c=[we(Ce.call(null,t,{position:"left",text:"Password"})),H(r,"input",n[8]),we(Ti.call(null,u))],f=!0)},p(d,m){m&1024&&s!==(s=d[10])&&p(t,"for",s),m&1024&&o!==(o=d[10])&&p(r,"id",o),m&2&&r.value!==d[1]&&be(r,d[1])},d(d){d&&(v(e),v(a),v(u)),f=!1,pe(c)}}}function R_(n){let e,t,i,s,l,r,o,a,u;return t=new Ee({props:{class:"form-field form-field-lg",name:"identity",$$slots:{default:[M_,({uniqueId:f})=>({10:f}),({uniqueId:f})=>f?1024:0]},$$scope:{ctx:n}}}),s=new Ee({props:{class:"form-field form-field-lg",name:"password",$$slots:{default:[D_,({uniqueId:f})=>({10:f}),({uniqueId:f})=>f?1024:0]},$$scope:{ctx:n}}}),{c(){e=b("form"),$(t.$$.fragment),i=I(),$(s.$$.fragment),l=I(),r=b("button"),r.innerHTML='<span class="txt">Login</span> <i class="iconoir-arrow-right"></i>',p(r,"type","submit"),p(r,"class","btn btn-block btn-lg btn-primary btn-next"),Z(r,"btn-disabled",n[3]),Z(r,"btn-loading",n[3])},m(f,c){k(f,e,c),F(t,e,null),y(e,i),F(s,e,null),y(e,l),y(e,r),o=!0,a||(u=H(e,"submit",ye(n[4])),a=!0)},p(f,[c]){const d={};c&3077&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const m={};c&3074&&(m.$$scope={dirty:c,ctx:f}),s.$set(m),(!o||c&8)&&Z(r,"btn-disabled",f[3]),(!o||c&8)&&Z(r,"btn-loading",f[3])},i(f){o||(E(t.$$.fragment,f),E(s.$$.fragment,f),o=!0)},o(f){j(t.$$.fragment,f),j(s.$$.fragment,f),o=!1},d(f){f&&v(e),q(t),q(s),a=!1,u()}}}function H_(n,e,t){const i=it();let{identityFields:s=[]}=e,{mfaId:l=null}=e,{identity:r=""}=e,{password:o=""}=e,a="",u=!1;async function f(){var m;if(!u){t(3,u=!0);try{await z.collection("users").authWithPassword(r,o,{mfaId:l}),Ji(),i("submit",{})}catch(h){(m=h==null?void 0:h.response)!=null&&m.mfaId?(t(5,l=h.response.mfaId),tr("Second authentication factor is required."),i("submit",{mfaId:l})):er("Invalid login credentials or unverified user.")}t(3,u=!1)}}function c(){r=this.value,t(0,r)}function d(){o=this.value,t(1,o)}return n.$$set=m=>{"identityFields"in m&&t(6,s=m.identityFields),"mfaId"in m&&t(5,l=m.mfaId),"identity"in m&&t(0,r=m.identity),"password"in m&&t(1,o=m.password)},n.$$.update=()=>{n.$$.dirty&64&&t(2,a=G.sentenize((s==null?void 0:s.join(" or "))||"",!1))},[r,o,a,u,f,l,s,c,d]}class U_ extends Se{constructor(e){super(),ke(this,e,H_,R_,ge,{identityFields:6,mfaId:5,identity:0,password:1})}}function F_(n){let e,t,i,s=n[7]&&!n[1].includes("oaut2"),l,r=n[2]&&la(n),o=n[6]&&ra(n),a=s&&oa(n);return{c(){e=b("div"),r&&r.c(),t=I(),o&&o.c(),i=I(),a&&a.c(),p(e,"class","panel-content")},m(u,f){k(u,e,f),r&&r.m(e,null),y(e,t),o&&o.m(e,null),y(e,i),a&&a.m(e,null),l=!0},p(u,f){u[2]?r?(r.p(u,f),f&4&&E(r,1)):(r=la(u),r.c(),E(r,1),r.m(e,t)):r&&(oe(),j(r,1,1,()=>{r=null}),ae()),u[6]?o?(o.p(u,f),f&64&&E(o,1)):(o=ra(u),o.c(),E(o,1),o.m(e,i)):o&&(oe(),j(o,1,1,()=>{o=null}),ae()),f&130&&(s=u[7]&&!u[1].includes("oaut2")),s?a?(a.p(u,f),f&130&&E(a,1)):(a=oa(u),a.c(),E(a,1),a.m(e,null)):a&&(oe(),j(a,1,1,()=>{a=null}),ae())},i(u){l||(E(r),E(o),E(a),l=!0)},o(u){j(r),j(o),j(a),l=!1},d(u){u&&v(e),r&&r.d(),o&&o.d(),a&&a.d()}}}function q_(n){let e;return{c(){e=b("span"),p(e,"class","loader")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function la(n){let e,t,i,s;function l(a){n[11](a)}function r(a){n[12](a)}let o={identityFields:n[0].password.identityFields};return n[4]!==void 0&&(o.mfaId=n[4]),n[5]!==void 0&&(o.identity=n[5]),e=new U_({props:o}),se.push(()=>Ae(e,"mfaId",l)),se.push(()=>Ae(e,"identity",r)),e.$on("submit",n[13]),{c(){$(e.$$.fragment)},m(a,u){F(e,a,u),s=!0},p(a,u){const f={};u&1&&(f.identityFields=a[0].password.identityFields),!t&&u&16&&(t=!0,f.mfaId=a[4],Ne(()=>t=!1)),!i&&u&32&&(i=!0,f.identity=a[5],Ne(()=>i=!1)),e.$set(f)},i(a){s||(E(e.$$.fragment,a),s=!0)},o(a){j(e.$$.fragment,a),s=!1},d(a){q(e,a)}}}function ra(n){let e,t,i;function s(r){n[14](r)}let l={email:n[5].includes("@")?n[5]:""};return n[4]!==void 0&&(l.mfaId=n[4]),e=new A_({props:l}),se.push(()=>Ae(e,"mfaId",s)),e.$on("submit",n[15]),{c(){$(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};o&32&&(a.email=r[5].includes("@")?r[5]:""),!t&&o&16&&(t=!0,a.mfaId=r[4],Ne(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){j(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function oa(n){let e,t,i,s;function l(f,c){return f[2]||f[6]?W_:$_}let r=l(n),o=r(n);function a(f){n[16](f)}let u={providers:n[0].oauth2.providers};return n[4]!==void 0&&(u.mfaId=n[4]),t=new wd({props:u}),se.push(()=>Ae(t,"mfaId",a)),t.$on("submit",n[17]),{c(){o.c(),e=I(),$(t.$$.fragment)},m(f,c){o.m(f,c),k(f,e,c),F(t,f,c),s=!0},p(f,c){r!==(r=l(f))&&(o.d(1),o=r(f),o&&(o.c(),o.m(e.parentNode,e)));const d={};c&1&&(d.providers=f[0].oauth2.providers),!i&&c&16&&(i=!0,d.mfaId=f[4],Ne(()=>i=!1)),t.$set(d)},i(f){s||(E(t.$$.fragment,f),s=!0)},o(f){j(t.$$.fragment,f),s=!1},d(f){f&&v(e),o.d(f),q(t,f)}}}function $_(n){let e;return{c(){e=b("p"),e.textContent="Sign in with",p(e,"class","m-b-sm")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function W_(n){let e;return{c(){e=b("p"),e.textContent="Or sign in with",p(e,"class","m-t-base m-b-sm")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function V_(n){let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g;i=new sr({});const w=[q_,F_],_=[];function T(L,O){return L[3]?0:1}return a=T(n),u=_[a]=w[a](n),{c(){e=b("div"),t=b("header"),$(i.$$.fragment),s=I(),l=b("div"),r=b("h4"),r.textContent=`${yd}`,o=I(),u.c(),f=I(),c=b("div"),d=b("a"),d.innerHTML="Don&#39;t have an account yet? <strong>Register!</strong>",p(t,"class","block txt-center m-b-base"),p(r,"class","m-b-base"),p(l,"class","panel txt-center"),p(d,"href","/register"),p(d,"class","fade"),p(c,"class","block txt-center m-t-base"),p(e,"class","wrapper wrapper-sm m-b-base entrance-top")},m(L,O){k(L,e,O),y(e,t),F(i,t,null),y(e,s),y(e,l),y(l,r),y(l,o),_[a].m(l,null),y(e,f),y(e,c),y(c,d),m=!0,h||(g=we(Ti.call(null,d)),h=!0)},p(L,O){let C=a;a=T(L),a===C?_[a].p(L,O):(oe(),j(_[C],1,1,()=>{_[C]=null}),ae(),u=_[a],u?u.p(L,O):(u=_[a]=w[a](L),u.c()),E(u,1),u.m(l,null))},i(L){m||(E(i.$$.fragment,L),E(u),m=!0)},o(L){j(i.$$.fragment,L),j(u),m=!1},d(L){L&&v(e),q(i),_[a].d(),h=!1,g()}}}function z_(n){let e,t;return e=new Pi({props:{fullpage:!0,header:!1,title:yd,$$slots:{default:[V_]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,[s]){const l={};s&524543&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}const yd="Login";function B_(n,e,t){let i,s,l,r,o,a={},u=!1,f=null,c="",d=[];m();async function m(){t(3,u=!0);try{t(0,a=await z.collection("users").listAuthMethods()),t(3,u=!1)}catch(S){S!=null&&S.isAbort&&(z.error(S),t(3,u=!1))}}function h(S,P){d.push(S),t(1,d),P||(Ji(),z.replaceWithRemembered())}function g(S){f=S,t(4,f)}function w(S){c=S,t(5,c)}const _=S=>{var P;return h("passwordAuth",(P=S.detail)==null?void 0:P.mfaId)};function T(S){f=S,t(4,f)}const L=S=>{var P;return h("otp",(P=S.detail)==null?void 0:P.mfaId)};function O(S){f=S,t(4,f)}const C=S=>{var P;return h("oauth2",(P=S.detail)==null?void 0:P.mfaId)};return n.$$.update=()=>{var S,P,R,A,M;n.$$.dirty&1&&t(7,i=((S=a.oauth2)==null?void 0:S.enabled)&&((R=(P=a.oauth2)==null?void 0:P.providers)==null?void 0:R.length)),n.$$.dirty&1&&t(9,s=(A=a.otp)==null?void 0:A.enabled),n.$$.dirty&1&&t(10,l=(M=a.password)==null?void 0:M.enabled),n.$$.dirty&1026&&t(2,r=l&&!d.includes("passwordAuth")),n.$$.dirty&518&&t(6,o=!r&&s&&!d.includes("otp"))},[a,d,r,u,f,c,o,i,h,s,l,g,w,_,T,L,O,C]}class Z_ extends Se{constructor(e){super(),ke(this,e,B_,z_,ge,{})}}function Y_(n){let e,t,i,s=n[10]&&aa(n),l=n[9]&&ua(n);return{c(){e=b("div"),s&&s.c(),t=I(),l&&l.c(),p(e,"class","panel-content")},m(r,o){k(r,e,o),s&&s.m(e,null),y(e,t),l&&l.m(e,null),i=!0},p(r,o){r[10]?s?(s.p(r,o),o&1024&&E(s,1)):(s=aa(r),s.c(),E(s,1),s.m(e,t)):s&&(oe(),j(s,1,1,()=>{s=null}),ae()),r[9]?l?(l.p(r,o),o&512&&E(l,1)):(l=ua(r),l.c(),E(l,1),l.m(e,null)):l&&(oe(),j(l,1,1,()=>{l=null}),ae())},i(r){i||(E(s),E(l),i=!0)},o(r){j(s),j(l),i=!1},d(r){r&&v(e),s&&s.d(),l&&l.d()}}}function K_(n){let e;return{c(){e=b("span"),p(e,"class","loader")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function G_(n){let e,t,i,s,l,r,o,a;return{c(){e=b("div"),t=b("div"),i=b("p"),s=x(`Go check your email to verify your account:
                            `),l=b("br"),r=I(),o=b("strong"),a=x(n[0]),p(t,"class","content txt-center"),p(e,"class","alert m-0")},m(u,f){k(u,e,f),y(e,t),y(t,i),y(i,s),y(i,l),y(i,r),y(i,o),y(o,a)},p(u,f){f&1&&ve(a,u[0])},i:X,o:X,d(u){u&&v(e)}}}function aa(n){let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g,w;return e=new Ee({props:{class:"form-field form-field-lg",name:"email",$$slots:{default:[J_,({uniqueId:_})=>({22:_}),({uniqueId:_})=>_?4194304:0]},$$scope:{ctx:n}}}),i=new Ee({props:{class:"form-field form-field-lg",name:"username",$$slots:{default:[X_,({uniqueId:_})=>({22:_}),({uniqueId:_})=>_?4194304:0]},$$scope:{ctx:n}}}),l=new Ee({props:{class:"form-field form-field-lg",name:"password",$$slots:{default:[Q_,({uniqueId:_})=>({22:_}),({uniqueId:_})=>_?4194304:0]},$$scope:{ctx:n}}}),o=new Ee({props:{class:"form-field form-field-lg",name:"passwordConfirm",$$slots:{default:[x_,({uniqueId:_})=>({22:_}),({uniqueId:_})=>_?4194304:0]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment),t=I(),$(i.$$.fragment),s=I(),$(l.$$.fragment),r=I(),$(o.$$.fragment),a=I(),u=b("button"),u.innerHTML='<span class="txt">Register</span> <i class="iconoir-arrow-right"></i>',f=I(),c=b("p"),d=x(`By registering you agree with our
                            `),m=b("a"),h=x("Terms and Privacy policy"),p(u,"type","submit"),p(u,"class","btn btn-block btn-lg btn-primary btn-next"),Z(u,"btn-disabled",n[6]),Z(u,"btn-loading",n[6]),p(m,"href",g=n[11].termsURL),p(m,"target","_blank"),p(m,"rel","noreferrer noopener"),p(c,"class","m-t-xs m-b-sm txt-sm txt-hint")},m(_,T){F(e,_,T),k(_,t,T),F(i,_,T),k(_,s,T),F(l,_,T),k(_,r,T),F(o,_,T),k(_,a,T),k(_,u,T),k(_,f,T),k(_,c,T),y(c,d),y(c,m),y(m,h),w=!0},p(_,T){const L={};T&12582913&&(L.$$scope={dirty:T,ctx:_}),e.$set(L);const O={};T&12582924&&(O.$$scope={dirty:T,ctx:_}),i.$set(O);const C={};T&12582928&&(C.$$scope={dirty:T,ctx:_}),l.$set(C);const S={};T&12582944&&(S.$$scope={dirty:T,ctx:_}),o.$set(S),(!w||T&64)&&Z(u,"btn-disabled",_[6]),(!w||T&64)&&Z(u,"btn-loading",_[6]),(!w||T&2048&&g!==(g=_[11].termsURL))&&p(m,"href",g)},i(_){w||(E(e.$$.fragment,_),E(i.$$.fragment,_),E(l.$$.fragment,_),E(o.$$.fragment,_),w=!0)},o(_){j(e.$$.fragment,_),j(i.$$.fragment,_),j(l.$$.fragment,_),j(o.$$.fragment,_),w=!1},d(_){_&&(v(t),v(s),v(r),v(a),v(u),v(f),v(c)),q(e,_),q(i,_),q(l,_),q(o,_)}}}function J_(n){let e,t,i,s,l,r,o,a,u;return{c(){e=b("div"),t=b("label"),i=b("i"),l=I(),r=b("input"),p(i,"class","iconoir-mail"),p(t,"for",s=n[22]),p(t,"class","addon prefix"),r.autofocus=!0,p(r,"type","email"),p(r,"id",o=n[22]),p(r,"name","register_email"),p(r,"placeholder","Email"),p(e,"class","field-group")},m(f,c){k(f,e,c),y(e,t),y(t,i),y(e,l),y(e,r),be(r,n[0]),r.focus(),a||(u=[we(Ce.call(null,t,{position:"left",text:"Email"})),H(r,"input",n[14])],a=!0)},p(f,c){c&4194304&&s!==(s=f[22])&&p(t,"for",s),c&4194304&&o!==(o=f[22])&&p(r,"id",o),c&1&&r.value!==f[0]&&be(r,f[0])},d(f){f&&v(e),a=!1,pe(u)}}}function X_(n){let e,t,i,s,l,r,o,a,u;return{c(){e=b("div"),t=b("label"),i=b("i"),l=I(),r=b("input"),p(i,"class","iconoir-user"),p(t,"for",s=n[22]),p(t,"class","addon prefix"),p(r,"type","text"),p(r,"id",o=n[22]),p(r,"name","register_username"),p(r,"placeholder","Username"),p(e,"class","field-group")},m(f,c){k(f,e,c),y(e,t),y(t,i),y(e,l),y(e,r),be(r,n[3]),a||(u=[we(Ce.call(null,t,{position:"left",text:"Username"})),H(r,"input",n[15]),H(r,"input",n[16])],a=!0)},p(f,c){c&4194304&&s!==(s=f[22])&&p(t,"for",s),c&4194304&&o!==(o=f[22])&&p(r,"id",o),c&8&&r.value!==f[3]&&be(r,f[3])},d(f){f&&v(e),a=!1,pe(u)}}}function Q_(n){let e,t,i,s,l,r,o,a,u;return{c(){e=b("div"),t=b("label"),i=b("i"),l=I(),r=b("input"),p(i,"class","iconoir-lock"),p(t,"for",s=n[22]),p(t,"class","addon prefix"),r.required=!0,p(r,"type","password"),p(r,"id",o=n[22]),p(r,"name","register_password"),p(r,"placeholder","Password"),p(e,"class","field-group")},m(f,c){k(f,e,c),y(e,t),y(t,i),y(e,l),y(e,r),be(r,n[4]),a||(u=[we(Ce.call(null,t,{position:"left",text:"Password"})),H(r,"input",n[17])],a=!0)},p(f,c){c&4194304&&s!==(s=f[22])&&p(t,"for",s),c&4194304&&o!==(o=f[22])&&p(r,"id",o),c&16&&r.value!==f[4]&&be(r,f[4])},d(f){f&&v(e),a=!1,pe(u)}}}function x_(n){let e,t,i,s,l,r,o,a,u;return{c(){e=b("div"),t=b("label"),i=b("i"),l=I(),r=b("input"),p(i,"class","iconoir-lock"),p(t,"for",s=n[22]),p(t,"class","addon prefix"),r.required=!0,p(r,"type","password"),p(r,"id",o=n[22]),p(r,"name","register_passwordConfirm"),p(r,"placeholder","Password confirm"),p(r,"autocomplete","new-password"),p(e,"class","field-group")},m(f,c){k(f,e,c),y(e,t),y(t,i),y(e,l),y(e,r),be(r,n[5]),a||(u=[we(Ce.call(null,t,{position:"left",text:"Password confirm"})),H(r,"input",n[18])],a=!0)},p(f,c){c&4194304&&s!==(s=f[22])&&p(t,"for",s),c&4194304&&o!==(o=f[22])&&p(r,"id",o),c&32&&r.value!==f[5]&&be(r,f[5])},d(f){f&&v(e),a=!1,pe(u)}}}function ua(n){let e,t,i;function s(o,a){return o[10]?tg:eg}let l=s(n),r=l(n);return t=new wd({props:{providers:n[1].oauth2.providers}}),t.$on("submit",n[19]),{c(){r.c(),e=I(),$(t.$$.fragment)},m(o,a){r.m(o,a),k(o,e,a),F(t,o,a),i=!0},p(o,a){l!==(l=s(o))&&(r.d(1),r=l(o),r&&(r.c(),r.m(e.parentNode,e)));const u={};a&2&&(u.providers=o[1].oauth2.providers),t.$set(u)},i(o){i||(E(t.$$.fragment,o),i=!0)},o(o){j(t.$$.fragment,o),i=!1},d(o){o&&v(e),r.d(o),q(t,o)}}}function eg(n){let e;return{c(){e=b("p"),e.textContent="Sign up with",p(e,"class","m-b-sm")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function tg(n){let e;return{c(){e=b("p"),e.textContent="Or sign up with",p(e,"class","m-t-base m-b-sm")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function ng(n){let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g;i=new sr({});const w=[G_,K_,Y_],_=[];function T(L,O){return L[8]?0:L[7]?1:2}return a=T(n),u=_[a]=w[a](n),{c(){e=b("div"),t=b("header"),$(i.$$.fragment),s=I(),l=b("form"),r=b("h4"),r.textContent=`${vd}`,o=I(),u.c(),f=I(),c=b("div"),d=b("a"),d.innerHTML="Already have an account? <strong>Login!</strong>",p(t,"class","block txt-center m-b-base"),p(r,"class","m-b-base"),p(l,"class","panel txt-center"),p(l,"autocomplete","off"),p(d,"href","/login"),p(d,"class","fade"),p(c,"class","block txt-center m-t-base"),p(e,"class","wrapper wrapper-sm m-b-base entrance-top")},m(L,O){k(L,e,O),y(e,t),F(i,t,null),y(e,s),y(e,l),y(l,r),y(l,o),_[a].m(l,null),y(e,f),y(e,c),y(c,d),m=!0,h||(g=[H(l,"submit",ye(n[12])),we(Ti.call(null,d))],h=!0)},p(L,O){let C=a;a=T(L),a===C?_[a].p(L,O):(oe(),j(_[C],1,1,()=>{_[C]=null}),ae(),u=_[a],u?u.p(L,O):(u=_[a]=w[a](L),u.c()),E(u,1),u.m(l,null))},i(L){m||(E(i.$$.fragment,L),E(u),m=!0)},o(L){j(i.$$.fragment,L),j(u),m=!1},d(L){L&&v(e),q(i),_[a].d(),h=!1,pe(g)}}}function ig(n){let e,t;return e=new Pi({props:{fullpage:!0,header:!1,title:vd,$$slots:{default:[ng]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,[s]){const l={};s&8392703&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}const vd="Register";function sg(n,e,t){let i,s,l,r;Q(n,Gn,R=>t(11,r=R));let o="",a="",u="",f="",c=!1,d={},m=!1,h=!1,g=!1;w();async function w(){t(7,m=!0);try{t(1,d=await z.collection("users").listAuthMethods())}catch(R){z.error(R)}t(7,m=!1)}async function _(){if(!c){t(6,c=!0);try{await z.collection("users").create({email:o,username:a,password:u,passwordConfirm:f,allowEmailNotifications:!0}),Ji(),o&&await z.collection("users").requestVerification(o),t(8,h=!0)}catch(R){z.error(R)}t(6,c=!1)}}function T(){o=this.value,t(0,o)}const L=()=>{t(2,g=!0)};function O(){a=this.value,t(3,a),t(2,g),t(13,l),t(0,o)}function C(){u=this.value,t(4,u)}function S(){f=this.value,t(5,f)}const P=R=>{var A;(A=R.detail)!=null&&A.mfaId?Yt("/login"):(Ji(),z.replaceWithRemembered())};return n.$$.update=()=>{var R,A,M,D,Y,K;n.$$.dirty&2&&((R=d.mfa)==null||R.enabled),n.$$.dirty&2&&t(10,i=(A=d.password)==null?void 0:A.enabled),n.$$.dirty&2&&t(9,s=((M=d.oauth2)==null?void 0:M.enabled)&&((Y=(D=d.oauth2)==null?void 0:D.providers)==null?void 0:Y.length)),n.$$.dirty&1&&t(13,l=((K=o.split("@"))==null?void 0:K[0])||""),n.$$.dirty&8196&&(g||t(3,a=l))},[o,d,g,a,u,f,c,m,h,s,i,r,_,l,T,L,O,C,S,P]}class lg extends Se{constructor(e){super(),ke(this,e,sg,ig,ge,{})}}const rg=n=>({isEmpty:n&32}),fa=n=>({isEmpty:n[5]}),og=n=>({isEmpty:n&32}),ca=n=>({isEmpty:n[5]});function da(n){let e,t,i,s,l,r,o;return{c(){e=b("button"),t=b("span"),t.textContent="Clear",p(t,"class","txt"),p(e,"type","button"),p(e,"class",i="btn btn-warning btn-"+(n[7][n[3]]||"sm")+" btn-expanded-"+(n[7][n[3]]||"sm"))},m(a,u){k(a,e,u),y(e,t),l=!0,r||(o=H(e,"click",Ye(n[9])),r=!0)},p(a,u){(!l||u&8&&i!==(i="btn btn-warning btn-"+(a[7][a[3]]||"sm")+" btn-expanded-"+(a[7][a[3]]||"sm")))&&p(e,"class",i)},i(a){l||(a&&St(()=>{l&&(s||(s=ct(e,Nn,{duration:150,x:5},!0)),s.run(1))}),l=!0)},o(a){a&&(s||(s=ct(e,Nn,{duration:150,x:5},!1)),s.run(0)),l=!1},d(a){a&&v(e),a&&s&&s.end(),r=!1,o()}}}function ag(n){let e,t,i,s,l,r,o,a,u,f,c,d;const m=n[11].prefix,h=lt(m,n,n[10],ca);let g=!n[5]&&da(n);const w=n[11].suffix,_=lt(w,n,n[10],fa);return{c(){e=b("div"),t=b("div"),h&&h.c(),i=I(),s=b("div"),s.innerHTML='<i class="iconoir-search"></i>',l=I(),r=b("input"),o=I(),g&&g.c(),a=I(),_&&_.c(),p(s,"class","addon prefix"),p(r,"type","text"),p(r,"id",n[6]),p(r,"placeholder",n[2]),p(t,"class","field-group"),p(e,"class",u="form-field form-field-"+n[3]+" search-bar "+n[1])},m(T,L){k(T,e,L),y(e,t),h&&h.m(t,null),y(t,i),y(t,s),y(t,l),y(t,r),n[12](r),be(r,n[0]),y(t,o),g&&g.m(t,null),y(t,a),_&&_.m(t,null),f=!0,c||(d=[H(r,"input",n[13]),H(t,"click",n[8])],c=!0)},p(T,[L]){h&&h.p&&(!f||L&1056)&&ot(h,m,T,T[10],f?rt(m,T[10],L,og):at(T[10]),ca),(!f||L&4)&&p(r,"placeholder",T[2]),L&1&&r.value!==T[0]&&be(r,T[0]),T[5]?g&&(oe(),j(g,1,1,()=>{g=null}),ae()):g?(g.p(T,L),L&32&&E(g,1)):(g=da(T),g.c(),E(g,1),g.m(t,a)),_&&_.p&&(!f||L&1056)&&ot(_,w,T,T[10],f?rt(w,T[10],L,rg):at(T[10]),fa),(!f||L&10&&u!==(u="form-field form-field-"+T[3]+" search-bar "+T[1]))&&p(e,"class",u)},i(T){f||(E(h,T),E(g),E(_,T),f=!0)},o(T){j(h,T),j(g),j(_,T),f=!1},d(T){T&&v(e),h&&h.d(T),n[12](null),g&&g.d(),_&&_.d(T),c=!1,pe(d)}}}function ug(n,e,t){let i,{$$slots:s={},$$scope:l}=e;const r="search_"+G.randomString(5),o={lg:"sm",md:"sm",sm:"xs"};let{class:a=""}=e,{value:u}=e,{placeholder:f="Search..."}=e,{size:c="lg"}=e,d;function m(){d==null||d.focus()}function h(){t(0,u="")}function g(_){se[_?"unshift":"push"](()=>{d=_,t(4,d)})}function w(){u=this.value,t(0,u)}return n.$$set=_=>{"class"in _&&t(1,a=_.class),"value"in _&&t(0,u=_.value),"placeholder"in _&&t(2,f=_.placeholder),"size"in _&&t(3,c=_.size),"$$scope"in _&&t(10,l=_.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t(5,i=G.isEmpty(u))},[u,a,f,c,d,i,r,o,m,h,l,s,g,w]}class kd extends Se{constructor(e){super(),ke(this,e,ug,ag,ge,{class:1,value:0,placeholder:2,size:3})}}const ss=We([]),rn=We(!1),ls=We("");function Zs(){ss.set([]),rn.set(!1),ls.set("")}const cn=Dt([ss,ls],([n,e])=>n.length?e&&n.find(t=>t.id==e)||n[0]:null);cn.set=n=>{G.isObject(n)?Qn(n,!0):ls.set(n)};function Qn(n,e=!1){n&&(ss.update(t=>(G.pushOrReplaceObject(t,n),t)),e&&ls.set(n.id))}function al(n){n&&(ss.update(e=>(G.removeByKey(e,"id",n.id),e)),ls.update(e=>e==n.id?"":e))}function pa(n){let e,t=n[0].value+"",i;return{c(){e=b("small"),i=x(t),p(e,"class","txt-hint m-l-auto")},m(s,l){k(s,e,l),y(e,i)},p(s,l){l&1&&t!==(t=s[0].value+"")&&ve(i,t)},d(s){s&&v(e)}}}function fg(n){let e,t,i=n[0].label+"",s,l,r=n[0].value&&pa(n);return{c(){e=b("div"),t=b("span"),s=x(i),l=I(),r&&r.c(),p(t,"class","txt"),p(e,"class","flex")},m(o,a){k(o,e,a),y(e,t),y(t,s),y(e,l),r&&r.m(e,null)},p(o,[a]){a&1&&i!==(i=o[0].label+"")&&ve(s,i),o[0].value?r?r.p(o,a):(r=pa(o),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:X,o:X,d(o){o&&v(e),r&&r.d()}}}function cg(n,e,t){let{item:i={}}=e;return n.$$set=s=>{"item"in s&&t(0,i=s.item)},[i]}class ma extends Se{constructor(e){super(),ke(this,e,cg,fg,ge,{item:0})}}function ha(n){let e,t,i,s,l,r,o;return{c(){e=b("div"),t=b("input"),i=I(),s=b("div"),l=b("input"),p(t,"type","number"),p(t,"min","1"),p(t,"placeholder","Width"),t.required=!0,p(e,"class","col-3"),p(l,"type","number"),p(l,"min","1"),p(l,"placeholder","Height"),l.required=!0,p(s,"class","col-3")},m(a,u){k(a,e,u),y(e,t),be(t,n[3]),k(a,i,u),k(a,s,u),y(s,l),be(l,n[4]),r||(o=[H(t,"input",n[8]),we(Ce.call(null,e,"Width")),H(l,"input",n[9]),we(Ce.call(null,s,"Height"))],r=!0)},p(a,u){u&8&&kt(t.value)!==a[3]&&be(t,a[3]),u&16&&kt(l.value)!==a[4]&&be(l,a[4])},d(a){a&&(v(e),v(i),v(s)),r=!1,pe(o)}}}function dg(n){let e,t,i,s,l,r,o;function a(c){n[7](c)}let u={id:n[0],upside:!0,labelComponent:ma,optionComponent:ma,items:n[1]};n[2]!==void 0&&(u.keyOfSelected=n[2]),i=new pn({props:u}),se.push(()=>Ae(i,"keyOfSelected",a));let f=n[2]==""&&ha(n);return{c(){e=b("div"),t=b("div"),$(i.$$.fragment),r=I(),f&&f.c(),p(t,"class",l="col-"+(n[2]==""?6:12)),p(e,"class","grid grid-sm")},m(c,d){k(c,e,d),y(e,t),F(i,t,null),y(e,r),f&&f.m(e,null),o=!0},p(c,[d]){const m={};d&1&&(m.id=c[0]),d&2&&(m.items=c[1]),!s&&d&4&&(s=!0,m.keyOfSelected=c[2],Ne(()=>s=!1)),i.$set(m),(!o||d&4&&l!==(l="col-"+(c[2]==""?6:12)))&&p(t,"class",l),c[2]==""?f?f.p(c,d):(f=ha(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(c){o||(E(i.$$.fragment,c),o=!0)},o(c){j(i.$$.fragment,c),o=!1},d(c){c&&v(e),q(i),f&&f.d()}}}function pg(n,e,t){var w;let{id:i}=e,{options:s=[]}=e,{value:l=((w=s==null?void 0:s[0])==null?void 0:w.value)||""}=e,r=l,o="",a=0,u=0;function f(_){t(6,r=_),t(5,l=_),d()}function c(){var _;t(2,o=((_=s.find(T=>T.value==l))==null?void 0:_.value)||""),d()}function d(){const _=l.split("x");t(3,a=(_==null?void 0:_[0])<<0),t(4,u=(_==null?void 0:_[1])<<0)}function m(_){o=_,t(2,o)}function h(){a=kt(this.value),t(3,a)}function g(){u=kt(this.value),t(4,u)}return n.$$set=_=>{"id"in _&&t(0,i=_.id),"options"in _&&t(1,s=_.options),"value"in _&&t(5,l=_.value)},n.$$.update=()=>{n.$$.dirty&96&&r!=l&&(c(),f(l)),n.$$.dirty&2&&s&&c(),n.$$.dirty&4&&o&&f(o),n.$$.dirty&24&&(a||u)&&f(`${a}x${u}`)},[i,s,o,a,u,l,r,m,h,g]}class mg extends Se{constructor(e){super(),ke(this,e,pg,dg,ge,{id:0,options:1,value:5})}}function hg(n){let e,t,i,s,l,r,o,a,u,f,c;return u=$f(n[5][0]),{c(){e=b("input"),i=I(),s=b("label"),l=b("i"),r=I(),o=b("span"),o.textContent="Desktop",p(e,"type","radio"),p(e,"id",t=n[13]),p(e,"name","type"),e.__value=di,be(e,e.__value),p(l,"class","iconoir-modern-tv svelte-1i8gqwf"),p(o,"class","txt"),p(s,"for",a=n[13]),p(s,"class","svelte-1i8gqwf"),u.p(e)},m(d,m){k(d,e,m),e.checked=e.__value===n[1],k(d,i,m),k(d,s,m),y(s,l),y(s,r),y(s,o),f||(c=H(e,"change",n[4]),f=!0)},p(d,m){m&8192&&t!==(t=d[13])&&p(e,"id",t),m&2&&(e.checked=e.__value===d[1]),m&8192&&a!==(a=d[13])&&p(s,"for",a)},d(d){d&&(v(e),v(i),v(s)),u.r(),f=!1,c()}}}function _g(n){let e,t,i,s,l,r,o,a,u,f,c;return u=$f(n[5][0]),{c(){e=b("input"),i=I(),s=b("label"),l=b("i"),r=I(),o=b("span"),o.textContent="Mobile",p(e,"type","radio"),p(e,"id",t=n[13]),p(e,"name","type"),e.__value=Sd,be(e,e.__value),p(l,"class","iconoir-smartphone-device svelte-1i8gqwf"),p(o,"class","txt"),p(s,"for",a=n[13]),p(s,"class","svelte-1i8gqwf"),u.p(e)},m(d,m){k(d,e,m),e.checked=e.__value===n[1],k(d,i,m),k(d,s,m),y(s,l),y(s,r),y(s,o),f||(c=H(e,"change",n[6]),f=!0)},p(d,m){m&8192&&t!==(t=d[13])&&p(e,"id",t),m&2&&(e.checked=e.__value===d[1]),m&8192&&a!==(a=d[13])&&p(s,"for",a)},d(d){d&&(v(e),v(i),v(s)),u.r(),f=!1,c()}}}function gg(n){let e,t,i,s,l;return t=new Ee({props:{class:"group-item",$$slots:{default:[hg,({uniqueId:r})=>({13:r}),({uniqueId:r})=>r?8192:0]},$$scope:{ctx:n}}}),s=new Ee({props:{class:"group-item",$$slots:{default:[_g,({uniqueId:r})=>({13:r}),({uniqueId:r})=>r?8192:0]},$$scope:{ctx:n}}}),{c(){e=b("div"),$(t.$$.fragment),i=I(),$(s.$$.fragment),p(e,"class","radio-group type-group svelte-1i8gqwf")},m(r,o){k(r,e,o),F(t,e,null),y(e,i),F(s,e,null),l=!0},p(r,o){const a={};o&24578&&(a.$$scope={dirty:o,ctx:r}),t.$set(a);const u={};o&24578&&(u.$$scope={dirty:o,ctx:r}),s.$set(u)},i(r){l||(E(t.$$.fragment,r),E(s.$$.fragment,r),l=!0)},o(r){j(t.$$.fragment,r),j(s.$$.fragment,r),l=!1},d(r){r&&v(e),q(t),q(s)}}}function bg(n){let e,t,i,s;return e=new Ee({props:{class:"form-field m-b-sm entrance-top",$$slots:{default:[yg,({uniqueId:l})=>({13:l}),({uniqueId:l})=>l?8192:0]},$$scope:{ctx:n}}}),i=new Ee({props:{class:"form-field entrance-top",name:"scale",$$slots:{default:[vg,({uniqueId:l})=>({13:l}),({uniqueId:l})=>l?8192:0]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment),t=I(),$(i.$$.fragment)},m(l,r){F(e,l,r),k(l,t,r),F(i,l,r),s=!0},p(l,r){const o={};r&24577&&(o.$$scope={dirty:r,ctx:l}),e.$set(o);const a={};r&24577&&(a.$$scope={dirty:r,ctx:l}),i.$set(a)},i(l){s||(E(e.$$.fragment,l),E(i.$$.fragment,l),s=!0)},o(l){j(e.$$.fragment,l),j(i.$$.fragment,l),s=!1},d(l){l&&v(t),q(e,l),q(i,l)}}}function wg(n){let e,t;return e=new Ee({props:{class:"form-field entrance-top",name:"scale",$$slots:{default:[kg,({uniqueId:i})=>({13:i}),({uniqueId:i})=>i?8192:0]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,s){const l={};s&24577&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function yg(n){let e,t,i;function s(r){n[8](r)}let l={id:n[13],options:n[2]};return n[0].size!==void 0&&(l.value=n[0].size),e=new mg({props:l}),se.push(()=>Ae(e,"value",s)),{c(){$(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};o&8192&&(a.id=r[13]),!t&&o&1&&(t=!0,a.value=r[0].size,Ne(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){j(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function vg(n){let e,t,i,s,l,r,o,a,u;return{c(){e=b("input"),s=I(),l=b("label"),r=b("span"),r.textContent="Auto scale",p(e,"type","checkbox"),p(e,"id",t=n[13]),e.checked=i=n[0].scale==0,p(r,"class","txt"),p(l,"for",o=n[13])},m(f,c){k(f,e,c),k(f,s,c),k(f,l,c),y(l,r),a||(u=H(e,"change",n[9]),a=!0)},p(f,c){c&8192&&t!==(t=f[13])&&p(e,"id",t),c&1&&i!==(i=f[0].scale==0)&&(e.checked=i),c&8192&&o!==(o=f[13])&&p(l,"for",o)},d(f){f&&(v(e),v(s),v(l)),a=!1,u()}}}function kg(n){let e,t,i,s,l,r,o,a,u;return{c(){e=b("input"),s=I(),l=b("label"),r=b("span"),r.textContent="2x Retina rescale",p(e,"type","checkbox"),p(e,"id",t=n[13]),e.checked=i=n[0].scale==.5,p(r,"class","txt"),p(l,"for",o=n[13])},m(f,c){k(f,e,c),k(f,s,c),k(f,l,c),y(l,r),a||(u=H(e,"change",n[7]),a=!0)},p(f,c){c&8192&&t!==(t=f[13])&&p(e,"id",t),c&1&&i!==(i=f[0].scale==.5)&&(e.checked=i),c&8192&&o!==(o=f[13])&&p(l,"for",o)},d(f){f&&(v(e),v(s),v(l)),a=!1,u()}}}function Sg(n){let e,t,i,s,l,r;e=new Ee({props:{class:"form-field m-b-sm",$$slots:{default:[gg]},$$scope:{ctx:n}}});const o=[wg,bg],a=[];function u(f,c){return f[1]==di?0:1}return i=u(n),s=a[i]=o[i](n),{c(){$(e.$$.fragment),t=I(),s.c(),l=De()},m(f,c){F(e,f,c),k(f,t,c),a[i].m(f,c),k(f,l,c),r=!0},p(f,[c]){const d={};c&16386&&(d.$$scope={dirty:c,ctx:f}),e.$set(d);let m=i;i=u(f),i===m?a[i].p(f,c):(oe(),j(a[m],1,1,()=>{a[m]=null}),ae(),s=a[i],s?s.p(f,c):(s=a[i]=o[i](f),s.c()),E(s,1),s.m(l.parentNode,l))},i(f){r||(E(e.$$.fragment,f),E(s),r=!0)},o(f){j(e.$$.fragment,f),j(s),r=!1},d(f){f&&(v(t),v(l)),q(e,f),a[i].d(f)}}}const di="desktop",Sd="mobile";function Tg(n,e,t){let{prototype:i}=e;const s=[{label:"Google Pixel",value:"412x732"},{label:"iPhone XS",value:"375x812"},{label:"iPhone 13/14",value:"390x844"},{label:"iPad Pro",value:"1024x1366"},{label:"Other",value:""}];let l=di,r=l;function o(){t(1,l=i.size?Sd:di),t(3,r=l),l==di&&!i.scale&&t(0,i.scale=1,i)}function a(){t(0,i.size="",i),t(0,i.scale=i.scale==.5?.5:1,i)}function u(){t(0,i.size=s[0].value,i),t(0,i.scale=0,i)}const f=[[]];function c(){l=this.__value,t(1,l)}function d(){l=this.__value,t(1,l)}const m=w=>{var _;(_=w==null?void 0:w.target)!=null&&_.checked?t(0,i.scale=.5,i):t(0,i.scale=1,i)};function h(w){n.$$.not_equal(i.size,w)&&(i.size=w,t(0,i))}const g=w=>{var _;(_=w==null?void 0:w.target)!=null&&_.checked?t(0,i.scale=0,i):t(0,i.scale=1,i)};return n.$$set=w=>{"prototype"in w&&t(0,i=w.prototype)},n.$$.update=()=>{n.$$.dirty&1&&i&&o(),n.$$.dirty&10&&r!=l&&(t(3,r=l),l==di?a():u())},[i,l,s,r,c,f,d,m,h,g]}class Td extends Se{constructor(e){super(),ke(this,e,Tg,Sg,ge,{prototype:0})}}function Og(n){let e,t,i,s,l,r,o,a;return{c(){e=b("label"),t=x("Project title"),s=I(),l=b("input"),p(e,"for",i=n[17]),p(l,"type","text"),p(l,"id",r=n[17]),l.autofocus=!0,l.required=!0},m(u,f){k(u,e,f),y(e,t),k(u,s,f),k(u,l,f),be(l,n[2].title),l.focus(),o||(a=H(l,"input",n[10]),o=!0)},p(u,f){f&131072&&i!==(i=u[17])&&p(e,"for",i),f&131072&&r!==(r=u[17])&&p(l,"id",r),f&4&&l.value!==u[2].title&&be(l,u[2].title)},d(u){u&&(v(e),v(s),v(l)),o=!1,a()}}}function _a(n){let e,t,i,s,l;function r(a){n[11](a)}let o={};return n[3]!==void 0&&(o.prototype=n[3]),i=new Td({props:o}),se.push(()=>Ae(i,"prototype",r)),{c(){e=b("div"),e.textContent="Prototype",t=I(),$(i.$$.fragment),p(e,"class","block m-b-10")},m(a,u){k(a,e,u),k(a,t,u),F(i,a,u),l=!0},p(a,u){const f={};!s&&u&8&&(s=!0,f.prototype=a[3],Ne(()=>s=!1)),i.$set(f)},i(a){l||(E(i.$$.fragment,a),l=!0)},o(a){j(i.$$.fragment,a),l=!1},d(a){a&&(v(e),v(t)),q(i,a)}}}function Cg(n){let e,t,i,s,l,r;t=new Ee({props:{class:"form-field required",name:"title",$$slots:{default:[Og,({uniqueId:a})=>({17:a}),({uniqueId:a})=>a?131072:0]},$$scope:{ctx:n}}});let o=!n[2].id&&_a(n);return{c(){e=b("form"),$(t.$$.fragment),i=I(),o&&o.c(),p(e,"id",n[5]),p(e,"class","content")},m(a,u){k(a,e,u),F(t,e,null),y(e,i),o&&o.m(e,null),s=!0,l||(r=H(e,"submit",ye(n[6])),l=!0)},p(a,u){const f={};u&393220&&(f.$$scope={dirty:u,ctx:a}),t.$set(f),a[2].id?o&&(oe(),j(o,1,1,()=>{o=null}),ae()):o?(o.p(a,u),u&4&&E(o,1)):(o=_a(a),o.c(),E(o,1),o.m(e,null))},i(a){s||(E(t.$$.fragment,a),E(o),s=!0)},o(a){j(t.$$.fragment,a),j(o),s=!1},d(a){a&&v(e),q(t),o&&o.d(),l=!1,r()}}}function Eg(n){let e,t=n[2].id?"Update project":"Create project",i;return{c(){e=b("h5"),i=x(t),p(e,"class","block txt-center")},m(s,l){k(s,e,l),y(e,i)},p(s,l){l&4&&t!==(t=s[2].id?"Update project":"Create project")&&ve(i,t)},d(s){s&&v(e)}}}function Lg(n){let e,t,i,s,l=n[2].id?"Update project":"Create project",r,o,a;return{c(){e=b("button"),t=x("Cancel"),i=I(),s=b("button"),r=x(l),p(e,"type","button"),p(e,"class","btn btn-transparent"),e.disabled=n[4],p(s,"type","submit"),p(s,"form",n[5]),p(s,"class","btn btn-expanded btn-primary m-l-auto"),s.disabled=n[4],Z(s,"btn-loading",n[4])},m(u,f){k(u,e,f),y(e,t),k(u,i,f),k(u,s,f),y(s,r),o||(a=H(e,"click",n[9]),o=!0)},p(u,f){f&16&&(e.disabled=u[4]),f&4&&l!==(l=u[2].id?"Update project":"Create project")&&ve(r,l),f&16&&(s.disabled=u[4]),f&16&&Z(s,"btn-loading",u[4])},d(u){u&&(v(e),v(i),v(s)),o=!1,a()}}}function Ig(n){let e,t,i={popup:!0,overlayClose:!n[4],escHide:!n[4],beforeHide:n[12],$$slots:{footer:[Lg],header:[Eg],default:[Cg]},$$scope:{ctx:n}};return e=new mn({props:i}),n[13](e),e.$on("show",n[14]),e.$on("hide",n[15]),{c(){$(e.$$.fragment)},m(s,l){F(e,s,l),t=!0},p(s,[l]){const r={};l&16&&(r.overlayClose=!s[4]),l&16&&(r.escHide=!s[4]),l&16&&(r.beforeHide=s[12]),l&262172&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){n[13](null),q(e,s)}}}function jg(n,e,t){const i="project_upsert_"+G.randomString(5),s=it();let{successRedirect:l=!0}=e,r,o={},a={},u=!1;function f(O){return Jt({}),t(2,o=Object.assign({users:[z.authStore.record.id]},O)),t(3,a={}),o.id||(t(3,a.size="",a),t(3,a.scale=1,a)),r==null?void 0:r.show()}function c(){return r==null?void 0:r.hide()}async function d(){if(!u){t(4,u=!0);try{let O;o.id?O=await z.collection("projects").update(o.id,o):(O=await z.collection("projects").create(o),await z.collection("prototypes").create(Object.assign({project:O.id,title:G.isDesktopPrototype(a)?"Desktop":"Mobile"},a))),s("submit",O),t(4,u=!1),l?wi("/projects/"+O.id+"/prototypes"):c()}catch(O){O.isAbort||(t(4,u=!1),z.error(O))}}}const m=()=>c();function h(){o.title=this.value,t(2,o)}function g(O){a=O,t(3,a)}const w=()=>!u;function _(O){se[O?"unshift":"push"](()=>{r=O,t(1,r)})}function T(O){qe.call(this,n,O)}function L(O){qe.call(this,n,O)}return n.$$set=O=>{"successRedirect"in O&&t(7,l=O.successRedirect)},[c,r,o,a,u,i,d,l,f,m,h,g,w,_,T,L]}class Od extends Se{constructor(e){super(),ke(this,e,jg,Ig,ge,{successRedirect:7,show:8,hide:0})}get show(){return this.$$.ctx[8]}get hide(){return this.$$.ctx[0]}}const Pg=n=>({isLoading:n&1,img:n&1024}),ga=n=>({isLoading:n[0],img:n[10]});function ba(n){let e;return{c(){e=b("span"),p(e,"class",n[8])},m(t,i){k(t,e,i)},p(t,i){i&256&&p(e,"class",t[8])},d(t){t&&v(e)}}}function Ng(n){let e,t,i,s,l,r,o,a,u,f=n[0]&&ba(n);const c=n[17].default,d=lt(c,n,n[16],ga);return{c(){e=b("figure"),t=b("img"),s=I(),f&&f.c(),l=I(),d&&d.c(),p(t,"crossorigin","anonymous"),p(t,"loading",n[7]),p(t,"fetchpriority",n[5]),p(t,"alt",n[2]),p(t,"width",n[3]),p(t,"height",n[4]),p(t,"draggable",n[6]),Zn(t.src,i=n[1])||p(t,"src",i),p(e,"class",r="lazy-load "+n[9]),Z(e,"loading",n[0])},m(m,h){k(m,e,h),y(e,t),n[21](t),y(e,s),f&&f.m(e,null),y(e,l),d&&d.m(e,null),o=!0,a||(u=[H(t,"load",n[11]),H(t,"error",n[12]),H(t,"click",n[18]),H(t,"mousedown",n[19]),H(t,"touchstart",n[20])],a=!0)},p(m,[h]){(!o||h&128)&&p(t,"loading",m[7]),(!o||h&32)&&p(t,"fetchpriority",m[5]),(!o||h&4)&&p(t,"alt",m[2]),(!o||h&8)&&p(t,"width",m[3]),(!o||h&16)&&p(t,"height",m[4]),(!o||h&64)&&p(t,"draggable",m[6]),(!o||h&2&&!Zn(t.src,i=m[1]))&&p(t,"src",i),m[0]?f?f.p(m,h):(f=ba(m),f.c(),f.m(e,l)):f&&(f.d(1),f=null),d&&d.p&&(!o||h&66561)&&ot(d,c,m,m[16],o?rt(c,m[16],h,Pg):at(m[16]),ga),(!o||h&512&&r!==(r="lazy-load "+m[9]))&&p(e,"class",r),(!o||h&513)&&Z(e,"loading",m[0])},i(m){o||(E(d,m),o=!0)},o(m){j(d,m),o=!1},d(m){m&&v(e),n[21](null),f&&f.d(),d&&d.d(m),a=!1,pe(u)}}}function Ag(n,e,t){let{$$slots:i={},$$scope:s}=e;const l=it();let{src:r}=e,{alt:o=void 0}=e,{width:a=void 0}=e,{height:u=void 0}=e,{fetchpriority:f=void 0}=e,{draggable:c=null}=e,{scale:d=void 0}=e,{loading:m="lazy"}=e,{loaderClass:h="loader"}=e,{isLoading:g=!0}=e,{class:w=""}=e,_,T=r;function L(){return _!=null&&_.naturalWidth?_.clientWidth/_.naturalWidth:1}function O(){S(),l("load",_),t(0,g=!1)}function C(){t(0,g=!1),l("error",_)}function S(){if(!_||!_.complete||typeof d>"u")return;t(10,_.style.width="auto",_),t(10,_.style.height="auto",_),d==0?t(10,_.style["max-width"]="100%",_):t(10,_.style["max-width"]="",_);const D=d>0?_.naturalWidth*d:_.naturalWidth;t(10,_.style.width=D+"px",_)}function P(D){qe.call(this,n,D)}function R(D){qe.call(this,n,D)}function A(D){qe.call(this,n,D)}function M(D){se[D?"unshift":"push"](()=>{_=D,t(10,_)})}return n.$$set=D=>{"src"in D&&t(1,r=D.src),"alt"in D&&t(2,o=D.alt),"width"in D&&t(3,a=D.width),"height"in D&&t(4,u=D.height),"fetchpriority"in D&&t(5,f=D.fetchpriority),"draggable"in D&&t(6,c=D.draggable),"scale"in D&&t(13,d=D.scale),"loading"in D&&t(7,m=D.loading),"loaderClass"in D&&t(8,h=D.loaderClass),"isLoading"in D&&t(0,g=D.isLoading),"class"in D&&t(9,w=D.class),"$$scope"in D&&t(16,s=D.$$scope)},n.$$.update=()=>{n.$$.dirty&32770&&T!=r&&(t(15,T=r),t(0,g=!0)),n.$$.dirty&8192&&typeof d<"u"&&S()},[g,r,o,a,u,f,c,m,h,w,_,O,C,d,L,T,s,i,P,R,A,M]}class Xt extends Se{constructor(e){super(),ke(this,e,Ag,Ng,ge,{src:1,alt:2,width:3,height:4,fetchpriority:5,draggable:6,scale:13,loading:7,loaderClass:8,isLoading:0,class:9,widthRatio:14})}get widthRatio(){return this.$$.ctx[14]}}function ul(n){let e,t=n[0][n[3]]+"",i,s,l,r,o,a,u,f=[{spellcheck:s=!1},{tabindex:"0"},{contenteditable:l=n[8]&&!n[1]},{"data-placeholder":n[4]},{class:r="contenteditable inline-edit "+n[6]},n[10]],c={};for(let d=0;d<f.length;d+=1)c=Ue(c,f[d]);return{c(){e=b(n[2]),i=x(t),vs(n[2])(e,c),Z(e,"svelte-obfpdk",!0)},m(d,m){k(d,e,m),y(e,i),n[12](e),a||(u=[H(e,"focus",n[13]),H(e,"blur",n[14]),H(e,"keypress",n[15]),we(o=Ce.call(null,e,n[8]?"":{position:"bottom-left",text:n[5]}))],a=!0)},p(d,m){m&9&&t!==(t=d[0][d[3]]+"")&&op(i,t,d[8]&&!d[1]),vs(d[2])(e,c=bt(f,[{spellcheck:s},{tabindex:"0"},m&258&&l!==(l=d[8]&&!d[1])&&{contenteditable:l},m&16&&{"data-placeholder":d[4]},m&64&&r!==(r="contenteditable inline-edit "+d[6])&&{class:r},m&1024&&d[10]])),o&&tt(o.update)&&m&288&&o.update.call(null,d[8]?"":{position:"bottom-left",text:d[5]}),Z(e,"svelte-obfpdk",!0)},d(d){d&&v(e),n[12](null),a=!1,pe(u)}}}function Mg(n){let e,t=n[2],i=n[2]&&ul(n);return{c(){e=b("div"),i&&i.c(),p(e,"class","inline-edit-container svelte-obfpdk")},m(s,l){k(s,e,l),i&&i.m(e,null)},p(s,[l]){s[2]?t?ge(t,s[2])?(i.d(1),i=ul(s),t=s[2],i.c(),i.m(e,null)):i.p(s,l):(i=ul(s),t=s[2],i.c(),i.m(e,null)):t&&(i.d(1),i=null,t=s[2])},i:X,o:X,d(s){s&&v(e),i&&i.d(s)}}}function Dg(n,e,t){const i=["collection","model","disabled","tag","prop","placeholder","tooltip","class"];let s=ft(e,i),{collection:l=""}=e,{model:r={}}=e,{disabled:o=!1}=e,{tag:a="div"}=e,{prop:u="title"}=e,{placeholder:f="Title"}=e,{tooltip:c="Edit title"}=e,{class:d=""}=e,m,h=!1;async function g(){if(!m)return;const O=m.textContent;if(O||t(7,m.textContent=r[u],m),O!=r[u])try{const C={};C[u]=O;const S=await z.collection(l).update(r.id,C,{requestKey:"inline_"+l+r.id});t(0,r[u]=S[u],r),t(0,r.updated=S.updated,r)}catch(C){C.isAbort||console.warn("Failed to update "+u,C)}}function w(O){se[O?"unshift":"push"](()=>{m=O,t(7,m)})}const _=()=>t(8,h=!0),T=()=>{t(8,h=!1),g()},L=O=>{O.code=="Enter"&&(O.preventDefault(),m==null||m.blur())};return n.$$set=O=>{e=Ue(Ue({},e),Kt(O)),t(10,s=ft(e,i)),"collection"in O&&t(11,l=O.collection),"model"in O&&t(0,r=O.model),"disabled"in O&&t(1,o=O.disabled),"tag"in O&&t(2,a=O.tag),"prop"in O&&t(3,u=O.prop),"placeholder"in O&&t(4,f=O.placeholder),"tooltip"in O&&t(5,c=O.tooltip),"class"in O&&t(6,d=O.class)},[r,o,a,u,f,c,d,m,h,g,s,l,w,_,T,L]}class mr extends Se{constructor(e){super(),ke(this,e,Dg,Mg,ge,{collection:11,model:0,disabled:1,tag:2,prop:3,placeholder:4,tooltip:5,class:6})}}function wa(n,e,t){const i=n.slice();return i[23]=e[t],i}function Rg(n){let e;return{c(){e=b("i"),p(e,"class","iconoir-media-image")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function Hg(n){let e,t=[],i=new Map,s,l=Ie(n[1]);const r=o=>o[23].id;for(let o=0;o<l.length;o+=1){let a=wa(n,l,o),u=r(a);i.set(u,t[o]=ya(u,a))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();p(e,"class","card-images-set")},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);s=!0},p(o,a){a&2&&(l=Ie(o[1]),oe(),t=Tt(t,a,r,1,o,l,i,e,At,ya,null,wa),ae())},i(o){if(!s){for(let a=0;a<l.length;a+=1)E(t[a]);s=!0}},o(o){for(let a=0;a<t.length;a+=1)j(t[a]);s=!1},d(o){o&&v(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function ya(n,e){let t,i,s,l;return i=new Xt({props:{src:z.files.getURL(e[23],e[23].file,{thumb:"450x0"}),alt:e[23].title}}),{key:n,first:null,c(){t=b("div"),$(i.$$.fragment),s=I(),p(t,"class","card-img"),Fe(t,"background-color",e[23].background),this.first=t},m(r,o){k(r,t,o),F(i,t,null),y(t,s),l=!0},p(r,o){e=r;const a={};o&2&&(a.src=z.files.getURL(e[23],e[23].file,{thumb:"450x0"})),o&2&&(a.alt=e[23].title),i.$set(a),o&2&&Fe(t,"background-color",e[23].background)},i(r){l||(E(i.$$.fragment,r),l=!0)},o(r){j(i.$$.fragment,r),l=!1},d(r){r&&v(t),q(i)}}}function va(n){let e,t,i,s,l;function r(u,f){return u[0].expand.projectUserPreferences_via_project[0].favorite?Fg:Ug}let o=r(n),a=o(n);return{c(){e=b("div"),t=b("button"),a.c(),p(t,"type","button"),p(t,"class","btn btn-sm btn-circle btn-transparent"),Z(t,"fade",!n[0].expand.projectUserPreferences_via_project[0].favorite),p(e,"class","ctrl ctrl-top-left")},m(u,f){k(u,e,f),y(e,t),a.m(t,null),s||(l=[we(i=Ce.call(null,t,n[0].expand.projectUserPreferences_via_project[0].favorite?"Remove from favorites":"Add to favorites")),H(t,"click",Ye(n[11]))],s=!0)},p(u,f){o!==(o=r(u))&&(a.d(1),a=o(u),a&&(a.c(),a.m(t,null))),i&&tt(i.update)&&f&1&&i.update.call(null,u[0].expand.projectUserPreferences_via_project[0].favorite?"Remove from favorites":"Add to favorites"),f&1&&Z(t,"fade",!u[0].expand.projectUserPreferences_via_project[0].favorite)},d(u){u&&v(e),a.d(),s=!1,pe(l)}}}function Ug(n){let e;return{c(){e=b("i"),p(e,"class","iconoir-star")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function Fg(n){let e;return{c(){e=b("i"),p(e,"class","iconoir-star-solid txt-warning")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function qg(n){let e,t,i;return{c(){e=b("i"),t=I(),i=b("span"),i.textContent="Watch",p(e,"class","iconoir-eye-solid"),p(i,"class","txt")},m(s,l){k(s,e,l),k(s,t,l),k(s,i,l)},d(s){s&&(v(e),v(t),v(i))}}}function $g(n){let e,t,i;return{c(){e=b("i"),t=I(),i=b("span"),i.textContent="Unwatch",p(e,"class","iconoir-eye"),p(i,"class","txt")},m(s,l){k(s,e,l),k(s,t,l),k(s,i,l)},d(s){s&&(v(e),v(t),v(i))}}}function Wg(n){let e,t,i;return{c(){e=b("div"),e.innerHTML='<i class="iconoir-repository"></i> <span class="txt">Archive</span>',p(e,"class","dropdown-item")},m(s,l){k(s,e,l),t||(i=H(e,"click",n[14]),t=!0)},p:X,d(s){s&&v(e),t=!1,i()}}}function Vg(n){let e,t,i;return{c(){e=b("div"),e.innerHTML='<i class="iconoir-repository"></i> <span class="txt">Unarchive</span>',p(e,"class","dropdown-item")},m(s,l){k(s,e,l),t||(i=H(e,"click",n[13]),t=!0)},p:X,d(s){s&&v(e),t=!1,i()}}}function zg(n){let e,t,i,s,l,r,o,a;function u(g,w){return g[0].expand.projectUserPreferences_via_project[0].watch?$g:qg}let f=u(n),c=f(n);function d(g,w){return g[0].archived?Vg:Wg}let m=d(n),h=m(n);return{c(){e=b("div"),c.c(),t=I(),h.c(),i=I(),s=b("hr"),l=I(),r=b("div"),r.innerHTML='<i class="iconoir-trash"></i> <span class="txt">Delete</span>',p(e,"class","dropdown-item"),p(r,"class","dropdown-item link-danger")},m(g,w){k(g,e,w),c.m(e,null),k(g,t,w),h.m(g,w),k(g,i,w),k(g,s,w),k(g,l,w),k(g,r,w),o||(a=[H(e,"click",n[12]),H(r,"click",n[15])],o=!0)},p(g,w){f!==(f=u(g))&&(c.d(1),c=f(g),c&&(c.c(),c.m(e,null))),m===(m=d(g))&&h?h.p(g,w):(h.d(1),h=m(g),h&&(h.c(),h.m(i.parentNode,i)))},d(g){g&&(v(e),v(t),v(i),v(s),v(l),v(r)),c.d(),h.d(g),o=!1,pe(a)}}}function ka(n){let e,t,i,s,l,r,o;return{c(){e=b("div"),t=b("i"),i=I(),s=b("span"),l=x(n[2]),p(t,"class","iconoir-message-text"),p(s,"class","txt"),p(e,"class","meta-item txt-warning")},m(a,u){k(a,e,u),y(e,t),y(e,i),y(e,s),y(s,l),r||(o=we(Ce.call(null,e,"Unread comments")),r=!0)},p(a,u){u&4&&ve(l,a[2])},d(a){a&&v(e),r=!1,o()}}}function Sa(n){let e,t,i;return{c(){e=b("div"),e.innerHTML='<i class="iconoir-repository"></i>',p(e,"class","meta-item")},m(s,l){k(s,e,l),t||(i=we(Ce.call(null,e,"Archived")),t=!0)},d(s){s&&v(e),t=!1,i()}}}function Bg(n){var ce,re;let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g,w,_,T,L,O,C,S,P,R,A,M,D;const Y=[Hg,Rg],K=[];function B(de,Le){return de[1].length?0:1}i=B(n),s=K[i]=Y[i](n);let N=((re=(ce=n[0].expand)==null?void 0:ce.projectUserPreferences_via_project)==null?void 0:re[0])&&va(n);h=new Rt({props:{class:"dropdown dropdown-nowrap dropdown-sm",$$slots:{default:[zg]},$$scope:{ctx:n}}});function V(de){n[18](de)}let ee={tag:"h5",class:"title",collection:"projects"};n[0]!==void 0&&(ee.model=n[0]),_=new mr({props:ee}),se.push(()=>Ae(_,"model",V));let J=n[2]&&ka(n),U=n[0].archived&&Sa();return{c(){e=b("div"),t=b("figure"),s.c(),l=I(),r=b("div"),N&&N.c(),o=I(),a=b("div"),a.innerHTML='<i class="iconoir-media-image-list preview-icon" title="View project"></i>',u=I(),f=b("div"),c=b("button"),d=b("i"),m=I(),$(h.$$.fragment),g=I(),w=b("div"),$(_.$$.fragment),L=I(),O=b("div"),J&&J.c(),C=I(),U&&U.c(),S=I(),P=b("div"),P.innerHTML='<div class="iconoir-calendar"></div>',p(a,"class","ctrl ctrl-center"),p(d,"class","iconoir-more-vert"),p(c,"type","button"),p(c,"class","btn btn-sm btn-circle btn-transparent fade"),p(f,"class","ctrl ctrl-top-right"),p(r,"class","card-overlay handle"),p(t,"class","card-featured"),p(P,"class","meta-item"),p(O,"class","meta"),p(w,"class","card-content"),p(e,"class","card entrance-top")},m(de,Le){k(de,e,Le),y(e,t),K[i].m(t,null),y(t,l),y(t,r),N&&N.m(r,null),y(r,o),y(r,a),y(r,u),y(r,f),y(f,c),y(c,d),y(c,m),F(h,c,null),y(e,g),y(e,w),F(_,w,null),y(w,L),y(w,O),J&&J.m(O,null),y(O,C),U&&U.m(O,null),y(O,S),y(O,P),A=!0,M||(D=[H(f,"click",Ye(n[10])),H(r,"auxclick",n[16]),H(r,"click",n[17]),we(R=Ce.call(null,P,{text:"Created "+G.relativeDate(n[0].created),sub:G.formatToLocalDate(n[0].created)}))],M=!0)},p(de,[Le]){var dt,le;let Je=i;i=B(de),i===Je?K[i].p(de,Le):(oe(),j(K[Je],1,1,()=>{K[Je]=null}),ae(),s=K[i],s?s.p(de,Le):(s=K[i]=Y[i](de),s.c()),E(s,1),s.m(t,l)),(le=(dt=de[0].expand)==null?void 0:dt.projectUserPreferences_via_project)!=null&&le[0]?N?N.p(de,Le):(N=va(de),N.c(),N.m(r,o)):N&&(N.d(1),N=null);const ut={};Le&67108865&&(ut.$$scope={dirty:Le,ctx:de}),h.$set(ut);const st={};!T&&Le&1&&(T=!0,st.model=de[0],Ne(()=>T=!1)),_.$set(st),de[2]?J?J.p(de,Le):(J=ka(de),J.c(),J.m(O,C)):J&&(J.d(1),J=null),de[0].archived?U||(U=Sa(),U.c(),U.m(O,S)):U&&(U.d(1),U=null),R&&tt(R.update)&&Le&1&&R.update.call(null,{text:"Created "+G.relativeDate(de[0].created),sub:G.formatToLocalDate(de[0].created)})},i(de){A||(E(s),E(h.$$.fragment,de),E(_.$$.fragment,de),A=!0)},o(de){j(s),j(h.$$.fragment,de),j(_.$$.fragment,de),A=!1},d(de){de&&v(e),K[i].d(),N&&N.d(),q(h),q(_),J&&J.d(),U&&U.d(),M=!1,pe(D)}}}function Zg(n,e,t){let i,s;Q(n,vn,M=>t(9,s=M));let{project:l}=e,r=[];function o(M){var Y,K,B,N,V,ee,J,U;t(1,r=[]);const D=((B=(K=(Y=M==null?void 0:M.expand)==null?void 0:Y.prototypes_via_project)==null?void 0:K.sort(function(ce,re){return ce.created<re.created?-1:ce.created>re.created?1:0}))==null?void 0:B.slice(-3))||[];for(let ce of D){let re=null;(N=ce.screensOrder)!=null&&N[0]&&(re=(ee=(V=ce.expand)==null?void 0:V.screens_via_prototype)==null?void 0:ee.find(de=>{var Le;return de.id==((Le=ce.screensOrder)==null?void 0:Le[0])})),re||(re=(U=(J=ce.expand)==null?void 0:J.screens_via_prototype)==null?void 0:U[0]),re&&r.push(re)}}function a(M,D=!1){const Y="/projects/"+M.id+"/prototypes";D?window.open("#"+Y,"_blank").focus():wi(Y)}async function u(M){Pt(`Do you really want to delete project ${M.title} and all its related screens?`,async()=>f(M),()=>{var D;(D=document.activeElement)==null||D.blur()})}async function f(M){try{await z.collection("projects").delete(M.id),al(M),gt(`Successfully deleted project ${M.title}.`)}catch(D){D.isAbort||z.error(D)}}async function c(M){Pt(`Do you really want to archive project ${M.title}?`,async()=>d(M),()=>{var D;(D=document.activeElement)==null||D.blur()})}async function d(M){try{await z.collection("projects").update(M.id,{archived:!0}),M.archived||al(M),gt(`Successfully archived project ${M.title}.`)}catch(D){D.isAbort||z.error(D)}}async function m(M){Pt(`Do you really want to unarchive project ${M.title}?`,async()=>h(M),()=>{var D;(D=document.activeElement)==null||D.blur()})}async function h(M){try{await z.collection("projects").update(M.id,{archived:!1}),M.archived&&al(M),gt(`Successfully unarchived project ${M.title}.`)}catch(D){D.isAbort||z.error(D)}}async function g(M){if(!(M!=null&&M.id))return M;try{return M.watch=!M.watch,await z.collection("projectUserPreferences").update(M.id,{watch:M.watch})}catch(D){D.isAbort||z.error(D)}}async function w(M){if(!(M!=null&&M.id))return M;try{return M.favorite=!M.favorite,await z.collection("projectUserPreferences").update(M.id,{favorite:M.favorite})}catch(D){D.isAbort||z.error(D)}}function _(M){qe.call(this,n,M)}const T=M=>{var D,Y;w(l.expand.projectUserPreferences_via_project[0]),t(0,l),(Y=(D=M.target)==null?void 0:D.closest("button"))==null||Y.blur()},L=()=>{g(l.expand.projectUserPreferences_via_project[0]),t(0,l)},O=()=>m(l),C=()=>c(l),S=()=>u(l),P=()=>{a(l,!0)},R=()=>{a(l)};function A(M){l=M,t(0,l)}return n.$$set=M=>{"project"in M&&t(0,l=M.project)},n.$$.update=()=>{n.$$.dirty&1&&o(l),n.$$.dirty&513&&t(2,i=s.filter(M=>{var D,Y,K,B,N,V;return!M.read&&((V=(N=(B=(K=(Y=(D=M==null?void 0:M.expand)==null?void 0:D.comment)==null?void 0:Y.expand)==null?void 0:K.screen)==null?void 0:B.expand)==null?void 0:N.prototype)==null?void 0:V.project)==l.id}).length)},[l,r,i,a,u,c,m,g,w,s,_,T,L,O,C,S,P,R,A]}class Cd extends Se{constructor(e){super(),ke(this,e,Zg,Bg,ge,{project:0})}}function Ta(n,e,t){const i=n.slice();return i[20]=e[t],i[21]=e,i[22]=t,i}function Oa(n,e,t){const i=n.slice();return i[20]=e[t],i[23]=e,i[24]=t,i}function Yg(n){let e,t,i,s,l=n[4].length&&Ca(n),r=n[4].length&&n[3].length&&La(),o=n[3].length&&Ia(n);return{c(){l&&l.c(),e=I(),r&&r.c(),t=I(),o&&o.c(),i=De()},m(a,u){l&&l.m(a,u),k(a,e,u),r&&r.m(a,u),k(a,t,u),o&&o.m(a,u),k(a,i,u),s=!0},p(a,u){a[4].length?l?(l.p(a,u),u&16&&E(l,1)):(l=Ca(a),l.c(),E(l,1),l.m(e.parentNode,e)):l&&(oe(),j(l,1,1,()=>{l=null}),ae()),a[4].length&&a[3].length?r||(r=La(),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),a[3].length?o?(o.p(a,u),u&8&&E(o,1)):(o=Ia(a),o.c(),E(o,1),o.m(i.parentNode,i)):o&&(oe(),j(o,1,1,()=>{o=null}),ae())},i(a){s||(E(l),E(o),s=!0)},o(a){j(l),j(o),s=!1},d(a){a&&(v(e),v(t),v(i)),l&&l.d(a),r&&r.d(a),o&&o.d(a)}}}function Kg(n){let e;function t(l,r){return l[5]?Xg:Jg}let i=t(n),s=i(n);return{c(){s.c(),e=De()},m(l,r){s.m(l,r),k(l,e,r)},p(l,r){i===(i=t(l))&&s?s.p(l,r):(s.d(1),s=i(l),s&&(s.c(),s.m(e.parentNode,e)))},i:X,o:X,d(l){l&&v(e),s.d(l)}}}function Gg(n){let e;return{c(){e=b("div"),e.innerHTML='<span class="loader loader-lg"></span>',p(e,"class","block txt-center m-t-lg")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function Ca(n){let e,t=[],i=new Map,s,l=Ie(n[4]);const r=o=>o[20].id;for(let o=0;o<l.length;o+=1){let a=Oa(n,l,o),u=r(a);i.set(u,t[o]=Ea(u,a))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();p(e,"class","cards-list")},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);s=!0},p(o,a){a&16&&(l=Ie(o[4]),oe(),t=Tt(t,a,r,1,o,l,i,e,At,Ea,null,Oa),ae())},i(o){if(!s){for(let a=0;a<l.length;a+=1)E(t[a]);s=!0}},o(o){for(let a=0;a<t.length;a+=1)j(t[a]);s=!1},d(o){o&&v(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Ea(n,e){let t,i,s,l;function r(a){e[15](a,e[20],e[23],e[24])}let o={};return e[20]!==void 0&&(o.project=e[20]),i=new Cd({props:o}),se.push(()=>Ae(i,"project",r)),{key:n,first:null,c(){t=De(),$(i.$$.fragment),this.first=t},m(a,u){k(a,t,u),F(i,a,u),l=!0},p(a,u){e=a;const f={};!s&&u&16&&(s=!0,f.project=e[20],Ne(()=>s=!1)),i.$set(f)},i(a){l||(E(i.$$.fragment,a),l=!0)},o(a){j(i.$$.fragment,a),l=!1},d(a){a&&v(t),q(i,a)}}}function La(n){let e;return{c(){e=b("hr")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function Ia(n){let e,t=[],i=new Map,s,l=Ie(n[3]);const r=o=>o[20].id;for(let o=0;o<l.length;o+=1){let a=Ta(n,l,o),u=r(a);i.set(u,t[o]=ja(u,a))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();p(e,"class","cards-list")},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);s=!0},p(o,a){a&8&&(l=Ie(o[3]),oe(),t=Tt(t,a,r,1,o,l,i,e,At,ja,null,Ta),ae())},i(o){if(!s){for(let a=0;a<l.length;a+=1)E(t[a]);s=!0}},o(o){for(let a=0;a<t.length;a+=1)j(t[a]);s=!1},d(o){o&&v(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function ja(n,e){let t,i,s,l;function r(a){e[16](a,e[20],e[21],e[22])}let o={};return e[20]!==void 0&&(o.project=e[20]),i=new Cd({props:o}),se.push(()=>Ae(i,"project",r)),{key:n,first:null,c(){t=De(),$(i.$$.fragment),this.first=t},m(a,u){k(a,t,u),F(i,a,u),l=!0},p(a,u){e=a;const f={};!s&&u&8&&(s=!0,f.project=e[20],Ne(()=>s=!1)),i.$set(f)},i(a){l||(E(i.$$.fragment,a),l=!0)},o(a){j(i.$$.fragment,a),l=!1},d(a){a&&v(t),q(i,a)}}}function Jg(n){let e,t,i,s,l,r,o,a,u,f;return{c(){e=b("div"),t=b("div"),t.innerHTML='<i class="iconoir-grid-plus"></i>',i=I(),s=b("h6"),s.textContent="You don't have any active projects yet!",l=I(),r=b("div"),r.innerHTML="<p>Create a new project to share your designs, collect feedback and more.</p>",o=I(),a=b("button"),a.innerHTML='<i class="iconoir-plus"></i> <span class="txt">New project</span>',p(t,"class","icon"),p(s,"class","title"),p(r,"class","content"),p(a,"type","button"),p(a,"class","btn btn-expanded btn-primary btn-lg m-t-base"),p(e,"class","placeholder-block entrance-top")},m(c,d){k(c,e,d),y(e,t),y(e,i),y(e,s),y(e,l),y(e,r),y(e,o),y(e,a),u||(f=H(a,"click",n[14]),u=!0)},p:X,d(c){c&&v(e),u=!1,f()}}}function Xg(n){let e;return{c(){e=b("div"),e.innerHTML='<div class="icon"><i class="iconoir-grid-xmark"></i></div> <h6 class="title">No projects found!</h6>',p(e,"class","placeholder-block m-b-sm entrance-top")},m(t,i){k(t,e,i)},p:X,d(t){t&&v(e)}}}function Pa(n){let e,t,i,s,l;return{c(){e=b("button"),e.innerHTML='<span class="txt">Load more</span>',t=I(),i=b("div"),p(e,"type","button"),p(e,"class","btn btn-semitransparent btn-expanded btn-lg m-b-sm entrance-top"),Z(e,"btn-disabled",n[7]),Z(e,"btn-loading",n[7]),p(i,"class","clearfix")},m(r,o){k(r,e,o),k(r,t,o),k(r,i,o),s||(l=H(e,"click",n[17]),s=!0)},p(r,o){o&128&&Z(e,"btn-disabled",r[7]),o&128&&Z(e,"btn-loading",r[7])},d(r){r&&(v(e),v(t),v(i)),s=!1,l()}}}function Na(n){let e,t,i;return{c(){e=b("button"),e.textContent="Reset filters",p(e,"type","button"),p(e,"class","btn btn-transparent btn-hint btn-expanded entrance-top")},m(s,l){k(s,e,l),t||(i=H(e,"click",n[9]),t=!0)},p:X,d(s){s&&v(e),t=!1,i()}}}function Qg(n){let e,t,i,s,l,r,o,a;const u=[Gg,Kg,Yg],f=[];function c(g,w){return g[7]&&!g[0].length?0:!g[7]&&!g[0].length?1:2}e=c(n),t=f[e]=u[e](n);let d=n[6]&&Pa(n),m=!n[7]&&n[5]&&Na(n),h={};return o=new Od({props:h}),n[18](o),{c(){t.c(),i=I(),s=b("div"),d&&d.c(),l=I(),m&&m.c(),r=I(),$(o.$$.fragment),p(s,"class","block txt-center m-t-base")},m(g,w){f[e].m(g,w),k(g,i,w),k(g,s,w),d&&d.m(s,null),y(s,l),m&&m.m(s,null),k(g,r,w),F(o,g,w),a=!0},p(g,[w]){let _=e;e=c(g),e===_?f[e].p(g,w):(oe(),j(f[_],1,1,()=>{f[_]=null}),ae(),t=f[e],t?t.p(g,w):(t=f[e]=u[e](g),t.c()),E(t,1),t.m(i.parentNode,i)),g[6]?d?d.p(g,w):(d=Pa(g),d.c(),d.m(s,l)):d&&(d.d(1),d=null),!g[7]&&g[5]?m?m.p(g,w):(m=Na(g),m.c(),m.m(s,null)):m&&(m.d(1),m=null);const T={};o.$set(T)},i(g){a||(E(t),E(o.$$.fragment,g),a=!0)},o(g){j(t),j(o.$$.fragment,g),a=!1},d(g){g&&(v(i),v(s),v(r)),f[e].d(g),d&&d.d(),m&&m.d(),n[18](null),q(o,g)}}}const Aa=50;function xg(n,e,t){let i,s,l,r,o,a;Q(n,rn,P=>t(7,o=P)),Q(n,ss,P=>t(0,a=P));let{search:u=""}=e,{archived:f=!1}=e,c,d=1,m=0,h;w();async function g(P=1){P<=1&&w(),Te(rn,o=!0,o);let R=`project.archived=${f}`;return u&&(R+=z.filter("&&project.title~{:title}",{title:u})),z.collection("projectUserPreferences").getList(P,Aa,{sort:"-favorite,-lastVisited,-project.created",filter:R,skipTotal:1,expand:"project.prototypes_via_project.screens_via_prototype",requestKey:"projects_list"}).then(A=>{var M;t(2,d=A.page),t(12,m=A.items.length);for(const D of A.items){const Y=(M=D.expand)==null?void 0:M.project;if(!Y){console.warn("missing project for preference",D.id);continue}delete D.expand,Y.expand=Y.expand||{},Y.expand.projectUserPreferences_via_project=[D],Qn(Y)}Te(rn,o=!1,o)}).catch(A=>{A!=null&&A.isAbort||(Te(rn,o=!1,o),z.error(A))})}function w(){Zs(),t(12,m=0),t(2,d=1)}function _(){t(10,u=""),t(11,f=!1)}const T=()=>c==null?void 0:c.show();function L(P,R,A,M){A[M]=P,t(4,l),t(0,a)}function O(P,R,A,M){A[M]=P,t(3,r),t(0,a)}const C=()=>g(d+1);function S(P){se[P?"unshift":"push"](()=>{c=P,t(1,c)})}return n.$$set=P=>{"search"in P&&t(10,u=P.search),"archived"in P&&t(11,f=P.archived)},n.$$.update=()=>{n.$$.dirty&4096&&t(6,i=m==Aa),n.$$.dirty&11264&&(u!==-1||f!==-1)&&(Te(rn,o=!0,o),clearTimeout(h),t(13,h=setTimeout(()=>g(1),50))),n.$$.dirty&3072&&t(5,s=u||f),n.$$.dirty&1&&t(4,l=a.filter(P=>{var R,A,M;return(M=(A=(R=P.expand)==null?void 0:R.projectUserPreferences_via_project)==null?void 0:A[0])==null?void 0:M.favorite})),n.$$.dirty&1&&t(3,r=a.filter(P=>{var R,A,M;return!((M=(A=(R=P.expand)==null?void 0:R.projectUserPreferences_via_project)==null?void 0:A[0])!=null&&M.favorite)}))},[a,c,d,r,l,s,i,o,g,_,u,f,m,h,T,L,O,C,S]}class eb extends Se{constructor(e){super(),ke(this,e,xg,Qg,ge,{search:10,archived:11})}}function tb(n){let e,t,i;function s(r){n[5](r)}let l={class:"projects-filter-select fade m-l-xs",items:n[3]};return n[2]!==void 0&&(l.keyOfSelected=n[2]),e=new pn({props:l}),se.push(()=>Ae(e,"keyOfSelected",s)),{c(){$(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};!t&&o&4&&(t=!0,a.keyOfSelected=r[2],Ne(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){j(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function nb(n){let e,t,i,s,l,r,o;function a(m){n[6](m)}let u={placeholder:"Search projects...",$$slots:{suffix:[tb]},$$scope:{ctx:n}};n[1]!==void 0&&(u.value=n[1]),e=new kd({props:u}),se.push(()=>Ae(e,"value",a));function f(m){n[7](m)}function c(m){n[8](m)}let d={};return n[1]!==void 0&&(d.search=n[1]),n[2]!==void 0&&(d.archived=n[2]),s=new eb({props:d}),se.push(()=>Ae(s,"search",f)),se.push(()=>Ae(s,"archived",c)),{c(){$(e.$$.fragment),i=I(),$(s.$$.fragment)},m(m,h){F(e,m,h),k(m,i,h),F(s,m,h),o=!0},p(m,h){const g={};h&1028&&(g.$$scope={dirty:h,ctx:m}),!t&&h&2&&(t=!0,g.value=m[1],Ne(()=>t=!1)),e.$set(g);const w={};!l&&h&2&&(l=!0,w.search=m[1],Ne(()=>l=!1)),!r&&h&4&&(r=!0,w.archived=m[2],Ne(()=>r=!1)),s.$set(w)},i(m){o||(E(e.$$.fragment,m),E(s.$$.fragment,m),o=!0)},o(m){j(e.$$.fragment,m),j(s.$$.fragment,m),o=!1},d(m){m&&v(i),q(e,m),q(s,m)}}}function ib(n){let e,t;return{c(){e=b("nav"),t=b("div"),t.textContent=`${Ed}`,p(t,"class","breadcrumb-item"),p(e,"class","breadcrumbs")},m(i,s){k(i,e,s),y(e,t)},p:X,d(i){i&&v(e)}}}function sb(n){let e,t,i;return{c(){e=b("button"),e.innerHTML='<i class="iconoir-plus"></i> <div class="txt">New project</div>',p(e,"type","button"),p(e,"class","btn btn-primary")},m(s,l){k(s,e,l),t||(i=H(e,"click",n[4]),t=!0)},p:X,d(s){s&&v(e),t=!1,i()}}}function lb(n){let e,t,i,s;e=new Pi({props:{title:Ed,$$slots:{"header-right":[sb],"header-left":[ib],default:[nb]},$$scope:{ctx:n}}});let l={};return i=new Od({props:l}),n[9](i),{c(){$(e.$$.fragment),t=I(),$(i.$$.fragment)},m(r,o){F(e,r,o),k(r,t,o),F(i,r,o),s=!0},p(r,[o]){const a={};o&1031&&(a.$$scope={dirty:o,ctx:r}),e.$set(a);const u={};i.$set(u)},i(r){s||(E(e.$$.fragment,r),E(i.$$.fragment,r),s=!0)},o(r){j(e.$$.fragment,r),j(i.$$.fragment,r),s=!1},d(r){r&&v(t),q(e,r),n[9](null),q(i,r)}}}const Ed="Projects";function rb(n,e,t){const i=[{label:"Active projects",value:!1},{label:"Archived projects",value:!0}];let s,l="",r=!1;const o=()=>s==null?void 0:s.show();function a(m){r=m,t(2,r)}function u(m){l=m,t(1,l)}function f(m){l=m,t(1,l)}function c(m){r=m,t(2,r)}function d(m){se[m?"unshift":"push"](()=>{s=m,t(0,s)})}return[s,l,r,i,o,a,u,f,c,d]}class ob extends Se{constructor(e){super(),ke(this,e,rb,lb,ge,{})}}function ab(n){let e,t,i,s,l,r,o,a;return{c(){e=b("label"),t=x("Title"),s=I(),l=b("input"),p(e,"for",i=n[18]),p(l,"type","text"),p(l,"id",r=n[18]),l.required=!0},m(u,f){k(u,e,f),y(e,t),k(u,s,f),k(u,l,f),be(l,n[1].title),o||(a=[H(l,"input",n[9]),H(l,"input",n[10])],o=!0)},p(u,f){f&262144&&i!==(i=u[18])&&p(e,"for",i),f&262144&&r!==(r=u[18])&&p(l,"id",r),f&2&&l.value!==u[1].title&&be(l,u[1].title)},d(u){u&&(v(e),v(s),v(l)),o=!1,pe(a)}}}function ub(n){let e,t,i,s,l,r,o,a,u,f;t=new Ee({props:{class:"form-field required",name:"title",$$slots:{default:[ab,({uniqueId:m})=>({18:m}),({uniqueId:m})=>m?262144:0]},$$scope:{ctx:n}}});function c(m){n[11](m)}let d={};return n[1]!==void 0&&(d.prototype=n[1]),r=new Td({props:d}),se.push(()=>Ae(r,"prototype",c)),{c(){e=b("form"),$(t.$$.fragment),i=I(),s=b("div"),s.innerHTML='Type<sup class="txt-danger">*</sup>',l=I(),$(r.$$.fragment),p(s,"class","block m-b-10"),p(e,"id",n[5]),p(e,"class","content")},m(m,h){k(m,e,h),F(t,e,null),y(e,i),y(e,s),y(e,l),F(r,e,null),a=!0,u||(f=H(e,"submit",ye(n[6])),u=!0)},p(m,h){const g={};h&786438&&(g.$$scope={dirty:h,ctx:m}),t.$set(g);const w={};!o&&h&2&&(o=!0,w.prototype=m[1],Ne(()=>o=!1)),r.$set(w)},i(m){a||(E(t.$$.fragment,m),E(r.$$.fragment,m),a=!0)},o(m){j(t.$$.fragment,m),j(r.$$.fragment,m),a=!1},d(m){m&&v(e),q(t),q(r),u=!1,f()}}}function fb(n){let e,t=n[1].id?"Update prototype":"Create prototype",i;return{c(){e=b("h5"),i=x(t),p(e,"class","block txt-center")},m(s,l){k(s,e,l),y(e,i)},p(s,l){l&2&&t!==(t=s[1].id?"Update prototype":"Create prototype")&&ve(i,t)},d(s){s&&v(e)}}}function cb(n){let e,t,i,s,l,r=n[1].id?"Update prototype":"Create prototype",o,a,u;return{c(){e=b("button"),t=b("span"),t.textContent="Cancel",i=I(),s=b("button"),l=b("span"),o=x(r),p(t,"class","txt"),p(e,"type","button"),p(e,"class","btn btn-transparent"),e.disabled=n[4],p(l,"class","txt"),p(s,"type","submit"),p(s,"form",n[5]),p(s,"class","btn btn-expanded btn-primary m-l-auto"),s.disabled=n[4],Z(s,"btn-loading",n[4])},m(f,c){k(f,e,c),y(e,t),k(f,i,c),k(f,s,c),y(s,l),y(l,o),a||(u=H(e,"click",n[8]),a=!0)},p(f,c){c&16&&(e.disabled=f[4]),c&2&&r!==(r=f[1].id?"Update prototype":"Create prototype")&&ve(o,r),c&16&&(s.disabled=f[4]),c&16&&Z(s,"btn-loading",f[4])},d(f){f&&(v(e),v(i),v(s)),a=!1,u()}}}function db(n){let e,t,i={popup:!0,overlayClose:!n[4],escHide:!n[4],beforeHide:n[12],$$slots:{footer:[cb],header:[fb],default:[ub]},$$scope:{ctx:n}};return e=new mn({props:i}),n[13](e),e.$on("show",n[14]),e.$on("hide",n[15]),{c(){$(e.$$.fragment)},m(s,l){F(e,s,l),t=!0},p(s,[l]){const r={};l&16&&(r.overlayClose=!s[4]),l&16&&(r.escHide=!s[4]),l&16&&(r.beforeHide=s[12]),l&524310&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){n[13](null),q(e,s)}}}function pb(n,e,t){const i="prototype_"+G.randomString(5),s=it();let l,r={},o=!1,a=!1;function u(C){return c(),t(1,r=Object.assign({},C)),l==null?void 0:l.show()}function f(){return l==null?void 0:l.hide()}function c(){Jt({}),t(2,a=!1)}async function d(){if(!(!r.project||o)){t(4,o=!0);try{let C;r.id?(C=await z.collection("prototypes").update(r.id,r),gt(`Successfully updated prototype ${r.title}.`)):(C=await z.collection("prototypes").create(r),gt(`Successfully created prototype ${r.title}.`)),t(4,o=!1),f(),s("submit",C)}catch(C){C.isAbort||(t(4,o=!1),z.error(C))}}}const m=()=>f(),h=()=>{t(2,a=!0)};function g(){r.title=this.value,t(1,r),t(2,a)}function w(C){r=C,t(1,r),t(2,a)}const _=()=>!o;function T(C){se[C?"unshift":"push"](()=>{l=C,t(3,l)})}function L(C){qe.call(this,n,C)}function O(C){qe.call(this,n,C)}return n.$$.update=()=>{n.$$.dirty&6&&!a&&!r.id&&t(1,r.title=r.size?"Mobile":"Desktop",r)},[f,r,a,l,o,i,d,u,m,h,g,w,_,T,L,O]}class mb extends Se{constructor(e){super(),ke(this,e,pb,db,ge,{show:7,hide:0})}get show(){return this.$$.ctx[7]}get hide(){return this.$$.ctx[0]}}const hb=n=>({}),Ma=n=>({});function Da(n,e,t){const i=n.slice();return i[19]=e[t],i}const _b=n=>({}),Ra=n=>({});function gb(n){let e,t,i=[],s=new Map,l,r,o,a,u,f;const c=n[9].before,d=lt(c,n,n[16],Ra);let m=Ie(n[2]);const h=_=>_[19].id;for(let _=0;_<m.length;_+=1){let T=Da(n,m,_),L=h(T);s.set(L,i[_]=Ha(L,T))}const g=n[9].after,w=lt(g,n,n[16],Ma);return{c(){e=b("nav"),d&&d.c(),t=I();for(let _=0;_<i.length;_+=1)i[_].c();l=I(),r=b("button"),r.innerHTML='<i class="iconoir-plus"></i>',o=I(),w&&w.c(),p(r,"type","button"),p(r,"class","btn btn-circle btn-transparent link-hint"),p(e,"class","prototypes-bar entrance-left svelte-fzv0qw")},m(_,T){k(_,e,T),d&&d.m(e,null),y(e,t);for(let L=0;L<i.length;L+=1)i[L]&&i[L].m(e,null);y(e,l),y(e,r),y(e,o),w&&w.m(e,null),a=!0,u||(f=[we(Ce.call(null,r,{text:"New prototype",position:"right"})),H(r,"click",n[6])],u=!0)},p(_,T){d&&d.p&&(!a||T&65536)&&ot(d,c,_,_[16],a?rt(c,_[16],T,_b):at(_[16]),Ra),T&61&&(m=Ie(_[2]),oe(),i=Tt(i,T,h,1,_,m,s,e,At,Ha,l,Da),ae()),w&&w.p&&(!a||T&65536)&&ot(w,g,_,_[16],a?rt(g,_[16],T,hb):at(_[16]),Ma)},i(_){if(!a){E(d,_);for(let T=0;T<m.length;T+=1)E(i[T]);E(w,_),a=!0}},o(_){j(d,_);for(let T=0;T<i.length;T+=1)j(i[T]);j(w,_),a=!1},d(_){_&&v(e),d&&d.d(_);for(let T=0;T<i.length;T+=1)i[T].d();w&&w.d(_),u=!1,pe(f)}}}function bb(n){let e,t,i,s,l,r,o,a,u,f;return{c(){e=b("div"),t=b("div"),t.innerHTML='<i class="iconoir-pen-tablet"></i>',i=I(),s=b("h6"),s.textContent="The project doesn't have any prototypes yet!",l=I(),r=b("div"),r.innerHTML="<p>Create a new desktop or mobile prototype.</p>",o=I(),a=b("button"),a.innerHTML='<i class="iconoir-plus"></i> <span class="txt">New prototype</span>',p(t,"class","icon"),p(s,"class","title"),p(r,"class","content"),p(a,"type","button"),p(a,"class","btn btn-expanded btn-primary btn-lg m-t-base"),p(e,"class","placeholder-block entrance-top")},m(c,d){k(c,e,d),y(e,t),y(e,i),y(e,s),y(e,l),y(e,r),y(e,o),y(e,a),u||(f=H(a,"click",n[6]),u=!0)},p:X,i:X,o:X,d(c){c&&v(e),u=!1,f()}}}function wb(n){let e;return{c(){e=b("div"),e.innerHTML='<span class="loader loader-lg"></span>',p(e,"class","block txt-center m-t-lg")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function yb(n){let e,t,i,s,l,r,o,a,u;function f(){return n[10](n[19])}function c(){return n[11](n[19])}function d(){return n[12](n[19])}return{c(){e=b("button"),e.innerHTML='<i class="iconoir-edit-pencil"></i> <span class="txt">Edit</span>',t=I(),i=b("button"),i.innerHTML='<i class="iconoir-copy"></i> <span class="txt">Duplicate</span>',s=I(),l=b("hr"),r=I(),o=b("button"),o.innerHTML='<i class="iconoir-trash"></i> <span class="txt">Delete</span>',p(e,"type","button"),p(e,"class","dropdown-item closable"),p(i,"type","button"),p(i,"class","dropdown-item closable"),p(o,"type","button"),p(o,"class","dropdown-item link-danger closable")},m(m,h){k(m,e,h),k(m,t,h),k(m,i,h),k(m,s,h),k(m,l,h),k(m,r,h),k(m,o,h),a||(u=[H(e,"click",ye(f)),H(i,"click",ye(c)),H(o,"click",ye(d))],a=!0)},p(m,h){n=m},d(m){m&&(v(e),v(t),v(i),v(s),v(l),v(r),v(o)),a=!1,pe(u)}}}function Ha(n,e){let t,i,s,l,r,o=e[19].title+"",a,u,f,c,d,m,h,g,w,_,T;h=new Rt({props:{class:"dropdown dropdown-nowrap dropdown-sm dropdown-right",$$slots:{default:[yb]},$$scope:{ctx:e}}});function L(){return e[13](e[19])}return{key:n,first:null,c(){var O;t=b("button"),i=b("i"),l=I(),r=b("span"),a=x(o),u=I(),f=b("div"),c=b("div"),d=b("i"),m=I(),$(h.$$.fragment),p(i,"class",s=Tr(G.getPrototypeIcon(e[19]))+" svelte-fzv0qw"),p(r,"class","txt txt-ellipsis"),p(d,"class","iconoir-more-vert txt-sm txt-sm"),p(c,"class","meta-item"),p(f,"class","meta"),p(t,"type","button"),p(t,"class",g="btn "+(((O=e[3])==null?void 0:O.id)==e[19].id?"btn-semitransparent":"btn-transparent link-hint")),this.first=t},m(O,C){k(O,t,C),y(t,i),y(t,l),y(t,r),y(r,a),y(t,u),y(t,f),y(f,c),y(c,d),y(c,m),F(h,c,null),w=!0,_||(T=H(t,"click",ye(L)),_=!0)},p(O,C){var P;e=O,(!w||C&4&&s!==(s=Tr(G.getPrototypeIcon(e[19]))+" svelte-fzv0qw"))&&p(i,"class",s),(!w||C&4)&&o!==(o=e[19].title+"")&&ve(a,o);const S={};C&65541&&(S.$$scope={dirty:C,ctx:e}),h.$set(S),(!w||C&12&&g!==(g="btn "+(((P=e[3])==null?void 0:P.id)==e[19].id?"btn-semitransparent":"btn-transparent link-hint")))&&p(t,"class",g)},i(O){w||(E(h.$$.fragment,O),w=!0)},o(O){j(h.$$.fragment,O),w=!1},d(O){O&&v(t),q(h),_=!1,T()}}}function vb(n){let e,t,i,s,l;const r=[wb,bb,gb],o=[];function a(f,c){return f[1]?0:!f[1]&&!f[2].length?1:2}e=a(n),t=o[e]=r[e](n);let u={};return s=new mb({props:u}),n[14](s),s.$on("submit",n[15]),{c(){t.c(),i=I(),$(s.$$.fragment)},m(f,c){o[e].m(f,c),k(f,i,c),F(s,f,c),l=!0},p(f,[c]){let d=e;e=a(f),e===d?o[e].p(f,c):(oe(),j(o[d],1,1,()=>{o[d]=null}),ae(),t=o[e],t?t.p(f,c):(t=o[e]=r[e](f),t.c()),E(t,1),t.m(i.parentNode,i));const m={};s.$set(m)},i(f){l||(E(t),E(s.$$.fragment,f),l=!0)},o(f){j(t),j(s.$$.fragment,f),l=!1},d(f){f&&v(i),o[e].d(f),n[14](null),q(s,f)}}}function kb(n,e,t){let i,s,l;Q(n,ui,S=>t(1,i=S)),Q(n,$t,S=>t(2,s=S)),Q(n,Et,S=>t(3,l=S));let{$$slots:r={},$$scope:o}=e,{projectId:a}=e,{initialPrototypeId:u=""}=e,f;async function c(S,P){if(S){Te(ui,i=!0,i);try{Te(Et,l=P,l),Te($t,s=await z.collection("prototypes").getFullList({filter:`project="${S}"`,sort:"created"}),s),Te(ui,i=!1,i)}catch(R){R!=null&&R.isAbort||(z.error(R),Te(ui,i=!1,i))}}}function d(S){S!=null&&S.id&&Pt("Do you really want to delete the selected prototype and all its screens?",()=>z.collection("prototypes").delete(S.id).then(()=>{cd(S),gt(`Successfully deleted prototype ${S.title}.`)}).catch(P=>{z.error(P)}))}function m(S){Pt("Do you really want to duplicate the selected prototype and all of its screens and hotspots?",async()=>h(S))}async function h(S){if(S!=null&&S.id)try{const P=await z.send("/api/pr/duplicate-prototype/"+encodeURIComponent(S.id),{method:"POST"});vi(P,!0)}catch(P){P.isAbort||z.error(P)}}function g(){f==null||f.show({project:a})}const w=S=>f==null?void 0:f.show(S),_=S=>m(S),T=S=>d(S),L=S=>{Te(Et,l=S.id,l)};function O(S){se[S?"unshift":"push"](()=>{f=S,t(0,f)})}const C=S=>{S.detail&&vi(S.detail,!0)};return n.$$set=S=>{"projectId"in S&&t(7,a=S.projectId),"initialPrototypeId"in S&&t(8,u=S.initialPrototypeId),"$$scope"in S&&t(16,o=S.$$scope)},n.$$.update=()=>{n.$$.dirty&384&&c(a,u)},[f,i,s,l,d,m,g,a,u,r,w,_,T,L,O,C,o]}class Sb extends Se{constructor(e){super(),ke(this,e,kb,vb,ge,{projectId:7,initialPrototypeId:8})}}function Ld(n,{from:e,to:t},i={}){const s=getComputedStyle(n),l=s.transform==="none"?"":s.transform,[r,o]=s.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*r/t.width-(t.left+r),u=e.top+e.height*o/t.height-(t.top+o),{delay:f=0,duration:c=m=>Math.sqrt(m)*120,easing:d=lr}=i;return{delay:f,duration:tt(c)?c(Math.sqrt(a*a+u*u)):c,easing:d,css:(m,h)=>{const g=h*a,w=h*u,_=m+h*e.width/t.width,T=m+h*e.height/t.height;return`transform: ${l} translate(${g}px, ${w}px) scale(${_}, ${T});`}}}const Tb=n=>({dragover:n&1}),Ua=n=>({dragover:n[0]});function Ob(n){let e,t,i,s;const l=n[3].default,r=lt(l,n,n[2],Ua);return{c(){e=b("div"),r&&r.c()},m(o,a){k(o,e,a),r&&r.m(e,null),t=!0,i||(s=[H(e,"dragover",Ye(ye(n[4]))),H(e,"dragenter",Ye(ye(n[5]))),H(e,"dragleave",ye(n[6])),H(e,"drop",Ye(ye(n[7])))],i=!0)},p(o,[a]){r&&r.p&&(!t||a&5)&&ot(r,l,o,o[2],t?rt(l,o[2],a,Tb):at(o[2]),Ua)},i(o){t||(E(r,o),t=!0)},o(o){j(r,o),t=!1},d(o){o&&v(e),r&&r.d(o),i=!1,pe(s)}}}function Cb(n,e,t){let{$$slots:i={},$$scope:s}=e;const l=it();let r=!1;function o(c){qe.call(this,n,c)}const a=c=>{t(0,r=!0),l("dragenter")},u=c=>{c.currentTarget.contains(c.relatedTarget)||(c.stopPropagation(),t(0,r=!1),l("dragleave"))},f=c=>{t(0,r=!1),c.dataTransfer.files.length&&l("drop",c.dataTransfer.files)};return n.$$set=c=>{"$$scope"in c&&t(2,s=c.$$scope)},[r,l,s,i,o,a,u,f]}class Id extends Se{constructor(e){super(),ke(this,e,Cb,Ob,ge,{})}}const Eb=n=>({dragging:n&4,dragover:n&8}),Fa=n=>({dragging:n[2],dragover:n[3]});function Lb(n){let e,t,i,s,l;const r=n[10].default,o=lt(r,n,n[9],Fa);return{c(){e=b("div"),o&&o.c(),p(e,"draggable",t=!n[1]),p(e,"class","sortable svelte-beosc3"),Z(e,"dragging",n[2]),Z(e,"dragover",n[3])},m(a,u){k(a,e,u),o&&o.m(e,null),i=!0,s||(l=[H(e,"dragover",ye(n[11])),H(e,"dragleave",ye(n[12])),H(e,"dragend",n[13]),H(e,"dragstart",n[14]),H(e,"drop",ye(n[15]))],s=!0)},p(a,[u]){o&&o.p&&(!i||u&524)&&ot(o,r,a,a[9],i?rt(r,a[9],u,Eb):at(a[9]),Fa),(!i||u&2&&t!==(t=!a[1]))&&p(e,"draggable",t),(!i||u&4)&&Z(e,"dragging",a[2]),(!i||u&8)&&Z(e,"dragover",a[3])},i(a){i||(E(o,a),i=!0)},o(a){j(o,a),i=!1},d(a){a&&v(e),o&&o.d(a),s=!1,pe(l)}}}function Ib(n,e,t){let{$$slots:i={},$$scope:s}=e;const l=it();let{index:r}=e,{list:o=[]}=e,{group:a="default"}=e,{disabled:u=!1}=e,{dragHandleClass:f=""}=e,c=!1,d=!1;function m(O,C){if(!(!O||u)){if(f&&!O.target.classList.contains(f)){t(3,d=!1),t(2,c=!1),O.preventDefault();return}t(2,c=!0),O.dataTransfer.effectAllowed="move",O.dataTransfer.dropEffect="move",O.dataTransfer.setData("text/plain",JSON.stringify({index:C,group:a})),l("drag",O)}}function h(O,C){if(t(3,d=!1),t(2,c=!1),!O||u)return;O.dataTransfer.dropEffect="move";let S={};try{S=JSON.parse(O.dataTransfer.getData("text/plain"))}catch{}if(S.group!=a)return;const P=S.index<<0;P<C?(o.splice(C+1,0,o[P]),o.splice(P,1)):(o.splice(C,0,o[P]),o.splice(P+1,1)),t(6,o),l("sort",{oldIndex:P,newIndex:C,list:o})}const g=()=>{t(3,d=!0)},w=()=>{t(3,d=!1)},_=()=>{t(3,d=!1),t(2,c=!1)},T=O=>m(O,r),L=O=>h(O,r);return n.$$set=O=>{"index"in O&&t(0,r=O.index),"list"in O&&t(6,o=O.list),"group"in O&&t(7,a=O.group),"disabled"in O&&t(1,u=O.disabled),"dragHandleClass"in O&&t(8,f=O.dragHandleClass),"$$scope"in O&&t(9,s=O.$$scope)},[r,u,c,d,m,h,o,a,f,s,i,g,w,_,T,L]}class jb extends Se{constructor(e){super(),ke(this,e,Ib,Lb,ge,{index:0,list:6,group:7,disabled:1,dragHandleClass:8})}}const Pb=n=>({uniqueId:n&1,isUploading:n&4,dragover:n&16384}),qa=n=>({uniqueId:n[0],isUploading:n[2],dragover:n[14]});function Nb(n){let e,t,i,s,l;const r=n[4].default,o=lt(r,n,n[10],qa);return{c(){e=b("input"),t=I(),o&&o.c(),e.multiple=!0,p(e,"id",n[0]),p(e,"type","file"),p(e,"accept","image/*"),p(e,"class","hidden")},m(a,u){k(a,e,u),n[7](e),k(a,t,u),o&&o.m(a,u),i=!0,s||(l=H(e,"change",n[8]),s=!0)},p(a,u){(!i||u&1)&&p(e,"id",a[0]),o&&o.p&&(!i||u&17413)&&ot(o,r,a,a[10],i?rt(r,a[10],u,Pb):at(a[10]),qa)},i(a){i||(E(o,a),i=!0)},o(a){j(o,a),i=!1},d(a){a&&(v(e),v(t)),n[7](null),o&&o.d(a),s=!1,l()}}}function Ab(n){let e,t,i,s;return e=new Id({props:{$$slots:{default:[Nb,({dragover:l})=>({14:l}),({dragover:l})=>l?16384:0]},$$scope:{ctx:n}}}),e.$on("drop",n[9]),{c(){$(e.$$.fragment)},m(l,r){F(e,l,r),t=!0,i||(s=[H(window,"drop",ye(n[6])),H(window,"dragover",Ye(ye(n[5])))],i=!0)},p(l,[r]){const o={};r&17415&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){q(e,l),i=!1,pe(s)}}}function Mb(n,e,t){let i,s;Q(n,Et,_=>t(11,i=_)),Q(n,pt,_=>t(12,s=_));let{$$slots:l={},$$scope:r}=e;const o=it();let{id:a="uploader_"+G.randomString(5)}=e,u,f=!1;async function c(_){if(f||!(i!=null&&i.id)||!(_!=null&&_.length))return;t(2,f=!0);const T=[];let L=[];for(let S=0;S<_.length;S++){const P=_.item(S);let R="s"+S;R+=G.randomString(15-R.length);const A=s==null?void 0:s[s.length-1],M=new FormData;M.append("id",R),M.append("file",P),M.append("title",P.name.split(".").slice(0,-1).join(".")||P.name),M.append("prototype",i.id),M.append("background",(A==null?void 0:A.background)||""),M.append("alignment",(A==null?void 0:A.alignment)||""),T.push(z.collection("screens").create(M,{requestKey:null})),L.push(R)}const O=[],C={};try{const S=await Promise.allSettled(T);for(const R of S)R.status==="fulfilled"?(C[R.value.id]=R.value,An(R.value)):O.push(R);L=L.filter(R=>!!C[R]);const P=await z.collection("prototypes").update(i.id,{screensOrder:i.screensOrder.concat(L)},{$autoCancel:!1});vi(P),o("upload",Object.values(C)),u&&t(1,u.value="",u)}catch(S){console.warn("screens upload error:",S)}O.length>0&&(console.warn("failed to upload:",O),tr("Failed to upload some of the selected files.")),t(2,f=!1)}function d(_){qe.call(this,n,_)}const m=_=>{c(_.dataTransfer.files)};function h(_){se[_?"unshift":"push"](()=>{u=_,t(1,u)})}const g=_=>c(_.target.files),w=_=>{c(_.detail)};return n.$$set=_=>{"id"in _&&t(0,a=_.id),"$$scope"in _&&t(10,r=_.$$scope)},[a,u,f,c,l,d,m,h,g,w,r]}class Db extends Se{constructor(e){super(),ke(this,e,Mb,Ab,ge,{id:0})}}function $a(n,e,t){const i=n.slice();return i[43]=e[t],i}function Wa(n,e,t){var o,a,u,f,c;const i=n.slice();i[48]=e[t],i[52]=e,i[53]=t;const s=(o=i[10])==null?void 0:o.filter(function(...m){return n[32](i[48],...m)}).length;i[49]=s;const l=(a=i[10])==null?void 0:a.filter(function(...m){return n[33](i[48],...m)}).map(d=>{var m,h;return(h=(m=d.expand)==null?void 0:m.comment)==null?void 0:h.id});i[50]=l;const r=i[50].length+(((c=(f=(u=i[48].expand)==null?void 0:u.comments_via_screen)==null?void 0:f.filter(function(...m){return n[34](i[50],...m)}))==null?void 0:c.length)||0);return i[51]=r,i}function Rb(n){let e,t=[],i=new Map,s,l,r,o,a,u,f=Ie(n[5]?n[8].slice(0,n[5]):n[8]);const c=m=>{var h;return((h=m[3])==null?void 0:h.id)+m[48].id};for(let m=0;m<f.length;m+=1){let h=Wa(n,f,m),g=c(h);i.set(g,t[m]=za(g,h))}r=new Db({props:{id:"screen_uploader",$$slots:{default:[Yb,({dragover:m,isUploading:h})=>({46:m,47:h}),({dragover:m,isUploading:h})=>[0,(m?32768:0)|(h?65536:0)]]},$$scope:{ctx:n}}}),r.$on("upload",Jb);let d=n[7]&&Za(n);return{c(){e=b("div");for(let m=0;m<t.length;m+=1)t[m].c();s=I(),l=b("div"),$(r.$$.fragment),o=I(),d&&d.c(),a=De(),p(l,"class","card card-placeholder"),p(e,"class","cards-list compact screens-list entrance-top"),Z(e,"reordering",n[4])},m(m,h){k(m,e,h);for(let g=0;g<t.length;g+=1)t[g]&&t[g].m(e,null);y(e,s),y(e,l),F(r,l,null),k(m,o,h),d&&d.m(m,h),k(m,a,h),u=!0},p(m,h){if(h[0]&279865|h[1]&8421376){f=Ie(m[5]?m[8].slice(0,m[5]):m[8]),oe();for(let w=0;w<t.length;w+=1)t[w].r();t=Tt(t,h,c,1,m,f,i,e,xf,za,s,Wa);for(let w=0;w<t.length;w+=1)t[w].a();ae()}const g={};h[0]&2048|h[1]&16875520&&(g.$$scope={dirty:h,ctx:m}),r.$set(g),(!u||h[0]&16)&&Z(e,"reordering",m[4]),m[7]?d?(d.p(m,h),h[0]&128&&E(d,1)):(d=Za(m),d.c(),E(d,1),d.m(a.parentNode,a)):d&&(oe(),j(d,1,1,()=>{d=null}),ae())},i(m){if(!u){for(let h=0;h<f.length;h+=1)E(t[h]);E(r.$$.fragment,m),E(d),u=!0}},o(m){for(let h=0;h<t.length;h+=1)j(t[h]);j(r.$$.fragment,m),j(d),u=!1},d(m){m&&(v(e),v(o),v(a));for(let h=0;h<t.length;h+=1)t[h].d();q(r),d&&d.d(m)}}}function Hb(n){let e;return{c(){e=b("div"),e.innerHTML='<span class="loader loader-lg"></span>',p(e,"class","block txt-center m-t-lg")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function Ub(n){let e;return{c(){e=b("i"),p(e,"class","iconoir-media-image")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function Fb(n){let e,t,i;return t=new Xt({props:{src:z.files.getURL(n[48],n[48].file,{thumb:"450x0"}),alt:n[48].title,draggable:!1}}),{c(){e=b("div"),$(t.$$.fragment),p(e,"class","card-img"),Fe(e,"background-color",n[48].background)},m(s,l){k(s,e,l),F(t,e,null),i=!0},p(s,l){const r={};l[0]&288&&(r.src=z.files.getURL(s[48],s[48].file,{thumb:"450x0"})),l[0]&288&&(r.alt=s[48].title),t.$set(r),l[0]&288&&Fe(e,"background-color",s[48].background)},i(s){i||(E(t.$$.fragment,s),i=!0)},o(s){j(t.$$.fragment,s),i=!1},d(s){s&&v(e),q(t)}}}function qb(n){let e;return{c(){e=b("span"),p(e,"class","loader loader-lg")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function $b(n){let e,t,i,s,l,r,o;function a(){n[24].call(e,n[48])}function u(...f){return n[25](n[48],...f)}return{c(){e=b("input"),i=I(),s=b("label"),p(e,"type","checkbox"),p(e,"id",t=n[54]),p(s,"for",l=n[54])},m(f,c){k(f,e,c),e.checked=n[0][n[48].id],k(f,i,c),k(f,s,c),r||(o=[H(e,"change",a),H(e,"change",u)],r=!0)},p(f,c){n=f,c[1]&8388608&&t!==(t=n[54])&&p(e,"id",t),c[0]&289&&(e.checked=n[0][n[48].id]),c[1]&8388608&&l!==(l=n[54])&&p(s,"for",l)},d(f){f&&(v(e),v(i),v(s)),r=!1,pe(o)}}}function Wb(n){let e,t,i;function s(){return n[26](n[48])}return{c(){e=b("div"),e.innerHTML='<i class="iconoir-trash"></i> <span class="txt">Delete</span>',p(e,"class","dropdown-item link-danger closable")},m(l,r){k(l,e,r),t||(i=H(e,"click",Ye(ye(s))),t=!0)},p(l,r){n=l},d(l){l&&v(e),t=!1,i()}}}function Vb(n){let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g,w,_,T,L;const O=[qb,Fb,Ub],C=[];function S(P,R){return P[48].isReplacing?0:P[48].file?1:2}return t=S(n),i=C[t]=O[t](n),u=new Ee({props:{class:"form-field m-0",$$slots:{default:[$b,({uniqueId:P})=>({54:P}),({uniqueId:P})=>[0,P?8388608:0]]},$$scope:{ctx:n}}}),g=new Rt({props:{class:"dropdown dropdown-sm",$$slots:{default:[Wb]},$$scope:{ctx:n}}}),{c(){e=b("figure"),i.c(),s=I(),l=b("a"),r=b("div"),r.innerHTML='<i class="iconoir-play-solid preview-icon"></i>',o=I(),a=b("div"),$(u.$$.fragment),f=I(),c=b("div"),d=b("button"),m=b("i"),h=I(),$(g.$$.fragment),p(r,"class","ctrl ctrl-center"),p(a,"class","ctrl ctrl-top-left"),p(m,"class","iconoir-more-vert"),p(d,"type","button"),p(d,"class","btn btn-sm btn-circle btn-transparent fade"),p(c,"class","ctrl ctrl-top-right"),p(l,"href",w=`/projects/${n[3].project}/prototypes/${n[3].id}/screens/${n[48].id}`),p(l,"class","card-overlay handle"),p(l,"draggable",!1),p(e,"class","card-featured"),p(e,"draggable",!1),Z(e,"dragover",n[46])},m(P,R){k(P,e,R),C[t].m(e,null),y(e,s),y(e,l),y(l,r),y(l,o),y(l,a),F(u,a,null),y(l,f),y(l,c),y(c,d),y(d,m),y(d,h),F(g,d,null),_=!0,T||(L=[H(a,"click",Ye(n[23])),H(d,"mousedown",Ye(ye(n[21]))),H(d,"click",Ye(ye(n[22]))),we(Ti.call(null,l))],T=!0)},p(P,R){let A=t;t=S(P),t===A?C[t].p(P,R):(oe(),j(C[A],1,1,()=>{C[A]=null}),ae(),i=C[t],i?i.p(P,R):(i=C[t]=O[t](P),i.c()),E(i,1),i.m(e,s));const M={};R[0]&289|R[1]&25165824&&(M.$$scope={dirty:R,ctx:P}),u.$set(M);const D={};R[0]&288|R[1]&16777216&&(D.$$scope={dirty:R,ctx:P}),g.$set(D),(!_||R[0]&296&&w!==(w=`/projects/${P[3].project}/prototypes/${P[3].id}/screens/${P[48].id}`))&&p(l,"href",w),(!_||R[1]&32768)&&Z(e,"dragover",P[46])},i(P){_||(E(i),E(u.$$.fragment,P),E(g.$$.fragment,P),_=!0)},o(P){j(i),j(u.$$.fragment,P),j(g.$$.fragment,P),_=!1},d(P){P&&v(e),C[t].d(),q(u),q(g),T=!1,pe(L)}}}function zb(n){let e,t,i;function s(r){n[27](r)}let l={index:n[53],$$slots:{default:[Vb]},$$scope:{ctx:n}};return n[8]!==void 0&&(l.list=n[8]),e=new jb({props:l}),se.push(()=>Ae(e,"list",s)),e.$on("drag",n[28]),e.$on("sort",n[29]),{c(){$(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};o[0]&288&&(a.index=r[53]),o[0]&297|o[1]&16809984&&(a.$$scope={dirty:o,ctx:r}),!t&&o[0]&256&&(t=!0,a.list=r[8],Ne(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){j(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function Va(n){let e,t,i,s,l=(n[51]||n[49])+"",r,o,a,u;return{c(){e=b("div"),t=b("i"),i=I(),s=b("span"),r=x(l),p(t,"class","iconoir-message-text"),p(s,"class","txt"),p(e,"class","meta-item"),Z(e,"txt-warning",n[49]>0)},m(f,c){k(f,e,c),y(e,t),y(e,i),y(e,s),y(s,r),a||(u=we(o=Ce.call(null,e,[n[51]?n[51]+" unresolved":"",n[49]?n[49]+" unread":""].filter(Boolean).join(`
`))),a=!0)},p(f,c){n=f,c[0]&1312&&l!==(l=(n[51]||n[49])+"")&&ve(r,l),o&&tt(o.update)&&c[0]&1312&&o.update.call(null,[n[51]?n[51]+" unresolved":"",n[49]?n[49]+" unread":""].filter(Boolean).join(`
`)),c[0]&1312&&Z(e,"txt-warning",n[49]>0)},d(f){f&&v(e),a=!1,u()}}}function za(n,e){let t,i,s,l,r,o,a,u,f,c,d,m,h=X,g,w,_;function T(...S){return e[30](e[48],...S)}i=new Id({props:{$$slots:{default:[zb,({dragover:S})=>({46:S}),({dragover:S})=>[0,S?32768:0]]},$$scope:{ctx:e}}}),i.$on("drop",T);function L(S){e[31](S,e[48],e[52],e[53])}let O={tag:"h5",class:"title",collection:"screens"};e[48]!==void 0&&(O.model=e[48]),r=new mr({props:O}),se.push(()=>Ae(r,"model",L));let C=(e[51]||e[49])&&Va(e);return{key:n,first:null,c(){t=b("div"),$(i.$$.fragment),s=I(),l=b("div"),$(r.$$.fragment),a=I(),u=b("div"),C&&C.c(),f=I(),c=b("div"),c.innerHTML='<div class="iconoir-calendar"></div>',p(c,"class","meta-item"),p(u,"class","meta"),p(l,"class","card-content"),p(t,"class","card screen-card"),Z(t,"selected",e[0][e[48].id]),this.first=t},m(S,P){k(S,t,P),F(i,t,null),y(t,s),y(t,l),F(r,l,null),y(l,a),y(l,u),C&&C.m(u,null),y(u,f),y(u,c),g=!0,w||(_=we(d=Ce.call(null,c,{text:"Created "+G.relativeDate(e[48].created),sub:G.formatToLocalDate(e[48].created)})),w=!0)},p(S,P){e=S;const R={};P[0]&297|P[1]&16809984&&(R.$$scope={dirty:P,ctx:e}),i.$set(R);const A={};!o&&P[0]&288&&(o=!0,A.model=e[48],Ne(()=>o=!1)),r.$set(A),e[51]||e[49]?C?C.p(e,P):(C=Va(e),C.c(),C.m(u,f)):C&&(C.d(1),C=null),d&&tt(d.update)&&P[0]&288&&d.update.call(null,{text:"Created "+G.relativeDate(e[48].created),sub:G.formatToLocalDate(e[48].created)}),(!g||P[0]&289)&&Z(t,"selected",e[0][e[48].id])},r(){m=t.getBoundingClientRect()},f(){Bf(t),h()},a(){h(),h=zf(t,m,Ld,{duration:200,delay:50})},i(S){g||(E(i.$$.fragment,S),E(r.$$.fragment,S),g=!0)},o(S){j(i.$$.fragment,S),j(r.$$.fragment,S),g=!1},d(S){S&&v(t),q(i),q(r),C&&C.d(),w=!1,_()}}}function Bb(n){let e,t,i,s,l,r,o=n[11].maxScreenFileSize&&Ba(n);return{c(){e=b("div"),e.innerHTML='<i class="iconoir-upload-square"></i>',t=I(),i=b("div"),i.textContent="Upload screens",s=I(),l=b("div"),r=x(`Drop or click here to upload new screens
                                `),o&&o.c(),p(e,"class","icon"),p(i,"class","title"),p(l,"class","content")},m(a,u){k(a,e,u),k(a,t,u),k(a,i,u),k(a,s,u),k(a,l,u),y(l,r),o&&o.m(l,null)},p(a,u){a[11].maxScreenFileSize?o?o.p(a,u):(o=Ba(a),o.c(),o.m(l,null)):o&&(o.d(1),o=null)},d(a){a&&(v(e),v(t),v(i),v(s),v(l)),o&&o.d()}}}function Zb(n){let e;return{c(){e=b("span"),p(e,"class","loader loader-primary")},m(t,i){k(t,e,i)},p:X,d(t){t&&v(e)}}}function Ba(n){let e,t,i=G.formattedFileSize(n[11].maxScreenFileSize)+"",s,l;return{c(){e=b("strong"),t=x("(max "),s=x(i),l=x(")")},m(r,o){k(r,e,o),y(e,t),y(e,s),y(e,l)},p(r,o){o[0]&2048&&i!==(i=G.formattedFileSize(r[11].maxScreenFileSize)+"")&&ve(s,i)},d(r){r&&v(e)}}}function Yb(n){let e,t;function i(r,o){return r[47]?Zb:Bb}let s=i(n),l=s(n);return{c(){e=b("label"),t=b("div"),l.c(),p(t,"class","placeholder"),p(e,"for","screen_uploader"),p(e,"class","card-featured"),Z(e,"dragover",n[46]),Z(e,"no-pointer-events",n[47])},m(r,o){k(r,e,o),y(e,t),l.m(t,null)},p(r,o){s===(s=i(r))&&l?l.p(r,o):(l.d(1),l=s(r),l&&(l.c(),l.m(t,null))),o[1]&32768&&Z(e,"dragover",r[46]),o[1]&65536&&Z(e,"no-pointer-events",r[47])},d(r){r&&v(e),l.d()}}}function Za(n){let e,t,i,s,l,r,o=n[7]==1?"screen":"screens",a,u,f,c,d,m,h,g,w,_,T,L,O=n[12].length>1&&Ya(n);return{c(){e=b("div"),t=b("div"),i=x("Selected "),s=b("strong"),l=x(n[7]),r=I(),a=x(o),u=I(),O&&O.c(),f=I(),c=b("button"),d=b("span"),d.textContent="Delete",m=I(),h=b("button"),g=b("i"),p(t,"class","info"),p(d,"class","txt"),p(c,"type","button"),p(c,"class","btn btn-sm btn-semitransparent btn-danger btn-expanded-sm"),c.disabled=n[6],Z(c,"btn-loading",n[1]),p(g,"class","iconoir-xmark"),p(h,"type","button"),p(h,"class","btn btn-sm btn-circle btn-transparent m-l-auto"),h.disabled=n[6],p(e,"class","bulk-bar")},m(C,S){k(C,e,S),y(e,t),y(t,i),y(t,s),y(s,l),y(s,r),y(s,a),y(e,u),O&&O.m(e,null),y(e,f),y(e,c),y(c,d),y(e,m),y(e,h),y(h,g),_=!0,T||(L=[H(c,"click",n[17]),we(Ce.call(null,h,{position:"top",text:"Clear selection"})),H(h,"click",n[15])],T=!0)},p(C,S){(!_||S[0]&128)&&ve(l,C[7]),(!_||S[0]&128)&&o!==(o=C[7]==1?"screen":"screens")&&ve(a,o),C[12].length>1?O?(O.p(C,S),S[0]&4096&&E(O,1)):(O=Ya(C),O.c(),E(O,1),O.m(e,f)):O&&(oe(),j(O,1,1,()=>{O=null}),ae()),(!_||S[0]&64)&&(c.disabled=C[6]),(!_||S[0]&2)&&Z(c,"btn-loading",C[1]),(!_||S[0]&64)&&(h.disabled=C[6])},i(C){_||(E(O),C&&St(()=>{_&&(w||(w=ct(e,Nn,{duration:150,y:10,opacity:0},!0)),w.run(1))}),_=!0)},o(C){j(O),C&&(w||(w=ct(e,Nn,{duration:150,y:10,opacity:0},!1)),w.run(0)),_=!1},d(C){C&&v(e),O&&O.d(),C&&w&&w.end(),T=!1,pe(L)}}}function Ya(n){let e,t,i,s,l,r,o;return r=new Rt({props:{class:"dropdown dropdown-upside dropdown-sm",$$slots:{default:[Kb]},$$scope:{ctx:n}}}),{c(){e=b("button"),t=b("span"),t.textContent="Move to",i=I(),s=b("i"),l=I(),$(r.$$.fragment),p(t,"class","txt"),p(s,"class","iconoir-nav-arrow-down"),p(e,"type","button"),p(e,"class","btn btn-sm btn-semitransparent btn-expanded-sm"),e.disabled=n[6],Z(e,"btn-loading",n[2])},m(a,u){k(a,e,u),y(e,t),y(e,i),y(e,s),y(e,l),F(r,e,null),o=!0},p(a,u){const f={};u[0]&4104|u[1]&16777216&&(f.$$scope={dirty:u,ctx:a}),r.$set(f),(!o||u[0]&64)&&(e.disabled=a[6]),(!o||u[0]&4)&&Z(e,"btn-loading",a[2])},i(a){o||(E(r.$$.fragment,a),o=!0)},o(a){j(r.$$.fragment,a),o=!1},d(a){a&&v(e),q(r)}}}function Ka(n){let e,t,i=n[43].title+"",s,l,r,o;function a(){return n[35](n[43])}return{c(){e=b("button"),t=b("span"),s=x(i),l=I(),p(t,"class","txt"),p(e,"type","button"),p(e,"class","dropdown-item closable")},m(u,f){k(u,e,f),y(e,t),y(t,s),y(e,l),r||(o=H(e,"click",a),r=!0)},p(u,f){n=u,f[0]&4096&&i!==(i=n[43].title+"")&&ve(s,i)},d(u){u&&v(e),r=!1,o()}}}function Ga(n,e){var l;let t,i,s=e[43].id!=((l=e[3])==null?void 0:l.id)&&Ka(e);return{key:n,first:null,c(){t=De(),s&&s.c(),i=De(),this.first=t},m(r,o){k(r,t,o),s&&s.m(r,o),k(r,i,o)},p(r,o){var a;e=r,e[43].id!=((a=e[3])==null?void 0:a.id)?s?s.p(e,o):(s=Ka(e),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d(r){r&&(v(t),v(i)),s&&s.d(r)}}}function Kb(n){let e=[],t=new Map,i,s=Ie(n[12]);const l=r=>r[43].id;for(let r=0;r<s.length;r+=1){let o=$a(n,s,r),a=l(o);t.set(a,e[r]=Ga(a,o))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();i=De()},m(r,o){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(r,o);k(r,i,o)},p(r,o){o[0]&69640&&(s=Ie(r[12]),e=Tt(e,o,l,1,r,s,t,i.parentNode,Qf,Ga,i,$a))},d(r){r&&v(i);for(let o=0;o<e.length;o+=1)e[o].d(r)}}}function Gb(n){let e,t,i,s,l,r;const o=[Hb,Rb],a=[];function u(f,c){var d;return f[9]&&!f[8].length?0:(d=f[3])!=null&&d.id?1:-1}return~(e=u(n))&&(t=a[e]=o[e](n)),{c(){t&&t.c(),i=De()},m(f,c){~e&&a[e].m(f,c),k(f,i,c),s=!0,l||(r=H(window,"keydown",n[13]),l=!0)},p(f,c){let d=e;e=u(f),e===d?~e&&a[e].p(f,c):(t&&(oe(),j(a[d],1,1,()=>{a[d]=null}),ae()),~e?(t=a[e],t?t.p(f,c):(t=a[e]=o[e](f),t.c()),E(t,1),t.m(i.parentNode,i)):t=null)},i(f){s||(E(t),s=!0)},o(f){j(t),s=!1},d(f){f&&v(i),~e&&a[e].d(f),l=!1,r()}}}function Ja(n,e){if(!(e!=null&&e.length)||!n.length)return n;let t,i;return n.sort((s,l)=>(t=e.findIndex(r=>r==s.id),i=e.findIndex(r=>r==l.id),t>=0&&i>=0?t<i?-1:t>i?1:0:s.created<l.created?-1:s.created>l.created?1:0)),n}function Jb(){var n;(n=document.querySelector(".screens-list"))==null||n.scrollIntoView({behavior:"smooth",block:"end"})}function Xb(n,e,t){let i,s,l,r,o,a,u,f;Q(n,pt,W=>t(8,l=W)),Q(n,Et,W=>t(3,r=W)),Q(n,Fi,W=>t(9,o=W)),Q(n,vn,W=>t(10,a=W)),Q(n,Gn,W=>t(11,u=W)),Q(n,$t,W=>t(12,f=W));let c={},d=!1,m=!1,h=!1,g=0,w,_,T;async function L(){for(t(19,w=r==null?void 0:r.id),t(20,_=JSON.stringify(r==null?void 0:r.screensOrder)),R(),t(5,g=50),await O();g<l.length;)await G.yieldToMain(),t(5,g+=15);t(5,g=0)}async function O(){if(r!=null&&r.id){ar(),ur(r.id),Te(Fi,o=!0,o);try{let W=await z.collection("screens").getFullList({filter:`prototype="${r.id}"`,expand:"comments_via_screen",fields:"*,expand.comments_via_screen.id,expand.comments_via_screen.replyTo,expand.comments_via_screen.resolved",sort:"created"});Te(pt,l=Ja(W,r.screensOrder),l),Te(Fi,o=!1,o)}catch(W){W!=null&&W.isAbort||(z.error(W),Te(Fi,o=!1,o))}}}function C(){t(20,_=JSON.stringify(r==null?void 0:r.screensOrder)),clearTimeout(T),T=setTimeout(()=>{Te(pt,l=Ja(l,r.screensOrder),l)},200)}function S(W){if(W.ctrlKey&&W.code=="KeyA"&&!G.isInput(W.target)){W.preventDefault();for(const ie of l)t(0,c[ie.id]=!0,c)}}async function P(){const W=l.map(te=>te.id),ie=JSON.stringify(r.screensOrder),Me=JSON.stringify(W);if(ie!=Me)try{t(4,h=!0),clearTimeout(T),t(20,_=Me),Te(Et,r.screensOrder=W,r),await z.collection("prototypes").update(r.id,{screensOrder:W}),t(4,h=!1)}catch(te){te.isAbort||(t(4,h=!1),z.error(te))}}function R(){t(0,c={})}async function A(W){const ie=Object.keys(c);Pt(`Do you really want to move the selected ${ie.length} ${ie.length==1?"screen":"screens"}?`,async()=>M(W))}async function M(W){const ie=Object.keys(c);if(!(!ie.length||!(W!=null&&W.id)||s)){t(2,m=!0);try{const Me=[],te={prototype:W.id};for(let he of ie)Me.push(z.collection("screens").update(he,te,{requestKey:"move_"+he}));Me.push(z.collection("prototypes").update(r.id,{"screensOrder-":ie})),await Promise.all(Me),R(),Te(Et,r=W.id,r)}catch(Me){z.error(Me)}t(2,m=!1)}}function D(){const W=Object.keys(c);Pt(`Do you really want to delete the selected ${W.length} ${W.length==1?"screen":"screens"}?`,async()=>Y())}async function Y(){const W=Object.keys(c);if(!(!W.length||s)){t(1,d=!0);try{const ie=W.map(te=>z.collection("screens").delete(te));await Promise.all(ie);const Me=l.filter(te=>W.includes(te.id));for(const te of Me)Dl(te);R(),P(),gt(`Successfully deleted ${W.length} ${W.length==1?"screen":"screens"}.`)}catch(ie){ie.isAbort||(z.error(ie),L())}t(1,d=!1)}}async function K(W){Pt(`Do you really want to delete ${W.title}?`,async()=>B(W),()=>{var ie;(ie=document.activeElement)==null||ie.blur()})}async function B(W){try{await z.collection("screens").delete(W.id),Dl(W),R(),gt(`Successfully deleted screen ${W.title}.`)}catch(ie){ie.isAbort||(z.error(ie),L())}}Gt(()=>{clearTimeout(T),Ut==null||Ut()});function N(W){qe.call(this,n,W)}function V(W){qe.call(this,n,W)}function ee(W){qe.call(this,n,W)}function J(W){c[W.id]=this.checked,t(0,c)}const U=(W,ie)=>{ie.target.checked||(delete c[W.id],t(0,c),ie.target.blur())},ce=W=>K(W);function re(W){l=W,pt.set(l)}const de=W=>{if(!W.detail)return;const ie=document.createElement("div");ie.className="draggable-ghost",document.body.appendChild(ie),W.detail.dataTransfer.setDragImage(ie,0,0),setTimeout(()=>{ie==null||ie.remove()},0)},Le=()=>{P()},Je=(W,ie)=>{h||cr(W,ie.detail[0])};function ut(W,ie,Me,te){Me[te]=W,t(5,g)}const st=(W,ie)=>{var Me,te;return((te=(Me=ie.expand)==null?void 0:Me.comment)==null?void 0:te.screen)==W.id},dt=(W,ie)=>{var Me,te,he,ze,wt,mt;return!((te=(Me=ie.expand)==null?void 0:Me.comment)!=null&&te.replyTo)&&!((ze=(he=ie.expand)==null?void 0:he.comment)!=null&&ze.resolved)&&((mt=(wt=ie.expand)==null?void 0:wt.comment)==null?void 0:mt.screen)==W.id},le=(W,ie)=>!ie.replyTo&&!ie.resolved&&!W.includes(ie.id),me=W=>A(W);return n.$$.update=()=>{n.$$.dirty[0]&524296&&w!=(r==null?void 0:r.id)&&L(),n.$$.dirty[0]&1572872&&w&&_!=JSON.stringify(r==null?void 0:r.screensOrder)&&C(),n.$$.dirty[0]&1&&t(7,i=Object.keys(c).length),n.$$.dirty[0]&6&&t(6,s=d||m)},[c,d,m,r,h,g,s,i,l,o,a,u,f,S,P,R,A,D,K,w,_,N,V,ee,J,U,ce,re,de,Le,Je,ut,st,dt,le,me]}class Qb extends Se{constructor(e){super(),ke(this,e,Xb,Gb,ge,{},null,[-1,-1])}}function Xa(n){let e,t,i=n[0].name&&Qa(n),s=n[2]&&xa();return{c(){e=b("div"),i&&i.c(),t=I(),s&&s.c(),p(e,"class","row")},m(l,r){k(l,e,r),i&&i.m(e,null),y(e,t),s&&s.m(e,null)},p(l,r){l[0].name?i?i.p(l,r):(i=Qa(l),i.c(),i.m(e,t)):i&&(i.d(1),i=null),l[2]?s||(s=xa(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(l){l&&v(e),i&&i.d(),s&&s.d()}}}function Qa(n){let e,t=n[0].name+"",i,s;return{c(){e=b("span"),i=x(t),p(e,"class","user-name txt-ellipsis"),p(e,"title",s=n[0].name)},m(l,r){k(l,e,r),y(e,i)},p(l,r){r&1&&t!==(t=l[0].name+"")&&ve(i,t),r&1&&s!==(s=l[0].name)&&p(e,"title",s)},d(l){l&&v(e)}}}function xa(n){let e;return{c(){e=b("span"),e.textContent="You",p(e,"class","label label-sm label-warning")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function eu(n){let e,t,i,s=n[0].email+"",l,r;return{c(){e=b("small"),e.textContent="|",t=I(),i=b("small"),l=x(s),p(i,"class","user-email txt-ellipsis"),p(i,"title",r=n[0].email)},m(o,a){k(o,e,a),k(o,t,a),k(o,i,a),y(i,l)},p(o,a){a&1&&s!==(s=o[0].email+"")&&ve(l,s),a&1&&r!==(r=o[0].email)&&p(i,"title",r)},d(o){o&&(v(e),v(t),v(i))}}}function xb(n){let e,t,i,s,l,r,o,a,u=n[0].username+"",f,c,d,m,h,g;t=new is({props:{user:n[0]}});let w=(n[0].name||n[2])&&Xa(n),_=n[0].email&&eu(n);const T=n[5].default,L=lt(T,n,n[4],null);return{c(){e=b("div"),$(t.$$.fragment),i=I(),s=b("div"),w&&w.c(),l=I(),r=b("div"),o=b("small"),a=x("@"),f=x(u),d=I(),_&&_.c(),m=I(),L&&L.c(),p(o,"class","user-username txt-ellipsis"),p(o,"title",c="@"+n[0].username),p(r,"class","row txt-hint"),p(s,"class","content"),p(e,"class",h="list-item "+n[1])},m(O,C){k(O,e,C),F(t,e,null),y(e,i),y(e,s),w&&w.m(s,null),y(s,l),y(s,r),y(r,o),y(o,a),y(o,f),y(r,d),_&&_.m(r,null),y(e,m),L&&L.m(e,null),g=!0},p(O,[C]){const S={};C&1&&(S.user=O[0]),t.$set(S),O[0].name||O[2]?w?w.p(O,C):(w=Xa(O),w.c(),w.m(s,l)):w&&(w.d(1),w=null),(!g||C&1)&&u!==(u=O[0].username+"")&&ve(f,u),(!g||C&1&&c!==(c="@"+O[0].username))&&p(o,"title",c),O[0].email?_?_.p(O,C):(_=eu(O),_.c(),_.m(r,null)):_&&(_.d(1),_=null),L&&L.p&&(!g||C&16)&&ot(L,T,O,O[4],g?rt(T,O[4],C,null):at(O[4]),null),(!g||C&2&&h!==(h="list-item "+O[1]))&&p(e,"class",h)},i(O){g||(E(t.$$.fragment,O),E(L,O),g=!0)},o(O){j(t.$$.fragment,O),j(L,O),g=!1},d(O){O&&v(e),q(t),w&&w.d(),_&&_.d(),L&&L.d(O)}}}function e0(n,e,t){let i,s;Q(n,ei,u=>t(3,s=u));let{$$slots:l={},$$scope:r}=e,{user:o={}}=e,{class:a=""}=e;return n.$$set=u=>{"user"in u&&t(0,o=u.user),"class"in u&&t(1,a=u.class),"$$scope"in u&&t(4,r=u.$$scope)},n.$$.update=()=>{n.$$.dirty&9&&t(2,i=(s==null?void 0:s.id)==o.id)},[o,a,i,s,r,l]}class jd extends Se{constructor(e){super(),ke(this,e,e0,xb,ge,{user:0,class:1})}}function tu(n,e,t){const i=n.slice();return i[31]=e[t],i}function nu(n,e,t){const i=n.slice();return i[28]=e[t],i}function iu(n,e,t){const i=n.slice();return i[31]=e[t],i}function su(n,e,t){const i=n.slice();return i[28]=e[t],i}function t0(n){let e=[],t=new Map,i,s,l=Ie(n[8]);const r=a=>a[31].id;for(let a=0;a<l.length;a+=1){let u=iu(n,l,a),f=r(u);t.set(f,e[a]=ru(f,u))}let o=null;return l.length||(o=lu()),{c(){for(let a=0;a<e.length;a+=1)e[a].c();i=De(),o&&o.c()},m(a,u){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,u);k(a,i,u),o&&o.m(a,u),s=!0},p(a,u){u[0]&2340&&(l=Ie(a[8]),oe(),e=Tt(e,u,r,1,a,l,t,i.parentNode,At,ru,i,iu),ae(),!l.length&&o?o.p(a,u):l.length?o&&(o.d(1),o=null):(o=lu(),o.c(),o.m(i.parentNode,i)))},i(a){if(!s){for(let u=0;u<l.length;u+=1)E(e[u]);s=!0}},o(a){for(let u=0;u<e.length;u+=1)j(e[u]);s=!1},d(a){a&&v(i);for(let u=0;u<e.length;u+=1)e[u].d(a);o&&o.d(a)}}}function n0(n){let e,t=Ie(Array(n[2].users.length||1)),i=[];for(let s=0;s<t.length;s+=1)i[s]=ou(su(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=De()},m(s,l){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(s,l);k(s,e,l)},p(s,l){if(l[0]&4){t=Ie(Array(s[2].users.length||1));let r;for(r=0;r<t.length;r+=1){const o=su(s,t,r);i[r]?i[r].p(o,l):(i[r]=ou(),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},i:X,o:X,d(s){s&&v(e),sn(i,s)}}}function lu(n){let e;return{c(){e=b("div"),e.innerHTML='<div class="block txt-center p-5"><span class="txt-hint">The project doesn&#39;t have any owners yet.</span></div> ',p(e,"class","list-item txt-hint")},m(t,i){k(t,e,i)},p:X,d(t){t&&v(e)}}}function i0(n){let e,t,i,s,l,r,o;function a(){return n[15](n[31])}return{c(){e=b("button"),t=b("span"),t.textContent="Revoke access",l=I(),p(t,"class","txt"),p(e,"type","button"),p(e,"class","btn btn-sm btn-semitransparent btn-danger"),e.disabled=i=n[2].users.length==1||n[5]},m(u,f){k(u,e,f),y(e,t),k(u,l,f),r||(o=[we(s=Ce.call(null,e,n[2].users.length==1?"You can't remove the only project owner":"")),H(e,"click",ye(a))],r=!0)},p(u,f){n=u,f[0]&36&&i!==(i=n[2].users.length==1||n[5])&&(e.disabled=i),s&&tt(s.update)&&f[0]&4&&s.update.call(null,n[2].users.length==1?"You can't remove the only project owner":"")},d(u){u&&(v(e),v(l)),r=!1,pe(o)}}}function ru(n,e){let t,i,s;return i=new jd({props:{user:e[31],$$slots:{default:[i0]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=De(),$(i.$$.fragment),this.first=t},m(l,r){k(l,t,r),F(i,l,r),s=!0},p(l,r){e=l;const o={};r[0]&256&&(o.user=e[31]),r[0]&292|r[1]&128&&(o.$$scope={dirty:r,ctx:e}),i.$set(o)},i(l){s||(E(i.$$.fragment,l),s=!0)},o(l){j(i.$$.fragment,l),s=!1},d(l){l&&v(t),q(i,l)}}}function ou(n){let e;return{c(){e=b("div"),e.innerHTML='<figure class="thumb thumb-circle"></figure> <div class="content"><div class="skeleton-loader"></div></div> ',p(e,"class","list-item")},m(t,i){k(t,e,i)},p:X,d(t){t&&v(e)}}}function au(n){let e;return{c(){e=b("div"),p(e,"class","clearfix m-b-sm")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function s0(n){let e;return{c(){e=b("div"),e.innerHTML='<div class="block txt-center"><span class="txt-hint">No users found.</span></div>',p(e,"class","list-item svelte-1tb8gd9")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function l0(n){let e=[],t=new Map,i,s,l=Ie(n[6]);const r=o=>o[31].id;for(let o=0;o<l.length;o+=1){let a=tu(n,l,o),u=r(a);t.set(u,e[o]=uu(u,a))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();i=De()},m(o,a){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(o,a);k(o,i,a),s=!0},p(o,a){a[0]&1104&&(l=Ie(o[6]),oe(),e=Tt(e,a,r,1,o,l,t,i.parentNode,At,uu,i,tu),ae())},i(o){if(!s){for(let a=0;a<l.length;a+=1)E(e[a]);s=!0}},o(o){for(let a=0;a<e.length;a+=1)j(e[a]);s=!1},d(o){o&&v(i);for(let a=0;a<e.length;a+=1)e[a].d(o)}}}function r0(n){let e,t=Ie(Array(n[6].length||1)),i=[];for(let s=0;s<t.length;s+=1)i[s]=fu(nu(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=De()},m(s,l){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(s,l);k(s,e,l)},p(s,l){if(l[0]&64){t=Ie(Array(s[6].length||1));let r;for(r=0;r<t.length;r+=1){const o=nu(s,t,r);i[r]?i[r].p(o,l):(i[r]=fu(),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},i:X,o:X,d(s){s&&v(e),sn(i,s)}}}function o0(n){let e,t,i,s,l;function r(){return n[17](n[31])}return{c(){e=b("button"),t=b("span"),t.textContent="Add",i=I(),p(t,"class","txt"),p(e,"type","button"),p(e,"class","btn btn-sm btn-expanded-sm btn-semitransparent"),e.disabled=n[4]},m(o,a){k(o,e,a),y(e,t),k(o,i,a),s||(l=H(e,"click",ye(r)),s=!0)},p(o,a){n=o,a[0]&16&&(e.disabled=n[4])},d(o){o&&(v(e),v(i)),s=!1,l()}}}function uu(n,e){let t,i,s;return i=new jd({props:{user:e[31],$$slots:{default:[o0]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=De(),$(i.$$.fragment),this.first=t},m(l,r){k(l,t,r),F(i,l,r),s=!0},p(l,r){e=l;const o={};r[0]&64&&(o.user=e[31]),r[0]&80|r[1]&128&&(o.$$scope={dirty:r,ctx:e}),i.$set(o)},i(l){s||(E(i.$$.fragment,l),s=!0)},o(l){j(i.$$.fragment,l),s=!1},d(l){l&&v(t),q(i,l)}}}function fu(n){let e;return{c(){e=b("div"),e.innerHTML='<figure class="thumb thumb-circle"></figure> <div class="content"><div class="skeleton-loader"></div></div> ',p(e,"class","list-item svelte-1tb8gd9")},m(t,i){k(t,e,i)},p:X,d(t){t&&v(e)}}}function a0(n){let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g,w;const _=[n0,t0],T=[];function L(M,D){return M[9]?0:1}s=L(n),l=T[s]=_[s](n);function O(M){n[16](M)}let C={class:"m-b-0",placeholder:"Search users..."};n[1]!==void 0&&(C.value=n[1]),u=new kd({props:C}),se.push(()=>Ae(u,"value",O));let S=(n[7]||n[1])&&au();const P=[r0,l0,s0],R=[];function A(M,D){return M[7]?0:M[6].length?1:M[1]?2:-1}return~(h=A(n))&&(g=R[h]=P[h](n)),{c(){e=b("h6"),e.textContent="Current owners",t=I(),i=b("div"),l.c(),r=I(),o=b("hr"),a=I(),$(u.$$.fragment),c=I(),S&&S.c(),d=I(),m=b("div"),g&&g.c(),p(e,"class","m-b-sm"),p(i,"class","list list-current-owners"),p(m,"class","list list-suggestions svelte-1tb8gd9")},m(M,D){k(M,e,D),k(M,t,D),k(M,i,D),T[s].m(i,null),k(M,r,D),k(M,o,D),k(M,a,D),F(u,M,D),k(M,c,D),S&&S.m(M,D),k(M,d,D),k(M,m,D),~h&&R[h].m(m,null),w=!0},p(M,D){let Y=s;s=L(M),s===Y?T[s].p(M,D):(oe(),j(T[Y],1,1,()=>{T[Y]=null}),ae(),l=T[s],l?l.p(M,D):(l=T[s]=_[s](M),l.c()),E(l,1),l.m(i,null));const K={};!f&&D[0]&2&&(f=!0,K.value=M[1],Ne(()=>f=!1)),u.$set(K),M[7]||M[1]?S||(S=au(),S.c(),S.m(d.parentNode,d)):S&&(S.d(1),S=null);let B=h;h=A(M),h===B?~h&&R[h].p(M,D):(g&&(oe(),j(R[B],1,1,()=>{R[B]=null}),ae()),~h?(g=R[h],g?g.p(M,D):(g=R[h]=P[h](M),g.c()),E(g,1),g.m(m,null)):g=null)},i(M){w||(E(l),E(u.$$.fragment,M),E(g),w=!0)},o(M){j(l),j(u.$$.fragment,M),j(g),w=!1},d(M){M&&(v(e),v(t),v(i),v(r),v(o),v(a),v(c),v(d),v(m)),T[s].d(),q(u,M),S&&S.d(M),~h&&R[h].d()}}}function u0(n){let e;return{c(){e=b("h5"),e.textContent="Manage project owners",p(e,"class","block txt-center")},m(t,i){k(t,e,i)},p:X,d(t){t&&v(e)}}}function f0(n){let e,t,i,s,l;return{c(){e=b("button"),t=b("span"),t.textContent="Close",p(t,"class","txt"),p(e,"type","button"),p(e,"class","btn btn-transparent m-r-auto"),e.disabled=i=n[4]||n[5]},m(r,o){k(r,e,o),y(e,t),s||(l=H(e,"click",n[14]),s=!0)},p(r,o){o[0]&48&&i!==(i=r[4]||r[5])&&(e.disabled=i)},d(r){r&&v(e),s=!1,l()}}}function c0(n){let e,t,i={popup:!0,overlayClose:!n[4],escHide:!n[4],beforeHide:n[18],$$slots:{footer:[f0],header:[u0],default:[a0]},$$scope:{ctx:n}};return e=new mn({props:i}),n[19](e),e.$on("show",n[20]),e.$on("hide",n[21]),{c(){$(e.$$.fragment)},m(s,l){F(e,s,l),t=!0},p(s,l){const r={};l[0]&16&&(r.overlayClose=!s[4]),l[0]&16&&(r.escHide=!s[4]),l[0]&16&&(r.beforeHide=s[18]),l[0]&1014|l[1]&128&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){n[19](null),q(e,s)}}}const cu="project_owners_list",fl="project_owners_suggestions";function d0(n,e,t){let i,s;Q(n,cn,N=>t(2,i=N)),Q(n,ei,N=>t(22,s=N));const l=it();let r,o="",a=!1,u=!1,f=[],c=!1,d=[],m=!1,h;function g(){return _(),r==null?void 0:r.show()}function w(){return z.cancelRequest(cu),z.cancelRequest(fl),clearTimeout(h),r==null?void 0:r.hide()}async function _(){var N;if((N=i==null?void 0:i.users)!=null&&N.length){t(8,d=[]),t(9,m=!0);try{const V=await z.collection("users").getFullList({filter:i.users.map(ee=>`id="${ee}"`).join("||"),requestKey:cu});for(let ee of i.users){const J=V.find(U=>U.id==ee);J&&d.push(J)}t(9,m=!1)}catch(V){V.isAbort||(z.error(V),t(9,m=!1))}}}async function T(){var N,V;t(7,c=!0);try{let ee=["username","name","email"].map(U=>`${U}~"${o.replaceAll('"',"")}"`).join("||");(N=i==null?void 0:i.users)!=null&&N.length&&(ee=((V=i==null?void 0:i.users)==null?void 0:V.map(U=>`id!="${U}"`).join("&&"))+` && (${ee})`);const J=await z.collection("users").getList(1,30,{filter:ee,requestKey:fl});t(6,f=J.items),t(7,c=!1)}catch(ee){ee.isAbort||(z.error(ee),t(7,c=!1))}}function L(N){Pt(`Do you really want to add user ${G.getUserDisplayName(N)} to the project owners?`,async()=>O(N))}async function O(N){if(!(a||!(N!=null&&N.id))){t(4,a=!0);try{const V=await z.collection("projects").update(i.id,{"users+":N.id});Qn(V),G.removeByKey(f,"id",N.id),t(6,f),t(1,o),t(13,h),f.length||t(1,o=""),gt(`Successfully added ${G.getUserDisplayName(N)} to the project owners list.`),l("add",N),t(4,a=!1)}catch(V){V.isAbort||(z.error(V),t(4,a=!1))}}}function C(N){let V=`Do you really want to remove the project access of user ${G.getUserDisplayName(N)}?`;s.id==N.id&&(V=`You no longer will have access to the project! 

Do you really want to remove your user from the project owners list?`),Pt(V,async()=>S(N))}async function S(N){if(!(u||!(N!=null&&N.id))){t(5,u=!0);try{const V=await z.collection("projects").update(i.id,{"users-":N.id});Qn(V),s.id==N.id?(gt(`Successfully removed your user from the ${i.title} owners list.`),Yt("/projects")):gt(`Successfully removed ${G.getUserDisplayName(N)} from the ${i.title} owners list.`),l("remove",N),G.removeByKey(d,"id",N.id),t(8,d),o&&T(),t(5,u=!1)}catch(V){V.isAbort||(z.error(V),t(5,u=!1))}}}Gt(()=>{w()});const P=()=>w(),R=N=>C(N);function A(N){o=N,t(1,o)}const M=N=>L(N),D=()=>!a;function Y(N){se[N?"unshift":"push"](()=>{r=N,t(3,r)})}function K(N){qe.call(this,n,N)}function B(N){qe.call(this,n,N)}return n.$$.update=()=>{n.$$.dirty[0]&8194&&(o?(t(7,c=!0),clearTimeout(h),t(13,h=setTimeout(T,100))):(clearTimeout(h),z.cancelRequest(fl),t(6,f=[]))),n.$$.dirty[0]&4&&(i==null?void 0:i.users)!==-1&&_()},[w,o,i,r,a,u,f,c,d,m,L,C,g,h,P,R,A,M,D,Y,K,B]}class p0 extends Se{constructor(e){super(),ke(this,e,d0,c0,ge,{show:12,hide:0},null,[-1,-1])}get show(){return this.$$.ctx[12]}get hide(){return this.$$.ctx[0]}}function m0(n){let e,t,i,s,l;return{c(){e=b("i"),p(e,"class",t=n[2]+" "+(n[3]?n[1]:n[0])),p(e,"aria-label","Copy")},m(r,o){k(r,e,o),s||(l=[we(i=Ce.call(null,e,n[3]?"":"Copy")),H(e,"click",Ye(n[4]))],s=!0)},p(r,[o]){o&15&&t!==(t=r[2]+" "+(r[3]?r[1]:r[0]))&&p(e,"class",t),i&&tt(i.update)&&o&8&&i.update.call(null,r[3]?"":"Copy")},i:X,o:X,d(r){r&&v(e),s=!1,pe(l)}}}function h0(n,e,t){let{value:i=""}=e,{idleClasses:s="iconoir-copy link-hint"}=e,{successClasses:l="iconoir-check txt-success"}=e,{successDuration:r=500}=e,{class:o=""}=e,a;function u(){i&&(G.copyToClipboard(i),clearTimeout(a),t(3,a=setTimeout(()=>{clearTimeout(a),t(3,a=null)},r)))}return Gt(()=>{a&&clearTimeout(a)}),n.$$set=f=>{"value"in f&&t(5,i=f.value),"idleClasses"in f&&t(0,s=f.idleClasses),"successClasses"in f&&t(1,l=f.successClasses),"successDuration"in f&&t(6,r=f.successDuration),"class"in f&&t(2,o=f.class)},[s,l,o,a,u,i,r]}class _0 extends Se{constructor(e){super(),ke(this,e,h0,m0,ge,{value:5,idleClasses:0,successClasses:1,successDuration:6,class:2})}}function du(n){let e,t,i,s,l,r,o;return{c(){e=b("div"),t=b("div"),i=b("div"),s=b("a"),l=x(n[10]),p(s,"href",n[10]),p(s,"target","_blank"),p(s,"rel","noopener noreferrer"),p(i,"class","content txt-center txt-bold"),p(t,"class","alert alert-warning m-0"),p(e,"class","col-12")},m(a,u){k(a,e,u),y(e,t),y(t,i),y(i,s),y(s,l),r||(o=we(Ce.call(null,s,"Open in new tab")),r=!0)},p(a,u){u&1024&&ve(l,a[10]),u&1024&&p(s,"href",a[10])},d(a){a&&v(e),r=!1,o()}}}function g0(n){let e,t,i,s,l,r,o,a;return{c(){e=b("input"),i=I(),s=b("label"),l=x("Allow comments"),p(e,"type","checkbox"),p(e,"id",t=n[29]),p(s,"for",r=n[29])},m(u,f){k(u,e,f),e.checked=n[2].allowComments,k(u,i,f),k(u,s,f),y(s,l),o||(a=H(e,"change",n[16]),o=!0)},p(u,f){f&536870912&&t!==(t=u[29])&&p(e,"id",t),f&4&&(e.checked=u[2].allowComments),f&536870912&&r!==(r=u[29])&&p(s,"for",r)},d(u){u&&(v(e),v(i),v(s)),o=!1,a()}}}function pu(n){let e,t,i,s,l,r,o,a;return{c(){e=b("span"),t=b("span"),t.textContent="Change password",i=I(),s=b("i"),p(t,"class","txt"),p(s,"class",l="iconoir-nav-arrow-"+(n[5]?"up":"down")),p(e,"class",r="inline-flex m-l-10 "+(n[5]?"link-base":"link-hint"))},m(u,f){k(u,e,f),y(e,t),y(e,i),y(e,s),o||(a=H(e,"click",Ye(ye(n[18]))),o=!0)},p(u,f){f&32&&l!==(l="iconoir-nav-arrow-"+(u[5]?"up":"down"))&&p(s,"class",l),f&32&&r!==(r="inline-flex m-l-10 "+(u[5]?"link-base":"link-hint"))&&p(e,"class",r)},d(u){u&&v(e),o=!1,a()}}}function b0(n){let e,t,i,s,l,r,o,a,u,f=n[2].passwordProtect&&n[8]&&pu(n);return{c(){e=b("input"),i=I(),s=b("label"),l=b("div"),l.textContent="Protect with password",r=I(),f&&f.c(),p(e,"type","checkbox"),p(e,"id",t=n[29]),p(l,"class","txt"),p(s,"for",o=n[29])},m(c,d){k(c,e,d),e.checked=n[2].passwordProtect,k(c,i,d),k(c,s,d),y(s,l),y(s,r),f&&f.m(s,null),a||(u=H(e,"change",n[17]),a=!0)},p(c,d){d&536870912&&t!==(t=c[29])&&p(e,"id",t),d&4&&(e.checked=c[2].passwordProtect),c[2].passwordProtect&&c[8]?f?f.p(c,d):(f=pu(c),f.c(),f.m(s,null)):f&&(f.d(1),f=null),d&536870912&&o!==(o=c[29])&&p(s,"for",o)},d(c){c&&(v(e),v(i),v(s)),f&&f.d(),a=!1,u()}}}function mu(n){let e,t,i,s;return t=new Ee({props:{class:"form-field form-field-toggle p-t-xs",name:"password",$$slots:{default:[w0,({uniqueId:l})=>({29:l}),({uniqueId:l})=>l?536870912:0]},$$scope:{ctx:n}}}),{c(){e=b("div"),$(t.$$.fragment),p(e,"class","block")},m(l,r){k(l,e,r),F(t,e,null),s=!0},p(l,r){const o={};r&1610612800&&(o.$$scope={dirty:r,ctx:l}),t.$set(o)},i(l){s||(E(t.$$.fragment,l),l&&St(()=>{s&&(i||(i=ct(e,Lt,{duration:150},!0)),i.run(1))}),s=!0)},o(l){j(t.$$.fragment,l),l&&(i||(i=ct(e,Lt,{duration:150},!1)),i.run(0)),s=!1},d(l){l&&v(e),q(t),l&&i&&i.end()}}}function w0(n){let e,t,i,s;return{c(){e=b("input"),p(e,"type","password"),p(e,"id",t=n[29]),p(e,"placeholder","Password"),p(e,"minlength","5"),e.required=!0},m(l,r){k(l,e,r),be(e,n[6]),i||(s=H(e,"input",n[19]),i=!0)},p(l,r){r&536870912&&t!==(t=l[29])&&p(e,"id",t),r&64&&e.value!==l[6]&&be(e,l[6])},d(l){l&&v(e),i=!1,s()}}}function y0(n){let e,t,i,s,l,r,o,a,u,f;return{c(){var c;e=b("input"),l=I(),r=b("label"),o=x("Restrict access to prototypes"),p(e,"type","checkbox"),p(e,"id",t=n[29]),e.checked=i=((c=n[2].onlyPrototypes)==null?void 0:c.length)>0,e.disabled=s=!n[9].length,p(r,"for",a=n[29])},m(c,d){k(c,e,d),k(c,l,d),k(c,r,d),y(r,o),u||(f=H(e,"change",n[20]),u=!0)},p(c,d){var m;d&536870912&&t!==(t=c[29])&&p(e,"id",t),d&4&&i!==(i=((m=c[2].onlyPrototypes)==null?void 0:m.length)>0)&&(e.checked=i),d&512&&s!==(s=!c[9].length)&&(e.disabled=s),d&536870912&&a!==(a=c[29])&&p(r,"for",a)},d(c){c&&(v(e),v(l),v(r)),u=!1,f()}}}function hu(n){let e,t,i,s;return t=new Ee({props:{class:"form-field link-prototypes-dropdown p-t-xs",$$slots:{default:[v0]},$$scope:{ctx:n}}}),{c(){e=b("div"),$(t.$$.fragment),p(e,"class","block")},m(l,r){k(l,e,r),F(t,e,null),s=!0},p(l,r){const o={};r&1073742340&&(o.$$scope={dirty:r,ctx:l}),t.$set(o)},i(l){s||(E(t.$$.fragment,l),l&&St(()=>{s&&(i||(i=ct(e,Lt,{duration:150},!0)),i.run(1))}),s=!0)},o(l){j(t.$$.fragment,l),l&&(i||(i=ct(e,Lt,{duration:150},!1)),i.run(0)),s=!1},d(l){l&&v(e),q(t),l&&i&&i.end()}}}function v0(n){let e,t,i;function s(r){n[21](r)}let l={items:n[9],closable:!1,multiple:!0,upside:!0,selectPlaceholder:"Select prototypes"};return n[2].onlyPrototypes!==void 0&&(l.keyOfSelected=n[2].onlyPrototypes),e=new pn({props:l}),se.push(()=>Ae(e,"keyOfSelected",s)),{c(){$(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};o&512&&(a.items=r[9]),!t&&o&4&&(t=!0,a.keyOfSelected=r[2].onlyPrototypes,Ne(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){j(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function k0(n){let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g=n[2].id&&du(n);i=new Ee({props:{class:"form-field form-field-toggle",name:"allowComments",$$slots:{default:[g0,({uniqueId:T})=>({29:T}),({uniqueId:T})=>T?536870912:0]},$$scope:{ctx:n}}}),r=new Ee({props:{class:"form-field form-field-toggle",name:"passwordProtect",$$slots:{default:[b0,({uniqueId:T})=>({29:T}),({uniqueId:T})=>T?536870912:0]},$$scope:{ctx:n}}});let w=n[2].passwordProtect&&n[5]&&mu(n);f=new Ee({props:{class:"form-field form-field-toggle",$$slots:{default:[y0,({uniqueId:T})=>({29:T}),({uniqueId:T})=>T?536870912:0]},$$scope:{ctx:n}}});let _=n[4]&&hu(n);return{c(){e=b("form"),g&&g.c(),t=I(),$(i.$$.fragment),s=I(),l=b("div"),$(r.$$.fragment),o=I(),w&&w.c(),a=I(),u=b("div"),$(f.$$.fragment),c=I(),_&&_.c(),p(l,"class","col-12"),p(u,"class","col-12"),p(e,"id",n[11]),p(e,"class","grid")},m(T,L){k(T,e,L),g&&g.m(e,null),y(e,t),F(i,e,null),y(e,s),y(e,l),F(r,l,null),y(l,o),w&&w.m(l,null),y(e,a),y(e,u),F(f,u,null),y(u,c),_&&_.m(u,null),d=!0,m||(h=H(e,"submit",ye(n[12])),m=!0)},p(T,L){T[2].id?g?g.p(T,L):(g=du(T),g.c(),g.m(e,t)):g&&(g.d(1),g=null);const O={};L&1610612740&&(O.$$scope={dirty:L,ctx:T}),i.$set(O);const C={};L&1610613028&&(C.$$scope={dirty:L,ctx:T}),r.$set(C),T[2].passwordProtect&&T[5]?w?(w.p(T,L),L&36&&E(w,1)):(w=mu(T),w.c(),E(w,1),w.m(l,null)):w&&(oe(),j(w,1,1,()=>{w=null}),ae());const S={};L&1610613268&&(S.$$scope={dirty:L,ctx:T}),f.$set(S),T[4]?_?(_.p(T,L),L&16&&E(_,1)):(_=hu(T),_.c(),E(_,1),_.m(u,null)):_&&(oe(),j(_,1,1,()=>{_=null}),ae())},i(T){d||(E(i.$$.fragment,T),E(r.$$.fragment,T),E(w),E(f.$$.fragment,T),E(_),d=!0)},o(T){j(i.$$.fragment,T),j(r.$$.fragment,T),j(w),j(f.$$.fragment,T),j(_),d=!1},d(T){T&&v(e),g&&g.d(),q(i),q(r),w&&w.d(),q(f),_&&_.d(),m=!1,h()}}}function S0(n){let e,t,i,s,l=n[2].id?"Update link":"Create link",r,o,a,u,f;return{c(){e=b("div"),t=b("button"),t.innerHTML='<i class="iconoir-arrow-left"></i>',i=I(),s=b("h5"),r=x(l),o=I(),a=b("div"),a.textContent="",p(t,"type","button"),p(t,"class","btn btn-circle btn-sm btn-transparent btn-hint"),p(e,"class","flex-fill"),p(s,"class","title"),p(a,"class","flex-fill")},m(c,d){k(c,e,d),y(e,t),k(c,i,d),k(c,s,d),y(s,r),k(c,o,d),k(c,a,d),u||(f=[we(Ce.call(null,t,{position:"right",text:"Back"})),H(t,"click",n[1])],u=!0)},p(c,d){d&4&&l!==(l=c[2].id?"Update link":"Create link")&&ve(r,l)},d(c){c&&(v(e),v(i),v(s),v(o),v(a)),u=!1,pe(f)}}}function T0(n){let e,t,i,s,l=n[2].id?"Update":"Create",r,o,a,u;return{c(){e=b("button"),e.innerHTML='<span class="txt">Back</span>',t=I(),i=b("button"),s=b("span"),r=x(l),o=x(" link"),p(e,"type","button"),p(e,"class","btn btn-transparent m-r-auto"),p(s,"class","txt"),p(i,"type","submit"),p(i,"form",n[11]),p(i,"class","btn btn-expanded btn-primary"),i.disabled=n[7],Z(i,"btn-loading",n[7])},m(f,c){k(f,e,c),k(f,t,c),k(f,i,c),y(i,s),y(s,r),y(s,o),a||(u=H(e,"click",n[1]),a=!0)},p(f,c){c&4&&l!==(l=f[2].id?"Update":"Create")&&ve(r,l),c&128&&(i.disabled=f[7]),c&128&&Z(i,"btn-loading",f[7])},d(f){f&&(v(e),v(t),v(i)),a=!1,u()}}}function O0(n){let e,t,i;const s=[{popup:!0},{beforeHide:n[22]},n[13]];function l(o){n[24](o)}let r={$$slots:{footer:[T0],header:[S0],default:[k0]},$$scope:{ctx:n}};for(let o=0;o<s.length;o+=1)r=Ue(r,s[o]);return n[0]!==void 0&&(r.active=n[0]),e=new mn({props:r}),n[23](e),se.push(()=>Ae(e,"active",l)),e.$on("show",n[25]),e.$on("hide",n[26]),{c(){$(e.$$.fragment)},m(o,a){F(e,o,a),i=!0},p(o,[a]){const u=a&8320?bt(s,[s[0],a&128&&{beforeHide:o[22]},a&8192&&Nt(o[13])]):{};a&1073743860&&(u.$$scope={dirty:a,ctx:o}),!t&&a&1&&(t=!0,u.active=o[0],Ne(()=>t=!1)),e.$set(u)},i(o){i||(E(e.$$.fragment,o),i=!0)},o(o){j(e.$$.fragment,o),i=!1},d(o){n[23](null),q(e,o)}}}function C0(n,e,t){let i,s;const l=["active","show","hide"];let r=ft(e,l),o;Q(n,$t,ee=>t(15,o=ee));const a=it(),u="link_upsert_"+G.randomString(5);let{active:f=!1}=e,c,d={},m=!1,h=!1,g="",w=!1,_=!1;function T(ee){return t(2,d=structuredClone(ee)),O(),c==null?void 0:c.show()}function L(){return c==null?void 0:c.hide()}function O(){var ee;Jt({}),t(4,m=((ee=d.onlyPrototypes)==null?void 0:ee.length)>0),t(8,_=!!d.passwordProtect),t(5,h=!d.id||!_),t(6,g=""),t(7,w=!1)}async function C(){t(7,w=!0);try{const ee=!d.id,J={project:d.project,allowComments:d.allowComments,onlyPrototypes:m?d.onlyPrototypes:[],passwordProtect:d.passwordProtect};ee&&!J.passwordProtect?(J.password="pb123456",J.passwordConfirm=J.password):J.passwordProtect&&h&&(J.password=g,J.passwordConfirm=J.password),ee?(t(2,d=await z.collection("links").create(J)),gt("Successfully created new project link.")):(t(2,d=await z.collection("links").update(d.id,J)),gt("Successfully updated project link.")),t(7,w=!1),L(),a("save",d)}catch(ee){t(7,w=!1),ee.isAbort||z.error(ee)}}function S(){d.allowComments=this.checked,t(2,d)}function P(){d.passwordProtect=this.checked,t(2,d)}const R=()=>t(5,h=!h);function A(){g=this.value,t(6,g)}const M=ee=>{t(4,m=ee.target.checked)};function D(ee){n.$$.not_equal(d.onlyPrototypes,ee)&&(d.onlyPrototypes=ee,t(2,d))}const Y=()=>!w;function K(ee){se[ee?"unshift":"push"](()=>{c=ee,t(3,c)})}function B(ee){f=ee,t(0,f)}function N(ee){qe.call(this,n,ee)}function V(ee){qe.call(this,n,ee)}return n.$$set=ee=>{e=Ue(Ue({},e),Kt(ee)),t(13,r=ft(e,l)),"active"in ee&&t(0,f=ee.active)},n.$$.update=()=>{n.$$.dirty&4&&t(10,i=G.getProjectLinkURL(d)),n.$$.dirty&32768&&t(9,s=o.map(ee=>({value:ee.id,label:ee.title}))||[])},[f,L,d,c,m,h,g,w,_,s,i,u,C,r,T,o,S,P,R,A,M,D,Y,K,B,N,V]}class E0 extends Se{constructor(e){super(),ke(this,e,C0,O0,ge,{active:0,show:14,hide:1})}get show(){return this.$$.ctx[14]}get hide(){return this.$$.ctx[1]}}function L0(n){let e,t,i,s,l=[{type:t=n[5].type||"text"},{value:n[4]},{disabled:n[3]},{readOnly:n[2]},n[5]],r={};for(let o=0;o<l.length;o+=1)r=Ue(r,l[o]);return{c(){e=b("input"),Kn(e,r)},m(o,a){k(o,e,a),"value"in r&&(e.value=r.value),e.autofocus&&e.focus(),i||(s=H(e,"input",n[6]),i=!0)},p(o,[a]){Kn(e,r=bt(l,[a&32&&t!==(t=o[5].type||"text")&&{type:t},a&16&&e.value!==o[4]&&{value:o[4]},a&8&&{disabled:o[3]},a&4&&{readOnly:o[2]},a&32&&o[5]])),"value"in r&&(e.value=r.value)},i:X,o:X,d(o){o&&v(e),i=!1,s()}}}function I0(n,e,t){let i;const s=["value","separator","readonly","disabled"];let l=ft(e,s),{value:r=[]}=e,{separator:o=","}=e,{readonly:a=null}=e,{disabled:u=null}=e;const f=c=>{t(0,r=G.splitNonEmpty(c.target.value,o))};return n.$$set=c=>{e=Ue(Ue({},e),Kt(c)),t(5,l=ft(e,s)),"value"in c&&t(0,r=c.value),"separator"in c&&t(1,o=c.separator),"readonly"in c&&t(2,a=c.readonly),"disabled"in c&&t(3,u=c.disabled)},n.$$.update=()=>{n.$$.dirty&3&&t(4,i=G.joinNonEmpty(r,o+" "))},[r,o,a,u,i,l,f]}class j0 extends Se{constructor(e){super(),ke(this,e,I0,L0,ge,{value:0,separator:1,readonly:2,disabled:3})}}function _u(n){let e,t,i,s,l,r,o;return{c(){e=b("div"),t=b("div"),i=b("div"),s=b("a"),l=x(n[7]),p(s,"href",n[7]),p(s,"target","_blank"),p(s,"rel","noopener noreferrer"),p(i,"class","content txt-center txt-bold"),p(t,"class","alert alert-warning m-0"),p(e,"class","col-12")},m(a,u){k(a,e,u),y(e,t),y(t,i),y(i,s),y(s,l),r||(o=we(Ce.call(null,s,"Open in new tab")),r=!0)},p(a,u){u&128&&ve(l,a[7]),u&128&&p(s,"href",a[7])},d(a){a&&v(e),r=!1,o()}}}function P0(n){let e,t,i,s,l,r,o,a,u;function f(d){n[12](d)}let c={id:n[21],required:!0,autofocus:!0};return n[4]!==void 0&&(c.value=n[4]),l=new j0({props:c}),se.push(()=>Ae(l,"value",f)),{c(){e=b("label"),t=x("Email(s)"),s=I(),$(l.$$.fragment),o=I(),a=b("div"),a.textContent="Separate multiple emails with comma.",p(e,"for",i=n[21]),p(a,"class","help-block")},m(d,m){k(d,e,m),y(e,t),k(d,s,m),F(l,d,m),k(d,o,m),k(d,a,m),u=!0},p(d,m){(!u||m&2097152&&i!==(i=d[21]))&&p(e,"for",i);const h={};m&2097152&&(h.id=d[21]),!r&&m&16&&(r=!0,h.value=d[4],Ne(()=>r=!1)),l.$set(h)},i(d){u||(E(l.$$.fragment,d),u=!0)},o(d){j(l.$$.fragment,d),u=!1},d(d){d&&(v(e),v(s),v(o),v(a)),q(l,d)}}}function N0(n){let e,t,i,s,l,r,o,a,u;return{c(){e=b("label"),t=x("Additional message"),s=I(),l=b("textarea"),p(e,"for",i=n[21]),p(l,"id",r=n[21]),p(l,"rows","3"),p(l,"placeholder",o=n[2].passwordProtected?"eg. The password is...":"")},m(f,c){k(f,e,c),y(e,t),k(f,s,c),k(f,l,c),be(l,n[5]),a||(u=H(l,"input",n[13]),a=!0)},p(f,c){c&2097152&&i!==(i=f[21])&&p(e,"for",i),c&2097152&&r!==(r=f[21])&&p(l,"id",r),c&4&&o!==(o=f[2].passwordProtected?"eg. The password is...":"")&&p(l,"placeholder",o),c&32&&be(l,f[5])},d(f){f&&(v(e),v(s),v(l)),a=!1,u()}}}function A0(n){let e,t,i,s,l,r,o,a,u=n[2].id&&_u(n);return i=new Ee({props:{class:"form-field required",name:"emails",$$slots:{default:[P0,({uniqueId:f})=>({21:f}),({uniqueId:f})=>f?2097152:0]},$$scope:{ctx:n}}}),l=new Ee({props:{class:"form-field",name:"message",$$slots:{default:[N0,({uniqueId:f})=>({21:f}),({uniqueId:f})=>f?2097152:0]},$$scope:{ctx:n}}}),{c(){e=b("form"),u&&u.c(),t=I(),$(i.$$.fragment),s=I(),$(l.$$.fragment),p(e,"id",n[8]),p(e,"class","grid grid-sm")},m(f,c){k(f,e,c),u&&u.m(e,null),y(e,t),F(i,e,null),y(e,s),F(l,e,null),r=!0,o||(a=H(e,"submit",ye(n[9])),o=!0)},p(f,c){f[2].id?u?u.p(f,c):(u=_u(f),u.c(),u.m(e,t)):u&&(u.d(1),u=null);const d={};c&6291472&&(d.$$scope={dirty:c,ctx:f}),i.$set(d);const m={};c&6291492&&(m.$$scope={dirty:c,ctx:f}),l.$set(m)},i(f){r||(E(i.$$.fragment,f),E(l.$$.fragment,f),r=!0)},o(f){j(i.$$.fragment,f),j(l.$$.fragment,f),r=!1},d(f){f&&v(e),u&&u.d(),q(i),q(l),o=!1,a()}}}function M0(n){let e,t,i,s,l,r,o,a;return{c(){e=b("div"),t=b("button"),t.innerHTML='<i class="iconoir-arrow-left"></i>',i=I(),s=b("h5"),s.textContent="Share project link",l=I(),r=b("div"),r.textContent="",p(t,"type","button"),p(t,"class","btn btn-circle btn-sm btn-transparent btn-hint"),p(e,"class","flex-fill"),p(s,"class","title"),p(r,"class","flex-fill")},m(u,f){k(u,e,f),y(e,t),k(u,i,f),k(u,s,f),k(u,l,f),k(u,r,f),o||(a=[we(Ce.call(null,t,{position:"right",text:"Back"})),H(t,"click",n[1])],o=!0)},p:X,d(u){u&&(v(e),v(i),v(s),v(l),v(r)),o=!1,pe(a)}}}function D0(n){let e,t,i,s,l,r,o,a,u;return{c(){e=b("button"),t=b("span"),t.textContent="Back",i=I(),s=b("button"),l=b("i"),r=I(),o=b("span"),o.textContent="Send",p(t,"class","txt"),p(e,"type","button"),p(e,"class","btn btn-transparent m-r-auto"),p(e,"disable",n[6]),p(l,"class","iconoir-send-mail"),p(o,"class","txt"),p(s,"type","submit"),p(s,"form",n[8]),p(s,"class","btn btn-expanded-sm btn-primary"),s.disabled=n[6],Z(s,"btn-loading",n[6])},m(f,c){k(f,e,c),y(e,t),k(f,i,c),k(f,s,c),y(s,l),y(s,r),y(s,o),a||(u=H(e,"click",n[1]),a=!0)},p(f,c){c&64&&p(e,"disable",f[6]),c&64&&(s.disabled=f[6]),c&64&&Z(s,"btn-loading",f[6])},d(f){f&&(v(e),v(i),v(s)),a=!1,u()}}}function R0(n){let e,t,i;const s=[{popup:!0},{beforeHide:n[14]},n[10]];function l(o){n[16](o)}let r={$$slots:{footer:[D0],header:[M0],default:[A0]},$$scope:{ctx:n}};for(let o=0;o<s.length;o+=1)r=Ue(r,s[o]);return n[0]!==void 0&&(r.active=n[0]),e=new mn({props:r}),n[15](e),se.push(()=>Ae(e,"active",l)),e.$on("show",n[17]),e.$on("hide",n[18]),{c(){$(e.$$.fragment)},m(o,a){F(e,o,a),i=!0},p(o,[a]){const u=a&1088?bt(s,[s[0],a&64&&{beforeHide:o[14]},a&1024&&Nt(o[10])]):{};a&4194548&&(u.$$scope={dirty:a,ctx:o}),!t&&a&1&&(t=!0,u.active=o[0],Ne(()=>t=!1)),e.$set(u)},i(o){i||(E(e.$$.fragment,o),i=!0)},o(o){j(e.$$.fragment,o),i=!1},d(o){n[15](null),q(e,o)}}}function H0(n,e,t){let i;const s=["active","show","hide"];let l=ft(e,s);const r=it(),o="share_"+G.randomString(5);let{active:a=!1}=e,u,f={},c=[],d="",m=!1;function h(A=null){return w(),t(2,f=A?structuredClone(A):{}),u==null?void 0:u.show()}function g(){return u==null?void 0:u.hide()}function w(){Jt({}),t(6,m=!1),t(4,c=[]),t(5,d="")}async function _(){t(6,m=!0);try{await z.send("/api/pr/share/"+encodeURIComponent(f.id),{method:"POST",body:{emails:c,message:d}}),t(6,m=!1),g(),r("submit"),gt("Successfully shared the project link!")}catch(A){A.isAbort||(t(6,m=!1),z.error(A))}}function T(A){c=A,t(4,c)}function L(){d=this.value,t(5,d)}const O=()=>!m;function C(A){se[A?"unshift":"push"](()=>{u=A,t(3,u)})}function S(A){a=A,t(0,a)}function P(A){qe.call(this,n,A)}function R(A){qe.call(this,n,A)}return n.$$set=A=>{e=Ue(Ue({},e),Kt(A)),t(10,l=ft(e,s)),"active"in A&&t(0,a=A.active)},n.$$.update=()=>{n.$$.dirty&4&&t(7,i=G.getProjectLinkURL(f))},[a,g,f,u,c,d,m,i,o,_,l,h,T,L,O,C,S,P,R]}class U0 extends Se{constructor(e){super(),ke(this,e,H0,R0,ge,{active:0,show:11,hide:1})}get show(){return this.$$.ctx[11]}get hide(){return this.$$.ctx[1]}}function gu(n,e,t){const i=n.slice();i[29]=e[t];const s=G.getProjectLinkURL(i[29]);return i[30]=s,i}function F0(n){let e=[],t=new Map,i,s,l=Ie(n[7]);const r=a=>a[29].id;for(let a=0;a<l.length;a+=1){let u=gu(n,l,a),f=r(u);t.set(f,e[a]=wu(f,u))}let o=null;return l.length||(o=bu()),{c(){for(let a=0;a<e.length;a+=1)e[a].c();i=De(),o&&o.c()},m(a,u){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,u);k(a,i,u),o&&o.m(a,u),s=!0},p(a,u){u[0]&2272&&(l=Ie(a[7]),oe(),e=Tt(e,u,r,1,a,l,t,i.parentNode,At,wu,i,gu),ae(),!l.length&&o?o.p(a,u):l.length?o&&(o.d(1),o=null):(o=bu(),o.c(),o.m(i.parentNode,i)))},i(a){if(!s){for(let u=0;u<l.length;u+=1)E(e[u]);s=!0}},o(a){for(let u=0;u<e.length;u+=1)j(e[u]);s=!1},d(a){a&&v(i);for(let u=0;u<e.length;u+=1)e[u].d(a);o&&o.d(a)}}}function q0(n){let e;return{c(){e=b("div"),e.innerHTML='<div class="skeleton-loader"></div>',p(e,"class","project-link m-t-10 m-b-10")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function bu(n){let e;return{c(){e=b("div"),e.textContent=`Create project links that you can send to your clients and teammates for feedback.
                `,p(e,"class","block txt-center txt-hint")},m(t,i){k(t,e,i)},p:X,d(t){t&&v(e)}}}function wu(n,e){let t,i,s,l=e[30]+"",r,o,a,u,f,c,d,m,h,g,w,_,T,L,O,C,S,P,R,A,M,D,Y,K,B,N,V,ee;u=new _0({props:{class:"m-l-5",value:e[30]}});function J(){return e[14](e[29])}function U(){return e[15](e[29])}function ce(){return e[16](e[29])}return{key:n,first:null,c(){var re;t=b("div"),i=b("div"),s=b("a"),r=x(l),a=I(),$(u.$$.fragment),f=I(),c=b("div"),d=b("span"),m=x("Comments"),g=I(),w=b("span"),_=x("Password"),L=I(),O=b("span"),C=x("Restricted"),P=I(),R=b("nav"),A=b("button"),A.innerHTML='<i class="iconoir-share-android"></i>',M=I(),D=b("button"),D.innerHTML='<i class="iconoir-settings"></i>',Y=I(),K=b("button"),K.innerHTML='<i class="iconoir-trash"></i>',B=I(),p(s,"href",o=e[30]),p(s,"target","_blank"),p(s,"rel","noopener noreferrer"),p(s,"class","url"),p(d,"class",h="meta-item label-sm label label-"+(e[29].allowComments?"success":"disabled")),p(w,"class",T="meta-item label-sm label label-"+(e[29].passwordProtect?"success":"disabled")),p(O,"class",S="meta-item label-sm label label-"+((re=e[29].onlyPrototypes)!=null&&re.length?"success":"disabled")),p(c,"class","meta"),p(i,"class","content"),p(A,"type","button"),p(A,"class","ctrl-item btn btn-sm btn-circle btn-transparent btn-hint"),p(D,"type","button"),p(D,"class","ctrl-item btn btn-sm btn-circle btn-transparent btn-hint"),p(K,"type","button"),p(K,"class","ctrl-item btn btn-sm btn-circle btn-transparent btn-hint"),p(R,"class","ctrls"),p(t,"class","project-link"),this.first=t},m(re,de){k(re,t,de),y(t,i),y(i,s),y(s,r),y(i,a),F(u,i,null),y(i,f),y(i,c),y(c,d),y(d,m),y(c,g),y(c,w),y(w,_),y(c,L),y(c,O),y(O,C),y(t,P),y(t,R),y(R,A),y(R,M),y(R,D),y(R,Y),y(R,K),y(t,B),N=!0,V||(ee=[we(Ce.call(null,s,{position:"top",text:"Open in new tab"})),we(Ce.call(null,A,"Share")),H(A,"click",J),we(Ce.call(null,D,"Settings")),H(D,"click",U),we(Ce.call(null,K,"Delete")),H(K,"click",ce)],V=!0)},p(re,de){var Je;e=re,(!N||de[0]&128)&&l!==(l=e[30]+"")&&ve(r,l),(!N||de[0]&128&&o!==(o=e[30]))&&p(s,"href",o);const Le={};de[0]&128&&(Le.value=e[30]),u.$set(Le),(!N||de[0]&128&&h!==(h="meta-item label-sm label label-"+(e[29].allowComments?"success":"disabled")))&&p(d,"class",h),(!N||de[0]&128&&T!==(T="meta-item label-sm label label-"+(e[29].passwordProtect?"success":"disabled")))&&p(w,"class",T),(!N||de[0]&128&&S!==(S="meta-item label-sm label label-"+((Je=e[29].onlyPrototypes)!=null&&Je.length?"success":"disabled")))&&p(O,"class",S)},i(re){N||(E(u.$$.fragment,re),N=!0)},o(re){j(u.$$.fragment,re),N=!1},d(re){re&&v(t),q(u),V=!1,pe(ee)}}}function $0(n){let e,t,i,s;const l=[q0,F0],r=[];function o(a,u){return a[8]?0:1}return t=o(n),i=r[t]=l[t](n),{c(){e=b("div"),i.c(),p(e,"class","project-links-list")},m(a,u){k(a,e,u),r[t].m(e,null),s=!0},p(a,u){let f=t;t=o(a),t===f?r[t].p(a,u):(oe(),j(r[f],1,1,()=>{r[f]=null}),ae(),i=r[t],i?i.p(a,u):(i=r[t]=l[t](a),i.c()),E(i,1),i.m(e,null))},i(a){s||(E(i),s=!0)},o(a){j(i),s=!1},d(a){a&&v(e),r[t].d()}}}function W0(n){let e;return{c(){e=b("h5"),e.textContent="Project links",p(e,"class","block txt-center")},m(t,i){k(t,e,i)},p:X,d(t){t&&v(e)}}}function V0(n){let e,t,i,s,l,r,o,a;return{c(){e=b("button"),e.innerHTML='<span class="txt">Close</span>',t=I(),i=b("button"),s=b("i"),l=I(),r=b("span"),r.textContent="New link",p(e,"type","button"),p(e,"class","btn btn-transparent m-r-auto"),p(s,"class","iconoir-plus"),p(r,"class","txt"),p(i,"type","button"),p(i,"class","btn btn-expanded btn-primary"),i.disabled=n[8]},m(u,f){k(u,e,f),k(u,t,f),k(u,i,f),y(i,s),y(i,l),y(i,r),o||(a=[H(e,"click",n[13]),H(i,"click",function(){var c,d;tt((c=n[6])==null?void 0:c.show({project:n[10].id,allowComments:!0}))&&((d=n[6])==null||d.show({project:n[10].id,allowComments:!0}).apply(this,arguments))})],o=!0)},p(u,f){n=u,f[0]&256&&(i.disabled=n[8])},d(u){u&&(v(e),v(t),v(i)),o=!1,pe(a)}}}function z0(n){let e,t,i,s,l,r,o,a,u;function f(w){n[18](w)}let c={popup:!0,class:n[9]?"temp-hide":"",$$slots:{footer:[V0],header:[W0],default:[$0]},$$scope:{ctx:n}};n[0]!==void 0&&(c.active=n[0]),e=new mn({props:c}),n[17](e),se.push(()=>Ae(e,"active",f)),e.$on("show",n[19]),e.$on("hide",n[20]);function d(w){n[22](w)}let m={};n[2]!==void 0&&(m.active=n[2]),s=new E0({props:m}),n[21](s),se.push(()=>Ae(s,"active",d)),s.$on("save",n[23]);function h(w){n[25](w)}let g={};return n[3]!==void 0&&(g.active=n[3]),o=new U0({props:g}),n[24](o),se.push(()=>Ae(o,"active",h)),{c(){$(e.$$.fragment),i=I(),$(s.$$.fragment),r=I(),$(o.$$.fragment)},m(w,_){F(e,w,_),k(w,i,_),F(s,w,_),k(w,r,_),F(o,w,_),u=!0},p(w,_){const T={};_[0]&512&&(T.class=w[9]?"temp-hide":""),_[0]&1504|_[1]&4&&(T.$$scope={dirty:_,ctx:w}),!t&&_[0]&1&&(t=!0,T.active=w[0],Ne(()=>t=!1)),e.$set(T);const L={};!l&&_[0]&4&&(l=!0,L.active=w[2],Ne(()=>l=!1)),s.$set(L);const O={};!a&&_[0]&8&&(a=!0,O.active=w[3],Ne(()=>a=!1)),o.$set(O)},i(w){u||(E(e.$$.fragment,w),E(s.$$.fragment,w),E(o.$$.fragment,w),u=!0)},o(w){j(e.$$.fragment,w),j(s.$$.fragment,w),j(o.$$.fragment,w),u=!1},d(w){w&&(v(i),v(r)),n[17](null),q(e,w),n[21](null),q(s,w),n[24](null),q(o,w)}}}const yu="list_links";function B0(n,e,t){let i;Q(n,cn,V=>t(10,i=V));const s=it();let{active:l=!1}=e,r,o,a,u=!1,f=!1,c=[],d=!1,m=!1;function h(){return w(),r==null?void 0:r.show()}function g(){return z.cancelRequest(yu),r==null?void 0:r.hide()}async function w(){t(8,d=!0);try{t(7,c=await z.collection("links").getFullList({filter:`project='${i==null?void 0:i.id}'`,requestKey:yu}))}catch(V){V.isAbort||z.error(V)}t(8,d=!1)}function _(V){Pt("Do you really want to delete the selected project link?",()=>T(V))}async function T(V){if(V!=null&&V.id)try{await z.collection("links").delete(V.id),G.removeByKey(c,"id",V.id),t(7,c),gt("Successfully deleted project link."),s("delete",V)}catch(ee){ee.isAbort||z.error(ee)}}Gt(()=>{g()});const L=()=>g(),O=V=>o==null?void 0:o.show(V),C=V=>a==null?void 0:a.show(V),S=V=>_(V);function P(V){se[V?"unshift":"push"](()=>{r=V,t(4,r)})}function R(V){l=V,t(0,l)}function A(V){qe.call(this,n,V)}function M(V){qe.call(this,n,V)}function D(V){se[V?"unshift":"push"](()=>{a=V,t(6,a)})}function Y(V){u=V,t(2,u)}const K=V=>{G.pushOrReplaceObject(c,V.detail),t(7,c)};function B(V){se[V?"unshift":"push"](()=>{o=V,t(5,o)})}function N(V){f=V,t(3,f)}return n.$$set=V=>{"active"in V&&t(0,l=V.active)},n.$$.update=()=>{n.$$.dirty[0]&12&&t(9,m=u||f)},[l,g,u,f,r,o,a,c,d,m,i,_,h,L,O,C,S,P,R,A,M,D,Y,K,B,N]}class Z0 extends Se{constructor(e){super(),ke(this,e,B0,z0,ge,{active:0,show:12,hide:1},null,[-1,-1])}get show(){return this.$$.ctx[12]}get hide(){return this.$$.ctx[1]}}function vu(n){let e;return{c(){e=b("div"),e.innerHTML='<span class="loader loader-lg"></span>',p(e,"class","block txt-center")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function Y0(n){let e,t,i,s,l,r,o=n[7]&&vu();return i=new Sb({props:{projectId:n[0].projectId,initialPrototypeId:n[6]}}),l=new Qb({}),{c(){var a;o&&o.c(),e=I(),t=b("div"),$(i.$$.fragment),s=I(),$(l.$$.fragment),p(t,"class","screens-list-wrapper svelte-1y0govx"),Z(t,"hidden",n[7]||!((a=n[2])!=null&&a.id))},m(a,u){o&&o.m(a,u),k(a,e,u),k(a,t,u),F(i,t,null),y(t,s),F(l,t,null),r=!0},p(a,u){var c;a[7]?o||(o=vu(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null);const f={};u&1&&(f.projectId=a[0].projectId),u&64&&(f.initialPrototypeId=a[6]),i.$set(f),(!r||u&132)&&Z(t,"hidden",a[7]||!((c=a[2])!=null&&c.id))},i(a){r||(E(i.$$.fragment,a),E(l.$$.fragment,a),r=!0)},o(a){j(i.$$.fragment,a),j(l.$$.fragment,a),r=!1},d(a){a&&(v(e),v(t)),o&&o.d(a),q(i),q(l)}}}function K0(n){let e;return{c(){e=b("div"),p(e,"class","breadcrumb-item")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function G0(n){let e,t,i,s;function l(o){n[11](o)}let r={collection:"projects"};return n[2]!==void 0&&(r.model=n[2]),t=new mr({props:r}),se.push(()=>Ae(t,"model",l)),{c(){e=b("div"),$(t.$$.fragment),p(e,"class","breadcrumb-item entrance-left")},m(o,a){k(o,e,a),F(t,e,null),s=!0},p(o,a){const u={};!i&&a&4&&(i=!0,u.model=o[2],Ne(()=>i=!1)),t.$set(u)},i(o){s||(E(t.$$.fragment,o),s=!0)},o(o){j(t.$$.fragment,o),s=!1},d(o){o&&v(e),q(t)}}}function ku(n){let e,t,i,s,l,r;return{c(){e=b("div"),t=b("button"),t.innerHTML='<i class="iconoir-user-plus"></i>',i=I(),s=b("button"),s.innerHTML='<i class="iconoir-internet txt-base"></i>',p(t,"type","button"),p(t,"class","menu-item"),p(s,"type","button"),p(s,"class","menu-item"),p(e,"class","header-menu entrance-left")},m(o,a){k(o,e,a),y(e,t),y(e,i),y(e,s),l||(r=[we(Ce.call(null,t,"Project owners")),H(t,"click",n[12]),we(Ce.call(null,s,"Share")),H(s,"click",n[13])],l=!0)},p:X,d(o){o&&v(e),l=!1,pe(r)}}}function J0(n){var g;let e,t,i,s,l,r,o,a,u,f;const c=[G0,K0],d=[];function m(w,_){var T;return(T=w[2])!=null&&T.id?0:1}s=m(n),l=d[s]=c[s](n);let h=((g=n[2])==null?void 0:g.id)&&ku(n);return{c(){e=b("nav"),t=b("a"),t.textContent="Projects",i=I(),l.c(),r=I(),h&&h.c(),o=De(),p(t,"href","/projects"),p(t,"class","breadcrumb-item"),p(e,"class","breadcrumbs svelte-1y0govx")},m(w,_){k(w,e,_),y(e,t),y(e,i),d[s].m(e,null),k(w,r,_),h&&h.m(w,_),k(w,o,_),a=!0,u||(f=we(Ti.call(null,t)),u=!0)},p(w,_){var L;let T=s;s=m(w),s===T?d[s].p(w,_):(oe(),j(d[T],1,1,()=>{d[T]=null}),ae(),l=d[s],l?l.p(w,_):(l=d[s]=c[s](w),l.c()),E(l,1),l.m(e,null)),(L=w[2])!=null&&L.id?h?h.p(w,_):(h=ku(w),h.c(),h.m(o.parentNode,o)):h&&(h.d(1),h=null)},i(w){a||(E(l),a=!0)},o(w){j(l),a=!1},d(w){w&&(v(e),v(r),v(o)),d[s].d(),h&&h.d(w),u=!1,f()}}}function Su(n){let e;return{c(){e=b("label"),e.innerHTML='<i class="iconoir-upload-square"></i> <span class="txt">Upload screens</span>',p(e,"for","screen_uploader"),p(e,"class","btn btn-primary btn-screen-upload entrance-right")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function X0(n){var i;let e,t=((i=n[1])==null?void 0:i.id)&&Su();return{c(){t&&t.c(),e=De()},m(s,l){t&&t.m(s,l),k(s,e,l)},p(s,l){var r;(r=s[1])!=null&&r.id?t||(t=Su(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){s&&v(e),t&&t.d(s)}}}function Q0(n){let e,t,i,s,l,r;e=new Pi({props:{title:n[5],$$slots:{"header-right":[X0],"header-left":[J0],default:[Y0]},$$scope:{ctx:n}}});let o={};i=new p0({props:o}),n[14](i);let a={};return l=new Z0({props:a}),n[15](l),{c(){$(e.$$.fragment),t=I(),$(i.$$.fragment),s=I(),$(l.$$.fragment)},m(u,f){F(e,u,f),k(u,t,f),F(i,u,f),k(u,s,f),F(l,u,f),r=!0},p(u,[f]){const c={};f&32&&(c.title=u[5]),f&131295&&(c.$$scope={dirty:f,ctx:u}),e.$set(c);const d={};i.$set(d);const m={};l.$set(m)},i(u){r||(E(e.$$.fragment,u),E(i.$$.fragment,u),E(l.$$.fragment,u),r=!0)},o(u){j(e.$$.fragment,u),j(i.$$.fragment,u),j(l.$$.fragment,u),r=!1},d(u){u&&(v(t),v(s)),q(e,u),n[14](null),q(i,u),n[15](null),q(l,u)}}}function x0(n,e,t){let i,s,l,r,o;Q(n,rn,O=>t(9,s=O)),Q(n,Et,O=>t(1,l=O)),Q(n,ui,O=>t(10,r=O)),Q(n,cn,O=>t(2,o=O));let{params:a}=e,u,f,c="",d,m;async function h(O){Zs(),rr(),o1(O),Te(rn,s=!0,s);try{const C=await z.collection("projects").getOne(O);Qn(C,!0),Te(rn,s=!1,s)}catch(C){C.isAbort||(Te(rn,s=!1,s),z.error(C),C.status==404&&Yt("/"))}}Gt(()=>{Wn==null||Wn()});function g(O){o=O,cn.set(o)}const w=()=>u==null?void 0:u.show(),_=()=>f==null?void 0:f.show();function T(O){se[O?"unshift":"push"](()=>{u=O,t(3,u)})}function L(O){se[O?"unshift":"push"](()=>{f=O,t(4,f)})}return n.$$set=O=>{"params"in O&&t(0,a=O.params)},n.$$.update=()=>{n.$$.dirty&257&&d!=a.projectId&&(t(8,d=a.projectId),t(6,m=a.prototypeId),h(d)),n.$$.dirty&4&&o!=null&&o.title&&t(5,c=o.title),n.$$.dirty&1536&&t(7,i=s||r),n.$$.dirty&2&&l!=null&&l.id&&Yt(`/projects/${l.project}/prototypes/${l.id}`)},[a,l,o,u,f,c,m,i,d,s,r,g,w,_,T,L]}class e2 extends Se{constructor(e){super(),ke(this,e,x0,Q0,ge,{params:0})}}const Mn=We([]),Ni=We(null),bi=We(!1),qn=We(!1),Wi=We(!1);function t2(){Mn.set([]),Ni.set(null),bi.set(!1),qn.set(!1)}const Wt=Dt([Mn,Ni],([n,e])=>!n.length||e===null?null:n.find(t=>t.id===e));Wt.set=n=>{G.isObject(n)?Si(n,!0):Ni.set(n)};function Si(n,e=!1){n&&(Mn.update(t=>(G.pushOrReplaceObject(t,n),t)),e&&Ni.set(n.id))}function Pd(n){n&&(Mn.update(e=>e.filter(t=>t.id!=n.id&&t.replyTo!=n.id)),Ni.update(e=>e==n.id?n.replyTo||null:e))}function Rl(){Mn.update(n=>n.filter(e=>!!e.id)),Ni.update(n=>n===""?null:n)}const hr=Dt([Mn,Ge],([n,e])=>n.filter(t=>t.screen==(e==null?void 0:e.id)).sort((t,i)=>!t.created||t.created>i.created?1:-1)),Nd=Dt([hr],([n])=>n.filter(e=>!e.replyTo)),Ad=Dt([hr],([n])=>n.filter(e=>e.id&&!e.replyTo&&!e.resolved));let an;async function Md(n){return an==null||an(),z.collection("comments").subscribe("*",e=>{e.action==="delete"?Pd(e.record):Si(e.record)},{filter:`screen.prototype="${n}"`,expand:"user"}).then(e=>(an=e,e)).catch(e=>{console.warn("failed to init comments subscription:",e)})}async function Dd(n,e=void 0){var t;t2(),bi.set(!0);try{const i=await z.collection("comments").getFullList({filter:`screen.prototype="${n}"`,expand:"user"});Mn.set(i),Yn(Ii)===Oe.comments&&e&&((t=i.find(s=>s.id==e))!=null&&t.resolved&&Wi.set(!0),Wt.set(e)),bi.set(!1)}catch(i){i.isAbort||(bi.set(!1),z.error(i))}}const dn=We([]),Vi=We(!1);function n2(){dn.set([]),Vi.set(!1)}function zi(n){dn.update(e=>(G.pushOrReplaceObject(e,n),e))}function Rd(n){dn.update(e=>(G.removeByKey(e,"id",n==null?void 0:n.id),e))}const i2=Dt([dn,Ge],([n,e])=>n.filter(t=>t.screens.length&&(e==null?void 0:e.id)&&t.screens.includes(e.id)));let un;async function Hd(n){return un==null||un(),z.collection("hotspotTemplates").subscribe("*",e=>{e.action==="delete"?Rd(e.record):zi(e.record)},{filter:`prototype="${n}"`}).then(e=>(un=e,e)).catch(e=>{console.warn("failed to init templates subscription:",e)})}async function Ud(n){n2(),Vi.set(!0);try{const e=await z.collection("hotspotTemplates").getFullList({filter:`prototype="${n}"`});e.sort((t,i)=>!t.created||t.created>i.created?1:-1),dn.set(e),Vi.set(!1)}catch(e){e.isAbort||(Vi.set(!1),z.error(e))}}const et={note:"note",screen:"screen",overlay:"overlay",back:"back",prev:"prev",next:"next",url:"url",scroll:"scroll"};Object.freeze(et);const kn=We([]),Ai=We(null),Bi=We(!1),s2=We(!1),_n=We(!1);function l2(){kn.set([]),Ai.set(null),Bi.set(!1),s2.set(!1),_n.set(!1)}const Ve=Dt([kn,Ai],([n,e])=>!n.length||e===null?null:n.find(t=>t.id===e));Ve.set=n=>{G.isObject(n)?jn(n,!0):Ai.set(n)};function jn(n,e=!1){n&&(kn.update(t=>(G.pushOrReplaceObject(t,n),t)),e&&Ai.set(n.id))}function Fd(n){n&&(kn.update(e=>(G.removeByKey(e,"id",n.id),e)),Ai.update(e=>e==n.id?null:e))}function Hl(){kn.update(n=>n.filter(e=>!!e.id)),Ai.update(n=>n===""?null:n)}const qd=Dt([Ge,kn,dn],([n,e,t])=>$d(n,e,t));function $d(n,e,t){return e.filter(i=>{var s;if(!(n!=null&&n.id))return!1;if(i.screen==n.id)return!0;for(let l of t)if(i.hotspotTemplate==l.id&&((s=l.screens)!=null&&s.includes(n.id)))return!0;return!1})}let fn;async function Wd(n){return fn==null||fn(),z.collection("hotspots").subscribe("*",e=>{e.action=="delete"?Fd(e.record):jn(e.record)},{filter:`screen.prototype="${n}" || hotspotTemplate.prototype="${n}"`}).then(e=>(fn=e,e)).catch(e=>{console.warn("failed to init hotspots subscription:",e)})}async function Vd(n){l2(),Bi.set(!0);try{const e=await z.collection("hotspots").getFullList({filter:`screen.prototype="${n}" || hotspotTemplate.prototype="${n}"`});kn.set(e),Bi.set(!1)}catch(e){e.isAbort||(Bi.set(!1),z.error(e))}}function Tu(n,e,t){const i=n.slice();return i[9]=e[t],i}function Ou(n){let e,t=[],i=new Map,s,l,r,o=Ie(n[3]);const a=u=>u[9].id;for(let u=0;u<o.length;u+=1){let f=Tu(n,o,u),c=a(f);i.set(c,t[u]=Cu(c,f))}return{c(){e=b("div");for(let u=0;u<t.length;u+=1)t[u].c();p(e,"class",s="screens-bar "+n[1])},m(u,f){k(u,e,f);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(u,f){f&12&&(o=Ie(u[3]),oe(),t=Tt(t,f,a,1,u,o,i,e,At,Cu,null,Tu),ae()),(!r||f&2&&s!==(s="screens-bar "+u[1]))&&p(e,"class",s)},i(u){if(!r){for(let f=0;f<o.length;f+=1)E(t[f]);u&&St(()=>{r&&(l||(l=ct(e,Lt,{duration:150},!0)),l.run(1))}),r=!0}},o(u){for(let f=0;f<t.length;f+=1)j(t[f]);u&&(l||(l=ct(e,Lt,{duration:150},!1)),l.run(0)),r=!1},d(u){u&&v(e);for(let f=0;f<t.length;f+=1)t[f].d();u&&l&&l.end()}}}function Cu(n,e){let t,i,s,l,r,o,a,u;i=new Xt({props:{src:z.files.getURL(e[9],e[9].file,{thumb:"100x100"}),alt:e[9].title}});function f(){return e[7](e[9])}return{key:n,first:null,c(){t=b("button"),$(i.$$.fragment),s=I(),p(t,"type","button"),p(t,"data-screen-id",l=e[9].id),p(t,"class","thumb thumb-handle"),Z(t,"thumb-highlight-mode-accent",e[2].id==e[9].id),this.first=t},m(c,d){k(c,t,d),F(i,t,null),y(t,s),o=!0,a||(u=[we(r=Ce.call(null,t,{position:"top",text:e[9].title})),H(t,"click",Ye(ye(f)))],a=!0)},p(c,d){e=c;const m={};d&8&&(m.src=z.files.getURL(e[9],e[9].file,{thumb:"100x100"})),d&8&&(m.alt=e[9].title),i.$set(m),(!o||d&8&&l!==(l=e[9].id))&&p(t,"data-screen-id",l),r&&tt(r.update)&&d&8&&r.update.call(null,{position:"top",text:e[9].title}),(!o||d&12)&&Z(t,"thumb-highlight-mode-accent",e[2].id==e[9].id)},i(c){o||(E(i.$$.fragment,c),o=!0)},o(c){j(i.$$.fragment,c),o=!1},d(c){c&&v(t),q(i),a=!1,pe(u)}}}function r2(n){let e,t,i=n[0]&&Ou(n);return{c(){i&&i.c(),e=De()},m(s,l){i&&i.m(s,l),k(s,e,l),t=!0},p(s,[l]){s[0]?i?(i.p(s,l),l&1&&E(i,1)):(i=Ou(s),i.c(),E(i,1),i.m(e.parentNode,e)):i&&(oe(),j(i,1,1,()=>{i=null}),ae())},i(s){t||(E(i),t=!0)},o(s){j(i),t=!1},d(s){s&&v(e),i&&i.d(s)}}}function o2(n,e,t){let i,s;Q(n,Ge,d=>t(2,i=d)),Q(n,pt,d=>t(3,s=d));let{active:l=!0}=e,{class:r=""}=e;function o(){t(0,l=!0)}function a(){t(0,l=!1)}function u(){l?a():o()}async function f(){if(!l||!(i!=null&&i.id))return;await Ct();const d=document.querySelector(`[data-screen-id="${i.id}"]`);d&&(d.scrollIntoView(),document.activeElement&&d.parentNode.contains(document.activeElement)&&d.focus())}bn(()=>{f()});const c=d=>{Te(Ge,i=d.id,i)};return n.$$set=d=>{"active"in d&&t(0,l=d.active),"class"in d&&t(1,r=d.class)},n.$$.update=()=>{n.$$.dirty&5&&l&&i!=null&&i.id&&f()},[l,r,i,s,o,a,u,c]}class zd extends Se{constructor(e){super(),ke(this,e,o2,r2,ge,{active:0,class:1,show:4,hide:5,toggle:6})}get show(){return this.$$.ctx[4]}get hide(){return this.$$.ctx[5]}get toggle(){return this.$$.ctx[6]}}function a2(n){let e,t,i,s,l,r;const o=n[12].default,a=lt(o,n,n[11],null);let u=[{class:t="draggable "+n[0]},n[5]],f={};for(let c=0;c<u.length;c+=1)f=Ue(f,u[c]);return{c(){e=b("div"),a&&a.c(),Kn(e,f),Z(e,"dragging",n[4])},m(c,d){k(c,e,d),a&&a.m(e,null),n[15](e),s=!0,l||(r=[H(e,"mousedown",n[16]),H(e,"touchstart",n[2]),H(e,"click",n[13]),H(e,"keydown",n[14]),we(i=Ce.call(null,e,n[1]))],l=!0)},p(c,[d]){a&&a.p&&(!s||d&2048)&&ot(a,o,c,c[11],s?rt(o,c[11],d,null):at(c[11]),null),Kn(e,f=bt(u,[(!s||d&1&&t!==(t="draggable "+c[0]))&&{class:t},d&32&&c[5]])),i&&tt(i.update)&&d&2&&i.update.call(null,c[1]),Z(e,"dragging",c[4])},i(c){s||(E(a,c),s=!0)},o(c){j(a,c),s=!1},d(c){c&&v(e),a&&a.d(c),n[15](null),l=!1,pe(r)}}}function u2(n,e,t){let i;const s=["disabled","tolerance","passive","parentSelector","class","tooltip","getElem","dragInit"];let l=ft(e,s),{$$slots:r={},$$scope:o}=e;const a=it();let{disabled:u=!1}=e,{tolerance:f=6}=e,{passive:c=!1}=e,{parentSelector:d=null}=e,{class:m=void 0}=e,{tooltip:h=null}=e,g,w=0,_=0,T=0,L=0,O=!1,C=!1,S=!1;function P(){return g}function R(N){u||!g||!N||(N.stopPropagation(),G.normalizePointerEvent(N),w=N.clientX,_=N.clientY,T=w-g.offsetLeft,L=_-g.offsetTop,document.addEventListener("touchmove",M),document.addEventListener("mousemove",M),document.addEventListener("touchend",A),document.addEventListener("mouseup",A),a("draginit",{event:N,elem:g}))}function A(N){var ee;G.normalizePointerEvent(N);const V=S;(ee=i==null?void 0:i.classList)==null||ee.remove("child-dragging"),S&&(N.touches||N.preventDefault(),t(4,S=!1),O=!1,C=!1,g.classList.remove("no-pointer-events","dragging"),a("dragstop",{event:N,elem:g})),document.removeEventListener("touchmove",M),document.removeEventListener("mousemove",M),document.removeEventListener("touchend",A),document.removeEventListener("mouseup",A),a("dragrelease",{event:N,elem:g,dragged:V})}function M(N){G.normalizePointerEvent(N);let V=N.clientX-T,ee=N.clientY-L;if(!S&&Math.abs(V-g.offsetLeft)<f&&Math.abs(ee-g.offsetTop)<f)return;N.touches||N.preventDefault();let J=N.clientX-w,U=N.clientY-_;const ce={event:N,elem:g,diffX:J,diffY:U};if(S||(t(4,S=!0),g.classList.add("no-pointer-events","dragging"),i.classList.add("child-dragging"),a("dragstart",ce)),a("dragging",ce),!c){if(N.shiftKey?!O&&!C&&(Math.abs(J)>Math.abs(U)?(O=!1,C=!0):(O=!0,C=!1)):(O=!1,C=!1),!O){let re=i.scrollWidth||i.offsetWidth;V+g.offsetWidth>re&&(V=re-g.offsetWidth),V=V<0?0:V,t(3,g.style.left=V+"px",g)}if(!C){let re=i.scrollHeight||i.offsetHeight;ee+g.offsetHeight>re&&(ee=re-g.offsetHeight),ee=ee<0?0:ee,t(3,g.style.top=ee+"px",g)}}}function D(N){qe.call(this,n,N)}function Y(N){qe.call(this,n,N)}function K(N){se[N?"unshift":"push"](()=>{g=N,t(3,g)})}const B=N=>{N.button==0&&R(N)};return n.$$set=N=>{e=Ue(Ue({},e),Kt(N)),t(5,l=ft(e,s)),"disabled"in N&&t(6,u=N.disabled),"tolerance"in N&&t(7,f=N.tolerance),"passive"in N&&t(8,c=N.passive),"parentSelector"in N&&t(9,d=N.parentSelector),"class"in N&&t(0,m=N.class),"tooltip"in N&&t(1,h=N.tooltip),"$$scope"in N&&t(11,o=N.$$scope)},n.$$.update=()=>{n.$$.dirty&520&&(i=(g==null?void 0:g.closest(d))||(g==null?void 0:g.parentNode))},[m,h,R,g,S,l,u,f,c,d,P,o,r,D,Y,K,B]}class _r extends Se{constructor(e){super(),ke(this,e,u2,a2,ge,{disabled:6,tolerance:7,passive:8,parentSelector:9,class:0,tooltip:1,getElem:10,dragInit:2})}get getElem(){return this.$$.ctx[10]}get dragInit(){return this.$$.ctx[2]}}function f2(n){let e;const t=n[10].default,i=lt(t,n,n[13],null);return{c(){i&&i.c()},m(s,l){i&&i.m(s,l),e=!0},p(s,l){i&&i.p&&(!e||l&8192)&&ot(i,t,s,s[13],e?rt(t,s[13],l,null):at(s[13]),null)},i(s){e||(E(i,s),e=!0)},o(s){j(i,s),e=!1},d(s){i&&i.d(s)}}}function c2(n){let e;return{c(){e=b("span"),p(e,"class","loader loader-xs loader-danger-alt")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function d2(n){let e,t,i,s;const l=[c2,f2],r=[];function o(a,u){return a[2]?0:1}return e=o(n),t=r[e]=l[e](n),{c(){t.c(),i=De()},m(a,u){r[e].m(a,u),k(a,i,u),s=!0},p(a,u){let f=e;e=o(a),e===f?r[e].p(a,u):(oe(),j(r[f],1,1,()=>{r[f]=null}),ae(),t=r[e],t?t.p(a,u):(t=r[e]=l[e](a),t.c()),E(t,1),t.m(i.parentNode,i))},i(a){s||(E(t),s=!0)},o(a){j(t),s=!1},d(a){a&&v(i),r[e].d(a)}}}function p2(n){let e,t;return e=new _r({props:{disabled:n[1],class:"comment-pin "+(n[0].resolved?"resolved":"")+" "+(n[4]?"unread":""),parentSelector:".screen-preview-img-wrapper","data-comment-pin":n[0].id,style:"left: min(calc(100% - "+hs+"px), "+n[0].left*n[3]+"px); top: min(calc(100% - "+hs+"px), "+n[0].top*n[3]+"px)",$$slots:{default:[d2]},$$scope:{ctx:n}}}),e.$on("dragstop",n[11]),e.$on("click",n[12]),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,[s]){const l={};s&2&&(l.disabled=i[1]),s&17&&(l.class="comment-pin "+(i[0].resolved?"resolved":"")+" "+(i[4]?"unread":"")),s&1&&(l["data-comment-pin"]=i[0].id),s&9&&(l.style="left: min(calc(100% - "+hs+"px), "+i[0].left*i[3]+"px); top: min(calc(100% - "+hs+"px), "+i[0].top*i[3]+"px)"),s&8196&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}const hs=36;function m2(n,e,t){let i,s,l,r,o;Q(n,vn,_=>t(8,l=_)),Q(n,Bn,_=>t(9,r=_)),Q(n,Wt,_=>t(5,o=_));let{$$slots:a={},$$scope:u}=e,{comment:f}=e,{disabled:c=!1}=e,{scale:d=null}=e,m=!1;async function h(_){if(_&&(Object.assign(f,{left:_.offsetLeft/i,top:_.offsetTop/i}),Si(f),!!f.id)){t(2,m=!0);try{const T={left:f.left,top:f.top};await z.collection("comments").update(f.id,T),t(2,m=!1)}catch(T){T.isAbort||(z.error(T),t(2,m=!1))}}}const g=_=>{h(_.detail.elem)},w=()=>{o!=f&&Rl(),Te(Wt,o=f,o)};return n.$$set=_=>{"comment"in _&&t(0,f=_.comment),"disabled"in _&&t(1,c=_.disabled),"scale"in _&&t(7,d=_.scale),"$$scope"in _&&t(13,u=_.$$scope)},n.$$.update=()=>{n.$$.dirty&640&&t(3,i=d===null?r:d),n.$$.dirty&257&&t(4,s=f!=null&&f.id?!!(l!=null&&l.find(_=>{var T,L;return!_.read&&(_.comment==f.id||((L=(T=_.expand)==null?void 0:T.comment)==null?void 0:L.replyTo)==f.id)})):!1)},[f,c,m,i,s,o,h,d,l,r,a,g,w,u]}class h2 extends Se{constructor(e){super(),ke(this,e,m2,p2,ge,{comment:0,disabled:1,scale:7})}}function Eu(n){let e,t,i={class:"resize-handle",passive:!0,parentSelector:".screen-preview-img-wrapper"};return e=new _r({props:i}),n[21](e),e.$on("draginit",n[22]),e.$on("dragstart",n[23]),e.$on("dragstop",n[24]),e.$on("dragrelease",n[25]),e.$on("dragging",n[26]),{c(){$(e.$$.fragment)},m(s,l){F(e,s,l),t=!0},p(s,l){const r={};e.$set(r)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){n[21](null),q(e,s)}}}function _2(n){let e,t,i=!n[1]&&Eu(n);return{c(){i&&i.c(),e=De()},m(s,l){i&&i.m(s,l),k(s,e,l),t=!0},p(s,l){s[1]?i&&(oe(),j(i,1,1,()=>{i=null}),ae()):i?(i.p(s,l),l[0]&2&&E(i,1)):(i=Eu(s),i.c(),E(i,1),i.m(e.parentNode,e))},i(s){t||(E(i),t=!0)},o(s){j(i),t=!1},d(s){s&&v(e),i&&i.d(s)}}}function g2(n){var s;let e,t,i={class:"hotspot type-"+n[0].type+" "+(n[1]?"preview":"")+" "+(((s=n[4])==null?void 0:s.id)==n[0].id?"active":"")+" "+(n[13]?"no-pointer-events":"")+" "+(n[0].hotspotTemplate?"template":""),"data-hotspot":n[0].id,parentSelector:Ul,disabled:n[13]||n[1]||n[0].disabled,style:`
        left: min(calc(100% - `+n[0].width*n[12]+"px), "+n[0].left*n[12]+`px);
        top: min(calc(100% - `+n[0].height*n[12]+"px), "+n[0].top*n[12]+`px);
        width: `+n[0].width*n[12]+`px;
        height: `+n[0].height*n[12]+`px;
    `,tooltip:n[10],$$slots:{default:[_2]},$$scope:{ctx:n}};return e=new _r({props:i}),n[27](e),e.$on("dragstart",n[28]),e.$on("dragrelease",n[29]),e.$on("dragstop",n[15]),e.$on("click",n[30]),{c(){$(e.$$.fragment)},m(l,r){F(e,l,r),t=!0},p(l,r){var a;const o={};r[0]&8211&&(o.class="hotspot type-"+l[0].type+" "+(l[1]?"preview":"")+" "+(((a=l[4])==null?void 0:a.id)==l[0].id?"active":"")+" "+(l[13]?"no-pointer-events":"")+" "+(l[0].hotspotTemplate?"template":"")),r[0]&1&&(o["data-hotspot"]=l[0].id),r[0]&8195&&(o.disabled=l[13]||l[1]||l[0].disabled),r[0]&4097&&(o.style=`
        left: min(calc(100% - `+l[0].width*l[12]+"px), "+l[0].left*l[12]+`px);
        top: min(calc(100% - `+l[0].height*l[12]+"px), "+l[0].top*l[12]+`px);
        width: `+l[0].width*l[12]+`px;
        height: `+l[0].height*l[12]+`px;
    `),r[0]&1024&&(o.tooltip=l[10]),r[0]&7163|r[1]&4194304&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){n[27](null),q(e,l)}}}let cl,dl;const Ul=".active-screen-preview-wrapper",b2=".screen-preview",_s=25;function w2(n,e,t){let i,s,l,r,o,a,u,f,c,d,m,h,g;Q(n,ci,fe=>t(33,r=fe)),Q(n,fi,fe=>t(34,o=fe)),Q(n,Ge,fe=>t(35,a=fe)),Q(n,Gn,fe=>t(36,u=fe)),Q(n,pd,fe=>t(37,f=fe)),Q(n,ki,fe=>t(38,c=fe)),Q(n,pt,fe=>t(39,d=fe)),Q(n,Ve,fe=>t(4,m=fe)),Q(n,_n,fe=>t(5,h=fe)),Q(n,Bn,fe=>t(20,g=fe));const w=Ul+" .screen-preview-img img";let{hotspot:_}=e,{preview:T=!1}=e,{scale:L=null}=e,{backFunc:O=null}=e,C,S,P,R=0,A=0,M=0,D=0,Y=!1,K;function B(){var fe;t(10,K=void 0),(m==null?void 0:m.id)!=_.id&&(_.type==et.note?t(10,K={position:"follow",text:(fe=_.settings)==null?void 0:fe.note,hideOnClick:!1}):T||t(10,K={position:"top",text:`Ctrl + Click to follow
Shift + Click to duplicate`,delay:500,hideOnClick:!0}))}function N(fe=!1){return(!S||fe)&&(S=document.querySelector(Ul)),S}function V(){s&&Object.assign(_,{left:s.offsetLeft/i,top:s.offsetTop/i,width:s.offsetWidth/i,height:s.offsetHeight/i})}async function ee(fe){var Pe,ue;if(s&&((ue=(Pe=fe==null?void 0:fe.detail)==null?void 0:Pe.event)!=null&&ue.altKey&&await J(),V(),jn(_),!!_.id)){Y=!0;try{const Be={left:_.left,top:_.top,width:_.width,height:_.height};await z.collection("hotspots").update(_.id,Be),Y=!1}catch(Be){Be.isAbort||(z.error(Be),Y=!1)}}}async function J(){const fe=document.querySelector(w);if(!fe)return;V();const Pe=G.closestFeatureEdge(fe,{x:_.left,y:_.top,w:_.width,h:_.height});t(0,_.left+=Pe.x,_),t(0,_.top+=Pe.y,_),t(0,_.width=Pe.w,_),t(0,_.height=Pe.h,_),await Ct()}async function U(){const fe=N().offsetWidth||1/0,Pe=structuredClone(_);Pe.id="hcopy"+G.randomString(10),Pe.left=Pe.left+Pe.width,Pe.disabled=!0,Pe.left+Pe.width>fe&&(Pe.left=fe-Pe.width),jn(Pe);try{jn(await z.collection("hotspots").create(Pe)),Y=!1}catch(ue){ue.isAbort||(z.error(ue),Y=!1,Fd(Pe))}}function ce(){switch(_.type){case et.screen:return re();case et.overlay:return de();case et.back:return Le();case et.prev:return Je();case et.next:return ut();case et.url:return st();case et.scroll:return dt()}}function re(){const fe=d.find(Pe=>Pe.id==_.settings.screen);me(fe)}function de(){Te(ki,c=_.settings,c)}function Le(){O?O():f!=null&&f.id&&me(f)}function Je(){const fe=Ml(-1);me(fe)}function ut(){const fe=Ml(1);me(fe)}function st(){u!=null&&u.allowHotspotsURL&&window.open(_.settings.url||"#","_blank","noopener,noreferrer")}function dt(){var fe;(fe=document.querySelector(b2))==null||fe.scrollTo({behavior:"smooth",top:_.settings.scrollTop||0,left:_.settings.scrollLeft||0})}function le(){clearTimeout(dl),clearTimeout(cl),Te(ci,r=null,r),Te(fi,o="",o)}function me(fe){if(!fe){le();return}if(!_.settings.transition){le(),Te(Ge,a=fe.id,a);return}Te(fi,o=_.settings.transition,o),Te(ci,r=fe.id,r),clearTimeout(cl),cl=setTimeout(()=>{Te(Ge,a=r==null?void 0:r.id,a),clearTimeout(dl),dl=setTimeout(()=>{Te(fi,o="",o),Te(ci,r="",r)},100)},350)}function W(fe){se[fe?"unshift":"push"](()=>{P=fe,t(3,P)})}const ie=()=>{Te(_n,h=!0,h)},Me=()=>{s&&(t(6,R=s.offsetWidth),t(7,A=s.offsetHeight),t(8,M=s.offsetLeft),t(9,D=s.offsetTop))},te=fe=>{ee(fe),Te(_n,h=!1,h)},he=fe=>{fe.detail.dragged||(Te(_n,h=!1,h),(m==null?void 0:m.id)!=(_==null?void 0:_.id)&&Te(Ve,m=_,m))},ze=fe=>{if(!s)return;let Pe=R+fe.detail.diffX,ue=A+fe.detail.diffY,Be=M,nt=D;const xe=N().offsetWidth,yt=N().offsetHeight;Pe<0&&(Pe=-1*fe.detail.diffX,Be=M+fe.detail.diffX,Be<0&&(Be=0,Pe=M)),Be+Pe>=xe&&(Pe=xe-Be,Pe<_s&&(Pe=_s,Be=xe-Pe)),ue<0&&(ue=-1*fe.detail.diffY,nt=D+fe.detail.diffY,nt<0&&(nt=0,ue=D)),nt+ue>=yt&&(ue=yt-nt,ue<_s&&(ue=_s,nt=yt-ue)),t(0,_.width=Pe/i,_),t(0,_.height=ue/i,_),t(0,_.left=Be/i,_),t(0,_.top=nt/i,_)};function wt(fe){se[fe?"unshift":"push"](()=>{C=fe,t(2,C)})}const mt=()=>{Te(_n,h=!0,h)},ne=()=>{Te(_n,h=!1,h)},$e=fe=>{if(fe.stopImmediatePropagation(),!h){if(!T&&(_!=null&&_.id)&&fe.shiftKey)return U();m!=_&&Hl(),T||fe.ctrlKey?ce():Te(Ve,m=_,m)}};return n.$$set=fe=>{"hotspot"in fe&&t(0,_=fe.hotspot),"preview"in fe&&t(1,T=fe.preview),"scale"in fe&&t(18,L=fe.scale),"backFunc"in fe&&t(19,O=fe.backFunc)},n.$$.update=()=>{n.$$.dirty[0]&1310720&&t(12,i=L===null?g:L),n.$$.dirty[0]&9&&_.startResizing&&P&&(P.dragInit(_.startResizing),delete _.startResizing),n.$$.dirty[0]&4&&t(11,s=C==null?void 0:C.getElem()),n.$$.dirty[0]&49&&t(13,l=h||m&&m.id!=_.id),n.$$.dirty[0]&3&&(_||T)&&B()},N(!0),[_,T,C,P,m,h,R,A,M,D,K,s,i,l,N,ee,U,ce,L,O,g,W,ie,Me,te,he,ze,wt,mt,ne,$e]}class Ys extends Se{constructor(e){super(),ke(this,e,w2,g2,ge,{hotspot:0,preview:1,scale:18,backFunc:19},null,[-1,-1])}}function Lu(n,e,t){const i=n.slice();return i[18]=e[t],i}function Iu(n){let e,t,i,s,l,r,o=[],a=new Map,u=`${n[1].offsetTop*n[6]}px`,f=`${n[1].offsetLeft*n[6]}px`,c=`${n[1].offseRight*n[6]}px`,d=`${n[1].offsetBottom*n[6]}px`,m,h,g,w,_={src:z.files.getURL(n[0],n[0].file),alt:n[0].title,draggable:!1,loading:"eager",loaderClass:"hidden",fetchpriority:"high",scale:n[6]};s=new Xt({props:_}),n[13](s),s.$on("load",n[8]);let T=Ie(n[5]);const L=O=>O[18].id;for(let O=0;O<T.length;O+=1){let C=Lu(n,T,O),S=L(C);a.set(S,o[O]=ju(S,C))}return{c(){e=b("div"),t=b("div"),i=b("div"),$(s.$$.fragment),l=I(),r=b("div");for(let O=0;O<o.length;O+=1)o[O].c();p(r,"class","hotspots"),p(i,"class","screen-overlay-offset"),Fe(i,"margin-top",u),Fe(i,"margin-left",f),Fe(i,"margin-right",c),Fe(i,"margin-bottom",d),p(t,"class",m="screen-overlay "+(n[1].fixOverlay?"fixed":"")+" transition-"+(n[1].transition||"none")+" position-"+n[1].overlayPosition),p(e,"class","screen-overlay-container")},m(O,C){k(O,e,C),y(e,t),y(t,i),F(s,i,null),y(i,l),y(i,r);for(let S=0;S<o.length;S+=1)o[S]&&o[S].m(r,null);h=!0,g||(w=H(e,"click",n[14]),g=!0)},p(O,C){const S={};C&1&&(S.src=z.files.getURL(O[0],O[0].file)),C&1&&(S.alt=O[0].title),C&64&&(S.scale=O[6]),s.$set(S),C&176&&(T=Ie(O[5]),oe(),o=Tt(o,C,L,1,O,T,a,r,At,ju,null,Lu),ae()),C&66&&u!==(u=`${O[1].offsetTop*O[6]}px`)&&Fe(i,"margin-top",u),C&66&&f!==(f=`${O[1].offsetLeft*O[6]}px`)&&Fe(i,"margin-left",f),C&66&&c!==(c=`${O[1].offseRight*O[6]}px`)&&Fe(i,"margin-right",c),C&66&&d!==(d=`${O[1].offsetBottom*O[6]}px`)&&Fe(i,"margin-bottom",d),(!h||C&2&&m!==(m="screen-overlay "+(O[1].fixOverlay?"fixed":"")+" transition-"+(O[1].transition||"none")+" position-"+O[1].overlayPosition))&&p(t,"class",m)},i(O){if(!h){E(s.$$.fragment,O);for(let C=0;C<T.length;C+=1)E(o[C]);h=!0}},o(O){j(s.$$.fragment,O);for(let C=0;C<o.length;C+=1)j(o[C]);h=!1},d(O){O&&v(e),n[13](null),q(s);for(let C=0;C<o.length;C+=1)o[C].d();g=!1,w()}}}function ju(n,e){let t,i,s;return i=new Ys({props:{preview:!0,hotspot:e[18],scale:e[4],backFunc:e[7]}}),{key:n,first:null,c(){t=De(),$(i.$$.fragment),this.first=t},m(l,r){k(l,t,r),F(i,l,r),s=!0},p(l,r){e=l;const o={};r&32&&(o.hotspot=e[18]),r&16&&(o.scale=e[4]),i.$set(o)},i(l){s||(E(i.$$.fragment,l),s=!0)},o(l){j(i.$$.fragment,l),s=!1},d(l){l&&v(t),q(i,l)}}}function y2(n){let e,t,i,s,l=n[3]&&n[1]&&Iu(n);return{c(){l&&l.c(),e=De()},m(r,o){l&&l.m(r,o),k(r,e,o),t=!0,i||(s=H(window,"resize",n[12]),i=!0)},p(r,[o]){r[3]&&r[1]?l?(l.p(r,o),o&10&&E(l,1)):(l=Iu(r),l.c(),E(l,1),l.m(e.parentNode,e)):l&&(oe(),j(l,1,1,()=>{l=null}),ae())},i(r){t||(E(l),t=!0)},o(r){j(l),t=!1},d(r){r&&v(e),l&&l.d(r),i=!1,s()}}}function v2(n,e,t){let i,s,l,r,o,a,u;Q(n,ki,C=>t(1,s=C)),Q(n,pt,C=>t(16,l=C)),Q(n,ji,C=>t(9,r=C)),Q(n,dn,C=>t(10,o=C)),Q(n,kn,C=>t(11,a=C)),Q(n,Bn,C=>t(6,u=C));let f=null,c=null,d=!1,m=null,h=null;function g(){t(0,c=s!=null&&s.screen?l.find(C=>C.id==s.screen):null),c?t(3,d=!0):w()}function w(){t(3,d=!1),s&&Te(ki,s=null,s),c&&t(0,c=null)}function _(C=250){d&&(h&&clearTimeout(h),h=setTimeout(()=>{t(4,m=f?f.widthRatio():null),h=null},C))}Gt(()=>{h&&clearTimeout(h)});const T=()=>_();function L(C){se[C?"unshift":"push"](()=>{f=C,t(2,f)})}const O=function(C){s.outsideClose&&C.target==this&&w()};return n.$$.update=()=>{n.$$.dirty&2&&s!=-1&&g(),n.$$.dirty&3073&&t(5,i=c!=null&&c.id?$d(c,a,o):[]),n.$$.dirty&512&&r!==-1&&_()},[c,s,f,d,m,i,u,w,_,r,o,a,T,L,O]}class k2 extends Se{constructor(e){super(),ke(this,e,v2,y2,ge,{})}}function Pu(n,e,t){const i=n.slice();return i[46]=e[t],i}function Nu(n,e,t){const i=n.slice();return i[51]=e[t],i[53]=t,i}function Au(n,e,t){const i=n.slice();return i[46]=e[t],i}function Mu(n,e,t){const i=n.slice();return i[46]=e[t],i}function Du(n){let e,t,i,s,l=`${n[1].fixedHeader*n[13]}px`,r=`-${n[1].fixedHeader*n[13]}px`,o;return s=new Xt({props:{class:"screen-preview-img",src:z.files.getURL(n[1],n[1].file),alt:n[1].title,draggable:!1,loaderClass:"hidden",fetchpriority:"high",scale:n[5].scale,$$slots:{default:[S2]},$$scope:{ctx:n}}}),s.$on("click",n[26]),{c(){e=b("div"),t=b("div"),i=b("div"),$(s.$$.fragment),p(i,"class","fixed-screen-hotspots-wrapper"),p(t,"class","fixed-screen-overflow"),p(e,"class","fixed-screen-header"),Fe(e,"height",l),Fe(e,"margin-top",r)},m(a,u){k(a,e,u),y(e,t),y(t,i),F(s,i,null),o=!0},p(a,u){const f={};u[0]&2&&(f.src=z.files.getURL(a[1],a[1].file)),u[0]&2&&(f.alt=a[1].title),u[0]&32&&(f.scale=a[5].scale),u[0]&131072|u[1]&33554432&&(f.$$scope={dirty:u,ctx:a}),s.$set(f),u[0]&8194&&l!==(l=`${a[1].fixedHeader*a[13]}px`)&&Fe(e,"height",l),u[0]&8194&&r!==(r=`-${a[1].fixedHeader*a[13]}px`)&&Fe(e,"margin-top",r)},i(a){o||(E(s.$$.fragment,a),o=!0)},o(a){j(s.$$.fragment,a),o=!1},d(a){a&&v(e),q(s)}}}function Ru(n,e){let t,i,s;return i=new Ys({props:{preview:!0,hotspot:e[46]}}),{key:n,first:null,c(){t=De(),$(i.$$.fragment),this.first=t},m(l,r){k(l,t,r),F(i,l,r),s=!0},p(l,r){e=l;const o={};r[0]&131072&&(o.hotspot=e[46]),i.$set(o)},i(l){s||(E(i.$$.fragment,l),s=!0)},o(l){j(i.$$.fragment,l),s=!1},d(l){l&&v(t),q(i,l)}}}function S2(n){let e,t=[],i=new Map,s,l=Ie(n[17]);const r=o=>"header_"+o[46].id;for(let o=0;o<l.length;o+=1){let a=Mu(n,l,o),u=r(a);i.set(u,t[o]=Ru(u,a))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();p(e,"class","hotspots svelte-r47g7")},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);s=!0},p(o,a){a[0]&131072&&(l=Ie(o[17]),oe(),t=Tt(t,a,r,1,o,l,i,e,At,Ru,null,Mu),ae())},i(o){if(!s){for(let a=0;a<l.length;a+=1)E(t[a]);s=!0}},o(o){for(let a=0;a<t.length;a+=1)j(t[a]);s=!1},d(o){o&&v(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function T2(n){let e,t=[],i=new Map,s,l=Ie(n[18]);const r=o=>o[51].id;for(let o=0;o<l.length;o+=1){let a=Nu(n,l,o),u=r(a);i.set(u,t[o]=Uu(u,a))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();p(e,"class","comment-pins svelte-r47g7")},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);s=!0},p(o,a){a[0]&1836040&&(l=Ie(o[18]),oe(),t=Tt(t,a,r,1,o,l,i,e,At,Uu,null,Nu),ae())},i(o){if(!s){for(let a=0;a<l.length;a+=1)E(t[a]);s=!0}},o(o){for(let a=0;a<t.length;a+=1)j(t[a]);s=!1},d(o){o&&v(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function O2(n){let e,t=[],i=new Map,s,l,r,o=Ie(n[17]);const a=u=>u[46].id;for(let u=0;u<o.length;u+=1){let f=Au(n,o,u),c=a(f);i.set(c,t[u]=Fu(c,f))}return l=new k2({}),{c(){e=b("div");for(let u=0;u<t.length;u+=1)t[u].c();s=I(),$(l.$$.fragment),p(e,"class","hotspots svelte-r47g7")},m(u,f){k(u,e,f);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);k(u,s,f),F(l,u,f),r=!0},p(u,f){f[0]&131076&&(o=Ie(u[17]),oe(),t=Tt(t,f,a,1,u,o,i,e,At,Fu,null,Au),ae())},i(u){if(!r){for(let f=0;f<o.length;f+=1)E(t[f]);E(l.$$.fragment,u),r=!0}},o(u){for(let f=0;f<t.length;f+=1)j(t[f]);j(l.$$.fragment,u),r=!1},d(u){u&&(v(e),v(s));for(let f=0;f<t.length;f+=1)t[f].d();q(l,u)}}}function Hu(n){let e,t;return e=new h2({props:{disabled:!n[10],comment:n[51],$$slots:{default:[C2]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,s){const l={};s[0]&1024&&(l.disabled=!i[10]),s[0]&262144&&(l.comment=i[51]),s[0]&262144|s[1]&33554432&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function C2(n){let e=(n[51].id?n[53]+1:"")+"",t,i;return{c(){t=x(e),i=I()},m(s,l){k(s,t,l),k(s,i,l)},p(s,l){l[0]&262144&&e!==(e=(s[51].id?s[53]+1:"")+"")&&ve(t,e)},d(s){s&&(v(t),v(i))}}}function Uu(n,e){var a,u;let t,i=!e[51].resolved||e[19]||((a=e[3])==null?void 0:a.id)==e[51].id||((u=e[3])==null?void 0:u.replyTo)==e[51].id||e[20].filter(r).length,s,l;function r(...f){return e[32](e[51],...f)}let o=i&&Hu(e);return{key:n,first:null,c(){t=De(),o&&o.c(),s=De(),this.first=t},m(f,c){k(f,t,c),o&&o.m(f,c),k(f,s,c),l=!0},p(f,c){var d,m;e=f,c[0]&1835016&&(i=!e[51].resolved||e[19]||((d=e[3])==null?void 0:d.id)==e[51].id||((m=e[3])==null?void 0:m.replyTo)==e[51].id||e[20].filter(r).length),i?o?(o.p(e,c),c[0]&1835016&&E(o,1)):(o=Hu(e),o.c(),E(o,1),o.m(s.parentNode,s)):o&&(oe(),j(o,1,1,()=>{o=null}),ae())},i(f){l||(E(o),l=!0)},o(f){j(o),l=!1},d(f){f&&(v(t),v(s)),o&&o.d(f)}}}function Fu(n,e){let t,i,s;return i=new Ys({props:{hotspot:e[46],preview:e[2]==Oe.preview}}),{key:n,first:null,c(){t=De(),$(i.$$.fragment),this.first=t},m(l,r){k(l,t,r),F(i,l,r),s=!0},p(l,r){e=l;const o={};r[0]&131072&&(o.hotspot=e[46]),r[0]&4&&(o.preview=e[2]==Oe.preview),i.$set(o)},i(l){s||(E(i.$$.fragment,l),s=!0)},o(l){j(i.$$.fragment,l),s=!1},d(l){l&&v(t),q(i,l)}}}function qu(n){let e,t,i,s,l=`${n[1].fixedFooter*n[13]}px`,r=`-${n[1].fixedFooter*n[13]}px`,o;return s=new Xt({props:{class:"screen-preview-img",src:z.files.getURL(n[1],n[1].file),alt:n[1].title,draggable:!1,loading:"eager",loaderClass:"hidden",fetchpriority:"high",scale:n[5].scale,$$slots:{default:[E2]},$$scope:{ctx:n}}}),s.$on("click",n[26]),{c(){e=b("div"),t=b("div"),i=b("div"),$(s.$$.fragment),p(i,"class","fixed-screen-hotspots-wrapper"),p(t,"class","fixed-screen-overflow"),p(e,"class","fixed-screen-footer"),Fe(e,"height",l),Fe(e,"margin-top",r)},m(a,u){k(a,e,u),y(e,t),y(t,i),F(s,i,null),o=!0},p(a,u){const f={};u[0]&2&&(f.src=z.files.getURL(a[1],a[1].file)),u[0]&2&&(f.alt=a[1].title),u[0]&32&&(f.scale=a[5].scale),u[0]&131072|u[1]&33554432&&(f.$$scope={dirty:u,ctx:a}),s.$set(f),u[0]&8194&&l!==(l=`${a[1].fixedFooter*a[13]}px`)&&Fe(e,"height",l),u[0]&8194&&r!==(r=`-${a[1].fixedFooter*a[13]}px`)&&Fe(e,"margin-top",r)},i(a){o||(E(s.$$.fragment,a),o=!0)},o(a){j(s.$$.fragment,a),o=!1},d(a){a&&v(e),q(s)}}}function $u(n,e){let t,i,s;return i=new Ys({props:{preview:!0,hotspot:e[46]}}),{key:n,first:null,c(){t=De(),$(i.$$.fragment),this.first=t},m(l,r){k(l,t,r),F(i,l,r),s=!0},p(l,r){e=l;const o={};r[0]&131072&&(o.hotspot=e[46]),i.$set(o)},i(l){s||(E(i.$$.fragment,l),s=!0)},o(l){j(i.$$.fragment,l),s=!1},d(l){l&&v(t),q(i,l)}}}function E2(n){let e,t=[],i=new Map,s,l=Ie(n[17]);const r=o=>"footer_"+o[46].id;for(let o=0;o<l.length;o+=1){let a=Pu(n,l,o),u=r(a);i.set(u,t[o]=$u(u,a))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();p(e,"class","hotspots svelte-r47g7")},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);s=!0},p(o,a){a[0]&131072&&(l=Ie(o[17]),oe(),t=Tt(t,a,r,1,o,l,i,e,At,$u,null,Pu),ae())},i(o){if(!s){for(let a=0;a<l.length;a+=1)E(t[a]);s=!0}},o(o){for(let a=0;a<t.length;a+=1)j(t[a]);s=!1},d(o){o&&v(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Wu(n){let e,t,i,s,l,r,o,a,u=n[21].fixedHeader>0&&n[2]==Oe.preview&&Vu(n);l=new Xt({props:{class:"screen-preview-img",src:z.files.getURL(n[21],n[21].file),alt:n[21].title,loading:"eager",loaderClass:"loader",fetchpriority:"high",draggable:!1,scale:n[5].scale}}),l.$on("load",n[38]);let f=n[21].fixedFooter>0&&n[2]==Oe.preview&&zu(n);return{c(){e=b("div"),t=b("div"),u&&u.c(),i=I(),s=b("div"),$(l.$$.fragment),r=I(),f&&f.c(),p(s,"class","screen-preview-img-wrapper"),p(t,"class",o="screen-preview align-"+(n[1].alignment||"center")+" svelte-r47g7"),Z(t,"fit-to-screen",n[4]),Fe(t,"width",n[12]?`${n[12]}px`:void 0),Fe(t,"height",n[11]?`${n[11]}px`:void 0),Fe(t,"background-color",n[21].background||As),p(e,"class","transition-item new")},m(c,d){k(c,e,d),y(e,t),u&&u.m(t,null),y(t,i),y(t,s),F(l,s,null),y(t,r),f&&f.m(t,null),n[39](t),a=!0},p(c,d){c[21].fixedHeader>0&&c[2]==Oe.preview?u?(u.p(c,d),d[0]&2097156&&E(u,1)):(u=Vu(c),u.c(),E(u,1),u.m(t,i)):u&&(oe(),j(u,1,1,()=>{u=null}),ae());const m={};d[0]&2097152&&(m.src=z.files.getURL(c[21],c[21].file)),d[0]&2097152&&(m.alt=c[21].title),d[0]&32&&(m.scale=c[5].scale),l.$set(m),c[21].fixedFooter>0&&c[2]==Oe.preview?f?(f.p(c,d),d[0]&2097156&&E(f,1)):(f=zu(c),f.c(),E(f,1),f.m(t,null)):f&&(oe(),j(f,1,1,()=>{f=null}),ae()),(!a||d[0]&2&&o!==(o="screen-preview align-"+(c[1].alignment||"center")+" svelte-r47g7"))&&p(t,"class",o),(!a||d[0]&18)&&Z(t,"fit-to-screen",c[4]),d[0]&4096&&Fe(t,"width",c[12]?`${c[12]}px`:void 0),d[0]&2048&&Fe(t,"height",c[11]?`${c[11]}px`:void 0),d[0]&2097152&&Fe(t,"background-color",c[21].background||As)},i(c){a||(E(u),E(l.$$.fragment,c),E(f),a=!0)},o(c){j(u),j(l.$$.fragment,c),j(f),a=!1},d(c){c&&v(e),u&&u.d(),q(l),f&&f.d(),n[39](null)}}}function Vu(n){let e,t,i,s=`${n[21].fixedHeader*n[13]}px`,l=`-${n[21].fixedHeader*n[13]}px`,r;return i=new Xt({props:{class:"screen-preview-img",src:z.files.getURL(n[21],n[21].file),alt:n[21].title,draggable:!1,loaderClass:"hidden",fetchpriority:"high",scale:n[5].scale}}),{c(){e=b("div"),t=b("div"),$(i.$$.fragment),p(t,"class","fixed-screen-overflow"),p(e,"class","fixed-screen-header"),Fe(e,"height",s),Fe(e,"margin-top",l)},m(o,a){k(o,e,a),y(e,t),F(i,t,null),r=!0},p(o,a){const u={};a[0]&2097152&&(u.src=z.files.getURL(o[21],o[21].file)),a[0]&2097152&&(u.alt=o[21].title),a[0]&32&&(u.scale=o[5].scale),i.$set(u),a[0]&2105344&&s!==(s=`${o[21].fixedHeader*o[13]}px`)&&Fe(e,"height",s),a[0]&2105344&&l!==(l=`-${o[21].fixedHeader*o[13]}px`)&&Fe(e,"margin-top",l)},i(o){r||(E(i.$$.fragment,o),r=!0)},o(o){j(i.$$.fragment,o),r=!1},d(o){o&&v(e),q(i)}}}function zu(n){let e,t,i,s=`${n[21].fixedFooter*n[13]}px`,l=`-${n[21].fixedFooter*n[13]}px`,r;return i=new Xt({props:{class:"screen-preview-img",src:z.files.getURL(n[21],n[21].file),alt:n[21].title,loading:"eager",loaderClass:"hidden",fetchpriority:"high",scale:n[5].scale}}),{c(){e=b("div"),t=b("div"),$(i.$$.fragment),p(t,"class","fixed-screen-overflow"),p(e,"class","fixed-screen-footer"),Fe(e,"height",s),Fe(e,"margin-top",l)},m(o,a){k(o,e,a),y(e,t),F(i,t,null),r=!0},p(o,a){const u={};a[0]&2097152&&(u.src=z.files.getURL(o[21],o[21].file)),a[0]&2097152&&(u.alt=o[21].title),a[0]&32&&(u.scale=o[5].scale),i.$set(u),a[0]&2105344&&s!==(s=`${o[21].fixedFooter*o[13]}px`)&&Fe(e,"height",s),a[0]&2105344&&l!==(l=`-${o[21].fixedFooter*o[13]}px`)&&Fe(e,"margin-top",l)},i(o){r||(E(i.$$.fragment,o),r=!0)},o(o){j(i.$$.fragment,o),r=!1},d(o){o&&v(e),q(i)}}}function L2(n){var B;let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g,w,_,T,L,O,C,S=n[1].fixedHeader>0&&n[2]==Oe.preview&&Du(n);function P(N){n[34](N)}let R={class:"screen-preview-img",src:z.files.getURL(n[1],n[1].file),alt:n[1].title,loading:"eager",loaderClass:"loader",fetchpriority:"high",draggable:!1,scale:n[5].scale};n[9]!==void 0&&(R.isLoading=n[9]),a=new Xt({props:R}),se.push(()=>Ae(a,"isLoading",P)),a.$on("load",n[35]),a.$on("mousedown",n[36]),a.$on("touchstart",n[25]),a.$on("click",n[26]),a.$on("click",n[24]);const A=[O2,T2],M=[];function D(N,V){return N[2]==Oe.hotspots||N[2]==Oe.preview?0:N[2]==Oe.comments?1:-1}~(d=D(n))&&(m=M[d]=A[d](n));let Y=n[1].fixedFooter>0&&n[2]==Oe.preview&&qu(n),K=n[14]&&((B=n[21])==null?void 0:B.id)&&Wu(n);return{c(){e=b("div"),t=b("div"),i=b("div"),s=b("div"),S&&S.c(),l=I(),r=b("div"),o=b("div"),$(a.$$.fragment),c=I(),m&&m.c(),h=I(),Y&&Y.c(),w=I(),K&&K.c(),p(o,"class","tooltip-wrapper"),p(r,"class","screen-preview-img-wrapper active-screen-preview-wrapper svelte-r47g7"),Z(r,"loading",n[9]),p(s,"class",g="screen-preview align-"+(n[1].alignment||"center")+" svelte-r47g7"),Z(s,"fit-to-screen",n[4]),Fe(s,"width",n[12]?`${n[12]}px`:void 0),Fe(s,"height",n[11]?`${n[11]}px`:void 0),Fe(s,"background-color",n[1].background||As),p(i,"class","transition-item old"),p(t,"class",_="transition-container transition-"+n[14]+" svelte-r47g7"),Z(t,"active",n[14]),p(e,"class",T="screen-preview-holder "+(n[5].size?"mobile":"desktop")),Z(e,"in-transition",!!n[14]),Z(e,"hints",n[8]||n[15]),Z(e,"annotations",n[16])},m(N,V){k(N,e,V),y(e,t),y(t,i),y(i,s),S&&S.m(s,null),y(s,l),y(s,r),y(r,o),F(a,o,null),y(r,c),~d&&M[d].m(r,null),y(s,h),Y&&Y.m(s,null),n[37](s),y(t,w),K&&K.m(t,null),L=!0,O||(C=[H(window,"resize",n[33]),we(f=Ce.call(null,o,n[7]))],O=!0)},p(N,V){var U;N[1].fixedHeader>0&&N[2]==Oe.preview?S?(S.p(N,V),V[0]&6&&E(S,1)):(S=Du(N),S.c(),E(S,1),S.m(s,l)):S&&(oe(),j(S,1,1,()=>{S=null}),ae());const ee={};V[0]&2&&(ee.src=z.files.getURL(N[1],N[1].file)),V[0]&2&&(ee.alt=N[1].title),V[0]&32&&(ee.scale=N[5].scale),!u&&V[0]&512&&(u=!0,ee.isLoading=N[9],Ne(()=>u=!1)),a.$set(ee),f&&tt(f.update)&&V[0]&128&&f.update.call(null,N[7]);let J=d;d=D(N),d===J?~d&&M[d].p(N,V):(m&&(oe(),j(M[J],1,1,()=>{M[J]=null}),ae()),~d?(m=M[d],m?m.p(N,V):(m=M[d]=A[d](N),m.c()),E(m,1),m.m(r,null)):m=null),(!L||V[0]&512)&&Z(r,"loading",N[9]),N[1].fixedFooter>0&&N[2]==Oe.preview?Y?(Y.p(N,V),V[0]&6&&E(Y,1)):(Y=qu(N),Y.c(),E(Y,1),Y.m(s,null)):Y&&(oe(),j(Y,1,1,()=>{Y=null}),ae()),(!L||V[0]&2&&g!==(g="screen-preview align-"+(N[1].alignment||"center")+" svelte-r47g7"))&&p(s,"class",g),(!L||V[0]&18)&&Z(s,"fit-to-screen",N[4]),V[0]&4096&&Fe(s,"width",N[12]?`${N[12]}px`:void 0),V[0]&2048&&Fe(s,"height",N[11]?`${N[11]}px`:void 0),V[0]&2&&Fe(s,"background-color",N[1].background||As),N[14]&&((U=N[21])!=null&&U.id)?K?(K.p(N,V),V[0]&2113536&&E(K,1)):(K=Wu(N),K.c(),E(K,1),K.m(t,null)):K&&(oe(),j(K,1,1,()=>{K=null}),ae()),(!L||V[0]&16384&&_!==(_="transition-container transition-"+N[14]+" svelte-r47g7"))&&p(t,"class",_),(!L||V[0]&16384)&&Z(t,"active",N[14]),(!L||V[0]&32&&T!==(T="screen-preview-holder "+(N[5].size?"mobile":"desktop")))&&p(e,"class",T),(!L||V[0]&16416)&&Z(e,"in-transition",!!N[14]),(!L||V[0]&33056)&&Z(e,"hints",N[8]||N[15]),(!L||V[0]&65568)&&Z(e,"annotations",N[16])},i(N){L||(E(S),E(a.$$.fragment,N),E(m),E(Y),E(K),L=!0)},o(N){j(S),j(a.$$.fragment,N),j(m),j(Y),j(K),L=!1},d(N){N&&v(e),S&&S.d(),q(a),~d&&M[d].d(),Y&&Y.d(),n[37](null),K&&K.d(),O=!1,pe(C)}}}const As="var(--baseColor)";function I2(n,e,t){let i,s,l,r,o,a,u,f,c,d,m,h,g,w,_,T,L,O,C,S,P,R;Q(n,pt,te=>t(43,r=te)),Q(n,Ge,te=>t(1,o=te)),Q(n,Ii,te=>t(2,a=te)),Q(n,Bn,te=>t(13,u=te)),Q(n,Ve,te=>t(28,f=te)),Q(n,Wt,te=>t(3,c=te)),Q(n,ji,te=>t(4,d=te)),Q(n,Et,te=>t(5,m=te)),Q(n,ei,te=>t(29,h=te)),Q(n,cn,te=>t(30,g=te)),Q(n,_n,te=>t(31,w=te)),Q(n,fi,te=>t(14,_=te)),Q(n,Is,te=>t(15,T=te)),Q(n,js,te=>t(16,L=te)),Q(n,qd,te=>t(17,O=te)),Q(n,Nd,te=>t(18,C=te)),Q(n,Wi,te=>t(19,S=te)),Q(n,dr,te=>t(20,P=te)),Q(n,ci,te=>t(21,R=te));let A,M,D={},Y,K,B=!1,N=!1,V=!0;function ee(){let te=m==null?void 0:m.scale;if(!o||te&&!d){Te(Bn,u=te,u);return}G.loadImage(z.files.getURL(o,o.file)).then(he=>{!he.success||!he.width||(clearTimeout(Y),Y=setTimeout(()=>{if(!A||!(o!=null&&o.id))return;const ze=te>0?he.width*te:he.width;A.clientWidth<ze?te=A.clientWidth/he.width||1:te||(te=1),Te(Bn,u=te,u)},0))})}function J(te,he="",ze=100){he=he||"default",clearTimeout(D[he]),D[he]=setTimeout(te,ze)}function U(te,he){he=he||A,he&&(te=="left"?he.scrollLeft=0:te=="right"?he.scrollLeft=he.scrollWidth:he.scrollLeft=(he.scrollWidth-he.offsetWidth)/2)}function ce(te){if(a!=Oe.comments||c)return;te.preventDefault();const he={id:"",left:te.offsetX/u,top:te.offsetY/u,message:"",screen:o==null?void 0:o.id};Si(he,!0)}function re(te){if(a!=Oe.hotspots||f)return;G.normalizePointerEvent(te),te.touches||te.preventDefault();const he={id:"",left:te.offsetX/u,top:te.offsetY/u,width:25,height:25,type:et.screen,settings:{},screen:o==null?void 0:o.id,startResizing:te};jn(he,!0)}function de(){clearTimeout(N),t(8,B=!1)}function Le(){a==Oe.preview&&(t(8,B=!0),clearTimeout(N),N=setTimeout(()=>{t(8,B=!1)},500))}function Je(){U(o==null?void 0:o.alignment,A),ee()}bn(()=>{for(let te of r.slice(0,50))G.loadImage(z.files.getURL(te,te.file));return()=>{clearTimeout(N),clearTimeout(Y);for(let te in D)clearTimeout(D[te])}});const ut=(te,he)=>{var ze,wt,mt;return((wt=(ze=he.expand)==null?void 0:ze.comment)==null?void 0:wt.id)==te.id||((mt=he.expand)==null?void 0:mt.comment.replyTo)==te.id},st=te=>{var he;(he=te==null?void 0:te.detail)!=null&&he.noDebounce?Je():J(Je)};function dt(te){V=te,t(9,V)}const le=te=>{var he;(he=te.detail)==null||he.scrollIntoView(top),U(o.alignment),J(()=>{G.triggerEvent("mainScreenLoaded")},"mainScreenLoaded")},me=te=>{te.button==0&&re(te)};function W(te){se[te?"unshift":"push"](()=>{A=te,t(0,A)})}const ie=()=>U(R.alignment,M);function Me(te){se[te?"unshift":"push"](()=>{M=te,t(6,M)})}return n.$$.update=()=>{var te,he,ze,wt,mt,ne;n.$$.dirty[0]&32&&t(12,i=((he=(te=m==null?void 0:m.size)==null?void 0:te.split("x"))==null?void 0:he[0])<<0),n.$$.dirty[0]&32&&t(11,s=((wt=(ze=m==null?void 0:m.size)==null?void 0:ze.split("x"))==null?void 0:wt[1])<<0),n.$$.dirty[0]&3&&U(o==null?void 0:o.alignment,A),n.$$.dirty[0]&19&&(d||J(()=>U(o==null?void 0:o.alignment,A),"",0)),n.$$.dirty[0]&50&&(o||m||d)&&(de(),ee()),n.$$.dirty[0]&268435468|n.$$.dirty[1]&1&&(a==Oe.hotspots&&!f&&!w?t(7,K={position:"follow",text:"Click and drag to create hotspot",sub:'Hold "Alt" to snap'}):a==Oe.comments&&!c?t(7,K={position:"follow",text:"Click to leave a comment"}):t(7,K=void 0)),n.$$.dirty[0]&1610612736&&t(10,l=(h==null?void 0:h.id)&&((ne=(mt=g==null?void 0:g.expand)==null?void 0:mt.users)==null?void 0:ne.find($e=>$e.id==h.id)))},[A,o,a,c,d,m,M,K,B,V,l,s,i,u,_,T,L,O,C,S,P,R,J,U,ce,re,Le,Je,f,h,g,w,ut,st,dt,le,me,W,ie,Me]}class Bd extends Se{constructor(e){super(),ke(this,e,I2,L2,ge,{},null,[-1,-1])}}function Bu(n,e,t){const i=n.slice();return i[45]=e[t][0],i[46]=e[t][1],i}function j2(n){let e;return{c(){e=b("i"),p(e,"class","iconoir-settings")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function P2(n){let e;return{c(){e=b("div"),p(e,"class","loader loader-xs")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function N2(n){let e,t,i,s;return{c(){e=b("input"),p(e,"type","text"),p(e,"id",t=n[44]),e.required=!0,p(e,"placeholder","Screen title")},m(l,r){k(l,e,r),be(e,n[9].title),i||(s=H(e,"input",n[20]),i=!0)},p(l,r){r[1]&8192&&t!==(t=l[44])&&p(e,"id",t),r[0]&512&&e.value!==l[9].title&&be(e,l[9].title)},d(l){l&&v(e),i=!1,s()}}}function Zu(n){let e,t,i;function s(){return n[22](n[45])}return{c(){e=b("button"),e.textContent=`${n[46]} `,p(e,"type","button"),p(e,"class","btn btn-sm btn-semitransparent"),Z(e,"btn-primary",n[9].alignment==n[45]||!n[9].alignment&&n[45]=="center")},m(l,r){k(l,e,r),t||(i=H(e,"click",ye(s)),t=!0)},p(l,r){n=l,r[0]&1536&&Z(e,"btn-primary",n[9].alignment==n[45]||!n[9].alignment&&n[45]=="center")},d(l){l&&v(e),t=!1,i()}}}function A2(n){let e,t,i,s,l,r,o,a,u,f=Ie(Object.entries(n[10])),c=[];for(let d=0;d<f.length;d+=1)c[d]=Zu(Bu(n,f,d));return{c(){e=b("label"),t=b("span"),t.textContent="Alignment",i=I(),s=b("i"),r=I(),o=b("div");for(let d=0;d<c.length;d+=1)c[d].c();p(t,"class","txt"),p(s,"class",l="iconoir-keyframes txt-sm "+(n[6]?"txt-disabled":"link-hint")),Z(s,"no-pointer-events",n[6]),p(o,"class","btns-group btns-group-block")},m(d,m){k(d,e,m),y(e,t),y(e,i),y(e,s),k(d,r,m),k(d,o,m);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(o,null);a||(u=[we(Ce.call(null,s,"Apply to all screens")),H(s,"click",Ye(ye(n[21])))],a=!0)},p(d,m){if(m[0]&64&&l!==(l="iconoir-keyframes txt-sm "+(d[6]?"txt-disabled":"link-hint"))&&p(s,"class",l),m[0]&64&&Z(s,"no-pointer-events",d[6]),m[0]&17920){f=Ie(Object.entries(d[10]));let h;for(h=0;h<f.length;h+=1){const g=Bu(d,f,h);c[h]?c[h].p(g,m):(c[h]=Zu(g),c[h].c(),c[h].m(o,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=f.length}},d(d){d&&(v(e),v(r),v(o)),sn(c,d),a=!1,pe(u)}}}function M2(n){let e,t,i,s,l,r,o,a,u,f,c,d,m=(n[9].background||"none")+"",h,g,w,_;return{c(){e=b("label"),t=b("span"),t.textContent="Background",i=I(),s=b("i"),o=I(),a=b("div"),u=b("input"),c=I(),d=b("label"),h=x(m),p(t,"class","txt"),p(s,"class",l="iconoir-keyframes txt-sm "+(n[6]?"txt-disabled":"link-hint")),Z(s,"no-pointer-events",n[6]),p(e,"for",r=n[44]),p(u,"type","color"),p(u,"id",f=n[44]),Z(u,"fade",!n[9].background),p(d,"for",g=n[44]),p(d,"class","addon txt-mono"),p(a,"class","field-group")},m(T,L){k(T,e,L),y(e,t),y(e,i),y(e,s),k(T,o,L),k(T,a,L),y(a,u),be(u,n[9].background),y(a,c),y(a,d),y(d,h),w||(_=[we(Ce.call(null,s,"Apply to all screens")),H(s,"click",Ye(ye(n[23]))),H(u,"input",n[24])],w=!0)},p(T,L){L[0]&64&&l!==(l="iconoir-keyframes txt-sm "+(T[6]?"txt-disabled":"link-hint"))&&p(s,"class",l),L[0]&64&&Z(s,"no-pointer-events",T[6]),L[1]&8192&&r!==(r=T[44])&&p(e,"for",r),L[1]&8192&&f!==(f=T[44])&&p(u,"id",f),L[0]&512&&be(u,T[9].background),L[0]&512&&Z(u,"fade",!T[9].background),L[0]&512&&m!==(m=(T[9].background||"none")+"")&&ve(h,m),L[1]&8192&&g!==(g=T[44])&&p(d,"for",g)},d(T){T&&(v(e),v(o),v(a)),w=!1,pe(_)}}}function D2(n){let e,t,i,s,l,r,o,a,u,f,c;return{c(){e=b("input"),i=I(),s=b("label"),l=x("Has fixed header"),o=I(),a=b("i"),p(e,"type","checkbox"),p(e,"id",t=n[44]),p(s,"for",r=n[44]),p(a,"class",u="iconoir-keyframes txt-sm "+(n[6]?"txt-disabled":"link-hint")),Z(a,"no-pointer-events",n[6])},m(d,m){k(d,e,m),e.checked=n[0],k(d,i,m),k(d,s,m),y(s,l),k(d,o,m),k(d,a,m),f||(c=[H(e,"change",n[25]),H(e,"change",n[26]),we(Ce.call(null,a,"Apply to all screens")),H(a,"click",Ye(ye(n[27])))],f=!0)},p(d,m){m[1]&8192&&t!==(t=d[44])&&p(e,"id",t),m[0]&1&&(e.checked=d[0]),m[1]&8192&&r!==(r=d[44])&&p(s,"for",r),m[0]&64&&u!==(u="iconoir-keyframes txt-sm "+(d[6]?"txt-disabled":"link-hint"))&&p(a,"class",u),m[0]&64&&Z(a,"no-pointer-events",d[6])},d(d){d&&(v(e),v(i),v(s),v(o),v(a)),f=!1,pe(c)}}}function R2(n){let e,t,i,s,l,r,o;return{c(){e=b("div"),t=b("input"),s=I(),l=b("div"),l.textContent="px",p(t,"id",i=n[44]),p(t,"type","number"),p(t,"min","0"),p(l,"class","addon"),p(e,"class","field-group")},m(a,u){k(a,e,u),y(e,t),n[28](t),be(t,n[9].fixedHeader),y(e,s),y(e,l),r||(o=H(t,"input",n[29]),r=!0)},p(a,u){u[1]&8192&&i!==(i=a[44])&&p(t,"id",i),u[0]&512&&kt(t.value)!==a[9].fixedHeader&&be(t,a[9].fixedHeader)},d(a){a&&v(e),n[28](null),r=!1,o()}}}function H2(n){let e,t,i,s,l,r,o,a,u,f,c;return{c(){e=b("input"),i=I(),s=b("label"),l=x("Has fixed footer"),o=I(),a=b("i"),p(e,"type","checkbox"),p(e,"id",t=n[44]),p(s,"for",r=n[44]),p(a,"class",u="iconoir-keyframes txt-sm "+(n[6]?"txt-disabled":"link-hint")),Z(a,"no-pointer-events",n[6])},m(d,m){k(d,e,m),e.checked=n[1],k(d,i,m),k(d,s,m),y(s,l),k(d,o,m),k(d,a,m),f||(c=[H(e,"change",n[30]),H(e,"change",n[31]),we(Ce.call(null,a,"Apply to all screens")),H(a,"click",Ye(ye(n[32])))],f=!0)},p(d,m){m[1]&8192&&t!==(t=d[44])&&p(e,"id",t),m[0]&2&&(e.checked=d[1]),m[1]&8192&&r!==(r=d[44])&&p(s,"for",r),m[0]&64&&u!==(u="iconoir-keyframes txt-sm "+(d[6]?"txt-disabled":"link-hint"))&&p(a,"class",u),m[0]&64&&Z(a,"no-pointer-events",d[6])},d(d){d&&(v(e),v(i),v(s),v(o),v(a)),f=!1,pe(c)}}}function U2(n){let e,t,i,s,l,r,o;return{c(){e=b("div"),t=b("input"),s=I(),l=b("div"),l.textContent="px",p(t,"id",i=n[44]),p(t,"type","number"),p(t,"min","0"),p(l,"class","addon"),p(e,"class","field-group")},m(a,u){k(a,e,u),y(e,t),n[33](t),be(t,n[9].fixedFooter),y(e,s),y(e,l),r||(o=H(t,"input",n[34]),r=!0)},p(a,u){u[1]&8192&&i!==(i=a[44])&&p(t,"id",i),u[0]&512&&kt(t.value)!==a[9].fixedFooter&&be(t,a[9].fixedFooter)},d(a){a&&v(e),n[33](null),r=!1,o()}}}function F2(n){let e,t,i,s,l,r,o,a;return{c(){e=b("input"),i=I(),s=b("label"),l=x("Replace screen"),p(e,"type","file"),p(e,"id",t=n[44]),p(e,"class","hidden"),p(s,"for",r=n[44]),p(s,"class","link-hint txt-sm")},m(u,f){k(u,e,f),k(u,i,f),k(u,s,f),y(s,l),o||(a=H(e,"change",n[35]),o=!0)},p(u,f){f[1]&8192&&t!==(t=u[44])&&p(e,"id",t),f[1]&8192&&r!==(r=u[44])&&p(s,"for",r)},d(u){u&&(v(e),v(i),v(s)),o=!1,a()}}}function q2(n){let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g,w,_,T,L,O,C,S,P,R,A,M,D,Y,K;return i=new Ee({props:{class:"form-field required",name:"title",$$slots:{default:[N2,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),r=new Ee({props:{class:"form-field form-field-sm",name:"alignment",$$slots:{default:[A2,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),u=new Ee({props:{class:"form-field form-field-sm",name:"background",$$slots:{default:[M2,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),d=new Ee({props:{class:"form-field form-field-sm form-field-toggle",$$slots:{default:[D2,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),g=new Ee({props:{class:"form-field form-field-sm form-field-sm "+(n[0]?"":"invisible"),name:"fixedHeader",$$slots:{default:[R2,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),T=new Ee({props:{class:"form-field form-field-sm form-field-toggle",$$slots:{default:[H2,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),C=new Ee({props:{class:"form-field form-field-sm form-field-sm "+(n[1]?"":"invisible"),name:"fixedFooter",$$slots:{default:[U2,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),M=new Ee({props:{class:"block",name:"file",$$slots:{default:[F2,({uniqueId:B})=>({44:B}),({uniqueId:B})=>[0,B?8192:0]]},$$scope:{ctx:n}}}),{c(){e=b("form"),t=b("div"),$(i.$$.fragment),s=I(),l=b("div"),$(r.$$.fragment),o=I(),a=b("div"),$(u.$$.fragment),f=I(),c=b("div"),$(d.$$.fragment),m=I(),h=b("div"),$(g.$$.fragment),w=I(),_=b("div"),$(T.$$.fragment),L=I(),O=b("div"),$(C.$$.fragment),S=I(),P=b("hr"),R=I(),A=b("div"),$(M.$$.fragment),p(t,"class","col-12"),p(l,"class","col-6"),p(a,"class","col-6"),p(c,"class","col-6 flex-align-self-center"),p(h,"class","col-6"),p(_,"class","col-6 flex-align-self-center"),p(O,"class","col-6"),p(A,"class","block"),p(e,"class","grid grid-sm")},m(B,N){k(B,e,N),y(e,t),F(i,t,null),y(e,s),y(e,l),F(r,l,null),y(e,o),y(e,a),F(u,a,null),y(e,f),y(e,c),F(d,c,null),y(e,m),y(e,h),F(g,h,null),y(e,w),y(e,_),F(T,_,null),y(e,L),y(e,O),F(C,O,null),y(e,S),y(e,P),y(e,R),y(e,A),F(M,A,null),n[36](e),D=!0,Y||(K=[H(e,"change",n[13]),H(e,"submit",ye(n[14])),H(e,"click",Ye(n[19]))],Y=!0)},p(B,N){const V={};N[0]&512|N[1]&270336&&(V.$$scope={dirty:N,ctx:B}),i.$set(V);const ee={};N[0]&576|N[1]&262144&&(ee.$$scope={dirty:N,ctx:B}),r.$set(ee);const J={};N[0]&576|N[1]&270336&&(J.$$scope={dirty:N,ctx:B}),u.$set(J);const U={};N[0]&593|N[1]&270336&&(U.$$scope={dirty:N,ctx:B}),d.$set(U);const ce={};N[0]&1&&(ce.class="form-field form-field-sm form-field-sm "+(B[0]?"":"invisible")),N[0]&528|N[1]&270336&&(ce.$$scope={dirty:N,ctx:B}),g.$set(ce);const re={};N[0]&610|N[1]&270336&&(re.$$scope={dirty:N,ctx:B}),T.$set(re);const de={};N[0]&2&&(de.class="form-field form-field-sm form-field-sm "+(B[1]?"":"invisible")),N[0]&544|N[1]&270336&&(de.$$scope={dirty:N,ctx:B}),C.$set(de);const Le={};N[0]&768|N[1]&270336&&(Le.$$scope={dirty:N,ctx:B}),M.$set(Le)},i(B){D||(E(i.$$.fragment,B),E(r.$$.fragment,B),E(u.$$.fragment,B),E(d.$$.fragment,B),E(g.$$.fragment,B),E(T.$$.fragment,B),E(C.$$.fragment,B),E(M.$$.fragment,B),D=!0)},o(B){j(i.$$.fragment,B),j(r.$$.fragment,B),j(u.$$.fragment,B),j(d.$$.fragment,B),j(g.$$.fragment,B),j(T.$$.fragment,B),j(C.$$.fragment,B),j(M.$$.fragment,B),D=!1},d(B){B&&v(e),q(i),q(r),q(u),q(d),q(g),q(T),q(C),q(M),n[36](null),Y=!1,pe(K)}}}function $2(n){let e,t,i,s,l,r,o,a;function u(h,g){return h[6]?P2:j2}let f=u(n),c=f(n);function d(h){n[38](h)}let m={class:"screen-settings",focusHide:!n[8],$$slots:{default:[q2]},$$scope:{ctx:n}};return n[7]!==void 0&&(m.active=n[7]),i=new Rt({props:m}),n[37](i),se.push(()=>Ae(i,"active",d)),i.$on("show",n[11]),i.$on("hide",n[12]),{c(){e=b("div"),c.c(),t=I(),$(i.$$.fragment),p(e,"tabindex","0"),p(e,"class","btn btn-circle btn-hint txt-hint btn-transparent btn-screen-settings")},m(h,g){k(h,e,g),c.m(e,null),y(e,t),F(i,e,null),r=!0,o||(a=we(l=Ce.call(null,e,n[7]?void 0:{position:"top",text:"Screen settings"})),o=!0)},p(h,g){f!==(f=u(h))&&(c.d(1),c=f(h),c&&(c.c(),c.m(e,t)));const w={};g[0]&256&&(w.focusHide=!h[8]),g[0]&891|g[1]&262144&&(w.$$scope={dirty:g,ctx:h}),!s&&g[0]&128&&(s=!0,w.active=h[7],Ne(()=>s=!1)),i.$set(w),l&&tt(l.update)&&g[0]&128&&l.update.call(null,h[7]?void 0:{position:"top",text:"Screen settings"})},i(h){r||(E(i.$$.fragment,h),r=!0)},o(h){j(i.$$.fragment,h),r=!1},d(h){h&&v(e),c.d(),n[37](null),q(i),o=!1,a()}}}function W2(n,e,t){let i,s,l,r;Q(n,pt,ie=>t(41,s=ie)),Q(n,Ge,ie=>t(9,l=ie)),Q(n,Bs,ie=>t(18,r=ie));const o=it(),a={left:"Left",center:"Center",right:"Right"};let u,f,c,d,m=!1,h=!1,g=!1,w=!1,_=!1,T;function L(){u==null||u.show()}function O(){u==null||u.hide()}P();function C(){Jt({}),t(8,_=!1),P()}function S(){(i||l.id&&f&&!f.reportValidity())&&L()}function P(){t(0,g=l.fixedHeader>0),t(1,w=l.fixedFooter>0)}function R(){clearTimeout(T),T=setTimeout(A,100)}async function A(){if(f!=null&&f.reportValidity()){t(6,m=!0);try{const ie=await z.collection("screens").update(l.id,l);An(ie),o("save",ie),t(6,m=!1)}catch(ie){L(),ie!=null&&ie.isAbort||(t(6,m=!1),z.error(ie))}}}async function M(ie,Me){t(6,m=!0);const te={};te[ie]=Me;try{const he=[];for(let ze of s)he.push(z.collection("screens").update(ze.id,te,{requestKey:"bulk_update_prop_"+ie+ze.id}));await Promise.all(he).then(ze=>{for(let wt of ze)An(wt)}),gt("Successfully bulk applied the screen setting."),t(6,m=!1)}catch(he){he!=null&&he.isAbort||(t(6,m=!1),z.error(he))}}function D(ie){qe.call(this,n,ie)}function Y(){l.title=this.value,Ge.set(l)}const K=()=>{M("alignment",l.alignment)},B=ie=>{Te(Ge,l.alignment=ie,l),A()},N=()=>{M("background",l.background)};function V(){l.background=this.value,Ge.set(l)}function ee(){g=this.checked,t(0,g)}const J=ie=>{ie.target.checked&&ie.stopPropagation(),c==null||c.select()},U=()=>M("fixedHeader",l.fixedHeader);function ce(ie){se[ie?"unshift":"push"](()=>{c=ie,t(4,c)})}function re(){l.fixedHeader=kt(this.value),Ge.set(l)}function de(){w=this.checked,t(1,w)}const Le=ie=>{ie.target.checked&&ie.stopPropagation(),d==null||d.select()},Je=()=>M("fixedFooter",l.fixedFooter);function ut(ie){se[ie?"unshift":"push"](()=>{d=ie,t(5,d)})}function st(){l.fixedFooter=kt(this.value),Ge.set(l)}const dt=ie=>{ie.target.files.length&&(t(8,_=!0),cr(l,ie.target.files[0]).finally(()=>{t(8,_=!1)}))};function le(ie){se[ie?"unshift":"push"](()=>{f=ie,t(3,f)})}function me(ie){se[ie?"unshift":"push"](()=>{u=ie,t(2,u)})}function W(ie){h=ie,t(7,h)}return n.$$.update=()=>{n.$$.dirty[0]&262144&&(i=!G.isEmpty(r)),n.$$.dirty[0]&1&&(g||Te(Ge,l.fixedHeader=0,l)),n.$$.dirty[0]&2&&(w||Te(Ge,l.fixedFooter=0,l))},[g,w,u,f,c,d,m,h,_,l,a,C,S,R,A,M,L,O,r,D,Y,K,B,N,V,ee,J,U,ce,re,de,Le,Je,ut,st,dt,le,me,W]}class V2 extends Se{constructor(e){super(),ke(this,e,W2,$2,ge,{show:16,hide:17},null,[-1,-1])}get show(){return this.$$.ctx[16]}get hide(){return this.$$.ctx[17]}}function Yu(n,e,t){var l;const i=n.slice();i[18]=e[t],i[20]=e,i[21]=t;const s=(l=i[4].filter(function(...o){return n[14](i[18],...o)}))==null?void 0:l.length;return i[19]=s,i}function z2(n){let e,t,i,s,l,r,o,a;function u(...f){return n[10](n[18],...f)}return{c(){var f;e=b("input"),s=I(),l=b("label"),p(e,"type","checkbox"),p(e,"id",t=n[22]),e.checked=i=(f=n[18].screens)==null?void 0:f.includes(n[1].id),p(l,"for",r=n[22])},m(f,c){k(f,e,c),k(f,s,c),k(f,l,c),o||(a=H(e,"change",u),o=!0)},p(f,c){var d;n=f,c&4194304&&t!==(t=n[22])&&p(e,"id",t),c&6&&i!==(i=(d=n[18].screens)==null?void 0:d.includes(n[1].id))&&(e.checked=i),c&4194304&&r!==(r=n[22])&&p(l,"for",r)},d(f){f&&(v(e),v(s),v(l)),o=!1,a()}}}function Ku(n,e){let t,i,s,l,r=e[18].title+"",o,a,u,f,c=e[19]+"",d,m,h,g,w,_;i=new Ee({props:{class:"form-field form-field-toggle form-field-auto m-0",$$slots:{default:[z2,({uniqueId:C})=>({22:C}),({uniqueId:C})=>C?4194304:0]},$$scope:{ctx:e}}});function T(...C){return e[11](e[18],...C)}function L(...C){return e[12](e[18],e[20],e[21],...C)}function O(){return e[13](e[18])}return{key:n,first:null,c(){t=b("div"),$(i.$$.fragment),s=I(),l=b("span"),o=x(r),u=I(),f=b("code"),d=x(c),m=I(),h=b("button"),h.innerHTML='<i class="iconoir-trash txt-xs"></i>',p(l,"class","template-title"),p(l,"contenteditable","true"),p(l,"data-placeholder",a=e[18].title),p(l,"title","Edit name"),p(f,"class","txt-hint"),p(h,"type","button"),p(h,"class","btn btn-circle btn-sm btn-danger btn-transparent m-l-auto link-fade delete-btn svelte-1ysnxpb"),p(t,"class","dropdown-item"),this.first=t},m(C,S){k(C,t,S),F(i,t,null),y(t,s),y(t,l),y(l,o),y(t,u),y(t,f),y(f,d),y(t,m),y(t,h),g=!0,w||(_=[H(l,"blur",T),H(l,"keydown",Y2),H(l,"input",L),we(Ce.call(null,f,"Total hotspots")),H(h,"click",ye(O)),H(t,"click",Ye(e[9]))],w=!0)},p(C,S){e=C;const P={};S&12582918&&(P.$$scope={dirty:S,ctx:e}),i.$set(P),(!g||S&4)&&r!==(r=e[18].title+"")&&Wf(o,r),(!g||S&4&&a!==(a=e[18].title))&&p(l,"data-placeholder",a),(!g||S&20)&&c!==(c=e[19]+"")&&ve(d,c)},i(C){g||(E(i.$$.fragment,C),g=!0)},o(C){j(i.$$.fragment,C),g=!1},d(C){C&&v(t),q(i),w=!1,pe(_)}}}function B2(n){let e=[],t=new Map,i,s,l,r,o,a,u=Ie(n[2]);const f=c=>c[18].id;for(let c=0;c<u.length;c+=1){let d=Yu(n,u,c),m=f(d);t.set(m,e[c]=Ku(m,d))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();i=I(),s=b("div"),l=b("button"),l.innerHTML='<i class="iconoir-plus"></i> <span class="txt">New hotspot template</span>',p(l,"type","button"),p(l,"class","btn btn-block btn-sm btn-success btn-semitransparent"),p(s,"class","block p-5"),Z(s,"m-t-5",n[2].length)},m(c,d){for(let m=0;m<e.length;m+=1)e[m]&&e[m].m(c,d);k(c,i,d),k(c,s,d),y(s,l),r=!0,o||(a=H(l,"click",n[8]),o=!0)},p(c,d){d&4194550&&(u=Ie(c[2]),oe(),e=Tt(e,d,f,1,c,u,t,i.parentNode,At,Ku,i,Yu),ae()),(!r||d&4)&&Z(s,"m-t-5",c[2].length)},i(c){if(!r){for(let d=0;d<u.length;d+=1)E(e[d]);r=!0}},o(c){for(let d=0;d<e.length;d+=1)j(e[d]);r=!1},d(c){c&&(v(i),v(s));for(let d=0;d<e.length;d+=1)e[d].d(c);o=!1,a()}}}function Z2(n){let e,t,i=n[3].length+"",s,l,r=n[3].length==1?"template":"templates",o,a,u,f,c,d;return c=new Rt({props:{class:"dropdown templates-dropdown dropdown-upside",focusHide:!1,disableHide:n[0],$$slots:{default:[B2]},$$scope:{ctx:n}}}),{c(){e=b("div"),t=b("strong"),s=x(i),l=x(" Applied hotspot "),o=x(r),a=I(),u=b("i"),f=I(),$(c.$$.fragment),p(u,"class","iconoir-nav-arrow-up"),p(e,"tabindex","0"),p(e,"type","button"),p(e,"class","btn btn-sm btn-hint txt-hint btn-transparent entrance-right")},m(m,h){k(m,e,h),y(e,t),y(t,s),y(e,l),y(e,o),y(e,a),y(e,u),y(e,f),F(c,e,null),d=!0},p(m,[h]){(!d||h&8)&&i!==(i=m[3].length+"")&&ve(s,i),(!d||h&8)&&r!==(r=m[3].length==1?"template":"templates")&&ve(o,r);const g={};h&1&&(g.disableHide=m[0]),h&8388630&&(g.$$scope={dirty:h,ctx:m}),c.$set(g)},i(m){d||(E(c.$$.fragment,m),d=!0)},o(m){j(c.$$.fragment,m),d=!1},d(m){m&&v(e),q(c)}}}const Y2=n=>{n.code==="Enter"&&(n.preventDefault(),n.target.blur())};function K2(n,e,t){let i,s,l,r;Q(n,Ge,C=>t(1,i=C)),Q(n,dn,C=>t(2,s=C)),Q(n,i2,C=>t(3,l=C)),Q(n,kn,C=>t(4,r=C));const o=it();let a=!1,u=null;function f(C){clearTimeout(u),u=setTimeout(()=>{c(C)},100)}async function c(C){if(C!=null&&C.id){zi(C);try{C=await z.collection("hotspotTemplates").update(C.id,C),o("save",C)}catch(S){S.isAbort||z.error(S)}}}function d(C){if(a||!(C!=null&&C.id))return;let S=`Do you really want to delete template "${C.title}" and all of its hotspots?`;t(0,a=!0),Pt(S,()=>m(C),()=>{setTimeout(()=>{t(0,a=!1)},0)})}async function m(C){if(C!=null&&C.id){t(0,a=!0);try{await z.collection("hotspotTemplates").delete(C.id),o("delete",C),Rd(C),t(0,a=!1)}catch(S){S.isAbort||(z.error(S),t(0,a=!1))}}}async function h(){let C="Template ",S="";for(let R=1;R<1e3&&(S=C+(s.length+R),!!s.find(A=>A.title==S));R++);let P={id:"auto"+G.randomString(11),prototype:i.prototype,screens:[i.id],title:S};zi(P);try{P=await z.collection("hotspotTemplates").create(P),zi(P),o("create",P)}catch(R){R.isAbort||z.error(R)}}Gt(()=>{u&&clearTimeout(u)});function g(C){qe.call(this,n,C)}return[a,i,s,l,r,f,c,d,h,g,(C,S)=>{S.target.checked?G.pushUnique(C.screens,i.id):G.removeByValue(C.screens,i.id),c(C)},(C,S)=>{var P;(P=S.target.textContent)!=null&&P.trim()||(S.target.textContent=C.title)},(C,S,P,R)=>{var M;const A=(M=R.target.textContent)==null?void 0:M.trim();A&&A!=C.title&&(Te(dn,S[P].title=A,s),f(C))},C=>d(C),(C,S)=>S.hotspotTemplate==C.id]}class G2 extends Se{constructor(e){super(),ke(this,e,K2,Z2,ge,{})}}function J2(n){let e,t,i,s,l,r,o,a,u,f;return{c(){e=b("input"),i=I(),s=b("label"),l=x("Show hotspots ("),r=x(n[4]),o=x(")"),p(e,"type","checkbox"),p(e,"id",t=n[15]),p(s,"for",a=n[15])},m(c,d){k(c,e,d),n[8](e),e.checked=n[5],k(c,i,d),k(c,s,d),y(s,l),y(s,r),y(s,o),u||(f=H(e,"change",n[9]),u=!0)},p(c,d){d&32768&&t!==(t=c[15])&&p(e,"id",t),d&32&&(e.checked=c[5]),d&16&&ve(r,c[4]),d&32768&&a!==(a=c[15])&&p(s,"for",a)},d(c){c&&(v(e),v(i),v(s)),n[8](null),u=!1,f()}}}function X2(n){let e,t,i,s,l,r,o,a,u,f;return{c(){e=b("input"),i=I(),s=b("label"),l=x("Show notes ("),r=x(n[3]),o=x(")"),p(e,"type","checkbox"),p(e,"id",t=n[15]),p(s,"for",a=n[15])},m(c,d){k(c,e,d),n[11](e),e.checked=n[6],k(c,i,d),k(c,s,d),y(s,l),y(s,r),y(s,o),u||(f=H(e,"change",n[12]),u=!0)},p(c,d){d&32768&&t!==(t=c[15])&&p(e,"id",t),d&64&&(e.checked=c[6]),d&8&&ve(r,c[3]),d&32768&&a!==(a=c[15])&&p(s,"for",a)},d(c){c&&(v(e),v(i),v(s)),n[11](null),u=!1,f()}}}function Q2(n){let e,t,i,s,l,r,o,a;return t=new Ee({props:{class:"form-field form-field-sm form-field-toggle m-0",$$slots:{default:[J2,({uniqueId:u})=>({15:u}),({uniqueId:u})=>u?32768:0]},$$scope:{ctx:n}}}),l=new Ee({props:{class:"form-field form-field-sm form-field-toggle m-0",$$slots:{default:[X2,({uniqueId:u})=>({15:u}),({uniqueId:u})=>u?32768:0]},$$scope:{ctx:n}}}),{c(){e=b("div"),$(t.$$.fragment),i=I(),s=b("div"),$(l.$$.fragment),p(e,"class","dropdown-item"),p(s,"class","dropdown-item")},m(u,f){k(u,e,f),F(t,e,null),k(u,i,f),k(u,s,f),F(l,s,null),r=!0,o||(a=[H(e,"click",Ye(n[10])),H(s,"click",Ye(n[13]))],o=!0)},p(u,f){const c={};f&98354&&(c.$$scope={dirty:f,ctx:u}),t.$set(c);const d={};f&98380&&(d.$$scope={dirty:f,ctx:u}),l.$set(d)},i(u){r||(E(t.$$.fragment,u),E(l.$$.fragment,u),r=!0)},o(u){j(t.$$.fragment,u),j(l.$$.fragment,u),r=!1},d(u){u&&(v(e),v(i),v(s)),q(t),q(l),o=!1,pe(a)}}}function x2(n){let e,t,i,s,l,r,o,a,u;function f(d){n[14](d)}let c={class:"dropdown dropdown-upside dropdown-nowrap",$$slots:{default:[Q2]},$$scope:{ctx:n}};return n[0]!==void 0&&(c.active=n[0]),s=new Rt({props:c}),se.push(()=>Ae(s,"active",f)),{c(){e=b("div"),t=b("i"),i=I(),$(s.$$.fragment),p(t,"class","iconoir-switch-on"),p(e,"tabindex","0"),p(e,"type","button"),p(e,"class","btn btn-circle btn-hint txt-hint btn-transparent entrance-right")},m(d,m){k(d,e,m),y(e,t),y(e,i),F(s,e,null),o=!0,a||(u=we(r=Ce.call(null,e,n[0]?void 0:{position:"top",text:"Preview options"})),a=!0)},p(d,[m]){const h={};m&65662&&(h.$$scope={dirty:m,ctx:d}),!l&&m&1&&(l=!0,h.active=d[0],Ne(()=>l=!1)),s.$set(h),r&&tt(r.update)&&m&1&&r.update.call(null,d[0]?void 0:{position:"top",text:"Preview options"})},i(d){o||(E(s.$$.fragment,d),o=!0)},o(d){j(s.$$.fragment,d),o=!1},d(d){d&&v(e),q(s),a=!1,u()}}}function ew(n,e,t){let i,s,l,r,o;Q(n,qd,T=>t(7,l=T)),Q(n,Is,T=>t(5,r=T)),Q(n,js,T=>t(6,o=T));let a=!1,u,f;function c(T){se[T?"unshift":"push"](()=>{u=T,t(1,u)})}function d(){r=this.checked,Is.set(r)}const m=()=>t(1,u.checked^=!0,u);function h(T){se[T?"unshift":"push"](()=>{f=T,t(2,f)})}function g(){o=this.checked,js.set(o)}const w=()=>t(2,f.checked^=!0,f);function _(T){a=T,t(0,a)}return n.$$.update=()=>{var T,L;n.$$.dirty&128&&t(4,i=((T=l==null?void 0:l.filter(O=>O.type!=et.note))==null?void 0:T.length)||0),n.$$.dirty&128&&t(3,s=((L=l==null?void 0:l.filter(O=>O.type==et.note))==null?void 0:L.length)||0)},[a,u,f,s,i,r,o,l,c,d,m,h,g,w,_]}class Zd extends Se{constructor(e){super(),ke(this,e,ew,x2,ge,{})}}function Gu(n,e,t){const i=n.slice();return i[14]=e[t],i[16]=t,i}function pl(n){const e=n.slice(),t=e[3].filter(function(...s){return n[12](e[14],...s)}).length||0;return e[17]=t,e}function Ju(n){let e,t,i,s,l,r,o,a,u,f,c,d,m=n[3].length&&Xu(n);function h(_,T){return _[5].length?nw:iw}let g=h(n),w=g(n);return{c(){e=b("aside"),t=b("header"),i=b("h6"),i.textContent="Screen comments",s=I(),l=b("button"),l.innerHTML='<i class="iconoir-xmark"></i>',r=I(),m&&m.c(),o=I(),a=b("div"),w.c(),p(l,"type","button"),p(l,"class","btn btn-sm btn-transparent btn-hint btn-circle close-btn"),p(t,"class","sidebar-section sidebar-header"),p(a,"class","sidebar-section sidebar-content"),p(e,"class","screen-preview-sidebar comments-sidebar")},m(_,T){k(_,e,T),y(e,t),y(t,i),y(t,s),y(t,l),y(t,r),m&&m.m(t,null),y(e,o),y(e,a),w.m(a,null),f=!0,c||(d=[we(Ce.call(null,l,{position:"left",text:"Close"})),H(l,"click",ye(n[1])),H(e,"introend",n[7]),H(e,"outroend",n[7])],c=!0)},p(_,T){_[3].length?m?(m.p(_,T),T&8&&E(m,1)):(m=Xu(_),m.c(),E(m,1),m.m(t,null)):m&&(oe(),j(m,1,1,()=>{m=null}),ae()),g===(g=h(_))&&w?w.p(_,T):(w.d(1),w=g(_),w&&(w.c(),w.m(a,null)))},i(_){f||(E(m),_&&St(()=>{f&&(u||(u=ct(e,Lt,{duration:200,axis:"x"},!0)),u.run(1))}),f=!0)},o(_){j(m),_&&(u||(u=ct(e,Lt,{duration:200,axis:"x"},!1)),u.run(0)),f=!1},d(_){_&&v(e),m&&m.d(),w.d(),_&&u&&u.end(),c=!1,pe(d)}}}function Xu(n){let e,t;return e=new Ee({props:{class:"form-field form-field-toggle m-t-xs m-b-5 entrance-top",$$slots:{default:[tw,({uniqueId:i})=>({18:i}),({uniqueId:i})=>i?262144:0]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,s){const l={};s&786452&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function tw(n){let e,t,i,s,l,r,o,a,u,f,c;return{c(){e=b("input"),s=I(),l=b("label"),r=x("Show resolved comments ("),o=x(n[2]),a=x(")"),p(e,"type","checkbox"),p(e,"id",t=n[18]),e.disabled=i=n[2]==0,p(l,"for",u=n[18])},m(d,m){k(d,e,m),e.checked=n[4],k(d,s,m),k(d,l,m),y(l,r),y(l,o),y(l,a),f||(c=H(e,"change",n[11]),f=!0)},p(d,m){m&262144&&t!==(t=d[18])&&p(e,"id",t),m&4&&i!==(i=d[2]==0)&&(e.disabled=i),m&16&&(e.checked=d[4]),m&4&&ve(o,d[2]),m&262144&&u!==(u=d[18])&&p(l,"for",u)},d(d){d&&(v(e),v(s),v(l)),f=!1,c()}}}function nw(n){let e,t=[],i=new Map,s=Ie(n[3]);const l=r=>r[14].id;for(let r=0;r<s.length;r+=1){let o=Gu(n,s,r),a=l(o);i.set(a,t[r]=tf(a,o))}return{c(){e=b("div");for(let r=0;r<t.length;r+=1)t[r].c();p(e,"class","flex-list primary-comments-list entrance-top")},m(r,o){k(r,e,o);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(r,o){o&88&&(s=Ie(r[3]),t=Tt(t,o,l,1,r,s,i,e,Qf,tf,null,Gu))},d(r){r&&v(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function iw(n){let e,t,i,s;function l(a,u){return!a[4]&&a[2]>0?lw:sw}let r=l(n),o=r(n);return{c(){e=b("div"),t=b("div"),t.innerHTML='<i class="iconoir-message-alert"></i>',i=I(),s=b("div"),o.c(),p(t,"class","icon"),p(s,"class","title txt-disabled"),p(e,"class","placeholder-block entrance-top")},m(a,u){k(a,e,u),y(e,t),y(e,i),y(e,s),o.m(s,null)},p(a,u){r!==(r=l(a))&&(o.d(1),o=r(a),o&&(o.c(),o.m(s,null)))},d(a){a&&v(e),o.d()}}}function Qu(n){let e,t,i,s,l=n[16]+1+"",r,o,a,u=G.getCommentAuthor(n[14])+"",f,c,d,m,h=n[14].message+"",g,w,_,T,L=G.relativeDate(n[14].created)+"",O,C,S,P,R,A=n[14].resolved&&xu(),M=n[17]>0&&ef(n);function D(){return n[13](n[14])}return{c(){var Y;e=b("button"),t=b("div"),i=b("strong"),s=x("#"),r=x(l),o=I(),a=b("span"),f=x(u),c=I(),A&&A.c(),d=I(),m=b("div"),g=x(h),w=I(),_=b("div"),T=b("span"),O=x(L),C=I(),M&&M.c(),S=I(),p(i,"class","meta-item number"),p(a,"class","meta-item txt-ellipsis"),p(t,"class","meta"),p(m,"class","content"),p(T,"class","meta-item date"),p(_,"class","meta"),p(e,"type","button"),p(e,"class","bubble primary-comment"),Z(e,"active",n[14].id==((Y=n[6])==null?void 0:Y.id))},m(Y,K){k(Y,e,K),y(e,t),y(t,i),y(i,s),y(i,r),y(t,o),y(t,a),y(a,f),y(t,c),A&&A.m(t,null),y(e,d),y(e,m),y(m,g),y(e,w),y(e,_),y(_,T),y(T,O),y(_,C),M&&M.m(_,null),y(e,S),P||(R=H(e,"click",ye(D)),P=!0)},p(Y,K){var B;n=Y,K&8&&l!==(l=n[16]+1+"")&&ve(r,l),K&8&&u!==(u=G.getCommentAuthor(n[14])+"")&&ve(f,u),n[14].resolved?A||(A=xu(),A.c(),A.m(t,null)):A&&(A.d(1),A=null),K&8&&h!==(h=n[14].message+"")&&ve(g,h),K&8&&L!==(L=G.relativeDate(n[14].created)+"")&&ve(O,L),n[17]>0?M?M.p(n,K):(M=ef(n),M.c(),M.m(_,null)):M&&(M.d(1),M=null),K&72&&Z(e,"active",n[14].id==((B=n[6])==null?void 0:B.id))},d(Y){Y&&v(e),A&&A.d(),M&&M.d(),P=!1,R()}}}function xu(n){let e,t,i;return{c(){e=b("span"),e.innerHTML='<i class="iconoir-double-check txt-success"></i>',p(e,"class","meta-item resolved m-l-auto")},m(s,l){k(s,e,l),t||(i=we(Ce.call(null,e,"Resolved")),t=!0)},d(s){s&&v(e),t=!1,i()}}}function ef(n){let e,t=n[17]+"",i,s,l=n[17]==1?"reply":"replies",r;return{c(){e=b("span"),i=x(t),s=I(),r=x(l),p(e,"class","meta-item m-l-auto")},m(o,a){k(o,e,a),y(e,i),y(e,s),y(e,r)},p(o,a){a&8&&t!==(t=o[17]+"")&&ve(i,t),a&8&&l!==(l=o[17]==1?"reply":"replies")&&ve(r,l)},d(o){o&&v(e)}}}function tf(n,e){let t,i,s=(e[4]||!e[14].resolved)&&Qu(pl(e));return{key:n,first:null,c(){t=De(),s&&s.c(),i=De(),this.first=t},m(l,r){k(l,t,r),s&&s.m(l,r),k(l,i,r)},p(l,r){e=l,e[4]||!e[14].resolved?s?s.p(pl(e),r):(s=Qu(pl(e)),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},d(l){l&&(v(t),v(i)),s&&s.d(l)}}}function sw(n){let e;return{c(){e=x("No comments found.")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function lw(n){let e;return{c(){e=x("All comments have been resolved.")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function rw(n){let e,t,i=n[0]&&Ju(n);return{c(){i&&i.c(),e=De()},m(s,l){i&&i.m(s,l),k(s,e,l),t=!0},p(s,[l]){s[0]?i?(i.p(s,l),l&1&&E(i,1)):(i=Ju(s),i.c(),E(i,1),i.m(e.parentNode,e)):i&&(oe(),j(i,1,1,()=>{i=null}),ae())},i(s){t||(E(i),t=!0)},o(s){j(i),t=!1},d(s){s&&v(e),i&&i.d(s)}}}function ow(n,e,t){let i,s,l,r,o,a;Q(n,Wi,_=>t(4,r=_)),Q(n,Nd,_=>t(10,o=_)),Q(n,Wt,_=>t(6,a=_));let{active:u=!1}=e;function f(){u?d():c()}function c(){t(0,u=!0)}function d(){t(0,u=!1)}function m(){G.triggerEvent("resize",{noDebounce:!0})}function h(){r=this.checked,Wi.set(r)}const g=(_,T)=>T.replyTo==_.id,w=_=>{Te(Wt,a=_,a)};return n.$$set=_=>{"active"in _&&t(0,u=_.active)},n.$$.update=()=>{n.$$.dirty&1024&&t(3,i=o==null?void 0:o.filter(_=>!!_.id)),n.$$.dirty&8&&t(2,s=i.filter(_=>_.resolved).length),n.$$.dirty&4&&s==0&&Te(Wi,r=!1,r),n.$$.dirty&24&&t(5,l=r?i:i.filter(_=>!_.resolved))},[u,d,s,i,r,l,a,m,f,c,o,h,g,w]}class Yd extends Se{constructor(e){super(),ke(this,e,ow,rw,ge,{active:0,toggle:8,show:9,hide:1})}get toggle(){return this.$$.ctx[8]}get show(){return this.$$.ctx[9]}get hide(){return this.$$.ctx[1]}}function aw(n){let e;const t=n[15].default,i=lt(t,n,n[19],null);return{c(){i&&i.c()},m(s,l){i&&i.m(s,l),e=!0},p(s,l){i&&i.p&&(!e||l&524288)&&ot(i,t,s,s[19],e?rt(t,s[19],l,null):at(s[19]),null)},i(s){e||(E(i,s),e=!0)},o(s){j(i,s),e=!1},d(s){i&&i.d(s)}}}function uw(n){let e,t,i,s,l,r;const o=[{class:"popover "+n[1]},{trigger:n[5]},n[8]];function a(f){n[17](f)}let u={$$slots:{default:[aw]},$$scope:{ctx:n}};for(let f=0;f<o.length;f+=1)u=Ue(u,o[f]);return n[0]!==void 0&&(u.active=n[0]),t=new Rt({props:u}),n[16](t),se.push(()=>Ae(t,"active",a)),t.$on("show",n[6]),t.$on("hide",n[7]),{c(){e=b("div"),$(t.$$.fragment),p(e,"class","popover-container"),Z(e,"active",n[0])},m(f,c){k(f,e,c),F(t,e,null),n[18](e),s=!0,l||(r=[H(window,"resize",n[2]),H(window,"mainScreenLoaded",n[2])],l=!0)},p(f,[c]){const d=c&290?bt(o,[c&2&&{class:"popover "+f[1]},c&32&&{trigger:f[5]},c&256&&Nt(f[8])]):{};c&524288&&(d.$$scope={dirty:c,ctx:f}),!i&&c&1&&(i=!0,d.active=f[0],Ne(()=>i=!1)),t.$set(d),(!s||c&1)&&Z(e,"active",f[0])},i(f){s||(E(t.$$.fragment,f),s=!0)},o(f){j(t.$$.fragment,f),s=!1},d(f){f&&v(e),n[16](null),q(t),n[18](null),l=!1,pe(r)}}}let Fn;function fw(){return Fn=Fn||document.querySelector(".popovers"),Fn||(Fn=document.createElement("div"),Fn.classList.add("popovers"),document.body.appendChild(Fn)),Fn}function cw(n,e,t){const i=["active","vPadding","hPadding","class","show","hide","forceHide","throttleRefreshPosition","refreshPosition"];let s=ft(e,i),{$$slots:l={},$$scope:r}=e;const o=it();let{active:a=!1}=e,{vPadding:u=0}=e,{hPadding:f=0}=e,{class:c=void 0}=e,d,m,h,g,w,_;async function T(N,V=null){t(5,h=N),g=V||document.body,m==null||m.show()}function L(){m==null||m.hide()}function O(){m==null||m.forceHide()}function C(N=100){_||(_=setTimeout(()=>{_=null,S()},N))}function S(){if(!a||!h||!d)return;const N=d.offsetWidth,V=d.offsetHeight,ee=g||document.body,J=ee.clientWidth,U=ee.clientHeight;let ce=0,re=0;const de=h.getBoundingClientRect();ce=de.top+u,J-(de.left+de.width+f)>=N?re=de.left+de.width+f:de.left-f>=N?re=de.left-f-N:(re=de.left+de.width/2-N/2-f,ce=de.top+de.height+u),re+N>J&&(re=J-N),re=re>=0?re:0,ce+V>U&&(ce=U-V),ce=ce>=0?ce:0,t(3,d.style.top=(ce<<0)+"px",d),t(3,d.style.left=(re<<0)+"px",d)}async function P(){D(),await Ct(),S(),A(),o("show")}function R(){D(),M(),o("hide")}function A(){M(),!(!h||!d)&&(w=new MutationObserver(()=>{C(50)}),w.observe(h,{attributeFilter:["width","height","style","display"],childList:!0,subtree:!0}),w.observe(d,{attributeFilter:["width","height"],childList:!0,subtree:!0}))}function M(){w==null||w.disconnect(),w=null}function D(){clearTimeout(_),_=null}bn(()=>{fw().appendChild(d),S();const N=()=>{C(100)};return document.body.addEventListener("scroll",N,!0),()=>{document.body.removeEventListener("scroll",N,!0),D(),M(),d==null||d.remove()}});function Y(N){se[N?"unshift":"push"](()=>{m=N,t(4,m)})}function K(N){a=N,t(0,a)}function B(N){se[N?"unshift":"push"](()=>{d=N,t(3,d)})}return n.$$set=N=>{e=Ue(Ue({},e),Kt(N)),t(8,s=ft(e,i)),"active"in N&&t(0,a=N.active),"vPadding"in N&&t(9,u=N.vPadding),"hPadding"in N&&t(10,f=N.hPadding),"class"in N&&t(1,c=N.class),"$$scope"in N&&t(19,r=N.$$scope)},[a,c,S,d,m,h,P,R,s,u,f,T,L,O,C,l,Y,K,B,r]}class Kd extends Se{constructor(e){super(),ke(this,e,cw,uw,ge,{active:0,vPadding:9,hPadding:10,class:1,show:11,hide:12,forceHide:13,throttleRefreshPosition:14,refreshPosition:2})}get show(){return this.$$.ctx[11]}get hide(){return this.$$.ctx[12]}get forceHide(){return this.$$.ctx[13]}get throttleRefreshPosition(){return this.$$.ctx[14]}get refreshPosition(){return this.$$.ctx[2]}}function nf(n){let e,t,i,s,l;return s=new Rt({props:{class:"dropdown dropdown-sm comment-dropdown",$$slots:{default:[dw]},$$scope:{ctx:n}}}),{c(){e=b("button"),t=b("i"),i=I(),$(s.$$.fragment),p(t,"class","iconoir-more-horiz"),p(e,"type","button"),p(e,"class","btn btn-transparent btn-hint btn-xs btn-options"),p(e,"aria-label","Comment options")},m(r,o){k(r,e,o),y(e,t),y(e,i),F(s,e,null),l=!0},p(r,o){const a={};o&257&&(a.$$scope={dirty:o,ctx:r}),s.$set(a)},i(r){l||(E(s.$$.fragment,r),l=!0)},o(r){j(s.$$.fragment,r),l=!1},d(r){r&&v(e),q(s)}}}function dw(n){let e,t,i;return{c(){e=b("div"),e.innerHTML='<i class="iconoir-trash"></i> <span class="txt">Delete</span>',p(e,"class","dropdown-item link-danger")},m(s,l){k(s,e,l),t||(i=H(e,"click",n[6]),t=!0)},p:X,d(s){s&&v(e),t=!1,i()}}}function pw(n){var M;let e,t,i,s,l,r,o,a=G.getCommentAuthor(n[0])+"",u,f,c,d=G.relativeDate(n[0].created)+"",m,h,g,w,_,T=n[0].message+"",L,O,C,S;t=new is({props:{user:(M=n[0].expand)==null?void 0:M.user,class:"avatar"}});let P=!n[1]&&nf(n);const R=n[5].default,A=lt(R,n,n[8],null);return{c(){e=b("div"),$(t.$$.fragment),i=I(),s=b("div"),l=b("div"),r=b("div"),o=b("small"),u=x(a),f=I(),c=b("small"),m=x(d),h=I(),P&&P.c(),g=I(),w=b("div"),_=b("div"),L=x(T),O=I(),A&&A.c(),p(o,"class","name"),p(c,"class","txt-xs txt-hint date"),p(r,"class","inline-flex flex-row-gap-0"),p(l,"class","row"),p(_,"class","message"),p(w,"class","row"),p(s,"class","content"),p(e,"class",C="list-item "+(n[0].replyTo?"reply":"primary")),Z(e,"unread",!1)},m(D,Y){k(D,e,Y),F(t,e,null),y(e,i),y(e,s),y(s,l),y(l,r),y(r,o),y(o,u),y(r,f),y(r,c),y(c,m),y(l,h),P&&P.m(l,null),y(s,g),y(s,w),y(w,_),y(_,L),y(s,O),A&&A.m(s,null),n[7](e),S=!0},p(D,[Y]){var B;const K={};Y&1&&(K.user=(B=D[0].expand)==null?void 0:B.user),t.$set(K),(!S||Y&1)&&a!==(a=G.getCommentAuthor(D[0])+"")&&ve(u,a),(!S||Y&1)&&d!==(d=G.relativeDate(D[0].created)+"")&&ve(m,d),D[1]?P&&(oe(),j(P,1,1,()=>{P=null}),ae()):P?(P.p(D,Y),Y&2&&E(P,1)):(P=nf(D),P.c(),E(P,1),P.m(l,null)),(!S||Y&1)&&T!==(T=D[0].message+"")&&ve(L,T),A&&A.p&&(!S||Y&256)&&ot(A,R,D,D[8],S?rt(R,D[8],Y,null):at(D[8]),null),(!S||Y&1&&C!==(C="list-item "+(D[0].replyTo?"reply":"primary")))&&p(e,"class",C),(!S||Y&1)&&Z(e,"unread",!1)},i(D){S||(E(t.$$.fragment,D),E(P),E(A,D),S=!0)},o(D){j(t.$$.fragment,D),j(P),j(A,D),S=!1},d(D){D&&v(e),q(t),P&&P.d(),A&&A.d(D),n[7](null)}}}function mw(n,e,t){let i,s;Q(n,qn,w=>t(9,i=w)),Q(n,Wt,w=>t(4,s=w));let{$$slots:l={},$$scope:r}=e;const o=it();let{comment:a}=e,{readonly:u=!1}=e,f;async function c(){await Ct(),f==null||f.scrollIntoView({block:"nearest",inline:"nearest"})}function d(){if(!(a!=null&&a.id)||u)return;let w="Do you really want to delete the selected comment?";a.replyTo||(w="Do you really want to delete the selected comment and all of its replies?"),Te(qn,i=!0,i),Pt(w,async()=>m(),()=>{setTimeout(()=>{Te(qn,i=!1,i)},0)})}async function m(){if(!(!(a!=null&&a.id)||u)){Te(qn,i=!0,i);try{await z.collection("comments").delete(a.id),o("delete",a),Pd(a)}catch(w){w.isAbort||z.error(w)}Te(qn,i=!1,i)}}const h=()=>d();function g(w){se[w?"unshift":"push"](()=>{f=w,t(2,f)})}return n.$$set=w=>{"comment"in w&&t(0,a=w.comment),"readonly"in w&&t(1,u=w.readonly),"$$scope"in w&&t(8,r=w.$$scope)},n.$$.update=()=>{n.$$.dirty&21&&f&&(s==null?void 0:s.id)==a.id&&c()},[a,u,f,d,s,l,h,g,r]}class hw extends Se{constructor(e){super(),ke(this,e,mw,pw,ge,{comment:0,readonly:1})}}function sf(n,e,t){const i=n.slice();return i[22]=e[t],i[23]=e,i[24]=t,i}function lf(n){let e,t=Ie(n[3]),i=[];for(let s=0;s<t.length;s+=1)i[s]=rf(sf(n,t,s));return{c(){e=b("div");for(let s=0;s<i.length;s+=1)i[s].c();p(e,"class","dropdown dropdown-sm collaborators-dropdown")},m(s,l){k(s,e,l);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(s,l){if(l&30){t=Ie(s[3]);let r;for(r=0;r<t.length;r+=1){const o=sf(s,t,r);i[r]?i[r].p(o,l):(i[r]=rf(o),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(s){s&&v(e),sn(i,s)}}}function rf(n){let e,t,i=n[22].label+"",s,l,r=n[24],o,a;const u=()=>n[10](e,r),f=()=>n[10](null,r);function c(){return n[11](n[24])}return{c(){e=b("div"),t=x("+"),s=x(i),l=I(),p(e,"class","dropdown-item"),Z(e,"focused",n[24]==n[1])},m(d,m){k(d,e,m),y(e,t),y(e,s),y(e,l),u(),o||(a=H(e,"click",ye(c)),o=!0)},p(d,m){n=d,m&8&&i!==(i=n[22].label+"")&&ve(s,i),r!==n[24]&&(f(),r=n[24],u()),m&2&&Z(e,"focused",n[24]==n[1])},d(d){d&&v(e),f(),o=!1,a()}}}function _w(n){let e,t=n[0]&&lf(n);return{c(){t&&t.c(),e=De()},m(i,s){t&&t.m(i,s),k(i,e,s)},p(i,[s]){i[0]?t?t.p(i,s):(t=lf(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:X,o:X,d(i){i&&v(e),t&&t.d(i)}}}function gw(n,e,t){const i=it();let{input:s}=e,{list:l=[]}=e,{triggers:r=["+","@"]}=e,o=!1,a=0,u=[],f=[];function c(){o||(t(0,o=!0),t(1,a=0),i("show"))}function d(){o&&(t(0,o=!1),i("hide"))}function m(A){A=typeof A<"u"?A:a;let M=_();if(!M.word||!s||!f[A])return;let D=s.value;t(5,s.value=D.substring(0,M.start)+r[0]+f[A].value+D.substring(M.end+1)+" ",s),s.dispatchEvent(new Event("input")),s.focus(),d()}function h(){a<=0?t(1,a=f.length-1):t(1,a--,a),w()}function g(){a>=f.length-1?t(1,a=0):t(1,a++,a),w()}function w(){var A;(A=u[a])==null||A.scrollIntoView({block:"nearest"})}function _(){const A=typeof s.selectionStart<"u"?s.selectionStart:s.value.length;return G.getWordInfoAt(s.value,A-1)}function T(){var M;const A=_();d(),A.word&&r.indexOf((M=A.word)==null?void 0:M[0])>=0&&(t(3,f=L(A.word.substring(1))),f.length&&c())}function L(A){if(A=(A||"").toLowerCase().replace(/\s+/g,""),!A)return l;const M=[];for(let D=l.length-1;D>=0;D--)(l[D].value+l[D].label||"").toLowerCase().replace(/\s+/g,"").indexOf(A)>=0&&M.push(l[D]);return M}function O(A){if(!o)return;let M=A.code;M=="Enter"?(A.preventDefault(),m()):M=="ArrowUp"?(A.preventDefault(),h()):M=="ArrowDown"&&(A.preventDefault(),g())}function C(){s==null||s.removeEventListener("input",T),s==null||s.removeEventListener("keydown",O)}function S(){C(),s.addEventListener("input",T),s.addEventListener("keydown",O)}Gt(()=>{C()});function P(A,M){se[A?"unshift":"push"](()=>{u[M]=A,t(2,u)})}const R=A=>m(A);return n.$$set=A=>{"input"in A&&t(5,s=A.input),"list"in A&&t(6,l=A.list),"triggers"in A&&t(7,r=A.triggers)},n.$$.update=()=>{n.$$.dirty&32&&s&&S()},[o,a,u,f,m,s,l,r,c,d,P,R]}class bw extends Se{constructor(e){super(),ke(this,e,gw,_w,ge,{input:5,list:6,triggers:7,show:8,hide:9})}get show(){return this.$$.ctx[8]}get hide(){return this.$$.ctx[9]}}function of(n,e,t){const i=n.slice();return i[42]=e[t][0],i[43]=e[t][1],i}function af(n,e,t){const i=n.slice();return i[46]=e[t],i}function uf(n){let e,t;return e=new Ee({props:{class:"form-field form-field-toggle form-field-sm resolved-checkbox",$$slots:{default:[ww,({uniqueId:i})=>({41:i}),({uniqueId:i})=>[0,i?1024:0]]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,s){const l={};s[0]&16|s[1]&263168&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function ww(n){let e,t,i,s,l,r,o,a,u;return{c(){var f;e=b("input"),s=I(),l=b("label"),r=x("Mark as resolved"),p(e,"type","checkbox"),p(e,"id",t=n[41]),e.checked=i=(f=n[4])==null?void 0:f.resolved,p(l,"for",o=n[41])},m(f,c){k(f,e,c),k(f,s,c),k(f,l,c),y(l,r),a||(u=H(e,"change",n[24]),a=!0)},p(f,c){var d;c[1]&1024&&t!==(t=f[41])&&p(e,"id",t),c[0]&16&&i!==(i=(d=f[4])==null?void 0:d.resolved)&&(e.checked=i),c[1]&1024&&o!==(o=f[41])&&p(l,"for",o)},d(f){f&&(v(e),v(s),v(l)),a=!1,u()}}}function ff(n){let e,t,i=Ie(n[7]),s=[];for(let r=0;r<i.length;r+=1)s[r]=cf(af(n,i,r));const l=r=>j(s[r],1,1,()=>{s[r]=null});return{c(){e=b("div");for(let r=0;r<s.length;r+=1)s[r].c();p(e,"class","list comments-list")},m(r,o){k(r,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(r,o){if(o[0]&136){i=Ie(r[7]);let a;for(a=0;a<i.length;a+=1){const u=af(r,i,a);s[a]?(s[a].p(u,o),E(s[a],1)):(s[a]=cf(u),s[a].c(),E(s[a],1),s[a].m(e,null))}for(oe(),a=i.length;a<s.length;a+=1)l(a);ae()}},i(r){if(!t){for(let o=0;o<i.length;o+=1)E(s[o]);t=!0}},o(r){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)j(s[o]);t=!1},d(r){r&&v(e),sn(s,r)}}}function cf(n){let e,t;return e=new hw({props:{readonly:!n[3],comment:n[46]}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,s){const l={};s[0]&8&&(l.readonly=!i[3]),s[0]&128&&(l.comment=i[46]),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function df(n){let e,t;return e=new Ee({props:{class:"form-field",name:"guestEmail",inlineError:!0,$$slots:{default:[yw,({uniqueId:i})=>({41:i}),({uniqueId:i})=>[0,i?1024:0]]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,s){const l={};s[0]&18|s[1]&263168&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function yw(n){let e,t,i,s,l,r,o,a,u,f;return{c(){var c;e=b("div"),t=b("label"),i=b("i"),l=I(),r=b("input"),p(i,"class","iconoir-mail"),p(t,"class","addon"),p(t,"for",s=n[41]),p(r,"type","email"),p(r,"id",o=n[41]),p(r,"placeholder","Your email"),r.autofocus=a=!n[1]&&!((c=n[4])!=null&&c.id)?!0:null,p(e,"class","field-group")},m(c,d){var m;k(c,e,d),y(e,t),y(t,i),y(e,l),y(e,r),be(r,n[1]),!n[1]&&!((m=n[4])!=null&&m.id)&&r.focus(),u||(f=H(r,"input",n[25]),u=!0)},p(c,d){var m;d[1]&1024&&s!==(s=c[41])&&p(t,"for",s),d[1]&1024&&o!==(o=c[41])&&p(r,"id",o),d[0]&18&&a!==(a=!c[1]&&!((m=c[4])!=null&&m.id)?!0:null)&&(r.autofocus=a),d[0]&2&&r.value!==c[1]&&be(r,c[1])},d(c){c&&v(e),u=!1,f()}}}function pf(n){let e,t=n[43]+"",i,s,l,r;function o(){return n[29](n[43])}return{c(){e=b("button"),i=x(t),s=I(),p(e,"type","button"),p(e,"title",n[42]),p(e,"class","emoji closable")},m(a,u){k(a,e,u),y(e,i),y(e,s),l||(r=H(e,"click",ye(o)),l=!0)},p(a,u){n=a},d(a){a&&v(e),l=!1,r()}}}function vw(n){let e,t=Ie(Object.entries(n[11])),i=[];for(let s=0;s<t.length;s+=1)i[s]=pf(of(n,t,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=De()},m(s,l){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(s,l);k(s,e,l)},p(s,l){if(l[0]&2049){t=Ie(Object.entries(s[11]));let r;for(r=0;r<t.length;r+=1){const o=of(s,t,r);i[r]?i[r].p(o,l):(i[r]=pf(o),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(s){s&&v(e),sn(i,s)}}}function kw(n){let e,t,i,s,l,r,o,a,u,f,c,d,m,h;return u=new Rt({props:{class:"dropdown emojis-dropdown",$$slots:{default:[vw]},$$scope:{ctx:n}}}),{c(){var g;e=b("textarea"),s=I(),l=b("div"),r=b("button"),o=b("i"),a=I(),$(u.$$.fragment),f=I(),c=b("button"),c.innerHTML='<i class="iconoir-send"></i>',p(e,"id",t=n[41]),e.autofocus=i=!n[9]&&!((g=n[4])!=null&&g.id)?!0:null,p(e,"placeholder","Write a comment (@ to mention)"),p(o,"class","iconoir-emoji"),p(r,"type","button"),p(r,"class","btn btn-transparent btn-hint btn-sm btn-circle"),r.disabled=n[2],p(c,"type","button"),p(c,"class","btn btn-transparent btn-hint btn-sm btn-circle"),Z(c,"btn-loading",n[2]),p(l,"class","ctrls")},m(g,w){var _;k(g,e,w),n[26](e),be(e,n[0]),k(g,s,w),k(g,l,w),y(l,r),y(r,o),y(r,a),F(u,r,null),y(l,f),y(l,c),d=!0,!n[9]&&!((_=n[4])!=null&&_.id)&&e.focus(),m||(h=[H(e,"input",n[27]),H(e,"keydown",n[28]),we(Ce.call(null,r,{position:"right",text:"Emojis"})),we(Ce.call(null,c,{position:"right",text:"Send (Ctrl + Enter)"})),H(c,"click",ye(n[13]))],m=!0)},p(g,w){var T;(!d||w[1]&1024&&t!==(t=g[41]))&&p(e,"id",t),(!d||w[0]&528&&i!==(i=!g[9]&&!((T=g[4])!=null&&T.id)?!0:null))&&(e.autofocus=i),w[0]&1&&be(e,g[0]);const _={};w[0]&1|w[1]&262144&&(_.$$scope={dirty:w,ctx:g}),u.$set(_),(!d||w[0]&4)&&(r.disabled=g[2]),(!d||w[0]&4)&&Z(c,"btn-loading",g[2])},i(g){d||(E(u.$$.fragment,g),d=!0)},o(g){j(u.$$.fragment,g),d=!1},d(g){g&&(v(e),v(s),v(l)),n[26](null),q(u),m=!1,pe(h)}}}function Sw(n){var d;let e,t,i,s,l,r,o,a,u=((d=n[4])==null?void 0:d.id)&&uf(n),f=n[7].length&&ff(n),c=n[9]&&df(n);return l=new Ee({props:{class:"form-field",name:"message",inlineError:!0,$$slots:{default:[kw,({uniqueId:m})=>({41:m}),({uniqueId:m})=>[0,m?1024:0]]},$$scope:{ctx:n}}}),o=new bw({props:{input:n[6],list:n[8]}}),o.$on("hide",n[30]),o.$on("show",n[31]),{c(){u&&u.c(),e=I(),f&&f.c(),t=I(),i=b("div"),c&&c.c(),s=I(),$(l.$$.fragment),r=I(),$(o.$$.fragment),p(i,"class","comment-form")},m(m,h){u&&u.m(m,h),k(m,e,h),f&&f.m(m,h),k(m,t,h),k(m,i,h),c&&c.m(i,null),y(i,s),F(l,i,null),y(i,r),F(o,i,null),a=!0},p(m,h){var _;(_=m[4])!=null&&_.id?u?(u.p(m,h),h[0]&16&&E(u,1)):(u=uf(m),u.c(),E(u,1),u.m(e.parentNode,e)):u&&(oe(),j(u,1,1,()=>{u=null}),ae()),m[7].length?f?(f.p(m,h),h[0]&128&&E(f,1)):(f=ff(m),f.c(),E(f,1),f.m(t.parentNode,t)):f&&(oe(),j(f,1,1,()=>{f=null}),ae()),m[9]?c?(c.p(m,h),h[0]&512&&E(c,1)):(c=df(m),c.c(),E(c,1),c.m(i,s)):c&&(oe(),j(c,1,1,()=>{c=null}),ae());const g={};h[0]&597|h[1]&263168&&(g.$$scope={dirty:h,ctx:m}),l.$set(g);const w={};h[0]&64&&(w.input=m[6]),h[0]&256&&(w.list=m[8]),o.$set(w)},i(m){a||(E(u),E(f),E(c),E(l.$$.fragment,m),E(o.$$.fragment,m),a=!0)},o(m){j(u),j(f),j(c),j(l.$$.fragment,m),j(o.$$.fragment,m),a=!1},d(m){m&&(v(e),v(t),v(i)),u&&u.d(m),f&&f.d(m),c&&c.d(),q(l),q(o)}}}function Tw(n){let e,t;const i=[{class:"comments-popover"},{disableHide:!n[10]},{escHide:n[10]},{vPadding:0},{hPadding:5},n[15]];let s={$$slots:{default:[Sw]},$$scope:{ctx:n}};for(let l=0;l<i.length;l+=1)s=Ue(s,i[l]);return e=new Kd({props:s}),n[32](e),e.$on("hide",n[12]),{c(){$(e.$$.fragment)},m(l,r){F(e,l,r),t=!0},p(l,r){const o=r[0]&33792?bt(i,[i[0],r[0]&1024&&{disableHide:!l[10]},r[0]&1024&&{escHide:l[10]},i[3],i[4],r[0]&32768&&Nt(l[15])]):{};r[0]&1023|r[1]&262144&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){n[32](null),q(e,l)}}}const mf="guestEmail";function Ow(n,e,t){let i,s,l,r,o,a;const u=["viewport"];let f=ft(e,u),c,d,m,h,g,w,_,T;Q(n,ei,me=>t(18,c=me)),Q(n,Mn,me=>t(34,d=me)),Q(n,cn,me=>t(19,m=me)),Q(n,vn,me=>t(35,h=me)),Q(n,Wt,me=>t(20,g=me)),Q(n,Ge,me=>t(21,w=me)),Q(n,qn,me=>t(22,_=me)),Q(n,hr,me=>t(23,T=me));const L=it(),O={"+1":"","-1":"",ok:"",pray:"",smile:"",confused:"",thinking:"",joy:"",hooray:"",watching:"",love:"",poop:""};let{viewport:C=null}=e,S,P,R="",A="",M=[],D=!1,Y=[];async function K(me){if(!me){S==null||S.forceHide();return}await Ct();const W=me.replyTo||me.id,ie=document.querySelector(`[data-comment-pin="${W}"]`);if(!ie){S==null||S.forceHide();return}N(),ie.scrollIntoView({block:"nearest",inline:"nearest"}),U(),S==null||S.show(ie,C),J()}function B(){Rl(),Te(Wt,g=null,g)}function N(me=!1){Jt({}),t(1,A=A||window.localStorage.getItem(mf)||""),me?t(0,R=""):t(0,R=(""+R).trim()),t(2,D=!1)}async function V(){if(!l)return;t(2,D=!0);const me={screen:i==null?void 0:i.screen,left:i==null?void 0:i.left,top:i==null?void 0:i.top,replyTo:i==null?void 0:i.id,message:(""+R).trim()};o?me.user=c.id:c.email?me.guestEmail=c.email:me.guestEmail=A;try{const W=await z.collection("comments").create(me,{expand:"user"});N(!0),await Ct(),Rl(),Si(W,!0),L("create",W)}catch(W){if(W.isAbort)return;me.guestEmail&&G.isEmpty(W.response.data)&&(W.response.data={guestEmail:{code:"invalid_guestEmail",message:"The guest email is invalid or it matches with one of project owners."}}),z.error(W),t(2,D=!1)}}async function ee(me=!0){if(!(D&&!i)){t(2,D=!0);try{const W=await z.collection("comments").update(i.id,{resolved:me},{expand:"user"});t(2,D=!1),await Ct(),me&&(S==null||S.forceHide()),Si(W),L("resolved",W)}catch(W){W.isAbort||(z.error(W),t(2,D=!1))}}}async function J(){if(!o)return;const me=M.map(Me=>Me.id),W=h.filter(Me=>me.includes(Me.comment)),ie=[];for(let Me of W)pr(Me),ie.push(z.collection("notifications").update(Me.id,{read:!0}));return Promise.allSettled(ie)}function U(){var ie,Me,te;t(8,Y=[]);const me=[],W=(((ie=m==null?void 0:m.expand)==null?void 0:ie.users)||[]).slice();for(const he of d)(Me=he.expand)!=null&&Me.user?G.pushOrReplaceObject(W,(te=he.expand)==null?void 0:te.user):he.guestEmail&&G.pushUnique(me,he.guestEmail);for(const he of W){if(he.id==(c==null?void 0:c.id))continue;const ze=he.name||he.email;Y.push({label:he.username+(ze?` (${ze})`:""),value:he.username})}for(const he of me)he==A||he==(c==null?void 0:c.email)||Y.push({label:he,value:he})}const ce=me=>{ee(me.target.checked)};function re(){A=this.value,t(1,A)}function de(me){se[me?"unshift":"push"](()=>{P=me,t(6,P)})}function Le(){R=this.value,t(0,R)}const Je=me=>{me.ctrlKey&&me.code==="Enter"&&(me.preventDefault(),V())},ut=me=>{t(0,R+=me)},st=async()=>{await Ct(),S==null||S.refreshPosition()},dt=async()=>{await Ct(),S==null||S.refreshPosition()};function le(me){se[me?"unshift":"push"](()=>{S=me,t(5,S)})}return n.$$set=me=>{e=Ue(Ue({},e),Kt(me)),t(15,f=ft(e,u)),"viewport"in me&&t(16,C=me.viewport)},n.$$.update=()=>{var me,W;n.$$.dirty[0]&9437184&&t(4,i=T.find(ie=>ie.id&&ie.id==(g==null?void 0:g.replyTo))||g),n.$$.dirty[0]&8388624&&t(17,s=i!=null&&i.id?T.filter(ie=>ie.replyTo===i.id):[]),n.$$.dirty[0]&131088&&t(7,M=i!=null&&i.id?[i].concat(s):[]),n.$$.dirty[0]&5&&(l=!D&&R!=""),n.$$.dirty[0]&4194308&&t(10,r=!D&&!_),n.$$.dirty[0]&3145728&&w&&K(g),n.$$.dirty[0]&786432&&t(3,o=(c==null?void 0:c.id)&&((W=(me=m==null?void 0:m.expand)==null?void 0:me.users)==null?void 0:W.find(ie=>ie.id==c.id))),n.$$.dirty[0]&262152&&t(9,a=!o&&!(c!=null&&c.email)),n.$$.dirty[0]&2&&A&&window.localStorage.setItem(mf,A)},[R,A,D,o,i,S,P,M,Y,a,r,O,B,V,ee,f,C,s,c,m,g,w,_,T,ce,re,de,Le,Je,ut,st,dt,le]}class Gd extends Se{constructor(e){super(),ke(this,e,Ow,Tw,ge,{viewport:16},null,[-1,-1])}}function Cw(n){let e,t,i,s,l,r;return t=new Xt({props:{src:z.files.getURL(n[0],n[0].file,{thumb:"100x100t"}),alt:n[0].title}}),{c(){e=b("div"),$(t.$$.fragment),p(e,"class","thumb thumb-handle")},m(o,a){k(o,e,a),F(t,e,null),s=!0,l||(r=we(i=Ce.call(null,e,n[0].title)),l=!0)},p(o,[a]){const u={};a&1&&(u.src=z.files.getURL(o[0],o[0].file,{thumb:"100x100t"})),a&1&&(u.alt=o[0].title),t.$set(u),i&&tt(i.update)&&a&1&&i.update.call(null,o[0].title)},i(o){s||(E(t.$$.fragment,o),s=!0)},o(o){j(t.$$.fragment,o),s=!1},d(o){o&&v(e),q(t),l=!1,r()}}}function Ew(n,e,t){let{item:i={}}=e;return n.$$set=s=>{"item"in s&&t(0,i=s.item)},[i]}class Lw extends Se{constructor(e){super(),ke(this,e,Ew,Cw,ge,{item:0})}}function Iw(n){let e,t,i,s,l=n[0].title+"",r,o;return t=new Xt({props:{src:z.files.getURL(n[0],n[0].file,{thumb:"100x100t"}),alt:n[0].title}}),{c(){e=b("div"),$(t.$$.fragment),i=I(),s=b("span"),r=x(l),p(e,"class","thumb thumb-xs"),p(s,"class","txt title m-l-5")},m(a,u){k(a,e,u),F(t,e,null),k(a,i,u),k(a,s,u),y(s,r),o=!0},p(a,[u]){const f={};u&1&&(f.src=z.files.getURL(a[0],a[0].file,{thumb:"100x100t"})),u&1&&(f.alt=a[0].title),t.$set(f),(!o||u&1)&&l!==(l=a[0].title+"")&&ve(r,l)},i(a){o||(E(t.$$.fragment,a),o=!0)},o(a){j(t.$$.fragment,a),o=!1},d(a){a&&(v(e),v(i),v(s)),q(t)}}}function jw(n,e,t){let{item:i={}}=e;return n.$$set=s=>{"item"in s&&t(0,i=s.item)},[i]}class Pw extends Se{constructor(e){super(),ke(this,e,jw,Iw,ge,{item:0})}}function Nw(n){let e,t,i,s,l,r,o;const a=[{id:n[6]},{searchable:!0},{class:"screens-select"},{items:n[3]},{noOptionsText:"No screens found"},{selectPlaceholder:"- Select screen -"},{labelComponent:Pw},{optionComponent:Lw},{selectionKey:"id"},n[4]];function u(c){n[5](c)}let f={};for(let c=0;c<a.length;c+=1)f=Ue(f,a[c]);return n[0]!==void 0&&(f.keyOfSelected=n[0]),l=new pn({props:f}),se.push(()=>Ae(l,"keyOfSelected",u)),{c(){e=b("label"),t=x(n[1]),s=I(),$(l.$$.fragment),p(e,"for",i=n[6])},m(c,d){k(c,e,d),y(e,t),k(c,s,d),F(l,c,d),o=!0},p(c,d){(!o||d&2)&&ve(t,c[1]),(!o||d&64&&i!==(i=c[6]))&&p(e,"for",i);const m=d&88?bt(a,[d&64&&{id:c[6]},a[1],a[2],d&8&&{items:c[3]},a[4],a[5],a[6],a[7],a[8],d&16&&Nt(c[4])]):{};!r&&d&1&&(r=!0,m.keyOfSelected=c[0],Ne(()=>r=!1)),l.$set(m)},i(c){o||(E(l.$$.fragment,c),o=!0)},o(c){j(l.$$.fragment,c),o=!1},d(c){c&&(v(e),v(s)),q(l,c)}}}function Aw(n){let e,t;return e=new Ee({props:{class:"form-field required "+n[2],name:"settings.screen",$$slots:{default:[Nw,({uniqueId:i})=>({6:i}),({uniqueId:i})=>i?64:0]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,[s]){const l={};s&4&&(l.class="form-field required "+i[2]),s&219&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function Mw(n,e,t){const i=["value","label","class"];let s=ft(e,i),l;Q(n,pt,f=>t(3,l=f));let{value:r}=e,{label:o="Screen"}=e,{class:a=""}=e;function u(f){r=f,t(0,r),t(3,l)}return n.$$set=f=>{e=Ue(Ue({},e),Kt(f)),t(4,s=ft(e,i)),"value"in f&&t(0,r=f.value),"label"in f&&t(1,o=f.label),"class"in f&&t(2,a=f.class)},n.$$.update=()=>{n.$$.dirty&9&&!r&&l.length&&t(0,r=l[0].id)},[r,o,a,l,s,u]}class Jd extends Se{constructor(e){super(),ke(this,e,Mw,Aw,ge,{value:0,label:1,class:2})}}function Dw(n){let e,t,i,s,l,r,o;function a(f){n[4](f)}let u={class:"duo-columns-dropdown",id:n[5],items:n[3]};return n[0]!==void 0&&(u.keyOfSelected=n[0]),l=new pn({props:u}),se.push(()=>Ae(l,"keyOfSelected",a)),{c(){e=b("label"),t=x(n[1]),s=I(),$(l.$$.fragment),p(e,"for",i=n[5])},m(f,c){k(f,e,c),y(e,t),k(f,s,c),F(l,f,c),o=!0},p(f,c){(!o||c&2)&&ve(t,f[1]),(!o||c&32&&i!==(i=f[5]))&&p(e,"for",i);const d={};c&32&&(d.id=f[5]),!r&&c&1&&(r=!0,d.keyOfSelected=f[0],Ne(()=>r=!1)),l.$set(d)},i(f){o||(E(l.$$.fragment,f),o=!0)},o(f){j(l.$$.fragment,f),o=!1},d(f){f&&(v(e),v(s)),q(l,f)}}}function Rw(n){let e,t;return e=new Ee({props:{class:"form-field "+n[2],name:"settings.transition",$$slots:{default:[Dw,({uniqueId:i})=>({5:i}),({uniqueId:i})=>i?32:0]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,[s]){const l={};s&4&&(l.class="form-field "+i[2]),s&99&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function Hw(n,e,t){const i=[{value:"",label:"None",icon:"iconoir-position-align"},{value:"fade",label:"Fade",icon:"iconoir-center-align"},{value:"slide-left",label:"Slide left",icon:"iconoir-align-left-box"},{value:"slide-right",label:"Slide right",icon:"iconoir-align-right-box"},{value:"slide-top",label:"Slide up",icon:"iconoir-align-top-box"},{value:"slide-bottom",label:"Slide down",icon:"iconoir-align-bottom-box"}];let{value:s=""}=e,{label:l="Transitions"}=e,{class:r=""}=e;function o(a){s=a,t(0,s)}return n.$$set=a=>{"value"in a&&t(0,s=a.value),"label"in a&&t(1,l=a.label),"class"in a&&t(2,r=a.class)},n.$$.update=()=>{n.$$.dirty&1&&(typeof s>"u"||s===null)&&t(0,s="")},[s,l,r,i,o]}class rs extends Se{constructor(e){super(),ke(this,e,Hw,Rw,ge,{value:0,label:1,class:2})}}function Uw(n){let e,t,i,s,l,r,o;function a(f){n[4](f)}let u={class:"duo-columns-dropdown",id:n[5],items:n[3]};return n[0]!==void 0&&(u.keyOfSelected=n[0]),l=new pn({props:u}),se.push(()=>Ae(l,"keyOfSelected",a)),{c(){e=b("label"),t=x(n[1]),s=I(),$(l.$$.fragment),p(e,"for",i=n[5])},m(f,c){k(f,e,c),y(e,t),k(f,s,c),F(l,f,c),o=!0},p(f,c){(!o||c&2)&&ve(t,f[1]),(!o||c&32&&i!==(i=f[5]))&&p(e,"for",i);const d={};c&32&&(d.id=f[5]),!r&&c&1&&(r=!0,d.keyOfSelected=f[0],Ne(()=>r=!1)),l.$set(d)},i(f){o||(E(l.$$.fragment,f),o=!0)},o(f){j(l.$$.fragment,f),o=!1},d(f){f&&(v(e),v(s)),q(l,f)}}}function Fw(n){let e,t;return e=new Ee({props:{class:"form-field required "+n[2],name:"settings.overlayPosition",$$slots:{default:[Uw,({uniqueId:i})=>({5:i}),({uniqueId:i})=>i?32:0]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,[s]){const l={};s&4&&(l.class="form-field required "+i[2]),s&99&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function qw(n,e,t){const i=[{value:"top-left",label:"Top Left",icon:"iconoir-border-tl"},{value:"top-right",label:"Top Right",icon:"iconoir-border-tr"},{value:"bottom-left",label:"Bottom Left",icon:"iconoir-border-bl"},{value:"bottom-right",label:"Bottom Right",icon:"iconoir-border-br"},{value:"top-center",label:"Top Center",icon:"iconoir-border-top"},{value:"bottom-center",label:"Bottom Center",icon:"iconoir-border-bottom"},{value:"centered",label:"Centered",icon:"iconoir-border-inner"}];let{value:s}=e,{label:l="Position"}=e,{class:r=void 0}=e;function o(a){s=a,t(0,s)}return n.$$set=a=>{"value"in a&&t(0,s=a.value),"label"in a&&t(1,l=a.label),"class"in a&&t(2,r=a.class)},n.$$.update=()=>{n.$$.dirty&1&&(s||t(0,s="centered"))},[s,l,r,i,o]}class $w extends Se{constructor(e){super(),ke(this,e,qw,Fw,ge,{value:0,label:1,class:2})}}function hf(n){var ee;let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g,w,_,T,L,O,C,S=n[4].id?"Save":"Create",P,R,A,M,D;i=new Ee({props:{class:"form-field hotspot-type-select",name:"type",$$slots:{default:[Ww,({uniqueId:J})=>({54:J}),({uniqueId:J})=>[0,J?8388608:0]]},$$scope:{ctx:n}}});const Y=[Jw,Gw,Kw,Yw,Zw,Bw,zw,Vw],K=[];function B(J,U){return J[4].type==et.note?0:J[4].type==et.screen?1:J[4].type==et.overlay?2:J[4].type==et.back?3:J[4].type==et.next?4:J[4].type==et.prev?5:J[4].type==et.url?6:J[4].type==et.scroll?7:-1}~(l=B(n))&&(r=K[l]=Y[l](n)),u=new Ee({props:{class:"form-field form-field-toggle",name:"template",$$slots:{default:[sy,({uniqueId:J})=>({54:J}),({uniqueId:J})=>[0,J?8388608:0]]},$$scope:{ctx:n}}});let N=n[4].hotspotTemplate&&_f(n),V=((ee=n[4])==null?void 0:ee.id)&&bf(n);return{c(){e=b("form"),t=b("div"),$(i.$$.fragment),s=I(),r&&r.c(),o=I(),a=b("div"),$(u.$$.fragment),f=I(),N&&N.c(),c=I(),d=b("hr"),m=I(),h=b("footer"),g=b("button"),w=b("span"),w.textContent="Cancel",T=I(),V&&V.c(),L=I(),O=b("button"),C=b("span"),P=x(S),p(a,"class","col-12"),p(t,"class","grid grid-sm"),p(w,"class","txt"),p(g,"type","button"),p(g,"class","btn btn-sm btn-transparent"),g.disabled=_=n[0]||n[1],p(C,"class","txt"),p(O,"type","submit"),p(O,"class","btn btn-sm btn-primary btn-expanded-sm m-l-auto"),O.disabled=R=n[0]||n[1],Z(O,"btn-loading",n[0]),p(h,"class","flex flex-gap-10")},m(J,U){k(J,e,U),y(e,t),F(i,t,null),y(t,s),~l&&K[l].m(t,null),y(t,o),y(t,a),F(u,a,null),y(a,f),N&&N.m(a,null),y(e,c),y(e,d),y(e,m),y(e,h),y(h,g),y(g,w),y(h,T),V&&V.m(h,null),y(h,L),y(h,O),y(O,C),y(C,P),A=!0,M||(D=[H(g,"click",Ye(n[43])),H(e,"submit",ye(n[12]))],M=!0)},p(J,U){var Le;const ce={};U[0]&144|U[1]&25165824&&(ce.$$scope={dirty:U,ctx:J}),i.$set(ce);let re=l;l=B(J),l===re?~l&&K[l].p(J,U):(r&&(oe(),j(K[re],1,1,()=>{K[re]=null}),ae()),~l?(r=K[l],r?r.p(J,U):(r=K[l]=Y[l](J),r.c()),E(r,1),r.m(t,o)):r=null);const de={};U[0]&280|U[1]&25165824&&(de.$$scope={dirty:U,ctx:J}),u.$set(de),J[4].hotspotTemplate?N?(N.p(J,U),U[0]&16&&E(N,1)):(N=_f(J),N.c(),E(N,1),N.m(a,null)):N&&(oe(),j(N,1,1,()=>{N=null}),ae()),(!A||U[0]&3&&_!==(_=J[0]||J[1]))&&(g.disabled=_),(Le=J[4])!=null&&Le.id?V?V.p(J,U):(V=bf(J),V.c(),V.m(h,L)):V&&(V.d(1),V=null),(!A||U[0]&16)&&S!==(S=J[4].id?"Save":"Create")&&ve(P,S),(!A||U[0]&3&&R!==(R=J[0]||J[1]))&&(O.disabled=R),(!A||U[0]&1)&&Z(O,"btn-loading",J[0])},i(J){A||(E(i.$$.fragment,J),E(r),E(u.$$.fragment,J),E(N),A=!0)},o(J){j(i.$$.fragment,J),j(r),j(u.$$.fragment,J),j(N),A=!1},d(J){J&&v(e),q(i),~l&&K[l].d(),q(u),N&&N.d(),V&&V.d(),M=!1,pe(D)}}}function Ww(n){let e,t,i;function s(r){n[20](r)}let l={id:n[54],items:n[7]};return n[4].type!==void 0&&(l.keyOfSelected=n[4].type),e=new pn({props:l}),se.push(()=>Ae(e,"keyOfSelected",s)),{c(){$(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};o[1]&8388608&&(a.id=r[54]),o[0]&128&&(a.items=r[7]),!t&&o[0]&16&&(t=!0,a.keyOfSelected=r[4].type,Ne(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){j(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function Vw(n){let e,t,i,s,l,r;return t=new Ee({props:{class:"form-field required",name:"settings.scrollTop",$$slots:{default:[Xw,({uniqueId:o})=>({54:o}),({uniqueId:o})=>[0,o?8388608:0]]},$$scope:{ctx:n}}}),l=new Ee({props:{class:"form-field required",name:"settings.scrollLeft",$$slots:{default:[Qw,({uniqueId:o})=>({54:o}),({uniqueId:o})=>[0,o?8388608:0]]},$$scope:{ctx:n}}}),{c(){e=b("div"),$(t.$$.fragment),i=I(),s=b("div"),$(l.$$.fragment),p(e,"class","col-6"),p(s,"class","col-6")},m(o,a){k(o,e,a),F(t,e,null),k(o,i,a),k(o,s,a),F(l,s,null),r=!0},p(o,a){const u={};a[0]&16|a[1]&25165824&&(u.$$scope={dirty:a,ctx:o}),t.$set(u);const f={};a[0]&16|a[1]&25165824&&(f.$$scope={dirty:a,ctx:o}),l.$set(f)},i(o){r||(E(t.$$.fragment,o),E(l.$$.fragment,o),r=!0)},o(o){j(t.$$.fragment,o),j(l.$$.fragment,o),r=!1},d(o){o&&(v(e),v(i),v(s)),q(t),q(l)}}}function zw(n){let e,t;return e=new Ee({props:{class:"form-field required",name:"settings.url",$$slots:{default:[xw,({uniqueId:i})=>({54:i}),({uniqueId:i})=>[0,i?8388608:0]]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,s){const l={};s[0]&16|s[1]&25165824&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function Bw(n){let e,t,i;function s(r){n[35](r)}let l={};return n[4].settings.transition!==void 0&&(l.value=n[4].settings.transition),e=new rs({props:l}),se.push(()=>Ae(e,"value",s)),{c(){$(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};!t&&o[0]&16&&(t=!0,a.value=r[4].settings.transition,Ne(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){j(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function Zw(n){let e,t,i;function s(r){n[34](r)}let l={};return n[4].settings.transition!==void 0&&(l.value=n[4].settings.transition),e=new rs({props:l}),se.push(()=>Ae(e,"value",s)),{c(){$(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};!t&&o[0]&16&&(t=!0,a.value=r[4].settings.transition,Ne(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){j(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function Yw(n){let e,t,i;function s(r){n[33](r)}let l={};return n[4].settings.transition!==void 0&&(l.value=n[4].settings.transition),e=new rs({props:l}),se.push(()=>Ae(e,"value",s)),{c(){$(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};!t&&o[0]&16&&(t=!0,a.value=r[4].settings.transition,Ne(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){j(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function Kw(n){let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g;function w(S){n[24](S)}let _={};n[4].settings.screen!==void 0&&(_.value=n[4].settings.screen),e=new Jd({props:_}),se.push(()=>Ae(e,"value",w));function T(S){n[25](S)}let L={};n[4].settings.overlayPosition!==void 0&&(L.value=n[4].settings.overlayPosition),s=new $w({props:L}),se.push(()=>Ae(s,"value",T)),o=new Ee({props:{class:"form-field",$$slots:{default:[ey,({uniqueId:S})=>({54:S}),({uniqueId:S})=>[0,S?8388608:0]]},$$scope:{ctx:n}}});function O(S){n[30](S)}let C={};return n[4].settings.transition!==void 0&&(C.value=n[4].settings.transition),u=new rs({props:C}),se.push(()=>Ae(u,"value",O)),d=new Ee({props:{class:"form-field form-field-toggle",name:"settings.fixOverlay",$$slots:{default:[ty,({uniqueId:S})=>({54:S}),({uniqueId:S})=>[0,S?8388608:0]]},$$scope:{ctx:n}}}),h=new Ee({props:{class:"form-field form-field-toggle",name:"settings.outsideClose",$$slots:{default:[ny,({uniqueId:S})=>({54:S}),({uniqueId:S})=>[0,S?8388608:0]]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment),i=I(),$(s.$$.fragment),r=I(),$(o.$$.fragment),a=I(),$(u.$$.fragment),c=I(),$(d.$$.fragment),m=I(),$(h.$$.fragment)},m(S,P){F(e,S,P),k(S,i,P),F(s,S,P),k(S,r,P),F(o,S,P),k(S,a,P),F(u,S,P),k(S,c,P),F(d,S,P),k(S,m,P),F(h,S,P),g=!0},p(S,P){const R={};!t&&P[0]&16&&(t=!0,R.value=S[4].settings.screen,Ne(()=>t=!1)),e.$set(R);const A={};!l&&P[0]&16&&(l=!0,A.value=S[4].settings.overlayPosition,Ne(()=>l=!1)),s.$set(A);const M={};P[0]&16|P[1]&25165824&&(M.$$scope={dirty:P,ctx:S}),o.$set(M);const D={};!f&&P[0]&16&&(f=!0,D.value=S[4].settings.transition,Ne(()=>f=!1)),u.$set(D);const Y={};P[0]&16|P[1]&25165824&&(Y.$$scope={dirty:P,ctx:S}),d.$set(Y);const K={};P[0]&16|P[1]&25165824&&(K.$$scope={dirty:P,ctx:S}),h.$set(K)},i(S){g||(E(e.$$.fragment,S),E(s.$$.fragment,S),E(o.$$.fragment,S),E(u.$$.fragment,S),E(d.$$.fragment,S),E(h.$$.fragment,S),g=!0)},o(S){j(e.$$.fragment,S),j(s.$$.fragment,S),j(o.$$.fragment,S),j(u.$$.fragment,S),j(d.$$.fragment,S),j(h.$$.fragment,S),g=!1},d(S){S&&(v(i),v(r),v(a),v(c),v(m)),q(e,S),q(s,S),q(o,S),q(u,S),q(d,S),q(h,S)}}}function Gw(n){let e,t,i,s,l,r;function o(c){n[22](c)}let a={};n[4].settings.screen!==void 0&&(a.value=n[4].settings.screen),e=new Jd({props:a}),se.push(()=>Ae(e,"value",o));function u(c){n[23](c)}let f={};return n[4].settings.transition!==void 0&&(f.value=n[4].settings.transition),s=new rs({props:f}),se.push(()=>Ae(s,"value",u)),{c(){$(e.$$.fragment),i=I(),$(s.$$.fragment)},m(c,d){F(e,c,d),k(c,i,d),F(s,c,d),r=!0},p(c,d){const m={};!t&&d[0]&16&&(t=!0,m.value=c[4].settings.screen,Ne(()=>t=!1)),e.$set(m);const h={};!l&&d[0]&16&&(l=!0,h.value=c[4].settings.transition,Ne(()=>l=!1)),s.$set(h)},i(c){r||(E(e.$$.fragment,c),E(s.$$.fragment,c),r=!0)},o(c){j(e.$$.fragment,c),j(s.$$.fragment,c),r=!1},d(c){c&&v(i),q(e,c),q(s,c)}}}function Jw(n){let e,t;return e=new Ee({props:{class:"form-field required",name:"settings.note",$$slots:{default:[iy,({uniqueId:i})=>({54:i}),({uniqueId:i})=>[0,i?8388608:0]]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,s){const l={};s[0]&16|s[1]&25165824&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function Xw(n){let e,t,i,s,l,r,o,a,u,f,c,d,m;return{c(){e=b("label"),t=x("Vertical position"),s=I(),l=b("div"),r=b("input"),a=I(),u=b("label"),f=x("px"),p(e,"for",i=n[54]),p(r,"type","number"),p(r,"id",o=n[54]),p(r,"min","0"),r.required=!0,p(u,"for",c=n[54]),p(u,"class","addon"),p(l,"class","field-group")},m(h,g){k(h,e,g),y(e,t),k(h,s,g),k(h,l,g),y(l,r),be(r,n[4].settings.scrollTop),y(l,a),y(l,u),y(u,f),d||(m=H(r,"input",n[37]),d=!0)},p(h,g){g[1]&8388608&&i!==(i=h[54])&&p(e,"for",i),g[1]&8388608&&o!==(o=h[54])&&p(r,"id",o),g[0]&16&&kt(r.value)!==h[4].settings.scrollTop&&be(r,h[4].settings.scrollTop),g[1]&8388608&&c!==(c=h[54])&&p(u,"for",c)},d(h){h&&(v(e),v(s),v(l)),d=!1,m()}}}function Qw(n){let e,t,i,s,l,r,o,a,u,f,c,d,m;return{c(){e=b("label"),t=x("Horizontal position"),s=I(),l=b("div"),r=b("input"),a=I(),u=b("label"),f=x("px"),p(e,"for",i=n[54]),p(r,"type","number"),p(r,"id",o=n[54]),p(r,"min","0"),r.required=!0,p(u,"for",c=n[54]),p(u,"class","addon"),p(l,"class","field-group")},m(h,g){k(h,e,g),y(e,t),k(h,s,g),k(h,l,g),y(l,r),be(r,n[4].settings.scrollLeft),y(l,a),y(l,u),y(u,f),d||(m=H(r,"input",n[38]),d=!0)},p(h,g){g[1]&8388608&&i!==(i=h[54])&&p(e,"for",i),g[1]&8388608&&o!==(o=h[54])&&p(r,"id",o),g[0]&16&&kt(r.value)!==h[4].settings.scrollLeft&&be(r,h[4].settings.scrollLeft),g[1]&8388608&&c!==(c=h[54])&&p(u,"for",c)},d(h){h&&(v(e),v(s),v(l)),d=!1,m()}}}function xw(n){let e,t,i,s,l,r,o,a,u;return{c(){e=b("label"),t=x("URL"),s=I(),l=b("div"),r=b("input"),p(e,"for",i=n[54]),p(r,"type","text"),p(r,"id",o=n[54]),r.required=!0,p(r,"placeholder","eg. https://google.com"),p(l,"class","field-group")},m(f,c){k(f,e,c),y(e,t),k(f,s,c),k(f,l,c),y(l,r),be(r,n[4].settings.url),a||(u=H(r,"input",n[36]),a=!0)},p(f,c){c[1]&8388608&&i!==(i=f[54])&&p(e,"for",i),c[1]&8388608&&o!==(o=f[54])&&p(r,"id",o),c[0]&16&&r.value!==f[4].settings.url&&be(r,f[4].settings.url)},d(f){f&&(v(e),v(s),v(l)),a=!1,u()}}}function ey(n){let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g,w,_,T,L,O,C,S,P,R,A,M,D,Y,K,B,N,V,ee,J,U;return{c(){e=b("label"),t=x("Offset "),i=b("span"),i.textContent="(px)",l=I(),r=b("div"),o=b("label"),a=x("T"),f=I(),c=b("input"),m=I(),h=b("label"),g=x("B"),_=I(),T=b("input"),O=I(),C=b("label"),S=x("L"),R=I(),A=b("input"),D=I(),Y=b("label"),K=x("R"),N=I(),V=b("input"),p(i,"class","txt-hint"),p(e,"for",s=n[54]),p(o,"for",u=n[54]+"_t"),p(o,"class","addon"),p(o,"title","Top offset"),p(c,"type","number"),p(c,"id",d=n[54]+"_t"),p(h,"for",w=n[54]+"_b"),p(h,"class","addon"),p(h,"title","Bottom offset"),p(T,"type","number"),p(T,"id",L=n[54]+"_b"),p(C,"for",P=n[54]+"_l"),p(C,"class","addon"),p(C,"title","Left offset"),p(A,"type","number"),p(A,"id",M=n[54]+"_l"),p(Y,"for",B=n[54]+"_r"),p(Y,"class","addon"),p(Y,"title","Right offset"),p(V,"type","number"),p(V,"id",ee=n[54]+"_r"),p(r,"class","field-group")},m(ce,re){k(ce,e,re),y(e,t),y(e,i),k(ce,l,re),k(ce,r,re),y(r,o),y(o,a),y(r,f),y(r,c),be(c,n[4].settings.offsetTop),y(r,m),y(r,h),y(h,g),y(r,_),y(r,T),be(T,n[4].settings.offsetBottom),y(r,O),y(r,C),y(C,S),y(r,R),y(r,A),be(A,n[4].settings.offsetLeft),y(r,D),y(r,Y),y(Y,K),y(r,N),y(r,V),be(V,n[4].settings.offsetRight),J||(U=[H(c,"input",n[26]),H(T,"input",n[27]),H(A,"input",n[28]),H(V,"input",n[29])],J=!0)},p(ce,re){re[1]&8388608&&s!==(s=ce[54])&&p(e,"for",s),re[1]&8388608&&u!==(u=ce[54]+"_t")&&p(o,"for",u),re[1]&8388608&&d!==(d=ce[54]+"_t")&&p(c,"id",d),re[0]&16&&kt(c.value)!==ce[4].settings.offsetTop&&be(c,ce[4].settings.offsetTop),re[1]&8388608&&w!==(w=ce[54]+"_b")&&p(h,"for",w),re[1]&8388608&&L!==(L=ce[54]+"_b")&&p(T,"id",L),re[0]&16&&kt(T.value)!==ce[4].settings.offsetBottom&&be(T,ce[4].settings.offsetBottom),re[1]&8388608&&P!==(P=ce[54]+"_l")&&p(C,"for",P),re[1]&8388608&&M!==(M=ce[54]+"_l")&&p(A,"id",M),re[0]&16&&kt(A.value)!==ce[4].settings.offsetLeft&&be(A,ce[4].settings.offsetLeft),re[1]&8388608&&B!==(B=ce[54]+"_r")&&p(Y,"for",B),re[1]&8388608&&ee!==(ee=ce[54]+"_r")&&p(V,"id",ee),re[0]&16&&kt(V.value)!==ce[4].settings.offsetRight&&be(V,ce[4].settings.offsetRight)},d(ce){ce&&(v(e),v(l),v(r)),J=!1,pe(U)}}}function ty(n){let e,t,i,s,l,r,o,a;return{c(){e=b("input"),i=I(),s=b("label"),l=x("Fix position of overlay"),p(e,"type","checkbox"),p(e,"id",t=n[54]),p(s,"for",r=n[54])},m(u,f){k(u,e,f),e.checked=n[4].settings.fixOverlay,k(u,i,f),k(u,s,f),y(s,l),o||(a=H(e,"change",n[31]),o=!0)},p(u,f){f[1]&8388608&&t!==(t=u[54])&&p(e,"id",t),f[0]&16&&(e.checked=u[4].settings.fixOverlay),f[1]&8388608&&r!==(r=u[54])&&p(s,"for",r)},d(u){u&&(v(e),v(i),v(s)),o=!1,a()}}}function ny(n){let e,t,i,s,l,r,o,a;return{c(){e=b("input"),i=I(),s=b("label"),l=x("Close on outside click"),p(e,"type","checkbox"),p(e,"id",t=n[54]),p(s,"for",r=n[54])},m(u,f){k(u,e,f),e.checked=n[4].settings.outsideClose,k(u,i,f),k(u,s,f),y(s,l),o||(a=H(e,"change",n[32]),o=!0)},p(u,f){f[1]&8388608&&t!==(t=u[54])&&p(e,"id",t),f[0]&16&&(e.checked=u[4].settings.outsideClose),f[1]&8388608&&r!==(r=u[54])&&p(s,"for",r)},d(u){u&&(v(e),v(i),v(s)),o=!1,a()}}}function iy(n){let e,t,i,s,l,r;return{c(){e=b("textarea"),i=I(),s=b("div"),s.textContent="The note will be visible in Preview mode on hover.",p(e,"id",t=n[54]),e.required=!0,p(s,"class","help-block")},m(o,a){k(o,e,a),be(e,n[4].settings.note),k(o,i,a),k(o,s,a),l||(r=H(e,"input",n[21]),l=!0)},p(o,a){a[1]&8388608&&t!==(t=o[54])&&p(e,"id",t),a[0]&16&&be(e,o[4].settings.note)},d(o){o&&(v(e),v(i),v(s)),l=!1,r()}}}function sy(n){let e,t,i,s,l,r,o,a,u,f,c;return{c(){e=b("input"),s=I(),l=b("label"),r=b("span"),r.textContent="Include in template",o=I(),a=b("i"),p(e,"type","checkbox"),p(e,"id",t=n[54]),e.checked=i=!!n[4].hotspotTemplate,p(r,"class","txt"),p(a,"class","iconoir-info-circle link-hint"),p(l,"for",u=n[54])},m(d,m){k(d,e,m),k(d,s,m),k(d,l,m),y(l,r),y(l,o),y(l,a),f||(c=[H(e,"change",n[39]),we(Ce.call(null,a,"Reuse the hotspot in other screens"))],f=!0)},p(d,m){m[1]&8388608&&t!==(t=d[54])&&p(e,"id",t),m[0]&16&&i!==(i=!!d[4].hotspotTemplate)&&(e.checked=i),m[1]&8388608&&u!==(u=d[54])&&p(l,"for",u)},d(d){d&&(v(e),v(s),v(l)),f=!1,pe(c)}}}function _f(n){let e,t,i,s,l,r;i=new Ee({props:{class:"form-field form-field-sm",$$slots:{default:[ly,({uniqueId:a})=>({54:a}),({uniqueId:a})=>[0,a?8388608:0]]},$$scope:{ctx:n}}});let o=n[4].hotspotTemplate==Ms&&gf(n);return{c(){e=b("div"),t=b("div"),$(i.$$.fragment),s=I(),o&&o.c(),p(t,"class","template-form svelte-1gupuaj"),p(e,"class","block p-t-xs")},m(a,u){k(a,e,u),y(e,t),F(i,t,null),y(t,s),o&&o.m(t,null),r=!0},p(a,u){const f={};u[0]&272|u[1]&25165824&&(f.$$scope={dirty:u,ctx:a}),i.$set(f),a[4].hotspotTemplate==Ms?o?(o.p(a,u),u[0]&16&&E(o,1)):(o=gf(a),o.c(),E(o,1),o.m(t,null)):o&&(oe(),j(o,1,1,()=>{o=null}),ae())},i(a){r||(E(i.$$.fragment,a),E(o),a&&St(()=>{r&&(l||(l=ct(e,Lt,{duration:150},!0)),l.run(1))}),r=!0)},o(a){j(i.$$.fragment,a),j(o),a&&(l||(l=ct(e,Lt,{duration:150},!1)),l.run(0)),r=!1},d(a){a&&v(e),q(i),o&&o.d(),a&&l&&l.end()}}}function ly(n){let e,t,i;function s(r){n[40](r)}let l={id:n[54],items:n[8],upside:!0};return n[4].hotspotTemplate!==void 0&&(l.keyOfSelected=n[4].hotspotTemplate),e=new pn({props:l}),se.push(()=>Ae(e,"keyOfSelected",s)),{c(){$(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,o){const a={};o[1]&8388608&&(a.id=r[54]),o[0]&256&&(a.items=r[8]),!t&&o[0]&16&&(t=!0,a.keyOfSelected=r[4].hotspotTemplate,Ne(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){j(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function gf(n){let e,t,i,s;return t=new Ee({props:{class:"form-field form-field-sm m-t-10",name:"title",$$slots:{default:[ry,({uniqueId:l})=>({54:l}),({uniqueId:l})=>[0,l?8388608:0]]},$$scope:{ctx:n}}}),{c(){e=b("div"),$(t.$$.fragment)},m(l,r){k(l,e,r),F(t,e,null),s=!0},p(l,r){const o={};r[0]&68|r[1]&25165824&&(o.$$scope={dirty:r,ctx:l}),t.$set(o)},i(l){s||(E(t.$$.fragment,l),l&&St(()=>{s&&(i||(i=ct(e,Lt,{duration:150},!0)),i.run(1))}),s=!0)},o(l){j(t.$$.fragment,l),l&&(i||(i=ct(e,Lt,{duration:150},!1)),i.run(0)),s=!1},d(l){l&&v(e),q(t),l&&i&&i.end()}}}function ry(n){let e,t,i,s;return{c(){e=b("input"),p(e,"type","text"),p(e,"id",t=n[54]),p(e,"placeholder","Template name *")},m(l,r){k(l,e,r),n[41](e),be(e,n[6]),i||(s=H(e,"input",n[42]),i=!0)},p(l,r){r[1]&8388608&&t!==(t=l[54])&&p(e,"id",t),r[0]&64&&e.value!==l[6]&&be(e,l[6])},d(l){l&&v(e),n[41](null),i=!1,s()}}}function bf(n){let e,t,i,s,l;return{c(){e=b("button"),t=b("i"),p(t,"class","iconoir-trash txt-sm"),p(e,"type","button"),p(e,"class","btn btn-sm btn-circle btn-transparent btn-danger fade"),e.disabled=i=n[0]||n[1]},m(r,o){k(r,e,o),y(e,t),s||(l=[we(Ce.call(null,e,"Delete hotspot")),H(e,"click",Ye(n[13]))],s=!0)},p(r,o){o[0]&3&&i!==(i=r[0]||r[1])&&(e.disabled=i)},d(r){r&&v(e),s=!1,pe(l)}}}function oy(n){let e,t,i=n[4]&&hf(n);return{c(){i&&i.c(),e=De()},m(s,l){i&&i.m(s,l),k(s,e,l),t=!0},p(s,l){s[4]?i?(i.p(s,l),l[0]&16&&E(i,1)):(i=hf(s),i.c(),E(i,1),i.m(e.parentNode,e)):i&&(oe(),j(i,1,1,()=>{i=null}),ae())},i(s){t||(E(i),t=!0)},o(s){j(i),t=!1},d(s){s&&v(e),i&&i.d(s)}}}function ay(n){let e,t;const i=[{class:"hotspots-popover "+(n[10]?"resizing":"")},{disableHide:!n[9]},{vPadding:0},{hPadding:5},{closableToggle:!1},n[14]];let s={$$slots:{default:[oy]},$$scope:{ctx:n}};for(let l=0;l<i.length;l+=1)s=Ue(s,i[l]);return e=new Kd({props:s}),n[44](e),e.$on("hide",n[11]),{c(){$(e.$$.fragment)},m(l,r){F(e,l,r),t=!0},p(l,r){const o=r[0]&17920?bt(i,[r[0]&1024&&{class:"hotspots-popover "+(l[10]?"resizing":"")},r[0]&512&&{disableHide:!l[9]},i[2],i[3],i[4],r[0]&16384&&Nt(l[14])]):{};r[0]&511|r[1]&16777216&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){n[44](null),q(e,l)}}}const Ms="@newTemplate";function uy(n,e,t){let i,s;const l=["viewport"];let r=ft(e,l),o,a,u,f,c,d;Q(n,Ve,ue=>t(4,o=ue)),Q(n,Ge,ue=>t(17,a=ue)),Q(n,Et,ue=>t(45,u=ue)),Q(n,dn,ue=>t(18,f=ue)),Q(n,_n,ue=>t(10,c=ue)),Q(n,Gn,ue=>t(19,d=ue));const m=it(),h=[{value:et.note,label:"Link to: Note"},{value:et.screen,label:"Link to: Screen"},{value:et.overlay,label:"Link to: Screen as overlay"},{value:et.back,label:"Link to: Back (last visited screen)"},{value:et.prev,label:"Link to: Prev screen in series"},{value:et.next,label:"Link to: Next screen in series"},{value:et.scroll,label:"Link to: Position (scroll to)"}],g=h.concat({value:et.url,label:"Link to: URL"});let{viewport:w=null}=e,_,T=!1,L=!1,O="",C,S=null,P=h,R="";async function A(){if(!o||c){_==null||_.forceHide();return}const ue=document.querySelector(`[data-hotspot="${o.id}"]`);if(!ue){_==null||_.forceHide();return}ue.scrollIntoView({block:"nearest",inline:"nearest"}),M(),await Ct(),_==null||_.show(ue,w)}function M(){Jt({}),t(6,O=""),t(0,T=!1),t(1,L=!1),t(16,R=""),o&&(!o.screen&&(a!=null&&a.id)&&Te(Ve,o.screen=a.id,o),Te(Ve,o.settings=o.settings||{},o),t(3,S=D()),Y())}function D(){if(!o)return null;const ue=Object.assign({},o);return ue.settings=structuredClone(o.settings||{}),ue}function Y(){if(!o)return null;t(16,R=o.type),!o.id&&o.type==et.overlay&&(Te(Ve,o.settings=o.settings||{},o),Te(Ve,o.settings.fixOverlay=!0,o),Te(Ve,o.settings.outsideClose=!0,o))}function K(){o!=null&&o.id&&S&&jn(S),t(3,S=null),Te(Ve,o=null,o),Hl()}async function B(){var ue;if(!(T||!o)){t(0,T=!0);try{const Be=D();if(Be.hotspotTemplate){Be.screen=null;let xe=f.find(yt=>yt.id==Be.hotspotTemplate);xe?(ue=xe.screens)!=null&&ue.includes(a.id)||(xe=await z.collection("hotspotTemplates").update(xe.id,{"screens+":a.id})):(xe=await z.collection("hotspotTemplates").create({title:O,prototype:u.id,screens:[a.id]}),Be.hotspotTemplate=xe.id),zi(xe)}else Be.screen=a.id;let nt;o!=null&&o.id?nt=await z.collection("hotspots").update(o.id,Be):nt=await z.collection("hotspots").create(Be),t(3,S=nt),jn(nt),Hl(),_==null||_.forceHide(),m("save",nt),t(0,T=!1)}catch(Be){Be.isAbort||(z.error(Be),t(0,T=!1))}}}function N(){if(L||!(o!=null&&o.id))return;let ue="Do you really want to delete the selected hotspot?";t(1,L=!0),Pt(ue,V,()=>{setTimeout(()=>{t(1,L=!1)},0)})}async function V(){if(o!=null&&o.id){t(1,L=!0);try{await z.collection("hotspots").delete(o.id),m("delete",S),Te(Ve,o=null,o),t(1,L=!1)}catch(ue){ue.isAbort||(z.error(ue),t(1,L=!1))}}}function ee(ue){n.$$.not_equal(o.type,ue)&&(o.type=ue,Ve.set(o))}function J(){o.settings.note=this.value,Ve.set(o)}function U(ue){n.$$.not_equal(o.settings.screen,ue)&&(o.settings.screen=ue,Ve.set(o))}function ce(ue){n.$$.not_equal(o.settings.transition,ue)&&(o.settings.transition=ue,Ve.set(o))}function re(ue){n.$$.not_equal(o.settings.screen,ue)&&(o.settings.screen=ue,Ve.set(o))}function de(ue){n.$$.not_equal(o.settings.overlayPosition,ue)&&(o.settings.overlayPosition=ue,Ve.set(o))}function Le(){o.settings.offsetTop=kt(this.value),Ve.set(o)}function Je(){o.settings.offsetBottom=kt(this.value),Ve.set(o)}function ut(){o.settings.offsetLeft=kt(this.value),Ve.set(o)}function st(){o.settings.offsetRight=kt(this.value),Ve.set(o)}function dt(ue){n.$$.not_equal(o.settings.transition,ue)&&(o.settings.transition=ue,Ve.set(o))}function le(){o.settings.fixOverlay=this.checked,Ve.set(o)}function me(){o.settings.outsideClose=this.checked,Ve.set(o)}function W(ue){n.$$.not_equal(o.settings.transition,ue)&&(o.settings.transition=ue,Ve.set(o))}function ie(ue){n.$$.not_equal(o.settings.transition,ue)&&(o.settings.transition=ue,Ve.set(o))}function Me(ue){n.$$.not_equal(o.settings.transition,ue)&&(o.settings.transition=ue,Ve.set(o))}function te(){o.settings.url=this.value,Ve.set(o)}function he(){o.settings.scrollTop=kt(this.value),Ve.set(o)}function ze(){o.settings.scrollLeft=kt(this.value),Ve.set(o)}const wt=ue=>{var Be;ue.target.checked?o.hotspotTemplate||Te(Ve,o.hotspotTemplate=(S==null?void 0:S.hotspotTemplate)||((Be=s==null?void 0:s[0])==null?void 0:Be.value),o):Te(Ve,o.hotspotTemplate="",o)};function mt(ue){n.$$.not_equal(o.hotspotTemplate,ue)&&(o.hotspotTemplate=ue,Ve.set(o))}function ne(ue){se[ue?"unshift":"push"](()=>{C=ue,t(2,C)})}function $e(){O=this.value,t(6,O)}const fe=()=>{_==null||_.hide()};function Pe(ue){se[ue?"unshift":"push"](()=>{_=ue,t(5,_)})}return n.$$set=ue=>{e=Ue(Ue({},e),Kt(ue)),t(14,r=ft(e,l)),"viewport"in ue&&t(15,w=ue.viewport)},n.$$.update=()=>{n.$$.dirty[0]&524288&&(d!=null&&d.allowHotspotsURL?t(7,P=g):t(7,P=h)),n.$$.dirty[0]&131096&&a&&(S==null?void 0:S.id)!=(o==null?void 0:o.id)&&A(),n.$$.dirty[0]&3&&t(9,i=!T&&!L),n.$$.dirty[0]&262144&&t(8,s=f.map(ue=>({value:ue.id,label:ue.title})).concat([{value:Ms,label:"+ New template"}])),n.$$.dirty[0]&20&&(o==null?void 0:o.hotspotTemplate)===Ms&&setTimeout(()=>{C==null||C.focus()},50),n.$$.dirty[0]&65552&&o&&R!=o.type&&Y()},[T,L,C,S,o,_,O,P,s,i,c,K,B,N,r,w,R,a,f,d,ee,J,U,ce,re,de,Le,Je,ut,st,dt,le,me,W,ie,Me,te,he,ze,wt,mt,ne,$e,fe,Pe]}class fy extends Se{constructor(e){super(),ke(this,e,uy,ay,ge,{viewport:15},null,[-1,-1])}}function cy(n){var gr,br;let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g,w=((gr=n[1])==null?void 0:gr.title)+"",_,T,L,O=Ps(n[1])+"",C,S,P=n[0].length+"",R,A,M,D,Y,K,B,N,V,ee,J,U,ce,re,de,Le,Je,ut,st,dt,le,me,W,ie,Me,te,he,ze,wt,mt,ne,$e,fe;o=new Bd({});let Pe=n[12]===Oe.comments&&wf(n);function ue(je,Xe){if(je[17].length)return my;if(je[18].length)return py}let Be=ue(n),nt=Be&&Be(n),xe=n[12]==Oe.hotspots&&!n[14]&&yf(),yt=n[12]==Oe.comments&&!n[16]&&vf(n),Ot=n[12]==Oe.preview&&kf(),Ht=((br=n[3])==null?void 0:br.scale)!=0&&Sf(n);return ze=new V2({}),mt=new zd({props:{active:n[5]}}),{c(){var je;e=b("div"),t=b("div"),i=b("div"),i.innerHTML='<i class="iconoir-nav-arrow-left"></i>',s=I(),l=b("div"),l.innerHTML='<i class="iconoir-nav-arrow-right"></i>',r=I(),$(o.$$.fragment),a=I(),Pe&&Pe.c(),u=I(),f=b("nav"),c=b("div"),d=b("button"),d.innerHTML='<i class="iconoir-xmark"></i>',m=I(),h=b("button"),g=b("span"),_=x(w),L=x(`
                    (`),C=x(O),S=x(" of "),R=x(P),A=x(`)
                    `),M=b("i"),K=I(),B=b("div"),N=b("button"),V=b("i"),J=I(),U=b("button"),ce=b("i"),de=I(),Le=b("button"),Je=b("i"),ut=I(),nt&&nt.c(),dt=I(),le=b("button"),le.innerHTML='<i class="iconoir-more-vert"></i>',me=I(),W=b("div"),xe&&xe.c(),ie=I(),yt&&yt.c(),Me=I(),Ot&&Ot.c(),te=I(),Ht&&Ht.c(),he=I(),$(ze.$$.fragment),wt=I(),$(mt.$$.fragment),p(i,"class","screen-preview-nav-ctrl left"),Z(i,"disabled",n[10]),p(l,"class","screen-preview-nav-ctrl right"),Z(l,"disabled",n[9]),p(t,"class","screen-preview-nav-wrapper"),p(e,"class","screen-preview-container entrance-fade"),p(d,"type","button"),p(d,"class","btn btn-circle btn-transparent btn-hint txt-hint"),p(g,"class","screen-title-trim"),p(g,"title",T=(je=n[1])==null?void 0:je.title),p(M,"class",D="iconoir-nav-arrow-"+(n[5]?"up":"down")),p(h,"type","button"),p(h,"class",Y="btn btn-sm btn-hint txt-hint "+(n[5]?"btn-semitransparent":"btn-transparent")),p(c,"class","controls-group group-left"),p(V,"class","iconoir-play"),p(N,"class",ee="btn btn-circle "+(n[12]==Oe.preview?"btn-primary btn-transparent":"btn-hint btn-transparent txt-hint")),p(ce,"class","iconoir-square-3d-corner-to-corner"),p(U,"class",re="btn btn-circle "+(n[12]==Oe.hotspots?"btn-success btn-transparent":"btn-hint btn-transparent txt-hint")),Z(U,"btn-loading",n[14]||n[15]),p(Je,"class","iconoir-message-text"),p(Le,"class",st="btn btn-circle "+(n[12]==Oe.comments?"btn-danger btn-transparent":"btn-hint btn-transparent txt-hint")),Z(Le,"btn-loading",n[16]),p(le,"type","button"),p(le,"class","btn btn-circle btn-hint txt-hint btn-transparent responsive-show"),Z(le,"active",n[6]),p(B,"class","controls-group group-center"),p(W,"class","controls-group group-right responsive-hide"),p(f,"class","controls-bar"),Z(f,"show-responsive-controls",n[6])},m(je,Xe){k(je,e,Xe),y(e,t),y(t,i),y(t,s),y(t,l),y(t,r),F(o,t,null),n[32](t),y(e,a),Pe&&Pe.m(e,null),k(je,u,Xe),k(je,f,Xe),y(f,c),y(c,d),y(c,m),y(c,h),y(h,g),y(g,_),y(h,L),y(h,C),y(h,S),y(h,R),y(h,A),y(h,M),y(f,K),y(f,B),y(B,N),y(N,V),y(B,J),y(B,U),y(U,ce),y(B,de),y(B,Le),y(Le,Je),y(Le,ut),nt&&nt.m(Le,null),y(B,dt),y(B,le),y(f,me),y(f,W),xe&&xe.m(W,null),y(W,ie),yt&&yt.m(W,null),y(W,Me),Ot&&Ot.m(W,null),y(W,te),Ht&&Ht.m(W,null),y(W,he),F(ze,W,null),k(je,wt,Xe),F(mt,je,Xe),ne=!0,$e||(fe=[H(i,"click",ye(n[30])),H(l,"click",ye(n[31])),H(t,"drop",ye(n[33])),H(t,"dragover",Ye(ye(n[29]))),H(d,"click",n[20]),we(Ce.call(null,d,{position:"top",text:"Back to listing"})),H(h,"click",ye(n[21])),we(Ce.call(null,N,{position:"top",text:"Preview mode",sub:"P"})),H(N,"click",ye(n[35])),we(Ce.call(null,U,{position:"top",text:"Hotspots mode",sub:"H"})),H(U,"click",ye(n[36])),we(Ce.call(null,Le,{position:"top",text:"Comments mode",sub:"C"})),H(Le,"click",ye(n[37])),we(Ce.call(null,le,{position:"top",text:"More options"})),H(le,"click",n[38]),H(f,"click",ye(n[40]))],$e=!0)},p(je,Xe){var yr,vr,kr;(!ne||Xe[0]&1024)&&Z(i,"disabled",je[10]),(!ne||Xe[0]&512)&&Z(l,"disabled",je[9]),je[12]===Oe.comments?Pe?(Pe.p(je,Xe),Xe[0]&4096&&E(Pe,1)):(Pe=wf(je),Pe.c(),E(Pe,1),Pe.m(e,null)):Pe&&(oe(),j(Pe,1,1,()=>{Pe=null}),ae()),(!ne||Xe[0]&2)&&w!==(w=((yr=je[1])==null?void 0:yr.title)+"")&&ve(_,w),(!ne||Xe[0]&2&&T!==(T=(vr=je[1])==null?void 0:vr.title))&&p(g,"title",T),(!ne||Xe[0]&2)&&O!==(O=Ps(je[1])+"")&&ve(C,O),(!ne||Xe[0]&1)&&P!==(P=je[0].length+"")&&ve(R,P),(!ne||Xe[0]&32&&D!==(D="iconoir-nav-arrow-"+(je[5]?"up":"down")))&&p(M,"class",D),(!ne||Xe[0]&32&&Y!==(Y="btn btn-sm btn-hint txt-hint "+(je[5]?"btn-semitransparent":"btn-transparent")))&&p(h,"class",Y),(!ne||Xe[0]&4096&&ee!==(ee="btn btn-circle "+(je[12]==Oe.preview?"btn-primary btn-transparent":"btn-hint btn-transparent txt-hint")))&&p(N,"class",ee),(!ne||Xe[0]&4096&&re!==(re="btn btn-circle "+(je[12]==Oe.hotspots?"btn-success btn-transparent":"btn-hint btn-transparent txt-hint")))&&p(U,"class",re),(!ne||Xe[0]&53248)&&Z(U,"btn-loading",je[14]||je[15]),Be===(Be=ue(je))&&nt?nt.p(je,Xe):(nt&&nt.d(1),nt=Be&&Be(je),nt&&(nt.c(),nt.m(Le,null))),(!ne||Xe[0]&4096&&st!==(st="btn btn-circle "+(je[12]==Oe.comments?"btn-danger btn-transparent":"btn-hint btn-transparent txt-hint")))&&p(Le,"class",st),(!ne||Xe[0]&69632)&&Z(Le,"btn-loading",je[16]),(!ne||Xe[0]&64)&&Z(le,"active",je[6]),je[12]==Oe.hotspots&&!je[14]?xe?Xe[0]&20480&&E(xe,1):(xe=yf(),xe.c(),E(xe,1),xe.m(W,ie)):xe&&(oe(),j(xe,1,1,()=>{xe=null}),ae()),je[12]==Oe.comments&&!je[16]?yt?yt.p(je,Xe):(yt=vf(je),yt.c(),yt.m(W,Me)):yt&&(yt.d(1),yt=null),je[12]==Oe.preview?Ot?Xe[0]&4096&&E(Ot,1):(Ot=kf(),Ot.c(),E(Ot,1),Ot.m(W,te)):Ot&&(oe(),j(Ot,1,1,()=>{Ot=null}),ae()),((kr=je[3])==null?void 0:kr.scale)!=0?Ht?Ht.p(je,Xe):(Ht=Sf(je),Ht.c(),Ht.m(W,he)):Ht&&(Ht.d(1),Ht=null),(!ne||Xe[0]&64)&&Z(f,"show-responsive-controls",je[6]);const wr={};Xe[0]&32&&(wr.active=je[5]),mt.$set(wr)},i(je){ne||(E(o.$$.fragment,je),E(Pe),E(xe),E(Ot),E(ze.$$.fragment,je),E(mt.$$.fragment,je),ne=!0)},o(je){j(o.$$.fragment,je),j(Pe),j(xe),j(Ot),j(ze.$$.fragment,je),j(mt.$$.fragment,je),ne=!1},d(je){je&&(v(e),v(u),v(f),v(wt)),q(o),n[32](null),Pe&&Pe.d(),nt&&nt.d(),xe&&xe.d(),yt&&yt.d(),Ot&&Ot.d(),Ht&&Ht.d(),q(ze),q(mt,je),$e=!1,pe(fe)}}}function dy(n){let e;return{c(){e=b("span"),p(e,"class","loader loader-lg m-t-auto m-b-auto")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function wf(n){let e,t,i={};return e=new Yd({props:i}),n[34](e),{c(){$(e.$$.fragment)},m(s,l){F(e,s,l),t=!0},p(s,l){const r={};e.$set(r)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){n[34](null),q(e,s)}}}function py(n){let e,t=n[18].length+"",i;return{c(){e=b("sub"),i=x(t),p(e,"class","sub sub-warning"),p(e,"title","Unread resolved comments")},m(s,l){k(s,e,l),y(e,i)},p(s,l){l[0]&262144&&t!==(t=s[18].length+"")&&ve(i,t)},d(s){s&&v(e)}}}function my(n){let e,t=n[17].length+"",i,s;return{c(){e=b("sub"),i=x(t),p(e,"class",s="sub "+(n[18].length?"sub-warning":n[12]==Oe.comments?"sub-danger":"sub-secondary-alt")),p(e,"title","Unresolved comments")},m(l,r){k(l,e,r),y(e,i)},p(l,r){r[0]&131072&&t!==(t=l[17].length+"")&&ve(i,t),r[0]&266240&&s!==(s="sub "+(l[18].length?"sub-warning":l[12]==Oe.comments?"sub-danger":"sub-secondary-alt"))&&p(e,"class",s)},d(l){l&&v(e)}}}function yf(n){let e,t;return e=new G2({}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function vf(n){let e,t,i;return{c(){e=b("button"),e.innerHTML='<span class="txt">Comments panel</span>',p(e,"type","button"),p(e,"class","btn btn-sm btn-transparent btn-danger entrance-right")},m(s,l){k(s,e,l),t||(i=H(e,"click",ye(n[39])),t=!0)},p:X,d(s){s&&v(e),t=!1,i()}}}function kf(n){let e,t;return e=new Zd({}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function Sf(n){let e,t,i,s,l;return{c(){e=b("button"),t=b("i"),p(t,"class","iconoir-scale-frame-reduce"),p(e,"class",i="btn btn-circle btn-hint btn-transparent "+(n[19]?"txt-warning":"txt-hint"))},m(r,o){k(r,e,o),y(e,t),s||(l=[we(Ce.call(null,e,{position:"top",text:"Toggle fit to screen"})),H(e,"click",ye(hd))],s=!0)},p(r,o){o[0]&524288&&i!==(i="btn btn-circle btn-hint btn-transparent "+(r[19]?"txt-warning":"txt-hint"))&&p(e,"class",i)},d(r){r&&v(e),s=!1,pe(l)}}}function hy(n){let e,t,i,s;const l=[dy,cy],r=[];function o(a,u){return a[11]?1:0}return e=o(n),t=r[e]=l[e](n),{c(){t.c(),i=De()},m(a,u){r[e].m(a,u),k(a,i,u),s=!0},p(a,u){let f=e;e=o(a),e===f?r[e].p(a,u):(oe(),j(r[f],1,1,()=>{r[f]=null}),ae(),t=r[e],t?t.p(a,u):(t=r[e]=l[e](a),t.c()),E(t,1),t.m(i.parentNode,i))},i(a){s||(E(t),s=!0)},o(a){j(t),s=!1},d(a){a&&v(i),r[e].d(a)}}}function _y(n){let e,t,i,s,l,r,o,a;return e=new Pi({props:{fullpage:!0,class:"screen-preview-layout screen-preview-mode-"+n[12]+" "+(n[12]==Oe.comments&&n[2]?"screen-preview-comment-popover-active":"")+" "+(n[12]==Oe.hotspots&&n[13]?"screen-preview-hotspot-popover-active":""),header:!1,footer:!1,title:n[4],$$slots:{default:[hy]},$$scope:{ctx:n}}}),i=new Gd({props:{viewport:n[8]}}),l=new fy({props:{viewport:n[8]}}),{c(){$(e.$$.fragment),t=I(),$(i.$$.fragment),s=I(),$(l.$$.fragment)},m(u,f){F(e,u,f),k(u,t,f),F(i,u,f),k(u,s,f),F(l,u,f),r=!0,o||(a=H(window,"keydown",n[22]),o=!0)},p(u,f){const c={};f[0]&12292&&(c.class="screen-preview-layout screen-preview-mode-"+u[12]+" "+(u[12]==Oe.comments&&u[2]?"screen-preview-comment-popover-active":"")+" "+(u[12]==Oe.hotspots&&u[13]?"screen-preview-hotspot-popover-active":"")),f[0]&16&&(c.title=u[4]),f[0]&1040363|f[1]&4096&&(c.$$scope={dirty:f,ctx:u}),e.$set(c);const d={};f[0]&256&&(d.viewport=u[8]),i.$set(d);const m={};f[0]&256&&(m.viewport=u[8]),l.$set(m)},i(u){r||(E(e.$$.fragment,u),E(i.$$.fragment,u),E(l.$$.fragment,u),r=!0)},o(u){j(e.$$.fragment,u),j(i.$$.fragment,u),j(l.$$.fragment,u),r=!1},d(u){u&&(v(t),v(s)),q(e,u),q(i,u),q(l,u),o=!1,a()}}}const gy=".toggler-container > .active";function by(n,e,t){let i,s,l,r,o,a,u,f,c,d,m,h,g,w,_,T,L,O;Q(n,pt,W=>t(0,o=W)),Q(n,Ge,W=>t(1,a=W)),Q(n,Wt,W=>t(2,u=W)),Q(n,Et,W=>t(3,f=W)),Q(n,cn,W=>t(27,c=W)),Q(n,tc,W=>t(28,d=W)),Q(n,Ii,W=>t(12,m=W)),Q(n,Ve,W=>t(13,h=W)),Q(n,Vi,W=>t(14,g=W)),Q(n,Bi,W=>t(15,w=W)),Q(n,bi,W=>t(16,_=W)),Q(n,Ad,W=>t(17,T=W)),Q(n,dr,W=>t(18,L=W)),Q(n,ji,W=>t(19,O=W));const C=G.getHashQueryParams();let{params:S}=e,P="",R=!1,A=!1,M=!1,D,Y,K=S.screenId;fr(),_d(),B(S.prototypeId,S.screenId);async function B(W,ie){if(!(!W||!ie)){Zs(),rr(),ar(),t(24,R=!0);try{Md(W),Wd(W),Hd(W),ur(W),Ud(W),Vd(W);const Me=await z.collection("prototypes").getOne(W,{expand:"project.users,screens_via_prototype"});vi(Me,!0),Qn(Me.expand.project,!0),Te(Ge,a=ie,a),Te(pt,o=G.sortItemsByIds(Me.expand.screens_via_prototype,Me.screensOrder),o),Dd(W,C.commentId),t(24,R=!1)}catch(Me){Me.isAbort||(t(24,R=!1),z.error(Me))}}}function N(){wi(`/projects/${S==null?void 0:S.projectId}/prototypes/${S.prototypeId}`)}function V(){t(5,A=!A)}function ee(W){if(!(W.altKey||W.ctrlKey||G.isInput(W.target)||document.querySelector(gy))){if(W.code==="Escape"&&A){W.preventDefault(),t(5,A=!1);return}if(W.code==="ArrowLeft"){W.preventDefault(),En(-1);return}if(W.code==="ArrowRight"){W.preventDefault(),En(1);return}if(W.code==="KeyP"){W.preventDefault(),zt(Oe.preview);return}if(W.code==="KeyH"){W.preventDefault(),zt(Oe.hotspots);return}if(W.code==="KeyC"){W.preventDefault(),zt(Oe.comments);return}}}Gt(()=>{Ut==null||Ut(),an==null||an(),fn==null||fn(),un==null||un()});function J(W){qe.call(this,n,W)}const U=()=>En(-1),ce=()=>En(1);function re(W){se[W?"unshift":"push"](()=>{Y=W,t(8,Y)})}const de=W=>{W.dataTransfer.files.length&&cr(a,W.dataTransfer.files[0])};function Le(W){se[W?"unshift":"push"](()=>{D=W,t(7,D)})}const Je=()=>zt(Oe.preview),ut=()=>zt(Oe.hotspots),st=()=>zt(Oe.comments),dt=()=>t(6,M=!M),le=()=>D==null?void 0:D.toggle(),me=()=>{document.activeElement.blur()};return n.$$set=W=>{"params"in W&&t(23,S=W.params)},n.$$.update=()=>{n.$$.dirty[0]&41943042&&a&&K==a.id&&S.screenId!=K&&(t(25,K=S.screenId),Te(Ge,a=S.screenId,a)),n.$$.dirty[0]&134217738&&t(4,P=[a==null?void 0:a.title,f==null?void 0:f.title,c==null?void 0:c.title].filter(Boolean).join(" - ")),n.$$.dirty[0]&301989898&&a&&a.id!=K&&(t(25,K=a.id),wi(`/projects/${f.project}/prototypes/${f.id}/screens/${a.id}?${d}`)),n.$$.dirty[0]&150994954&&t(11,i=!R&&!!(c!=null&&c.id)&&!!(f!=null&&f.id)&&!!(a!=null&&a.id)),n.$$.dirty[0]&3&&t(26,s=o.findIndex(W=>W.id==(a==null?void 0:a.id))),n.$$.dirty[0]&67108864&&t(10,l=s===0),n.$$.dirty[0]&67108865&&t(9,r=o.length-1===s),n.$$.dirty[0]&4&&G.replaceHashQueryParams({commentId:(u==null?void 0:u.id)||null})},[o,a,u,f,P,A,M,D,Y,r,l,i,m,h,g,w,_,T,L,O,N,V,ee,S,R,K,s,c,d,J,U,ce,re,de,Le,Je,ut,st,dt,le,me]}class wy extends Se{constructor(e){super(),ke(this,e,by,_y,ge,{params:23},null,[-1,-1])}}function yy(n){let e,t,i;const s=[{searchable:!0},{class:"prototypes-select"},{dropdownClass:"dropdown-right"},{noOptionsText:"No prototypes found"},{selectPlaceholder:"- Select prototype -"},{items:n[1]},n[2]];function l(o){n[4](o)}let r={};for(let o=0;o<s.length;o+=1)r=Ue(r,s[o]);return n[0]!==void 0&&(r.keyOfSelected=n[0]),e=new pn({props:r}),se.push(()=>Ae(e,"keyOfSelected",l)),{c(){$(e.$$.fragment)},m(o,a){F(e,o,a),i=!0},p(o,[a]){const u=a&6?bt(s,[s[0],s[1],s[2],s[3],s[4],a&2&&{items:o[1]},a&4&&Nt(o[2])]):{};!t&&a&1&&(t=!0,u.keyOfSelected=o[0],Ne(()=>t=!1)),e.$set(u)},i(o){i||(E(e.$$.fragment,o),i=!0)},o(o){j(e.$$.fragment,o),i=!1},d(o){q(e,o)}}}function vy(n,e,t){let i;const s=["value"];let l=ft(e,s),r;Q(n,$t,u=>t(3,r=u));let{value:o}=e;function a(u){o=u,t(0,o)}return n.$$set=u=>{e=Ue(Ue({},e),Kt(u)),t(2,l=ft(e,s)),"value"in u&&t(0,o=u.value)},n.$$.update=()=>{n.$$.dirty&8&&t(1,i=r.map(u=>({value:u.id,label:u.title,icon:G.getPrototypeIcon(u)})))},[o,i,l,r,a]}class ky extends Se{constructor(e){super(),ke(this,e,vy,yy,ge,{value:0})}}function Sy(n){let e,t,i,s,l,r,o,a;return{c(){e=b("label"),t=x("Additional details"),s=I(),l=b("textarea"),p(e,"for",i=n[16]),p(l,"id",r=n[16]),p(l,"rows","3")},m(u,f){k(u,e,f),y(e,t),k(u,s,f),k(u,l,f),be(l,n[3]),o||(a=H(l,"input",n[9]),o=!0)},p(u,f){f&65536&&i!==(i=u[16])&&p(e,"for",i),f&65536&&r!==(r=u[16])&&p(l,"id",r),f&8&&be(l,u[3])},d(u){u&&(v(e),v(s),v(l)),o=!1,a()}}}function Ty(n){let e,t,i,s,l;return t=new Ee({props:{class:"form-field m-0",name:"message",$$slots:{default:[Sy,({uniqueId:r})=>({16:r}),({uniqueId:r})=>r?65536:0]},$$scope:{ctx:n}}}),{c(){e=b("form"),$(t.$$.fragment),p(e,"id",n[5])},m(r,o){k(r,e,o),F(t,e,null),i=!0,s||(l=H(e,"submit",ye(n[6])),s=!0)},p(r,o){const a={};o&196616&&(a.$$scope={dirty:o,ctx:r}),t.$set(a)},i(r){i||(E(t.$$.fragment,r),i=!0)},o(r){j(t.$$.fragment,r),i=!1},d(r){r&&v(e),q(t),s=!1,l()}}}function Oy(n){let e;return{c(){e=b("h5"),e.textContent="Report this design for spam or abusive content",p(e,"class","block txt-center")},m(t,i){k(t,e,i)},p:X,d(t){t&&v(e)}}}function Cy(n){let e,t,i,s,l,r,o;return{c(){e=b("button"),t=b("span"),t.textContent="Close",i=I(),s=b("button"),l=b("span"),l.textContent="Report",p(t,"class","txt"),p(e,"type","button"),p(e,"class","btn btn-transparent m-r-auto"),e.disabled=n[4],p(l,"class","txt"),p(s,"form",n[5]),p(s,"type","submit"),p(s,"class","btn btn-expanded-sm btn-primary"),s.disabled=n[4],Z(s,"btn-loading",n[4])},m(a,u){k(a,e,u),y(e,t),k(a,i,u),k(a,s,u),y(s,l),r||(o=H(e,"click",n[8]),r=!0)},p(a,u){u&16&&(e.disabled=a[4]),u&16&&(s.disabled=a[4]),u&16&&Z(s,"btn-loading",a[4])},d(a){a&&(v(e),v(i),v(s)),r=!1,o()}}}function Ey(n){let e,t,i;function s(r){n[11](r)}let l={popup:!0,$$slots:{footer:[Cy],header:[Oy],default:[Ty]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.active=n[0]),e=new mn({props:l}),n[10](e),se.push(()=>Ae(e,"active",s)),e.$on("show",n[12]),e.$on("hide",n[13]),{c(){$(e.$$.fragment)},m(r,o){F(e,r,o),i=!0},p(r,[o]){const a={};o&131096&&(a.$$scope={dirty:o,ctx:r}),!t&&o&1&&(t=!0,a.active=r[0],Ne(()=>t=!1)),e.$set(a)},i(r){i||(E(e.$$.fragment,r),i=!0)},o(r){j(e.$$.fragment,r),i=!1},d(r){n[10](null),q(e,r)}}}function Ly(n,e,t){const i=it(),s="report_"+G.randomString(5);let{active:l=!1}=e,r,o="",a=!1;function u(){return c(),r==null?void 0:r.show()}function f(){return r==null?void 0:r.hide()}function c(){Jt({}),t(3,o="")}async function d(){if(!a){t(4,a=!0);try{await z.send("/api/pr/report",{method:"POST",body:{message:o}}),i("submit"),gt("Thank you, we will investigate and remove the project if found inappropriate.",5e3),Yt("/")}catch(L){L.isAbort||z.error(L)}t(4,a=!1)}}Gt(()=>{f()});const m=()=>f();function h(){o=this.value,t(3,o)}function g(L){se[L?"unshift":"push"](()=>{r=L,t(2,r)})}function w(L){l=L,t(0,l)}function _(L){qe.call(this,n,L)}function T(L){qe.call(this,n,L)}return n.$$set=L=>{"active"in L&&t(0,l=L.active)},[l,f,r,o,a,s,d,u,m,h,g,w,_,T]}class Iy extends Se{constructor(e){super(),ke(this,e,Ly,Ey,ge,{active:0,show:7,hide:1})}get show(){return this.$$.ctx[7]}get hide(){return this.$$.ctx[1]}}function jy(n){let e,t,i=n[3].title+"",s,l,r,o,a,u,f,c,d;return{c(){e=b("div"),t=b("p"),s=x(i),l=I(),r=b("button"),r.innerHTML='<i class="iconoir-warning-triangle-solid"></i> <span class="txt">Report design</span>',o=I(),a=b("hr"),u=I(),f=b("p"),f.innerHTML=`Presented with
                <a href="https://presentator.io" target="_blank" rel="noopener noreferrer">Presentator</a>`,p(t,"class","txt-bold"),p(r,"type","button"),p(r,"class","btn btn-xs btn-transparent btn-danger m-t-xs"),p(a,"class","m-t-xs m-b-xs"),p(f,"class","txt-xs txt-hint"),p(e,"class","content")},m(m,h){k(m,e,h),y(e,t),y(t,s),y(e,l),y(e,r),y(e,o),y(e,a),y(e,u),y(e,f),c||(d=H(r,"click",Ye(n[7])),c=!0)},p(m,h){h&8&&i!==(i=m[3].title+"")&&ve(s,i)},d(m){m&&v(e),c=!1,d()}}}function Py(n){let e,t,i,s,l,r,o,a,u,f,c;function d(g){n[9](g)}let m={class:"dropdown dropdown-right dropdown-upside project-info-dropdown",$$slots:{default:[jy]},$$scope:{ctx:n}};n[2]!==void 0&&(m.active=n[2]),s=new Rt({props:m}),n[8](s),se.push(()=>Ae(s,"active",d));let h={};return a=new Iy({props:h}),n[10](a),{c(){e=b("div"),t=b("i"),i=I(),$(s.$$.fragment),o=I(),$(a.$$.fragment),p(t,"class","iconoir-info-circle"),p(e,"tabindex","0"),p(e,"class","btn btn-circle btn-hint txt-hint btn-transparent project-info-btn")},m(g,w){k(g,e,w),y(e,t),y(e,i),F(s,e,null),k(g,o,w),F(a,g,w),u=!0,f||(c=[we(r=Ce.call(null,e,n[2]?void 0:{position:"top-right",text:"Project info"})),H(e,"click",Ye(n[6]))],f=!0)},p(g,[w]){const _={};w&2058&&(_.$$scope={dirty:w,ctx:g}),!l&&w&4&&(l=!0,_.active=g[2],Ne(()=>l=!1)),s.$set(_),r&&tt(r.update)&&w&4&&r.update.call(null,g[2]?void 0:{position:"top-right",text:"Project info"});const T={};a.$set(T)},i(g){u||(E(s.$$.fragment,g),E(a.$$.fragment,g),u=!0)},o(g){j(s.$$.fragment,g),j(a.$$.fragment,g),u=!1},d(g){g&&(v(e),v(o)),n[8](null),q(s),n[10](null),q(a,g),f=!1,pe(c)}}}function Ny(n,e,t){let i;Q(n,cn,h=>t(3,i=h));let s,l,r=!1;function o(){s==null||s.show()}function a(){s==null||s.hide()}function u(h){qe.call(this,n,h)}const f=()=>l==null?void 0:l.show();function c(h){se[h?"unshift":"push"](()=>{s=h,t(0,s)})}function d(h){r=h,t(2,r)}function m(h){se[h?"unshift":"push"](()=>{l=h,t(1,l)})}return[s,l,r,i,o,a,u,f,c,d,m]}class Ay extends Se{constructor(e){super(),ke(this,e,Ny,Py,ge,{show:4,hide:5})}get show(){return this.$$.ctx[4]}get hide(){return this.$$.ctx[5]}}function My(n){let e,t,i,s,l,r,o,a,u,f,c;o=new Bd({});let d=n[4]===Oe.comments&&Tf(n);return{c(){e=b("div"),t=b("div"),i=b("div"),i.innerHTML='<i class="iconoir-nav-arrow-left"></i>',s=I(),l=b("div"),l.innerHTML='<i class="iconoir-nav-arrow-right"></i>',r=I(),$(o.$$.fragment),a=I(),d&&d.c(),p(i,"class","screen-preview-nav-ctrl left"),Z(i,"disabled",n[11]),p(l,"class","screen-preview-nav-ctrl right"),Z(l,"disabled",n[10]),p(t,"class","screen-preview-nav-wrapper"),Z(t,"discreet",!n[6]),p(e,"class","screen-preview-container entrance-fade")},m(m,h){k(m,e,h),y(e,t),y(t,i),y(t,s),y(t,l),y(t,r),F(o,t,null),n[31](t),y(e,a),d&&d.m(e,null),u=!0,f||(c=[H(i,"click",ye(n[29])),H(l,"click",ye(n[30]))],f=!0)},p(m,h){(!u||h[0]&2048)&&Z(i,"disabled",m[11]),(!u||h[0]&1024)&&Z(l,"disabled",m[10]),(!u||h[0]&64)&&Z(t,"discreet",!m[6]),m[4]===Oe.comments?d?(d.p(m,h),h[0]&16&&E(d,1)):(d=Tf(m),d.c(),E(d,1),d.m(e,null)):d&&(oe(),j(d,1,1,()=>{d=null}),ae())},i(m){u||(E(o.$$.fragment,m),E(d),u=!0)},o(m){j(o.$$.fragment,m),j(d),u=!1},d(m){m&&v(e),q(o),n[31](null),d&&d.d(),f=!1,pe(c)}}}function Dy(n){let e;return{c(){e=b("div"),e.innerHTML='<div class="placeholder-block"><figure class="icon"><i class="iconoir-media-image-list"></i></figure> <h5 class="title txt-hint">The prototype doesn&#39;t have any screens yet.</h5></div>',p(e,"class","wrapper wrapper-sm m-t-auto m-b-auto")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function Ry(n){let e;return{c(){e=b("span"),p(e,"class","loader loader-lg m-t-auto m-b-auto")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function Tf(n){let e,t,i={};return e=new Yd({props:i}),n[32](e),{c(){$(e.$$.fragment)},m(s,l){F(e,s,l),t=!0},p(s,l){const r={};e.$set(r)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){n[32](null),q(e,s)}}}function Of(n){var h,g;let e,t,i,s,l,r,o,a,u,f,c=((h=n[2])==null?void 0:h.id)&&Cf(n),d=((g=n[2])==null?void 0:g.id)&&If(n),m=n[17].length>1&&Af(n);return r=new Ay({}),{c(){e=b("nav"),c&&c.c(),t=I(),i=b("div"),d&&d.c(),s=I(),m&&m.c(),l=I(),$(r.$$.fragment),p(i,"class","controls-group group-right responsive-hide"),p(e,"class","controls-bar"),Z(e,"show-responsive-controls",n[7])},m(w,_){k(w,e,_),c&&c.m(e,null),y(e,t),y(e,i),d&&d.m(i,null),y(i,s),m&&m.m(i,null),y(i,l),F(r,i,null),a=!0,u||(f=H(e,"click",ye(n[38])),u=!0)},p(w,_){var T,L;(T=w[2])!=null&&T.id?c?c.p(w,_):(c=Cf(w),c.c(),c.m(e,t)):c&&(c.d(1),c=null),(L=w[2])!=null&&L.id?d?(d.p(w,_),_[0]&4&&E(d,1)):(d=If(w),d.c(),E(d,1),d.m(i,s)):d&&(oe(),j(d,1,1,()=>{d=null}),ae()),w[17].length>1?m?(m.p(w,_),_[0]&131072&&E(m,1)):(m=Af(w),m.c(),E(m,1),m.m(i,l)):m&&(oe(),j(m,1,1,()=>{m=null}),ae()),(!a||_[0]&128)&&Z(e,"show-responsive-controls",w[7])},i(w){a||(E(d),E(m),E(r.$$.fragment,w),w&&St(()=>{a&&(o||(o=ct(e,Lt,{duration:150},!0)),o.run(1))}),a=!0)},o(w){j(d),j(m),j(r.$$.fragment,w),w&&(o||(o=ct(e,Lt,{duration:150},!1)),o.run(0)),a=!1},d(w){w&&v(e),c&&c.d(),d&&d.d(),m&&m.d(),q(r),w&&o&&o.end(),u=!1,f()}}}function Cf(n){var Y,K;let e,t,i,s=((Y=n[2])==null?void 0:Y.title)+"",l,r,o,a=Ps(n[2])+"",u,f,c=n[3].length+"",d,m,h,g,w,_,T,L,O,C,S,P,R,A,M,D=((K=n[0])==null?void 0:K.allowComments)&&Ef(n);return{c(){var B;e=b("div"),t=b("button"),i=b("span"),l=x(s),o=x(`
                        (`),u=x(a),f=x(" of "),d=x(c),m=x(`)
                        `),h=b("i"),_=I(),T=b("div"),L=b("button"),O=b("i"),S=I(),D&&D.c(),P=I(),R=b("button"),R.innerHTML='<i class="iconoir-more-vert"></i>',p(i,"class","screen-title-trim"),p(i,"title",r=(B=n[2])==null?void 0:B.title),p(h,"class",g="iconoir-nav-arrow-"+(n[5]?"up":"down")),p(t,"type","button"),p(t,"class",w="btn btn-sm btn-hint txt-hint "+(n[5]?"btn-semitransparent":"btn-transparent")),p(e,"class","controls-group group-left"),p(O,"class","iconoir-play"),p(L,"class",C="btn btn-circle "+(n[4]==Oe.preview?"btn-primary btn-transparent":"btn-hint btn-transparent txt-hint")),p(R,"type","button"),p(R,"class","btn btn-circle btn-hint txt-hint btn-transparent responsive-show"),Z(R,"active",n[7]),p(T,"class","controls-group group-center")},m(B,N){k(B,e,N),y(e,t),y(t,i),y(i,l),y(t,o),y(t,u),y(t,f),y(t,d),y(t,m),y(t,h),k(B,_,N),k(B,T,N),y(T,L),y(L,O),y(T,S),D&&D.m(T,null),y(T,P),y(T,R),A||(M=[H(t,"click",ye(n[19])),we(Ce.call(null,L,{position:"top",text:"Preview mode",sub:"P"})),H(L,"click",ye(n[33])),we(Ce.call(null,R,{position:"top",text:"More options"})),H(R,"click",n[35])],A=!0)},p(B,N){var V,ee,J;N[0]&4&&s!==(s=((V=B[2])==null?void 0:V.title)+"")&&ve(l,s),N[0]&4&&r!==(r=(ee=B[2])==null?void 0:ee.title)&&p(i,"title",r),N[0]&4&&a!==(a=Ps(B[2])+"")&&ve(u,a),N[0]&8&&c!==(c=B[3].length+"")&&ve(d,c),N[0]&32&&g!==(g="iconoir-nav-arrow-"+(B[5]?"up":"down"))&&p(h,"class",g),N[0]&32&&w!==(w="btn btn-sm btn-hint txt-hint "+(B[5]?"btn-semitransparent":"btn-transparent"))&&p(t,"class",w),N[0]&16&&C!==(C="btn btn-circle "+(B[4]==Oe.preview?"btn-primary btn-transparent":"btn-hint btn-transparent txt-hint"))&&p(L,"class",C),(J=B[0])!=null&&J.allowComments?D?D.p(B,N):(D=Ef(B),D.c(),D.m(T,P)):D&&(D.d(1),D=null),N[0]&128&&Z(R,"active",B[7])},d(B){B&&(v(e),v(_),v(T)),D&&D.d(),A=!1,pe(M)}}}function Ef(n){let e,t,i,s,l,r,o=n[14].length&&Lf(n);return{c(){e=b("button"),t=b("i"),i=I(),o&&o.c(),p(t,"class","iconoir-message-text"),p(e,"class",s="btn btn-circle "+(n[4]==Oe.comments?"btn-danger btn-transparent":"btn-hint btn-transparent txt-hint")),Z(e,"btn-loading",n[13])},m(a,u){k(a,e,u),y(e,t),y(e,i),o&&o.m(e,null),l||(r=[we(Ce.call(null,e,{position:"top",text:"Comments mode",sub:"C"})),H(e,"click",ye(n[34]))],l=!0)},p(a,u){a[14].length?o?o.p(a,u):(o=Lf(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null),u[0]&16&&s!==(s="btn btn-circle "+(a[4]==Oe.comments?"btn-danger btn-transparent":"btn-hint btn-transparent txt-hint"))&&p(e,"class",s),u[0]&8208&&Z(e,"btn-loading",a[13])},d(a){a&&v(e),o&&o.d(),l=!1,pe(r)}}}function Lf(n){let e,t=n[14].length+"",i,s;return{c(){e=b("sub"),i=x(t),p(e,"class",s="sub "+(n[15].length?"sub-warning":n[4]==Oe.comments?"sub-danger":"sub-secondary-alt")),p(e,"title","Unread comments")},m(l,r){k(l,e,r),y(e,i)},p(l,r){r[0]&16384&&t!==(t=l[14].length+"")&&ve(i,t),r[0]&32784&&s!==(s="sub "+(l[15].length?"sub-warning":l[4]==Oe.comments?"sub-danger":"sub-secondary-alt"))&&p(e,"class",s)},d(l){l&&v(e)}}}function If(n){var a;let e,t,i,s,l=((a=n[0])==null?void 0:a.allowComments)&&n[4]==Oe.comments&&!n[13]&&jf(n),r=n[4]==Oe.preview&&Pf(),o=n[1].scale!=0&&Nf(n);return{c(){l&&l.c(),e=I(),r&&r.c(),t=I(),o&&o.c(),i=De()},m(u,f){l&&l.m(u,f),k(u,e,f),r&&r.m(u,f),k(u,t,f),o&&o.m(u,f),k(u,i,f),s=!0},p(u,f){var c;(c=u[0])!=null&&c.allowComments&&u[4]==Oe.comments&&!u[13]?l?l.p(u,f):(l=jf(u),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),u[4]==Oe.preview?r?f[0]&16&&E(r,1):(r=Pf(),r.c(),E(r,1),r.m(t.parentNode,t)):r&&(oe(),j(r,1,1,()=>{r=null}),ae()),u[1].scale!=0?o?o.p(u,f):(o=Nf(u),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},i(u){s||(E(r),s=!0)},o(u){j(r),s=!1},d(u){u&&(v(e),v(t),v(i)),l&&l.d(u),r&&r.d(u),o&&o.d(u)}}}function jf(n){let e,t,i;return{c(){e=b("button"),e.innerHTML='<span class="txt">Comments panel</span>',p(e,"type","button"),p(e,"class","btn btn-sm btn-transparent btn-danger entrance-right")},m(s,l){k(s,e,l),t||(i=H(e,"click",ye(n[36])),t=!0)},p:X,d(s){s&&v(e),t=!1,i()}}}function Pf(n){let e,t;return e=new Zd({}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function Nf(n){let e,t,i,s,l;return{c(){e=b("button"),t=b("i"),p(t,"class","iconoir-scale-frame-reduce"),p(e,"class",i="btn btn-circle btn-hint btn-transparent "+(n[16]?"txt-warning":"txt-hint"))},m(r,o){k(r,e,o),y(e,t),s||(l=[we(Ce.call(null,e,{position:"top",text:"Toggle fit to screen"})),H(e,"click",ye(hd))],s=!0)},p(r,o){o[0]&65536&&i!==(i="btn btn-circle btn-hint btn-transparent "+(r[16]?"txt-warning":"txt-hint"))&&p(e,"class",i)},d(r){r&&v(e),s=!1,pe(l)}}}function Af(n){let e,t,i,s;function l(o){n[37](o)}let r={upside:!0,searchable:!1};return n[18]!==void 0&&(r.value=n[18]),t=new ky({props:r}),se.push(()=>Ae(t,"value",l)),{c(){e=b("div"),$(t.$$.fragment),p(e,"class","form-field form-field-sm")},m(o,a){k(o,e,a),F(t,e,null),s=!0},p(o,a){const u={};!i&&a[0]&262144&&(i=!0,u.value=o[18],Ne(()=>i=!1)),t.$set(u)},i(o){s||(E(t.$$.fragment,o),s=!0)},o(o){j(t.$$.fragment,o),s=!1},d(o){o&&v(e),q(t)}}}function Hy(n){let e,t,i,s,l,r=n[6]?"Hide":"Show",o,a,u,f,c,d,m,h,g;const w=[Ry,Dy,My],_=[];function T(O,C){var S;return O[12]?(S=O[2])!=null&&S.id?2:1:0}e=T(n),t=_[e]=w[e](n);let L=n[6]&&Of(n);return f=new zd({props:{active:n[5]}}),d=new Gd({props:{viewport:n[9]}}),{c(){t.c(),i=I(),s=b("div"),l=b("div"),o=x(r),a=I(),L&&L.c(),u=I(),$(f.$$.fragment),c=I(),$(d.$$.fragment),p(l,"class","controls-bar-toggle"),Z(l,"active",n[6]),p(s,"class","controls-bar-wrapper")},m(O,C){_[e].m(O,C),k(O,i,C),k(O,s,C),y(s,l),y(l,o),y(s,a),L&&L.m(s,null),k(O,u,C),F(f,O,C),k(O,c,C),F(d,O,C),m=!0,h||(g=[H(window,"keydown",n[21]),H(l,"click",ye(n[20]))],h=!0)},p(O,C){let S=e;e=T(O),e===S?_[e].p(O,C):(oe(),j(_[S],1,1,()=>{_[S]=null}),ae(),t=_[e],t?t.p(O,C):(t=_[e]=w[e](O),t.c()),E(t,1),t.m(i.parentNode,i)),(!m||C[0]&64)&&r!==(r=O[6]?"Hide":"Show")&&ve(o,r),(!m||C[0]&64)&&Z(l,"active",O[6]),O[6]?L?(L.p(O,C),C[0]&64&&E(L,1)):(L=Of(O),L.c(),E(L,1),L.m(s,null)):L&&(oe(),j(L,1,1,()=>{L=null}),ae());const P={};C[0]&32&&(P.active=O[5]),f.$set(P);const R={};C[0]&512&&(R.viewport=O[9]),d.$set(R)},i(O){m||(E(t),E(L),E(f.$$.fragment,O),E(d.$$.fragment,O),m=!0)},o(O){j(t),j(L),j(f.$$.fragment,O),j(d.$$.fragment,O),m=!1},d(O){O&&(v(i),v(s),v(u),v(c)),_[e].d(O),L&&L.d(),q(f,O),q(d,O),h=!1,pe(g)}}}const Uy=".toggler-container > .active";function Fy(n,e,t){let i,s,l,r,o,a,u,f,c,d,m,h,g,w,_,T;Q(n,tc,le=>t(27,o=le)),Q(n,Et,le=>t(1,a=le)),Q(n,Ge,le=>t(2,u=le)),Q(n,pt,le=>t(3,f=le)),Q(n,Wt,le=>t(28,c=le)),Q(n,Ii,le=>t(4,d=le)),Q(n,bi,le=>t(13,m=le)),Q(n,Ad,le=>t(14,h=le)),Q(n,dr,le=>t(15,g=le)),Q(n,ji,le=>t(16,w=le)),Q(n,$t,le=>t(17,_=le)),Q(n,Jn,le=>t(18,T=le));const L=G.getHashQueryParams();let{link:O}=e,{params:C}=e,S=!1,P=!1,R=!0,A=!1,M,D,Y="",K="";fr(),_d();async function B(){t(23,S=!0),await Ct(),ar();try{const le=a.id;Wd(le),Hd(le),ur(le),O!=null&&O.allowComments&&Md(le),Ud(le),Vd(le);const me=await z.collection("screens").getFullList({filter:`prototype="${le}"`});Te(Ge,u=C.screenId,u),Te(pt,f=G.sortItemsByIds(me,a.screensOrder),f),O!=null&&O.allowComments&&Dd(le,L.commentId),u!=null&&u.id||Yt(`/${O.username}/prototypes/${a.id}?${o}`),t(23,S=!1)}catch(le){le.isAbort||(t(23,S=!1),z.error(le))}}function N(){t(5,P=!P)}function V(){t(6,R=!R),R||(t(5,P=!1),M==null||M.hide())}function ee(le){if(!(le.altKey||le.ctrlKey||G.isInput(le.target)||document.querySelector(Uy))){if(le.code==="Escape"&&P){le.preventDefault(),t(5,P=!1);return}if(le.code==="ArrowLeft"){le.preventDefault(),En(-1);return}if(le.code==="ArrowRight"){le.preventDefault(),En(1);return}if(le.code==="KeyP"){le.preventDefault(),zt(Oe.preview);return}if(le.code==="KeyC"&&(O!=null&&O.allowComments)){le.preventDefault(),zt(Oe.comments);return}}}Gt(()=>{an==null||an(),Ut==null||Ut(),fn==null||fn(),un==null||un()});const J=()=>En(-1),U=()=>En(1);function ce(le){se[le?"unshift":"push"](()=>{D=le,t(9,D)})}function re(le){se[le?"unshift":"push"](()=>{M=le,t(8,M)})}const de=()=>zt(Oe.preview),Le=()=>zt(Oe.comments),Je=()=>t(7,A=!A),ut=()=>M==null?void 0:M.toggle();function st(le){T=le,Jn.set(T)}const dt=()=>{document.activeElement.blur()};return n.$$set=le=>{"link"in le&&t(0,O=le.link),"params"in le&&t(22,C=le.params)},n.$$.update=()=>{n.$$.dirty[0]&17&&!(O!=null&&O.allowComments)&&d==Oe.comments&&zt(Oe.preview),n.$$.dirty[0]&33554434&&a&&K!=(a==null?void 0:a.id)&&(t(25,K=a.id),B()),n.$$.dirty[0]&20971524&&u&&Y==u.id&&C.screenId!=Y&&(t(24,Y=C.screenId),Te(Ge,u=C.screenId,u)),n.$$.dirty[0]&150994951&&u&&u.id!=Y&&(t(24,Y=u.id),wi(`/${O.username}/prototypes/${a.id}/screens/${u.id}?${o}`)),n.$$.dirty[0]&8388610&&t(12,i=!S&&!!(a!=null&&a.id)),n.$$.dirty[0]&12&&t(26,s=f.findIndex(le=>le.id==(u==null?void 0:u.id))),n.$$.dirty[0]&67108864&&t(11,l=s===0),n.$$.dirty[0]&67108872&&t(10,r=f.length-1===s),n.$$.dirty[0]&268435456&&G.replaceHashQueryParams({commentId:(c==null?void 0:c.id)||null})},[O,a,u,f,d,P,R,A,M,D,r,l,i,m,h,g,w,_,T,N,V,ee,C,S,Y,K,s,o,c,J,U,ce,re,de,Le,Je,ut,st,dt]}class qy extends Se{constructor(e){super(),ke(this,e,Fy,Hy,ge,{link:0,params:22},null,[-1,-1])}}function $y(n){let e,t;return e=new qy({props:{link:n[1],params:n[0].groups}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,s){const l={};s&2&&(l.link=i[1]),s&1&&(l.params=i[0].groups),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function Wy(n){let e;return{c(){e=b("div"),e.innerHTML='<div class="placeholder-block"><figure class="icon"><i class="iconoir-pen-tablet"></i></figure> <h5 class="title txt-hint">The project doesn&#39;t have any prototypes yet.</h5></div>',p(e,"class","wrapper wrapper-sm m-t-auto m-b-auto")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function Vy(n){let e;return{c(){e=b("span"),p(e,"class","loader m-t-auto m-b-auto")},m(t,i){k(t,e,i)},p:X,i:X,o:X,d(t){t&&v(e)}}}function zy(n){let e,t,i,s,l,r,o,a,u,f,c,d,m,h,g;return a=new Ee({props:{class:"form-field form-field-lg",name:"password",$$slots:{default:[By,({uniqueId:w})=>({15:w}),({uniqueId:w})=>w?32768:0]},$$scope:{ctx:n}}}),{c(){e=b("div"),t=I(),i=b("div"),s=b("div"),l=b("h4"),l.textContent="The project link is password protected",r=I(),o=b("form"),$(a.$$.fragment),u=I(),f=b("button"),f.innerHTML='<span class="txt">View project</span> <i class="iconoir-arrow-right"></i>',c=I(),d=b("div"),p(e,"class","flex-fill"),p(l,"class","m-b-base"),p(f,"type","submit"),p(f,"class","btn btn-block btn-lg btn-primary btn-next"),Z(f,"btn-disabled",n[4]),Z(f,"btn-loading",n[4]),p(o,"class","panel-content"),p(s,"class","panel"),p(i,"class","wrapper wrapper-sm m-b-base entrance-top"),p(d,"class","flex-fill")},m(w,_){k(w,e,_),k(w,t,_),k(w,i,_),y(i,s),y(s,l),y(s,r),y(s,o),F(a,o,null),y(o,u),y(o,f),k(w,c,_),k(w,d,_),m=!0,h||(g=H(o,"submit",ye(n[14])),h=!0)},p(w,_){const T={};_&98308&&(T.$$scope={dirty:_,ctx:w}),a.$set(T),(!m||_&16)&&Z(f,"btn-disabled",w[4]),(!m||_&16)&&Z(f,"btn-loading",w[4])},i(w){m||(E(a.$$.fragment,w),m=!0)},o(w){j(a.$$.fragment,w),m=!1},d(w){w&&(v(e),v(t),v(i),v(c),v(d)),q(a),h=!1,g()}}}function By(n){let e,t,i,s,l,r,o,a,u;return{c(){e=b("div"),t=b("label"),i=b("i"),l=I(),r=b("input"),p(i,"class","iconoir-lock"),p(t,"for",s=n[15]),p(t,"class","addon prefix"),r.required=!0,r.autofocus=!0,p(r,"type","password"),p(r,"id",o=n[15]),p(r,"placeholder","Password"),p(e,"class","field-group m-b-10")},m(f,c){k(f,e,c),y(e,t),y(t,i),y(e,l),y(e,r),be(r,n[2]),r.focus(),a||(u=[we(Ce.call(null,t,{position:"left",text:"Password"})),H(r,"input",n[13])],a=!0)},p(f,c){c&32768&&s!==(s=f[15])&&p(t,"for",s),c&32768&&o!==(o=f[15])&&p(r,"id",o),c&4&&r.value!==f[2]&&be(r,f[2])},d(f){f&&v(e),a=!1,pe(u)}}}function Zy(n){let e,t,i,s;const l=[zy,Vy,Wy,$y],r=[];function o(a,u){return a[3]?0:a[4]?1:a[6].length?3:2}return e=o(n),t=r[e]=l[e](n),{c(){t.c(),i=De()},m(a,u){r[e].m(a,u),k(a,i,u),s=!0},p(a,u){let f=e;e=o(a),e===f?r[e].p(a,u):(oe(),j(r[f],1,1,()=>{r[f]=null}),ae(),t=r[e],t?t.p(a,u):(t=r[e]=l[e](a),t.c()),E(t,1),t.m(i.parentNode,i))},i(a){s||(E(t),s=!0)},o(a){j(t),s=!1},d(a){a&&v(i),r[e].d(a)}}}function Yy(n){let e,t;return e=new Pi({props:{fullpage:!0,class:"screen-preview-layout screen-preview-mode-"+n[7]+" "+(n[7]==Oe.comments&&n[8]?"screen-preview-comment-popover-active":""),header:!1,footer:!1,title:n[5],$$slots:{default:[Zy]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(i,s){F(e,i,s),t=!0},p(i,[s]){const l={};s&384&&(l.class="screen-preview-layout screen-preview-mode-"+i[7]+" "+(i[7]==Oe.comments&&i[8]?"screen-preview-comment-popover-active":"")),s&32&&(l.title=i[5]),s&65631&&(l.$$scope={dirty:s,ctx:i}),e.$set(l)},i(i){t||(E(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function Ky(n,e,t){let i,s,l,r,o,a,u;Q(n,$t,T=>t(6,s=T)),Q(n,Et,T=>t(10,l=T)),Q(n,cn,T=>t(11,r=T)),Q(n,Ge,T=>t(12,o=T)),Q(n,Ii,T=>t(7,a=T)),Q(n,Wt,T=>t(8,u=T));let{params:f}=e,c,d=" ",m=!1,h=!0;g();async function g(){var L,O,C,S,P,R,A,M,D,Y,K;t(4,h=!0),Zs(),rr();const T=Bh(f.groups.linkSlug);try{const B={expand:"project.users,project.prototypes_via_project"};if(T.authStore.isValid&&((L=T.authStore.record)==null?void 0:L.collectionName)=="links"&&((O=T.authStore.record)==null?void 0:O.username)==f.groups.linkSlug)try{const N=await T.collection("links").authRefresh(B);t(1,c=N.record)}catch{T.authStore.clear();const V=await T.collection("links").authWithPassword(f.groups.linkSlug,d,B);t(1,c=V.record)}else{const N=await T.collection("links").authWithPassword(f.groups.linkSlug,d,B);t(1,c=N.record)}(!z.authStore.isValid||!((R=(S=(C=c.expand)==null?void 0:C.project)==null?void 0:S.users)!=null&&R.includes((P=z.authStore.record)==null?void 0:P.id)))&&z.initStore(f.groups.linkSlug),Qn((A=c.expand)==null?void 0:A.project),Te($t,s=((Y=(D=(M=c.expand)==null?void 0:M.project)==null?void 0:D.expand)==null?void 0:Y.prototypes_via_project)||[],s),s.find(N=>N.id==f.groups.prototypeId)?Te(Et,l=f.groups.prototypeId,l):Te(Et,l=(K=s[s.length-1])==null?void 0:K.id,l),t(3,m=!1),t(4,h=!1)}catch(B){if(B.isAbort)return;t(2,d=""),t(4,h=!1),m?er("Invalid password."):t(3,m=!0)}}function w(){d=this.value,t(2,d)}const _=()=>g();return n.$$set=T=>{"params"in T&&t(0,f=T.params)},n.$$.update=()=>{n.$$.dirty&7168&&t(5,i=[o?"Preview "+o.title:null,l==null?void 0:l.title,r==null?void 0:r.title].filter(Boolean).join(" - "))},[f,c,d,m,h,i,s,a,u,g,l,r,o,w,_]}class Gy extends Se{constructor(e){super(),ke(this,e,Ky,Yy,ge,{params:0})}}const Qt=new Map;Qt.set("/login",ln({component:Z_,conditions:[n=>!z.authStore.isValid]}));Qt.set("/register",ln({component:lg,conditions:[n=>!z.authStore.isValid]}));Qt.set("/confirm-verification/:token",ln({asyncComponent:()=>Us(()=>import("./PageConfirmVerification-CpHnFzpF.js"),[],import.meta.url)}));Qt.set("/forgotten-password",ln({asyncComponent:()=>Us(()=>import("./PageRequestPasswordReset-C_T49GYA.js"),[],import.meta.url),conditions:[n=>!z.authStore.isValid]}));Qt.set("/confirm-password-reset/:token",ln({asyncComponent:()=>Us(()=>import("./PageConfirmPasswordReset-CXQa0SrI.js"),[],import.meta.url)}));Qt.set("/confirm-email-change/:token",ln({asyncComponent:()=>Us(()=>import("./PageConfirmEmailChange-BkTUzlX5.js"),[],import.meta.url)}));Qt.set("/projects",ln({component:ob,conditions:[n=>z.authStore.isValid]}));Qt.set("/projects/:projectId/prototypes/:prototypeId?",ln({component:e2,conditions:[n=>z.authStore.isValid]}));Qt.set("/projects/:projectId/prototypes/:prototypeId/screens/:screenId?",ln({component:wy,conditions:[n=>z.authStore.isValid]}));Qt.set(/^\/(?<linkSlug>[\w\.\-]+)(\/?|(\/prototypes\/(?<prototypeId>\w+)(\/screens\/(?<screenId>\w+))?))$/,ln({component:Gy}));Qt.set("*",ln({component:Yh}));function Mf(n,e,t){const i=n.slice();return i[2]=e[t],i}function Jy(n){let e;return{c(){e=b("i"),p(e,"class","iconoir-warning-triangle")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function Xy(n){let e;return{c(){e=b("i"),p(e,"class","iconoir-warning-circle")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function Qy(n){let e;return{c(){e=b("i"),p(e,"class","iconoir-check-circle")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function xy(n){let e;return{c(){e=b("i"),p(e,"class","iconoir-info-circle")},m(t,i){k(t,e,i)},d(t){t&&v(e)}}}function Df(n,e){let t,i,s,l,r=e[2].message+"",o,a,u,f,c,d,m,h=X,g,w,_;function T(S,P){return S[2].type==="info"?xy:S[2].type==="success"?Qy:S[2].type==="warning"?Xy:Jy}let L=T(e),O=L(e);function C(){return e[1](e[2])}return{key:n,first:null,c(){t=b("div"),i=b("div"),O.c(),s=I(),l=b("div"),o=x(r),a=I(),u=b("button"),u.innerHTML='<i class="iconoir-xmark"></i>',f=I(),p(i,"class","icon"),p(l,"class","content"),p(u,"type","button"),p(u,"class","close"),p(t,"class","alert txt-break"),Z(t,"alert-info",e[2].type=="info"),Z(t,"alert-success",e[2].type=="success"),Z(t,"alert-danger",e[2].type=="error"),Z(t,"alert-warning",e[2].type=="warning"),this.first=t},m(S,P){k(S,t,P),y(t,i),O.m(i,null),y(t,s),y(t,l),y(l,o),y(t,a),y(t,u),y(t,f),g=!0,w||(_=H(u,"click",ye(C)),w=!0)},p(S,P){e=S,L!==(L=T(e))&&(O.d(1),O=L(e),O&&(O.c(),O.m(i,null))),(!g||P&1)&&r!==(r=e[2].message+"")&&ve(o,r),(!g||P&1)&&Z(t,"alert-info",e[2].type=="info"),(!g||P&1)&&Z(t,"alert-success",e[2].type=="success"),(!g||P&1)&&Z(t,"alert-danger",e[2].type=="error"),(!g||P&1)&&Z(t,"alert-warning",e[2].type=="warning")},r(){m=t.getBoundingClientRect()},f(){Bf(t),h(),Zf(t,m)},a(){h(),h=zf(t,m,Ld,{duration:150})},i(S){g||(S&&St(()=>{g&&(d&&d.end(1),c=Jf(t,Lt,{duration:150}),c.start())}),g=!0)},o(S){c&&c.invalidate(),S&&(d=Xf(t,jl,{duration:150})),g=!1},d(S){S&&v(t),O.d(),S&&d&&d.end(),w=!1,_()}}}function ev(n){let e,t=[],i=new Map,s,l=Ie(n[0]);const r=o=>o[2].message;for(let o=0;o<l.length;o+=1){let a=Mf(n,l,o),u=r(a);i.set(u,t[o]=Df(u,a))}return{c(){e=b("div");for(let o=0;o<t.length;o+=1)t[o].c();p(e,"class","toasts-wrapper")},m(o,a){k(o,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);s=!0},p(o,[a]){if(a&1){l=Ie(o[0]),oe();for(let u=0;u<t.length;u+=1)t[u].r();t=Tt(t,a,r,1,o,l,i,e,xf,Df,null,Mf);for(let u=0;u<t.length;u+=1)t[u].a();ae()}},i(o){if(!s){for(let a=0;a<l.length;a+=1)E(t[a]);s=!0}},o(o){for(let a=0;a<t.length;a+=1)j(t[a]);s=!1},d(o){o&&v(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function tv(n,e,t){let i;return Q(n,zs,l=>t(0,i=l)),[i,l=>ud(l)]}class nv extends Se{constructor(e){super(),ke(this,e,tv,ev,ge,{})}}function iv(n){var s;let e,t=((s=n[1])==null?void 0:s.text)+"",i;return{c(){e=b("h4"),i=x(t),p(e,"class","block center txt-break"),p(e,"slot","header")},m(l,r){k(l,e,r),y(e,i)},p(l,r){var o;r&2&&t!==(t=((o=l[1])==null?void 0:o.text)+"")&&ve(i,t)},d(l){l&&v(e)}}}function sv(n){let e,t,i,s,l,r,o,a,u,f;return{c(){e=b("div"),t=b("div"),i=b("button"),s=b("span"),s.textContent="No",l=I(),r=b("div"),o=b("button"),a=b("span"),a.textContent="Yes",p(s,"class","txt"),i.autofocus=!0,p(i,"type","button"),p(i,"class","btn btn-semitransparent btn-block"),i.disabled=n[2],p(t,"class","col-6"),p(a,"class","txt"),p(o,"type","button"),p(o,"class","btn btn-warning btn-block"),o.disabled=n[2],Z(o,"btn-loading",n[2]),p(r,"class","col-6"),p(e,"class","grid")},m(c,d){k(c,e,d),y(e,t),y(t,i),y(i,s),y(e,l),y(e,r),y(r,o),y(o,a),i.focus(),u||(f=[H(i,"click",n[4]),H(o,"click",n[5])],u=!0)},p(c,d){d&4&&(i.disabled=c[2]),d&4&&(o.disabled=c[2]),d&4&&Z(o,"btn-loading",c[2])},d(c){c&&v(e),u=!1,pe(f)}}}function lv(n){let e,t,i={class:"confirm-popup hide-content overlay-panel-sm",overlayClose:!n[2],escHide:!n[2],btnClose:!1,popup:!0,$$slots:{footer:[sv],header:[iv]},$$scope:{ctx:n}};return e=new mn({props:i}),n[6](e),e.$on("hide",n[7]),{c(){$(e.$$.fragment)},m(s,l){F(e,s,l),t=!0},p(s,[l]){const r={};l&4&&(r.overlayClose=!s[2]),l&4&&(r.escHide=!s[2]),l&271&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){n[6](null),q(e,s)}}}function rv(n,e,t){let i;Q(n,or,c=>t(1,i=c));let s,l=!1,r=!1;const o=()=>{t(3,r=!1),s==null||s.hide()},a=async()=>{i!=null&&i.yesCallback&&(t(2,l=!0),await Promise.resolve(i.yesCallback()),t(2,l=!1)),t(3,r=!0),s==null||s.hide()};function u(c){se[c?"unshift":"push"](()=>{s=c,t(0,s)})}const f=async()=>{!r&&(i!=null&&i.noCallback)&&i.noCallback(),await Ct(),t(3,r=!1),dd()};return n.$$.update=()=>{n.$$.dirty&3&&i!=null&&i.text&&(t(3,r=!1),s==null||s.show())},[s,i,l,r,o,a,u,f]}class ov extends Se{constructor(e){super(),ke(this,e,rv,lv,ge,{})}}function av(n){let e,t,i,s,l,r;return e=new Sp({props:{routes:Qt}}),e.$on("routeLoading",n[0]),e.$on("conditionsFailed",n[1]),i=new nv({}),l=new ov({}),{c(){$(e.$$.fragment),t=I(),$(i.$$.fragment),s=I(),$(l.$$.fragment)},m(o,a){F(e,o,a),k(o,t,a),F(i,o,a),k(o,s,a),F(l,o,a),r=!0},p:X,i(o){r||(E(e.$$.fragment,o),E(i.$$.fragment,o),E(l.$$.fragment,o),r=!0)},o(o){j(e.$$.fragment,o),j(i.$$.fragment,o),j(l.$$.fragment,o),r=!1},d(o){o&&(v(t),v(s)),q(e,o),q(i,o),q(l,o)}}}function uv(n,e,t){let i;Q(n,Gn,a=>t(3,i=a));let s;function l(a){a.detail.location!==s&&(s=a.detail.location,Jt({}),dd())}function r(){z.authStore.isValid||z.rememberPath(),Yt("/")}async function o(){try{Te(Gn,i=await z.send("/api/pr/options"),i)}catch(a){console.log("failed to load options:",a)}}return o(),bn(()=>{z.authStore.onChange(a=>{a?f1():Vn==null||Vn()})}),[l,r]}class fv extends Se{constructor(e){super(),ke(this,e,uv,av,ge,{})}}new fv({target:document.getElementById("app")});export{ve as A,x as B,Z as C,be as D,Ce as E,Ee as F,hi as G,Pi as L,Se as S,E as a,gt as b,$ as c,q as d,Yt as e,sr as f,v as g,k as h,ke as i,y as j,b as k,I as l,F as m,p as n,pe as o,z as p,oe as q,Ji as r,ge as s,j as t,ae as u,H as v,we as w,ye as x,Ti as y,X as z};
